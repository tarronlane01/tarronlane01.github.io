(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var Um={exports:{}},pc={};var uv;function Fw(){if(uv)return pc;uv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var g in o)g!=="key"&&(c[g]=o[g])}else c=o;return o=c.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:c}}return pc.Fragment=e,pc.jsx=n,pc.jsxs=n,pc}var dv;function Hw(){return dv||(dv=1,Um.exports=Fw()),Um.exports}var f=Hw(),zm={exports:{}},ut={};var hv;function qw(){if(hv)return ut;hv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),w=Symbol.iterator;function O(M){return M===null||typeof M!="object"?null:(M=w&&M[w]||M["@@iterator"],typeof M=="function"?M:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,j={};function W(M,L,Q){this.props=M,this.context=L,this.refs=j,this.updater=Q||N}W.prototype.isReactComponent={},W.prototype.setState=function(M,L){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,L,"setState")},W.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function G(){}G.prototype=W.prototype;function re(M,L,Q){this.props=M,this.context=L,this.refs=j,this.updater=Q||N}var Ce=re.prototype=new G;Ce.constructor=re,P(Ce,W.prototype),Ce.isPureReactComponent=!0;var je=Array.isArray;function xe(){}var R={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function I(M,L,Q){var Y=Q.ref;return{$$typeof:i,type:M,key:L,ref:Y!==void 0?Y:null,props:Q}}function V(M,L){return I(M.type,L,M.props)}function U(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function F(M){var L={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(Q){return L[Q]})}var k=/\/+/g;function rt(M,L){return typeof M=="object"&&M!==null&&M.key!=null?F(""+M.key):L.toString(36)}function Ge(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(xe,xe):(M.status="pending",M.then(function(L){M.status==="pending"&&(M.status="fulfilled",M.value=L)},function(L){M.status==="pending"&&(M.status="rejected",M.reason=L)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function ee(M,L,Q,Y,ce){var Oe=typeof M;(Oe==="undefined"||Oe==="boolean")&&(M=null);var ze=!1;if(M===null)ze=!0;else switch(Oe){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(M.$$typeof){case i:case e:ze=!0;break;case b:return ze=M._init,ee(ze(M._payload),L,Q,Y,ce)}}if(ze)return ce=ce(M),ze=Y===""?"."+rt(M,0):Y,je(ce)?(Q="",ze!=null&&(Q=ze.replace(k,"$&/")+"/"),ee(ce,L,Q,"",function(ct){return ct})):ce!=null&&(U(ce)&&(ce=V(ce,Q+(ce.key==null||M&&M.key===ce.key?"":(""+ce.key).replace(k,"$&/")+"/")+ze)),L.push(ce)),1;ze=0;var $e=Y===""?".":Y+":";if(je(M))for(var Ze=0;Ze<M.length;Ze++)Y=M[Ze],Oe=$e+rt(Y,Ze),ze+=ee(Y,L,Q,Oe,ce);else if(Ze=O(M),typeof Ze=="function")for(M=Ze.call(M),Ze=0;!(Y=M.next()).done;)Y=Y.value,Oe=$e+rt(Y,Ze++),ze+=ee(Y,L,Q,Oe,ce);else if(Oe==="object"){if(typeof M.then=="function")return ee(Ge(M),L,Q,Y,ce);throw L=String(M),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return ze}function q(M,L,Q){if(M==null)return M;var Y=[],ce=0;return ee(M,Y,"","",function(Oe){return L.call(Q,Oe,ce++)}),Y}function De(M){if(M._status===-1){var L=M._result;L=L(),L.then(function(Q){(M._status===0||M._status===-1)&&(M._status=1,M._result=Q)},function(Q){(M._status===0||M._status===-1)&&(M._status=2,M._result=Q)}),M._status===-1&&(M._status=0,M._result=L)}if(M._status===1)return M._result.default;throw M._result}var Me=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Xe={map:q,forEach:function(M,L,Q){q(M,function(){L.apply(this,arguments)},Q)},count:function(M){var L=0;return q(M,function(){L++}),L},toArray:function(M){return q(M,function(L){return L})||[]},only:function(M){if(!U(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return ut.Activity=S,ut.Children=Xe,ut.Component=W,ut.Fragment=n,ut.Profiler=o,ut.PureComponent=re,ut.StrictMode=s,ut.Suspense=p,ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,ut.__COMPILER_RUNTIME={__proto__:null,c:function(M){return R.H.useMemoCache(M)}},ut.cache=function(M){return function(){return M.apply(null,arguments)}},ut.cacheSignal=function(){return null},ut.cloneElement=function(M,L,Q){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var Y=P({},M.props),ce=M.key;if(L!=null)for(Oe in L.key!==void 0&&(ce=""+L.key),L)!A.call(L,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&L.ref===void 0||(Y[Oe]=L[Oe]);var Oe=arguments.length-2;if(Oe===1)Y.children=Q;else if(1<Oe){for(var ze=Array(Oe),$e=0;$e<Oe;$e++)ze[$e]=arguments[$e+2];Y.children=ze}return I(M.type,ce,Y)},ut.createContext=function(M){return M={$$typeof:d,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:c,_context:M},M},ut.createElement=function(M,L,Q){var Y,ce={},Oe=null;if(L!=null)for(Y in L.key!==void 0&&(Oe=""+L.key),L)A.call(L,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(ce[Y]=L[Y]);var ze=arguments.length-2;if(ze===1)ce.children=Q;else if(1<ze){for(var $e=Array(ze),Ze=0;Ze<ze;Ze++)$e[Ze]=arguments[Ze+2];ce.children=$e}if(M&&M.defaultProps)for(Y in ze=M.defaultProps,ze)ce[Y]===void 0&&(ce[Y]=ze[Y]);return I(M,Oe,ce)},ut.createRef=function(){return{current:null}},ut.forwardRef=function(M){return{$$typeof:g,render:M}},ut.isValidElement=U,ut.lazy=function(M){return{$$typeof:b,_payload:{_status:-1,_result:M},_init:De}},ut.memo=function(M,L){return{$$typeof:y,type:M,compare:L===void 0?null:L}},ut.startTransition=function(M){var L=R.T,Q={};R.T=Q;try{var Y=M(),ce=R.S;ce!==null&&ce(Q,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(xe,Me)}catch(Oe){Me(Oe)}finally{L!==null&&Q.types!==null&&(L.types=Q.types),R.T=L}},ut.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},ut.use=function(M){return R.H.use(M)},ut.useActionState=function(M,L,Q){return R.H.useActionState(M,L,Q)},ut.useCallback=function(M,L){return R.H.useCallback(M,L)},ut.useContext=function(M){return R.H.useContext(M)},ut.useDebugValue=function(){},ut.useDeferredValue=function(M,L){return R.H.useDeferredValue(M,L)},ut.useEffect=function(M,L){return R.H.useEffect(M,L)},ut.useEffectEvent=function(M){return R.H.useEffectEvent(M)},ut.useId=function(){return R.H.useId()},ut.useImperativeHandle=function(M,L,Q){return R.H.useImperativeHandle(M,L,Q)},ut.useInsertionEffect=function(M,L){return R.H.useInsertionEffect(M,L)},ut.useLayoutEffect=function(M,L){return R.H.useLayoutEffect(M,L)},ut.useMemo=function(M,L){return R.H.useMemo(M,L)},ut.useOptimistic=function(M,L){return R.H.useOptimistic(M,L)},ut.useReducer=function(M,L,Q){return R.H.useReducer(M,L,Q)},ut.useRef=function(M){return R.H.useRef(M)},ut.useState=function(M){return R.H.useState(M)},ut.useSyncExternalStore=function(M,L,Q){return R.H.useSyncExternalStore(M,L,Q)},ut.useTransition=function(){return R.H.useTransition()},ut.version="19.2.3",ut}var fv;function Ug(){return fv||(fv=1,zm.exports=qw()),zm.exports}var C=Ug(),Bm={exports:{}},yc={},Fm={exports:{}},Hm={};var mv;function Gw(){return mv||(mv=1,(function(i){function e(ee,q){var De=ee.length;ee.push(q);e:for(;0<De;){var Me=De-1>>>1,Xe=ee[Me];if(0<o(Xe,q))ee[Me]=q,ee[De]=Xe,De=Me;else break e}}function n(ee){return ee.length===0?null:ee[0]}function s(ee){if(ee.length===0)return null;var q=ee[0],De=ee.pop();if(De!==q){ee[0]=De;e:for(var Me=0,Xe=ee.length,M=Xe>>>1;Me<M;){var L=2*(Me+1)-1,Q=ee[L],Y=L+1,ce=ee[Y];if(0>o(Q,De))Y<Xe&&0>o(ce,Q)?(ee[Me]=ce,ee[Y]=De,Me=Y):(ee[Me]=Q,ee[L]=De,Me=L);else if(Y<Xe&&0>o(ce,De))ee[Me]=ce,ee[Y]=De,Me=Y;else break e}}return q}function o(ee,q){var De=ee.sortIndex-q.sortIndex;return De!==0?De:ee.id-q.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();i.unstable_now=function(){return d.now()-g}}var p=[],y=[],b=1,S=null,w=3,O=!1,N=!1,P=!1,j=!1,W=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function Ce(ee){for(var q=n(y);q!==null;){if(q.callback===null)s(y);else if(q.startTime<=ee)s(y),q.sortIndex=q.expirationTime,e(p,q);else break;q=n(y)}}function je(ee){if(P=!1,Ce(ee),!N)if(n(p)!==null)N=!0,xe||(xe=!0,F());else{var q=n(y);q!==null&&Ge(je,q.startTime-ee)}}var xe=!1,R=-1,A=5,I=-1;function V(){return j?!0:!(i.unstable_now()-I<A)}function U(){if(j=!1,xe){var ee=i.unstable_now();I=ee;var q=!0;try{e:{N=!1,P&&(P=!1,G(R),R=-1),O=!0;var De=w;try{t:{for(Ce(ee),S=n(p);S!==null&&!(S.expirationTime>ee&&V());){var Me=S.callback;if(typeof Me=="function"){S.callback=null,w=S.priorityLevel;var Xe=Me(S.expirationTime<=ee);if(ee=i.unstable_now(),typeof Xe=="function"){S.callback=Xe,Ce(ee),q=!0;break t}S===n(p)&&s(p),Ce(ee)}else s(p);S=n(p)}if(S!==null)q=!0;else{var M=n(y);M!==null&&Ge(je,M.startTime-ee),q=!1}}break e}finally{S=null,w=De,O=!1}q=void 0}}finally{q?F():xe=!1}}}var F;if(typeof re=="function")F=function(){re(U)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,rt=k.port2;k.port1.onmessage=U,F=function(){rt.postMessage(null)}}else F=function(){W(U,0)};function Ge(ee,q){R=W(function(){ee(i.unstable_now())},q)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ee){ee.callback=null},i.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ee?Math.floor(1e3/ee):5},i.unstable_getCurrentPriorityLevel=function(){return w},i.unstable_next=function(ee){switch(w){case 1:case 2:case 3:var q=3;break;default:q=w}var De=w;w=q;try{return ee()}finally{w=De}},i.unstable_requestPaint=function(){j=!0},i.unstable_runWithPriority=function(ee,q){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var De=w;w=ee;try{return q()}finally{w=De}},i.unstable_scheduleCallback=function(ee,q,De){var Me=i.unstable_now();switch(typeof De=="object"&&De!==null?(De=De.delay,De=typeof De=="number"&&0<De?Me+De:Me):De=Me,ee){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=De+Xe,ee={id:b++,callback:q,priorityLevel:ee,startTime:De,expirationTime:Xe,sortIndex:-1},De>Me?(ee.sortIndex=De,e(y,ee),n(p)===null&&ee===n(y)&&(P?(G(R),R=-1):P=!0,Ge(je,De-Me))):(ee.sortIndex=Xe,e(p,ee),N||O||(N=!0,xe||(xe=!0,F()))),ee},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(ee){var q=w;return function(){var De=w;w=q;try{return ee.apply(this,arguments)}finally{w=De}}}})(Hm)),Hm}var gv;function $w(){return gv||(gv=1,Fm.exports=Gw()),Fm.exports}var qm={exports:{}},Jn={};var pv;function Ww(){if(pv)return Jn;pv=1;var i=Ug();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(p,y,b){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:p,containerInfo:y,implementation:b}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Jn.createPortal=function(p,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(p,y,null,b)},Jn.flushSync=function(p){var y=d.T,b=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=y,s.p=b,s.d.f()}},Jn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},Jn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Jn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var b=y.as,S=g(b,y.crossOrigin),w=typeof y.integrity=="string"?y.integrity:void 0,O=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:S,integrity:w,fetchPriority:O}):b==="script"&&s.d.X(p,{crossOrigin:S,integrity:w,fetchPriority:O,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Jn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=g(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},Jn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,S=g(b,y.crossOrigin);s.d.L(p,b,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Jn.preloadModule=function(p,y){if(typeof p=="string")if(y){var b=g(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},Jn.requestFormReset=function(p){s.d.r(p)},Jn.unstable_batchedUpdates=function(p,y){return p(y)},Jn.useFormState=function(p,y,b){return d.H.useFormState(p,y,b)},Jn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Jn.version="19.2.3",Jn}var yv;function Yw(){if(yv)return qm.exports;yv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),qm.exports=Ww(),qm.exports}var _v;function Qw(){if(_v)return yc;_v=1;var i=$w(),e=Ug(),n=Yw();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(s(188))}function y(t){var r=t.alternate;if(!r){if(r=c(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return p(h),t;if(m===l)return p(h),r;m=m.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=m;else{for(var v=!1,x=h.child;x;){if(x===a){v=!0,a=h,l=m;break}if(x===l){v=!0,l=h,a=m;break}x=x.sibling}if(!v){for(x=m.child;x;){if(x===a){v=!0,a=m,l=h;break}if(x===l){v=!0,l=m,a=h;break}x=x.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function b(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=b(t),r!==null)return r;t=t.sibling}return null}var S=Object.assign,w=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),re=Symbol.for("react.context"),Ce=Symbol.for("react.forward_ref"),je=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function F(t){return t===null||typeof t!="object"?null:(t=U&&t[U]||t["@@iterator"],typeof t=="function"?t:null)}var k=Symbol.for("react.client.reference");function rt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===k?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case P:return"Fragment";case W:return"Profiler";case j:return"StrictMode";case je:return"Suspense";case xe:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case N:return"Portal";case re:return t.displayName||"Context";case G:return(t._context.displayName||"Context")+".Consumer";case Ce:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return r=t.displayName||null,r!==null?r:rt(t.type)||"Memo";case A:r=t._payload,t=t._init;try{return rt(t(r))}catch{}}return null}var Ge=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,De={pending:!1,data:null,method:null,action:null},Me=[],Xe=-1;function M(t){return{current:t}}function L(t){0>Xe||(t.current=Me[Xe],Me[Xe]=null,Xe--)}function Q(t,r){Xe++,Me[Xe]=t.current,t.current=r}var Y=M(null),ce=M(null),Oe=M(null),ze=M(null);function $e(t,r){switch(Q(Oe,r),Q(ce,t),Q(Y,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?M0(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=M0(r),t=N0(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}L(Y),Q(Y,t)}function Ze(){L(Y),L(ce),L(Oe)}function ct(t){t.memoizedState!==null&&Q(ze,t);var r=Y.current,a=N0(r,t.type);r!==a&&(Q(ce,t),Q(Y,a))}function Xt(t){ce.current===t&&(L(Y),L(ce)),ze.current===t&&(L(ze),hc._currentValue=De)}var _n,Bn;function it(t){if(_n===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);_n=r&&r[1]||"",Bn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_n+t+Bn}var Vt=!1;function He(t,r){if(!t||Vt)return"";Vt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(oe){var se=oe}Reflect.construct(t,[],pe)}else{try{pe.call()}catch(oe){se=oe}t.call(pe.prototype)}}else{try{throw Error()}catch(oe){se=oe}(pe=t())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(oe){if(oe&&se&&typeof oe.stack=="string")return[oe.stack,se.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),v=m[0],x=m[1];if(v&&x){var z=v.split(`
`),ne=x.split(`
`);for(h=l=0;l<z.length&&!z[l].includes("DetermineComponentFrameRoot");)l++;for(;h<ne.length&&!ne[h].includes("DetermineComponentFrameRoot");)h++;if(l===z.length||h===ne.length)for(l=z.length-1,h=ne.length-1;1<=l&&0<=h&&z[l]!==ne[h];)h--;for(;1<=l&&0<=h;l--,h--)if(z[l]!==ne[h]){if(l!==1||h!==1)do if(l--,h--,0>h||z[l]!==ne[h]){var de=`
`+z[l].replace(" at new "," at ");return t.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",t.displayName)),de}while(1<=l&&0<=h);break}}}finally{Vt=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?it(a):""}function ke(t,r){switch(t.tag){case 26:case 27:case 5:return it(t.type);case 16:return it("Lazy");case 13:return t.child!==r&&r!==null?it("Suspense Fallback"):it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return He(t.type,!1);case 11:return He(t.type.render,!1);case 1:return He(t.type,!0);case 31:return it("Activity");default:return""}}function vn(t){try{var r="",a=null;do r+=ke(t,a),a=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var D=Object.prototype.hasOwnProperty,B=i.unstable_scheduleCallback,J=i.unstable_cancelCallback,ve=i.unstable_shouldYield,fe=i.unstable_requestPaint,X=i.unstable_now,ue=i.unstable_getCurrentPriorityLevel,be=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,we=i.unstable_NormalPriority,tt=i.unstable_LowPriority,Le=i.unstable_IdlePriority,Ae=i.log,ft=i.unstable_setDisableYieldValue,Ln=null,sn=null;function Fn(t){if(typeof Ae=="function"&&ft(t),sn&&typeof sn.setStrictMode=="function")try{sn.setStrictMode(Ln,t)}catch{}}var Qt=Math.clz32?Math.clz32:si,Ai=Math.log,Mn=Math.LN2;function si(t){return t>>>=0,t===0?32:31-(Ai(t)/Mn|0)|0}var me=256,Ne=262144,Ue=4194304;function vt(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ut(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,m=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var x=l&134217727;return x!==0?(l=x&~m,l!==0?h=vt(l):(v&=x,v!==0?h=vt(v):a||(a=x&~t,a!==0&&(h=vt(a))))):(x=l&~m,x!==0?h=vt(x):v!==0?h=vt(v):a||(a=l&~t,a!==0&&(h=vt(a)))),h===0?0:r!==0&&r!==h&&(r&m)===0&&(m=h&-h,a=r&-r,m>=a||m===32&&(a&4194048)!==0)?r:h}function an(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function ls(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xa(){var t=Ue;return Ue<<=1,(Ue&62914560)===0&&(Ue=4194304),t}function or(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Ci(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function xl(t,r,a,l,h,m){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var x=t.entanglements,z=t.expirationTimes,ne=t.hiddenUpdates;for(a=v&~a;0<a;){var de=31-Qt(a),pe=1<<de;x[de]=0,z[de]=-1;var se=ne[de];if(se!==null)for(ne[de]=null,de=0;de<se.length;de++){var oe=se[de];oe!==null&&(oe.lane&=-536870913)}a&=~pe}l!==0&&Ri(t,l,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(v&~r))}function Ri(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Qt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function ca(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Qt(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function ua(t,r){var a=r&-r;return a=(a&42)!==0?1:Ii(a),(a&(t.suspendedLanes|r))!==0?0:a}function Ii(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function qr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ja(){var t=q.p;return t!==0?t:(t=window.event,t===void 0?32:rv(t.type))}function _r(t,r){var a=q.p;try{return q.p=t,r()}finally{q.p=a}}var vr=Math.random().toString(36).slice(2),ie="__reactFiber$"+vr,Z="__reactProps$"+vr,he="__reactContainer$"+vr,le="__reactEvents$"+vr,Ie="__reactListeners$"+vr,Te="__reactHandles$"+vr,Ee="__reactResources$"+vr,We="__reactMarker$"+vr;function Ke(t){delete t[ie],delete t[Z],delete t[le],delete t[Ie],delete t[Te]}function xt(t){var r=t[ie];if(r)return r;for(var a=t.parentNode;a;){if(r=a[he]||a[ie]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=B0(t);t!==null;){if(a=t[ie])return a;t=B0(t)}return r}t=a,a=t.parentNode}return null}function Ht(t){if(t=t[ie]||t[he]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function Je(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function bt(t){var r=t[Ee];return r||(r=t[Ee]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function yt(t){t[We]=!0}var dn=new Set,on={};function Lt(t,r){en(t,r),en(t+"Capture",r)}function en(t,r){for(on[t]=r,t=0;t<r.length;t++)dn.add(r[t])}var qt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ot={},Nn={};function Di(t){return D.call(Nn,t)?!0:D.call(Ot,t)?!1:qt.test(t)?Nn[t]=!0:(Ot[t]=!0,!1)}function Gr(t,r,a){if(Di(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function bn(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Jt(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function mn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cs(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function wl(t,r,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,m=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,m.call(this,v)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function zt(t){if(!t._valueTracker){var r=cs(t)?"checked":"value";t._valueTracker=wl(t,r,""+t[r])}}function da(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=cs(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function ai(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ha=/[\n"\\]/g;function lr(t){return t.replace(ha,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Za(t,r,a,l,h,m,v,x){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),r!=null?v==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+mn(r)):t.value!==""+mn(r)&&(t.value=""+mn(r)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),r!=null?Tl(t,v,mn(r)):a!=null?Tl(t,v,mn(a)):l!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.name=""+mn(x):t.removeAttribute("name")}function ou(t,r,a,l,h,m,v,x){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){zt(t);return}a=a!=null?""+mn(a):"",r=r!=null?""+mn(r):a,x||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=x?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),zt(t)}function Tl(t,r,a){r==="number"&&ai(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function us(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+mn(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function lu(t,r,a){if(r!=null&&(r=""+mn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+mn(a):""}function ds(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(Ge(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=mn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),zt(t)}function cr(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var cu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Al(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||cu.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Cl(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&Al(t,h,l)}else for(var m in r)r.hasOwnProperty(m)&&Al(t,m,r[m])}function eo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function to(t){return hs.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function $r(){}var Rl=null;function Ir(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fs=null,oi=null;function fa(t){var r=Ht(t);if(r&&(t=r.stateNode)){var a=t[Z]||null;e:switch(t=r.stateNode,r.type){case"input":if(Za(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+lr(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[Z]||null;if(!h)throw Error(s(90));Za(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&da(l)}break e;case"textarea":lu(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&us(t,!!a.multiple,r,!1)}}}var no=!1;function ms(t,r,a){if(no)return t(r,a);no=!0;try{var l=t(r);return l}finally{if(no=!1,(fs!==null||oi!==null)&&(rd(),fs&&(r=fs,t=oi,oi=fs=null,fa(r),t)))for(r=0;r<t.length;r++)fa(t[r])}}function Wr(t,r){var a=t.stateNode;if(a===null)return null;var l=a[Z]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ma=!1;if(Dr)try{var Gt={};Object.defineProperty(Gt,"passive",{get:function(){ma=!0}}),window.addEventListener("test",Gt,Gt),window.removeEventListener("test",Gt,Gt)}catch{ma=!1}var li=null,Il=null,ga=null;function Dl(){if(ga)return ga;var t,r=Il,a=r.length,l,h="value"in li?li.value:li.textContent,m=h.length;for(t=0;t<a&&r[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&r[a-l]===h[m-l];l++);return ga=h.slice(t,1<l?1-l:void 0)}function pa(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Oi(){return!0}function Yr(){return!1}function Hn(t){function r(a,l,h,m,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var x in t)t.hasOwnProperty(x)&&(a=t[x],this[x]=a?a(m):m[x]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Oi:Yr,this.isPropagationStopped=Yr,this}return S(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),r}var ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ci=Hn(ki),gs=S({},ki,{view:0,detail:0}),Ol=Hn(gs),ps,ro,ui,io=S({},gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ys,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ui&&(ui&&t.type==="mousemove"?(ps=t.screenX-ui.screenX,ro=t.screenY-ui.screenY):ro=ps=0,ui=t),ps)},movementY:function(t){return"movementY"in t?t.movementY:ro}}),kl=Hn(io),ya=S({},io,{dataTransfer:0}),du=Hn(ya),hu=S({},gs,{relatedTarget:0}),_a=Hn(hu),Ml=S({},ki,{animationName:0,elapsedTime:0,pseudoElement:0}),fu=Hn(Ml),so=S({},ki,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mu=Hn(so),gu=S({},ki,{data:0}),di=Hn(gu),pu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_u={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vu(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=_u[t])?!!r[t]:!1}function ys(){return vu}var rr=S({},gs,{key:function(t){if(t.key){var r=pu[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=pa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ys,charCode:function(t){return t.type==="keypress"?pa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bu=Hn(rr),Eu=S({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mi=Hn(Eu),u=S({},gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ys}),_=Hn(u),E=S({},ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=Hn(E),K=S({},io,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ae=Hn(K),Re=S({},ki,{newState:0,oldState:0}),mt=Hn(Re),En=[9,13,27,32],Nt=Dr&&"CompositionEvent"in window,ln=null;Dr&&"documentMode"in document&&(ln=document.documentMode);var Or=Dr&&"TextEvent"in window&&!ln,hi=Dr&&(!Nt||ln&&8<ln&&11>=ln),Qr=" ",Kr=!1;function va(t,r){switch(t){case"keyup":return En.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ao(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var oo=!1;function h1(t,r){switch(t){case"compositionend":return ao(r);case"keypress":return r.which!==32?null:(Kr=!0,Qr);case"textInput":return t=r.data,t===Qr&&Kr?null:t;default:return null}}function f1(t,r){if(oo)return t==="compositionend"||!Nt&&va(t,r)?(t=Dl(),ga=Il=li=null,oo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return hi&&r.locale!=="ko"?null:r.data;default:return null}}var m1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qp(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!m1[t.type]:r==="textarea"}function Gp(t,r,a,l){fs?oi?oi.push(l):oi=[l]:fs=l,r=ud(r,"onChange"),0<r.length&&(a=new ci("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Nl=null,jl=null;function g1(t){C0(t,0)}function Su(t){var r=Je(t);if(da(r))return t}function $p(t,r){if(t==="change")return r}var Wp=!1;if(Dr){var Gh;if(Dr){var $h="oninput"in document;if(!$h){var Yp=document.createElement("div");Yp.setAttribute("oninput","return;"),$h=typeof Yp.oninput=="function"}Gh=$h}else Gh=!1;Wp=Gh&&(!document.documentMode||9<document.documentMode)}function Qp(){Nl&&(Nl.detachEvent("onpropertychange",Kp),jl=Nl=null)}function Kp(t){if(t.propertyName==="value"&&Su(jl)){var r=[];Gp(r,jl,t,Ir(t)),ms(g1,r)}}function p1(t,r,a){t==="focusin"?(Qp(),Nl=r,jl=a,Nl.attachEvent("onpropertychange",Kp)):t==="focusout"&&Qp()}function y1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Su(jl)}function _1(t,r){if(t==="click")return Su(r)}function v1(t,r){if(t==="input"||t==="change")return Su(r)}function b1(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var br=typeof Object.is=="function"?Object.is:b1;function Vl(t,r){if(br(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!D.call(r,h)||!br(t[h],r[h]))return!1}return!0}function Xp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jp(t,r){var a=Xp(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Xp(a)}}function Zp(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Zp(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function ey(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=ai(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=ai(t.document)}return r}function Wh(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var E1=Dr&&"documentMode"in document&&11>=document.documentMode,lo=null,Yh=null,Ll=null,Qh=!1;function ty(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Qh||lo==null||lo!==ai(l)||(l=lo,"selectionStart"in l&&Wh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ll&&Vl(Ll,l)||(Ll=l,l=ud(Yh,"onSelect"),0<l.length&&(r=new ci("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=lo)))}function ba(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var co={animationend:ba("Animation","AnimationEnd"),animationiteration:ba("Animation","AnimationIteration"),animationstart:ba("Animation","AnimationStart"),transitionrun:ba("Transition","TransitionRun"),transitionstart:ba("Transition","TransitionStart"),transitioncancel:ba("Transition","TransitionCancel"),transitionend:ba("Transition","TransitionEnd")},Kh={},ny={};Dr&&(ny=document.createElement("div").style,"AnimationEvent"in window||(delete co.animationend.animation,delete co.animationiteration.animation,delete co.animationstart.animation),"TransitionEvent"in window||delete co.transitionend.transition);function Ea(t){if(Kh[t])return Kh[t];if(!co[t])return t;var r=co[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in ny)return Kh[t]=r[a];return t}var ry=Ea("animationend"),iy=Ea("animationiteration"),sy=Ea("animationstart"),S1=Ea("transitionrun"),x1=Ea("transitionstart"),w1=Ea("transitioncancel"),ay=Ea("transitionend"),oy=new Map,Xh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xh.push("scrollEnd");function Xr(t,r){oy.set(t,r),Lt(r,[t])}var xu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},kr=[],uo=0,Jh=0;function wu(){for(var t=uo,r=Jh=uo=0;r<t;){var a=kr[r];kr[r++]=null;var l=kr[r];kr[r++]=null;var h=kr[r];kr[r++]=null;var m=kr[r];if(kr[r++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}m!==0&&ly(a,h,m)}}function Tu(t,r,a,l){kr[uo++]=t,kr[uo++]=r,kr[uo++]=a,kr[uo++]=l,Jh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Zh(t,r,a,l){return Tu(t,r,a,l),Au(t)}function Sa(t,r){return Tu(t,null,null,r),Au(t)}function ly(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&r!==null&&(h=31-Qt(a),t=m.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),m):null}function Au(t){if(50<sc)throw sc=0,cm=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var ho={};function T1(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(t,r,a,l){return new T1(t,r,a,l)}function ef(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ni(t,r){var a=t.alternate;return a===null?(a=Er(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function cy(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Cu(t,r,a,l,h,m){var v=0;if(l=t,typeof t=="function")ef(t)&&(v=1);else if(typeof t=="string")v=Dw(t,a,Y.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=Er(31,a,r,h),t.elementType=I,t.lanes=m,t;case P:return xa(a.children,h,m,r);case j:v=8,h|=24;break;case W:return t=Er(12,a,r,h|2),t.elementType=W,t.lanes=m,t;case je:return t=Er(13,a,r,h),t.elementType=je,t.lanes=m,t;case xe:return t=Er(19,a,r,h),t.elementType=xe,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case re:v=10;break e;case G:v=9;break e;case Ce:v=11;break e;case R:v=14;break e;case A:v=16,l=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=Er(v,a,r,h),r.elementType=t,r.type=l,r.lanes=m,r}function xa(t,r,a,l){return t=Er(7,t,l,r),t.lanes=a,t}function tf(t,r,a){return t=Er(6,t,null,r),t.lanes=a,t}function uy(t){var r=Er(18,null,null,0);return r.stateNode=t,r}function nf(t,r,a){return r=Er(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var dy=new WeakMap;function Mr(t,r){if(typeof t=="object"&&t!==null){var a=dy.get(t);return a!==void 0?a:(r={value:t,source:r,stack:vn(r)},dy.set(t,r),r)}return{value:t,source:r,stack:vn(r)}}var fo=[],mo=0,Ru=null,Pl=0,Nr=[],jr=0,_s=null,fi=1,mi="";function ji(t,r){fo[mo++]=Pl,fo[mo++]=Ru,Ru=t,Pl=r}function hy(t,r,a){Nr[jr++]=fi,Nr[jr++]=mi,Nr[jr++]=_s,_s=t;var l=fi;t=mi;var h=32-Qt(l)-1;l&=~(1<<h),a+=1;var m=32-Qt(r)+h;if(30<m){var v=h-h%5;m=(l&(1<<v)-1).toString(32),l>>=v,h-=v,fi=1<<32-Qt(r)+h|a<<h|l,mi=m+t}else fi=1<<m|a<<h|l,mi=t}function rf(t){t.return!==null&&(ji(t,1),hy(t,1,0))}function sf(t){for(;t===Ru;)Ru=fo[--mo],fo[mo]=null,Pl=fo[--mo],fo[mo]=null;for(;t===_s;)_s=Nr[--jr],Nr[jr]=null,mi=Nr[--jr],Nr[jr]=null,fi=Nr[--jr],Nr[jr]=null}function fy(t,r){Nr[jr++]=fi,Nr[jr++]=mi,Nr[jr++]=_s,fi=r.id,mi=r.overflow,_s=t}var qn=null,tn=null,It=!1,vs=null,Vr=!1,af=Error(s(519));function bs(t){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ul(Mr(r,t)),af}function my(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[ie]=t,r[Z]=l,a){case"dialog":St("cancel",r),St("close",r);break;case"iframe":case"object":case"embed":St("load",r);break;case"video":case"audio":for(a=0;a<oc.length;a++)St(oc[a],r);break;case"source":St("error",r);break;case"img":case"image":case"link":St("error",r),St("load",r);break;case"details":St("toggle",r);break;case"input":St("invalid",r),ou(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":St("invalid",r);break;case"textarea":St("invalid",r),ds(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||O0(r.textContent,a)?(l.popover!=null&&(St("beforetoggle",r),St("toggle",r)),l.onScroll!=null&&St("scroll",r),l.onScrollEnd!=null&&St("scrollend",r),l.onClick!=null&&(r.onclick=$r),r=!0):r=!1,r||bs(t,!0)}function gy(t){for(qn=t.return;qn;)switch(qn.tag){case 5:case 31:case 13:Vr=!1;return;case 27:case 3:Vr=!0;return;default:qn=qn.return}}function go(t){if(t!==qn)return!1;if(!It)return gy(t),It=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||wm(t.type,t.memoizedProps)),a=!a),a&&tn&&bs(t),gy(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));tn=z0(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));tn=z0(t)}else r===27?(r=tn,Ns(t.type)?(t=Im,Im=null,tn=t):tn=r):tn=qn?Pr(t.stateNode.nextSibling):null;return!0}function wa(){tn=qn=null,It=!1}function of(){var t=vs;return t!==null&&(fr===null?fr=t:fr.push.apply(fr,t),vs=null),t}function Ul(t){vs===null?vs=[t]:vs.push(t)}var lf=M(null),Ta=null,Vi=null;function Es(t,r,a){Q(lf,r._currentValue),r._currentValue=a}function Li(t){t._currentValue=lf.current,L(lf)}function cf(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function uf(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var v=h.child;m=m.firstContext;e:for(;m!==null;){var x=m;m=h;for(var z=0;z<r.length;z++)if(x.context===r[z]){m.lanes|=a,x=m.alternate,x!==null&&(x.lanes|=a),cf(m.return,a,t),l||(v=null);break e}m=x.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),cf(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function po(t,r,a,l){t=null;for(var h=r,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var x=h.type;br(h.pendingProps.value,v.value)||(t!==null?t.push(x):t=[x])}}else if(h===ze.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(hc):t=[hc])}h=h.return}t!==null&&uf(r,t,a,l),r.flags|=262144}function Iu(t){for(t=t.firstContext;t!==null;){if(!br(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Aa(t){Ta=t,Vi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Gn(t){return py(Ta,t)}function Du(t,r){return Ta===null&&Aa(t),py(t,r)}function py(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Vi===null){if(t===null)throw Error(s(308));Vi=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Vi=Vi.next=r;return a}var A1=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},C1=i.unstable_scheduleCallback,R1=i.unstable_NormalPriority,An={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function df(){return{controller:new A1,data:new Map,refCount:0}}function zl(t){t.refCount--,t.refCount===0&&C1(R1,function(){t.controller.abort()})}var Bl=null,hf=0,yo=0,_o=null;function I1(t,r){if(Bl===null){var a=Bl=[];hf=0,yo=gm(),_o={status:"pending",value:void 0,then:function(l){a.push(l)}}}return hf++,r.then(yy,yy),r}function yy(){if(--hf===0&&Bl!==null){_o!==null&&(_o.status="fulfilled");var t=Bl;Bl=null,yo=0,_o=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function D1(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var _y=ee.S;ee.S=function(t,r){t0=X(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&I1(t,r),_y!==null&&_y(t,r)};var Ca=M(null);function ff(){var t=Ca.current;return t!==null?t:Kt.pooledCache}function Ou(t,r){r===null?Q(Ca,Ca.current):Q(Ca,r.pool)}function vy(){var t=ff();return t===null?null:{parent:An._currentValue,pool:t}}var vo=Error(s(460)),mf=Error(s(474)),ku=Error(s(542)),Mu={then:function(){}};function by(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ey(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then($r,$r),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,xy(t),t;default:if(typeof r.status=="string")r.then($r,$r);else{if(t=Kt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,xy(t),t}throw Ia=r,vo}}function Ra(t){try{var r=t._init;return r(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ia=a,vo):a}}var Ia=null;function Sy(){if(Ia===null)throw Error(s(459));var t=Ia;return Ia=null,t}function xy(t){if(t===vo||t===ku)throw Error(s(483))}var bo=null,Fl=0;function Nu(t){var r=Fl;return Fl+=1,bo===null&&(bo=[]),Ey(bo,t,r)}function Hl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function ju(t,r){throw r.$$typeof===w?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function wy(t){function r($,H){if(t){var te=$.deletions;te===null?($.deletions=[H],$.flags|=16):te.push(H)}}function a($,H){if(!t)return null;for(;H!==null;)r($,H),H=H.sibling;return null}function l($){for(var H=new Map;$!==null;)$.key!==null?H.set($.key,$):H.set($.index,$),$=$.sibling;return H}function h($,H){return $=Ni($,H),$.index=0,$.sibling=null,$}function m($,H,te){return $.index=te,t?(te=$.alternate,te!==null?(te=te.index,te<H?($.flags|=67108866,H):te):($.flags|=67108866,H)):($.flags|=1048576,H)}function v($){return t&&$.alternate===null&&($.flags|=67108866),$}function x($,H,te,ge){return H===null||H.tag!==6?(H=tf(te,$.mode,ge),H.return=$,H):(H=h(H,te),H.return=$,H)}function z($,H,te,ge){var Ye=te.type;return Ye===P?de($,H,te.props.children,ge,te.key):H!==null&&(H.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===A&&Ra(Ye)===H.type)?(H=h(H,te.props),Hl(H,te),H.return=$,H):(H=Cu(te.type,te.key,te.props,null,$.mode,ge),Hl(H,te),H.return=$,H)}function ne($,H,te,ge){return H===null||H.tag!==4||H.stateNode.containerInfo!==te.containerInfo||H.stateNode.implementation!==te.implementation?(H=nf(te,$.mode,ge),H.return=$,H):(H=h(H,te.children||[]),H.return=$,H)}function de($,H,te,ge,Ye){return H===null||H.tag!==7?(H=xa(te,$.mode,ge,Ye),H.return=$,H):(H=h(H,te),H.return=$,H)}function pe($,H,te){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=tf(""+H,$.mode,te),H.return=$,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case O:return te=Cu(H.type,H.key,H.props,null,$.mode,te),Hl(te,H),te.return=$,te;case N:return H=nf(H,$.mode,te),H.return=$,H;case A:return H=Ra(H),pe($,H,te)}if(Ge(H)||F(H))return H=xa(H,$.mode,te,null),H.return=$,H;if(typeof H.then=="function")return pe($,Nu(H),te);if(H.$$typeof===re)return pe($,Du($,H),te);ju($,H)}return null}function se($,H,te,ge){var Ye=H!==null?H.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return Ye!==null?null:x($,H,""+te,ge);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case O:return te.key===Ye?z($,H,te,ge):null;case N:return te.key===Ye?ne($,H,te,ge):null;case A:return te=Ra(te),se($,H,te,ge)}if(Ge(te)||F(te))return Ye!==null?null:de($,H,te,ge,null);if(typeof te.then=="function")return se($,H,Nu(te),ge);if(te.$$typeof===re)return se($,H,Du($,te),ge);ju($,te)}return null}function oe($,H,te,ge,Ye){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return $=$.get(te)||null,x(H,$,""+ge,Ye);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case O:return $=$.get(ge.key===null?te:ge.key)||null,z(H,$,ge,Ye);case N:return $=$.get(ge.key===null?te:ge.key)||null,ne(H,$,ge,Ye);case A:return ge=Ra(ge),oe($,H,te,ge,Ye)}if(Ge(ge)||F(ge))return $=$.get(te)||null,de(H,$,ge,Ye,null);if(typeof ge.then=="function")return oe($,H,te,Nu(ge),Ye);if(ge.$$typeof===re)return oe($,H,te,Du(H,ge),Ye);ju(H,ge)}return null}function Be($,H,te,ge){for(var Ye=null,kt=null,Fe=H,pt=H=0,Tt=null;Fe!==null&&pt<te.length;pt++){Fe.index>pt?(Tt=Fe,Fe=null):Tt=Fe.sibling;var Mt=se($,Fe,te[pt],ge);if(Mt===null){Fe===null&&(Fe=Tt);break}t&&Fe&&Mt.alternate===null&&r($,Fe),H=m(Mt,H,pt),kt===null?Ye=Mt:kt.sibling=Mt,kt=Mt,Fe=Tt}if(pt===te.length)return a($,Fe),It&&ji($,pt),Ye;if(Fe===null){for(;pt<te.length;pt++)Fe=pe($,te[pt],ge),Fe!==null&&(H=m(Fe,H,pt),kt===null?Ye=Fe:kt.sibling=Fe,kt=Fe);return It&&ji($,pt),Ye}for(Fe=l(Fe);pt<te.length;pt++)Tt=oe(Fe,$,pt,te[pt],ge),Tt!==null&&(t&&Tt.alternate!==null&&Fe.delete(Tt.key===null?pt:Tt.key),H=m(Tt,H,pt),kt===null?Ye=Tt:kt.sibling=Tt,kt=Tt);return t&&Fe.forEach(function(Us){return r($,Us)}),It&&ji($,pt),Ye}function nt($,H,te,ge){if(te==null)throw Error(s(151));for(var Ye=null,kt=null,Fe=H,pt=H=0,Tt=null,Mt=te.next();Fe!==null&&!Mt.done;pt++,Mt=te.next()){Fe.index>pt?(Tt=Fe,Fe=null):Tt=Fe.sibling;var Us=se($,Fe,Mt.value,ge);if(Us===null){Fe===null&&(Fe=Tt);break}t&&Fe&&Us.alternate===null&&r($,Fe),H=m(Us,H,pt),kt===null?Ye=Us:kt.sibling=Us,kt=Us,Fe=Tt}if(Mt.done)return a($,Fe),It&&ji($,pt),Ye;if(Fe===null){for(;!Mt.done;pt++,Mt=te.next())Mt=pe($,Mt.value,ge),Mt!==null&&(H=m(Mt,H,pt),kt===null?Ye=Mt:kt.sibling=Mt,kt=Mt);return It&&ji($,pt),Ye}for(Fe=l(Fe);!Mt.done;pt++,Mt=te.next())Mt=oe(Fe,$,pt,Mt.value,ge),Mt!==null&&(t&&Mt.alternate!==null&&Fe.delete(Mt.key===null?pt:Mt.key),H=m(Mt,H,pt),kt===null?Ye=Mt:kt.sibling=Mt,kt=Mt);return t&&Fe.forEach(function(Bw){return r($,Bw)}),It&&ji($,pt),Ye}function Yt($,H,te,ge){if(typeof te=="object"&&te!==null&&te.type===P&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case O:e:{for(var Ye=te.key;H!==null;){if(H.key===Ye){if(Ye=te.type,Ye===P){if(H.tag===7){a($,H.sibling),ge=h(H,te.props.children),ge.return=$,$=ge;break e}}else if(H.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===A&&Ra(Ye)===H.type){a($,H.sibling),ge=h(H,te.props),Hl(ge,te),ge.return=$,$=ge;break e}a($,H);break}else r($,H);H=H.sibling}te.type===P?(ge=xa(te.props.children,$.mode,ge,te.key),ge.return=$,$=ge):(ge=Cu(te.type,te.key,te.props,null,$.mode,ge),Hl(ge,te),ge.return=$,$=ge)}return v($);case N:e:{for(Ye=te.key;H!==null;){if(H.key===Ye)if(H.tag===4&&H.stateNode.containerInfo===te.containerInfo&&H.stateNode.implementation===te.implementation){a($,H.sibling),ge=h(H,te.children||[]),ge.return=$,$=ge;break e}else{a($,H);break}else r($,H);H=H.sibling}ge=nf(te,$.mode,ge),ge.return=$,$=ge}return v($);case A:return te=Ra(te),Yt($,H,te,ge)}if(Ge(te))return Be($,H,te,ge);if(F(te)){if(Ye=F(te),typeof Ye!="function")throw Error(s(150));return te=Ye.call(te),nt($,H,te,ge)}if(typeof te.then=="function")return Yt($,H,Nu(te),ge);if(te.$$typeof===re)return Yt($,H,Du($,te),ge);ju($,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,H!==null&&H.tag===6?(a($,H.sibling),ge=h(H,te),ge.return=$,$=ge):(a($,H),ge=tf(te,$.mode,ge),ge.return=$,$=ge),v($)):a($,H)}return function($,H,te,ge){try{Fl=0;var Ye=Yt($,H,te,ge);return bo=null,Ye}catch(Fe){if(Fe===vo||Fe===ku)throw Fe;var kt=Er(29,Fe,null,$.mode);return kt.lanes=ge,kt.return=$,kt}}}var Da=wy(!0),Ty=wy(!1),Ss=!1;function gf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function xs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ws(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(jt&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=Au(t),ly(t,null,a),r}return Tu(t,l,r,a),Au(t)}function ql(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,ca(t,a)}}function yf(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?h=m=r:m=m.next=r}else h=m=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var _f=!1;function Gl(){if(_f){var t=_o;if(t!==null)throw t}}function $l(t,r,a,l){_f=!1;var h=t.updateQueue;Ss=!1;var m=h.firstBaseUpdate,v=h.lastBaseUpdate,x=h.shared.pending;if(x!==null){h.shared.pending=null;var z=x,ne=z.next;z.next=null,v===null?m=ne:v.next=ne,v=z;var de=t.alternate;de!==null&&(de=de.updateQueue,x=de.lastBaseUpdate,x!==v&&(x===null?de.firstBaseUpdate=ne:x.next=ne,de.lastBaseUpdate=z))}if(m!==null){var pe=h.baseState;v=0,de=ne=z=null,x=m;do{var se=x.lane&-536870913,oe=se!==x.lane;if(oe?(wt&se)===se:(l&se)===se){se!==0&&se===yo&&(_f=!0),de!==null&&(de=de.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var Be=t,nt=x;se=r;var Yt=a;switch(nt.tag){case 1:if(Be=nt.payload,typeof Be=="function"){pe=Be.call(Yt,pe,se);break e}pe=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=nt.payload,se=typeof Be=="function"?Be.call(Yt,pe,se):Be,se==null)break e;pe=S({},pe,se);break e;case 2:Ss=!0}}se=x.callback,se!==null&&(t.flags|=64,oe&&(t.flags|=8192),oe=h.callbacks,oe===null?h.callbacks=[se]:oe.push(se))}else oe={lane:se,tag:x.tag,payload:x.payload,callback:x.callback,next:null},de===null?(ne=de=oe,z=pe):de=de.next=oe,v|=se;if(x=x.next,x===null){if(x=h.shared.pending,x===null)break;oe=x,x=oe.next,oe.next=null,h.lastBaseUpdate=oe,h.shared.pending=null}}while(!0);de===null&&(z=pe),h.baseState=z,h.firstBaseUpdate=ne,h.lastBaseUpdate=de,m===null&&(h.shared.lanes=0),Is|=v,t.lanes=v,t.memoizedState=pe}}function Ay(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function Cy(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Ay(a[t],r)}var Eo=M(null),Vu=M(0);function Ry(t,r){t=$i,Q(Vu,t),Q(Eo,r),$i=t|r.baseLanes}function vf(){Q(Vu,$i),Q(Eo,Eo.current)}function bf(){$i=Vu.current,L(Eo),L(Vu)}var Sr=M(null),Lr=null;function Ts(t){var r=t.alternate;Q(Sn,Sn.current&1),Q(Sr,t),Lr===null&&(r===null||Eo.current!==null||r.memoizedState!==null)&&(Lr=t)}function Ef(t){Q(Sn,Sn.current),Q(Sr,t),Lr===null&&(Lr=t)}function Iy(t){t.tag===22?(Q(Sn,Sn.current),Q(Sr,t),Lr===null&&(Lr=t)):As()}function As(){Q(Sn,Sn.current),Q(Sr,Sr.current)}function xr(t){L(Sr),Lr===t&&(Lr=null),L(Sn)}var Sn=M(0);function Lu(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Cm(a)||Rm(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Pi=0,gt=null,$t=null,Cn=null,Pu=!1,So=!1,Oa=!1,Uu=0,Wl=0,xo=null,O1=0;function gn(){throw Error(s(321))}function Sf(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!br(t[a],r[a]))return!1;return!0}function xf(t,r,a,l,h,m){return Pi=m,gt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ee.H=t===null||t.memoizedState===null?h_:Pf,Oa=!1,m=a(l,h),Oa=!1,So&&(m=Oy(r,a,l,h)),Dy(t),m}function Dy(t){ee.H=Kl;var r=$t!==null&&$t.next!==null;if(Pi=0,Cn=$t=gt=null,Pu=!1,Wl=0,xo=null,r)throw Error(s(300));t===null||Rn||(t=t.dependencies,t!==null&&Iu(t)&&(Rn=!0))}function Oy(t,r,a,l){gt=t;var h=0;do{if(So&&(xo=null),Wl=0,So=!1,25<=h)throw Error(s(301));if(h+=1,Cn=$t=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}ee.H=f_,m=r(a,l)}while(So);return m}function k1(){var t=ee.H,r=t.useState()[0];return r=typeof r.then=="function"?Yl(r):r,t=t.useState()[0],($t!==null?$t.memoizedState:null)!==t&&(gt.flags|=1024),r}function wf(){var t=Uu!==0;return Uu=0,t}function Tf(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function Af(t){if(Pu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Pu=!1}Pi=0,Cn=$t=gt=null,So=!1,Wl=Uu=0,xo=null}function ir(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?gt.memoizedState=Cn=t:Cn=Cn.next=t,Cn}function xn(){if($t===null){var t=gt.alternate;t=t!==null?t.memoizedState:null}else t=$t.next;var r=Cn===null?gt.memoizedState:Cn.next;if(r!==null)Cn=r,$t=t;else{if(t===null)throw gt.alternate===null?Error(s(467)):Error(s(310));$t=t,t={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Cn===null?gt.memoizedState=Cn=t:Cn=Cn.next=t}return Cn}function zu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yl(t){var r=Wl;return Wl+=1,xo===null&&(xo=[]),t=Ey(xo,t,r),r=gt,(Cn===null?r.memoizedState:Cn.next)===null&&(r=r.alternate,ee.H=r===null||r.memoizedState===null?h_:Pf),t}function Bu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Yl(t);if(t.$$typeof===re)return Gn(t)}throw Error(s(438,String(t)))}function Cf(t){var r=null,a=gt.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=gt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=zu(),gt.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=V;return r.index++,a}function Ui(t,r){return typeof r=="function"?r(t):r}function Fu(t){var r=xn();return Rf(r,$t,t)}function Rf(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,m=l.pending;if(m!==null){if(h!==null){var v=h.next;h.next=m.next,m.next=v}r.baseQueue=h=m,l.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{r=h.next;var x=v=null,z=null,ne=r,de=!1;do{var pe=ne.lane&-536870913;if(pe!==ne.lane?(wt&pe)===pe:(Pi&pe)===pe){var se=ne.revertLane;if(se===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),pe===yo&&(de=!0);else if((Pi&se)===se){ne=ne.next,se===yo&&(de=!0);continue}else pe={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},z===null?(x=z=pe,v=m):z=z.next=pe,gt.lanes|=se,Is|=se;pe=ne.action,Oa&&a(m,pe),m=ne.hasEagerState?ne.eagerState:a(m,pe)}else se={lane:pe,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},z===null?(x=z=se,v=m):z=z.next=se,gt.lanes|=pe,Is|=pe;ne=ne.next}while(ne!==null&&ne!==r);if(z===null?v=m:z.next=x,!br(m,t.memoizedState)&&(Rn=!0,de&&(a=_o,a!==null)))throw a;t.memoizedState=m,t.baseState=v,t.baseQueue=z,l.lastRenderedState=m}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function If(t){var r=xn(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,m=r.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do m=t(m,v.action),v=v.next;while(v!==h);br(m,r.memoizedState)||(Rn=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,l]}function ky(t,r,a){var l=gt,h=xn(),m=It;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=r();var v=!br(($t||h).memoizedState,a);if(v&&(h.memoizedState=a,Rn=!0),h=h.queue,kf(jy.bind(null,l,h,t),[t]),h.getSnapshot!==r||v||Cn!==null&&Cn.memoizedState.tag&1){if(l.flags|=2048,wo(9,{destroy:void 0},Ny.bind(null,l,h,a,r),null),Kt===null)throw Error(s(349));m||(Pi&127)!==0||My(l,r,a)}return a}function My(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=gt.updateQueue,r===null?(r=zu(),gt.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function Ny(t,r,a,l){r.value=a,r.getSnapshot=l,Vy(r)&&Ly(t)}function jy(t,r,a){return a(function(){Vy(r)&&Ly(t)})}function Vy(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!br(t,a)}catch{return!0}}function Ly(t){var r=Sa(t,2);r!==null&&mr(r,t,2)}function Df(t){var r=ir();if(typeof t=="function"){var a=t;if(t=a(),Oa){Fn(!0);try{a()}finally{Fn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:t},r}function Py(t,r,a,l){return t.baseState=a,Rf(t,$t,typeof l=="function"?l:Ui)}function M1(t,r,a,l,h){if(Gu(t))throw Error(s(485));if(t=r.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};ee.T!==null?a(!0):m.isTransition=!1,l(m),a=r.pending,a===null?(m.next=r.pending=m,Uy(r,m)):(m.next=a.next,r.pending=a.next=m)}}function Uy(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var m=ee.T,v={};ee.T=v;try{var x=a(h,l),z=ee.S;z!==null&&z(v,x),zy(t,r,x)}catch(ne){Of(t,r,ne)}finally{m!==null&&v.types!==null&&(m.types=v.types),ee.T=m}}else try{m=a(h,l),zy(t,r,m)}catch(ne){Of(t,r,ne)}}function zy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){By(t,r,l)},function(l){return Of(t,r,l)}):By(t,r,a)}function By(t,r,a){r.status="fulfilled",r.value=a,Fy(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Uy(t,a)))}function Of(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Fy(r),r=r.next;while(r!==l)}t.action=null}function Fy(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Hy(t,r){return r}function qy(t,r){if(It){var a=Kt.formState;if(a!==null){e:{var l=gt;if(It){if(tn){t:{for(var h=tn,m=Vr;h.nodeType!==8;){if(!m){h=null;break t}if(h=Pr(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){tn=Pr(h.nextSibling),l=h.data==="F!";break e}}bs(l)}l=!1}l&&(r=a[0])}}return a=ir(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hy,lastRenderedState:r},a.queue=l,a=c_.bind(null,gt,l),l.dispatch=a,l=Df(!1),m=Lf.bind(null,gt,!1,l.queue),l=ir(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=M1.bind(null,gt,h,m,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function Gy(t){var r=xn();return $y(r,$t,t)}function $y(t,r,a){if(r=Rf(t,r,Hy)[0],t=Fu(Ui)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Yl(r)}catch(v){throw v===vo?ku:v}else l=r;r=xn();var h=r.queue,m=h.dispatch;return a!==r.memoizedState&&(gt.flags|=2048,wo(9,{destroy:void 0},N1.bind(null,h,a),null)),[l,m,t]}function N1(t,r){t.action=r}function Wy(t){var r=xn(),a=$t;if(a!==null)return $y(r,a,t);xn(),r=r.memoizedState,a=xn();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function wo(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=gt.updateQueue,r===null&&(r=zu(),gt.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function Yy(){return xn().memoizedState}function Hu(t,r,a,l){var h=ir();gt.flags|=t,h.memoizedState=wo(1|r,{destroy:void 0},a,l===void 0?null:l)}function qu(t,r,a,l){var h=xn();l=l===void 0?null:l;var m=h.memoizedState.inst;$t!==null&&l!==null&&Sf(l,$t.memoizedState.deps)?h.memoizedState=wo(r,m,a,l):(gt.flags|=t,h.memoizedState=wo(1|r,m,a,l))}function Qy(t,r){Hu(8390656,8,t,r)}function kf(t,r){qu(2048,8,t,r)}function j1(t){gt.flags|=4;var r=gt.updateQueue;if(r===null)r=zu(),gt.updateQueue=r,r.events=[t];else{var a=r.events;a===null?r.events=[t]:a.push(t)}}function Ky(t){var r=xn().memoizedState;return j1({ref:r,nextImpl:t}),function(){if((jt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function Xy(t,r){return qu(4,2,t,r)}function Jy(t,r){return qu(4,4,t,r)}function Zy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function e_(t,r,a){a=a!=null?a.concat([t]):null,qu(4,4,Zy.bind(null,r,t),a)}function Mf(){}function t_(t,r){var a=xn();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Sf(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function n_(t,r){var a=xn();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Sf(r,l[1]))return l[0];if(l=t(),Oa){Fn(!0);try{t()}finally{Fn(!1)}}return a.memoizedState=[l,r],l}function Nf(t,r,a){return a===void 0||(Pi&1073741824)!==0&&(wt&261930)===0?t.memoizedState=r:(t.memoizedState=a,t=r0(),gt.lanes|=t,Is|=t,a)}function r_(t,r,a,l){return br(a,r)?a:Eo.current!==null?(t=Nf(t,a,l),br(t,r)||(Rn=!0),t):(Pi&42)===0||(Pi&1073741824)!==0&&(wt&261930)===0?(Rn=!0,t.memoizedState=a):(t=r0(),gt.lanes|=t,Is|=t,r)}function i_(t,r,a,l,h){var m=q.p;q.p=m!==0&&8>m?m:8;var v=ee.T,x={};ee.T=x,Lf(t,!1,r,a);try{var z=h(),ne=ee.S;if(ne!==null&&ne(x,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var de=D1(z,l);Ql(t,r,de,Ar(t))}else Ql(t,r,l,Ar(t))}catch(pe){Ql(t,r,{then:function(){},status:"rejected",reason:pe},Ar())}finally{q.p=m,v!==null&&x.types!==null&&(v.types=x.types),ee.T=v}}function V1(){}function jf(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=s_(t).queue;i_(t,h,r,De,a===null?V1:function(){return a_(t),a(l)})}function s_(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:De,baseState:De,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:De},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function a_(t){var r=s_(t);r.next===null&&(r=t.alternate.memoizedState),Ql(t,r.next.queue,{},Ar())}function Vf(){return Gn(hc)}function o_(){return xn().memoizedState}function l_(){return xn().memoizedState}function L1(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Ar();t=xs(a);var l=ws(r,t,a);l!==null&&(mr(l,r,a),ql(l,r,a)),r={cache:df()},t.payload=r;return}r=r.return}}function P1(t,r,a){var l=Ar();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Gu(t)?u_(r,a):(a=Zh(t,r,a,l),a!==null&&(mr(a,t,l),d_(a,r,l)))}function c_(t,r,a){var l=Ar();Ql(t,r,a,l)}function Ql(t,r,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Gu(t))u_(r,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var v=r.lastRenderedState,x=m(v,a);if(h.hasEagerState=!0,h.eagerState=x,br(x,v))return Tu(t,r,h,0),Kt===null&&wu(),!1}catch{}if(a=Zh(t,r,h,l),a!==null)return mr(a,t,l),d_(a,r,l),!0}return!1}function Lf(t,r,a,l){if(l={lane:2,revertLane:gm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Gu(t)){if(r)throw Error(s(479))}else r=Zh(t,a,l,2),r!==null&&mr(r,t,2)}function Gu(t){var r=t.alternate;return t===gt||r!==null&&r===gt}function u_(t,r){So=Pu=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function d_(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,ca(t,a)}}var Kl={readContext:Gn,use:Bu,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useLayoutEffect:gn,useInsertionEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useSyncExternalStore:gn,useId:gn,useHostTransitionStatus:gn,useFormState:gn,useActionState:gn,useOptimistic:gn,useMemoCache:gn,useCacheRefresh:gn};Kl.useEffectEvent=gn;var h_={readContext:Gn,use:Bu,useCallback:function(t,r){return ir().memoizedState=[t,r===void 0?null:r],t},useContext:Gn,useEffect:Qy,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Hu(4194308,4,Zy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Hu(4194308,4,t,r)},useInsertionEffect:function(t,r){Hu(4,2,t,r)},useMemo:function(t,r){var a=ir();r=r===void 0?null:r;var l=t();if(Oa){Fn(!0);try{t()}finally{Fn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=ir();if(a!==void 0){var h=a(r);if(Oa){Fn(!0);try{a(r)}finally{Fn(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=P1.bind(null,gt,t),[l.memoizedState,t]},useRef:function(t){var r=ir();return t={current:t},r.memoizedState=t},useState:function(t){t=Df(t);var r=t.queue,a=c_.bind(null,gt,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:Mf,useDeferredValue:function(t,r){var a=ir();return Nf(a,t,r)},useTransition:function(){var t=Df(!1);return t=i_.bind(null,gt,t.queue,!0,!1),ir().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=gt,h=ir();if(It){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),Kt===null)throw Error(s(349));(wt&127)!==0||My(l,r,a)}h.memoizedState=a;var m={value:a,getSnapshot:r};return h.queue=m,Qy(jy.bind(null,l,m,t),[t]),l.flags|=2048,wo(9,{destroy:void 0},Ny.bind(null,l,m,a,r),null),a},useId:function(){var t=ir(),r=Kt.identifierPrefix;if(It){var a=mi,l=fi;a=(l&~(1<<32-Qt(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Uu++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=O1++,r="_"+r+"r_"+a.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Vf,useFormState:qy,useActionState:qy,useOptimistic:function(t){var r=ir();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Lf.bind(null,gt,!0,a),a.dispatch=r,[t,r]},useMemoCache:Cf,useCacheRefresh:function(){return ir().memoizedState=L1.bind(null,gt)},useEffectEvent:function(t){var r=ir(),a={impl:t};return r.memoizedState=a,function(){if((jt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Pf={readContext:Gn,use:Bu,useCallback:t_,useContext:Gn,useEffect:kf,useImperativeHandle:e_,useInsertionEffect:Xy,useLayoutEffect:Jy,useMemo:n_,useReducer:Fu,useRef:Yy,useState:function(){return Fu(Ui)},useDebugValue:Mf,useDeferredValue:function(t,r){var a=xn();return r_(a,$t.memoizedState,t,r)},useTransition:function(){var t=Fu(Ui)[0],r=xn().memoizedState;return[typeof t=="boolean"?t:Yl(t),r]},useSyncExternalStore:ky,useId:o_,useHostTransitionStatus:Vf,useFormState:Gy,useActionState:Gy,useOptimistic:function(t,r){var a=xn();return Py(a,$t,t,r)},useMemoCache:Cf,useCacheRefresh:l_};Pf.useEffectEvent=Ky;var f_={readContext:Gn,use:Bu,useCallback:t_,useContext:Gn,useEffect:kf,useImperativeHandle:e_,useInsertionEffect:Xy,useLayoutEffect:Jy,useMemo:n_,useReducer:If,useRef:Yy,useState:function(){return If(Ui)},useDebugValue:Mf,useDeferredValue:function(t,r){var a=xn();return $t===null?Nf(a,t,r):r_(a,$t.memoizedState,t,r)},useTransition:function(){var t=If(Ui)[0],r=xn().memoizedState;return[typeof t=="boolean"?t:Yl(t),r]},useSyncExternalStore:ky,useId:o_,useHostTransitionStatus:Vf,useFormState:Wy,useActionState:Wy,useOptimistic:function(t,r){var a=xn();return $t!==null?Py(a,$t,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Cf,useCacheRefresh:l_};f_.useEffectEvent=Ky;function Uf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:S({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var zf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=Ar(),h=xs(l);h.payload=r,a!=null&&(h.callback=a),r=ws(t,h,l),r!==null&&(mr(r,t,l),ql(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=Ar(),h=xs(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=ws(t,h,l),r!==null&&(mr(r,t,l),ql(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Ar(),l=xs(a);l.tag=2,r!=null&&(l.callback=r),r=ws(t,l,a),r!==null&&(mr(r,t,a),ql(r,t,a))}};function m_(t,r,a,l,h,m,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,v):r.prototype&&r.prototype.isPureReactComponent?!Vl(a,l)||!Vl(h,m):!0}function g_(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&zf.enqueueReplaceState(r,r.state,null)}function ka(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=S({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function p_(t){xu(t)}function y_(t){console.error(t)}function __(t){xu(t)}function $u(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function v_(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Bf(t,r,a){return a=xs(a),a.tag=3,a.payload={element:null},a.callback=function(){$u(t,r)},a}function b_(t){return t=xs(t),t.tag=3,t}function E_(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=l.value;t.payload=function(){return h(m)},t.callback=function(){v_(r,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){v_(r,a,l),typeof h!="function"&&(Ds===null?Ds=new Set([this]):Ds.add(this));var x=l.stack;this.componentDidCatch(l.value,{componentStack:x!==null?x:""})})}function U1(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&po(r,a,h,!0),a=Sr.current,a!==null){switch(a.tag){case 31:case 13:return Lr===null?id():a.alternate===null&&pn===0&&(pn=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Mu?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),hm(t,l,h)),!1;case 22:return a.flags|=65536,l===Mu?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),hm(t,l,h)),!1}throw Error(s(435,a.tag))}return hm(t,l,h),id(),!1}if(It)return r=Sr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==af&&(t=Error(s(422),{cause:l}),Ul(Mr(t,a)))):(l!==af&&(r=Error(s(423),{cause:l}),Ul(Mr(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Mr(l,a),h=Bf(t.stateNode,l,h),yf(t,h),pn!==4&&(pn=2)),!1;var m=Error(s(520),{cause:l});if(m=Mr(m,a),ic===null?ic=[m]:ic.push(m),pn!==4&&(pn=2),r===null)return!0;l=Mr(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Bf(a.stateNode,l,t),yf(a,t),!1;case 1:if(r=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ds===null||!Ds.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=b_(h),E_(h,t,a,l),yf(a,h),!1}a=a.return}while(a!==null);return!1}var Ff=Error(s(461)),Rn=!1;function $n(t,r,a,l){r.child=t===null?Ty(r,null,a,l):Da(r,t.child,a,l)}function S_(t,r,a,l,h){a=a.render;var m=r.ref;if("ref"in l){var v={};for(var x in l)x!=="ref"&&(v[x]=l[x])}else v=l;return Aa(r),l=xf(t,r,a,v,m,h),x=wf(),t!==null&&!Rn?(Tf(t,r,h),zi(t,r,h)):(It&&x&&rf(r),r.flags|=1,$n(t,r,l,h),r.child)}function x_(t,r,a,l,h){if(t===null){var m=a.type;return typeof m=="function"&&!ef(m)&&m.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=m,w_(t,r,m,l,h)):(t=Cu(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!Kf(t,h)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:Vl,a(v,l)&&t.ref===r.ref)return zi(t,r,h)}return r.flags|=1,t=Ni(m,l),t.ref=r.ref,t.return=r,r.child=t}function w_(t,r,a,l,h){if(t!==null){var m=t.memoizedProps;if(Vl(m,l)&&t.ref===r.ref)if(Rn=!1,r.pendingProps=l=m,Kf(t,h))(t.flags&131072)!==0&&(Rn=!0);else return r.lanes=t.lanes,zi(t,r,h)}return Hf(t,r,a,l,h)}function T_(t,r,a,l){var h=l.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=r.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~m}else l=0,r.child=null;return A_(t,r,m,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ou(r,m!==null?m.cachePool:null),m!==null?Ry(r,m):vf(),Iy(r);else return l=r.lanes=536870912,A_(t,r,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(Ou(r,m.cachePool),Ry(r,m),As(),r.memoizedState=null):(t!==null&&Ou(r,null),vf(),As());return $n(t,r,h,a),r.child}function Xl(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function A_(t,r,a,l,h){var m=ff();return m=m===null?null:{parent:An._currentValue,pool:m},r.memoizedState={baseLanes:a,cachePool:m},t!==null&&Ou(r,null),vf(),Iy(r),t!==null&&po(t,r,l,!0),r.childLanes=h,null}function Wu(t,r){return r=Qu({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function C_(t,r,a){return Da(r,t.child,null,a),t=Wu(r,r.pendingProps),t.flags|=2,xr(r),r.memoizedState=null,t}function z1(t,r,a){var l=r.pendingProps,h=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(It){if(l.mode==="hidden")return t=Wu(r,l),r.lanes=536870912,Xl(null,t);if(Ef(r),(t=tn)?(t=U0(t,Vr),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:_s!==null?{id:fi,overflow:mi}:null,retryLane:536870912,hydrationErrors:null},a=uy(t),a.return=r,r.child=a,qn=r,tn=null)):t=null,t===null)throw bs(r);return r.lanes=536870912,null}return Wu(r,l)}var m=t.memoizedState;if(m!==null){var v=m.dehydrated;if(Ef(r),h)if(r.flags&256)r.flags&=-257,r=C_(t,r,a);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(s(558));else if(Rn||po(t,r,a,!1),h=(a&t.childLanes)!==0,Rn||h){if(l=Kt,l!==null&&(v=ua(l,a),v!==0&&v!==m.retryLane))throw m.retryLane=v,Sa(t,v),mr(l,t,v),Ff;id(),r=C_(t,r,a)}else t=m.treeContext,tn=Pr(v.nextSibling),qn=r,It=!0,vs=null,Vr=!1,t!==null&&fy(r,t),r=Wu(r,l),r.flags|=4096;return r}return t=Ni(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function Yu(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Hf(t,r,a,l,h){return Aa(r),a=xf(t,r,a,l,void 0,h),l=wf(),t!==null&&!Rn?(Tf(t,r,h),zi(t,r,h)):(It&&l&&rf(r),r.flags|=1,$n(t,r,a,h),r.child)}function R_(t,r,a,l,h,m){return Aa(r),r.updateQueue=null,a=Oy(r,l,a,h),Dy(t),l=wf(),t!==null&&!Rn?(Tf(t,r,m),zi(t,r,m)):(It&&l&&rf(r),r.flags|=1,$n(t,r,a,m),r.child)}function I_(t,r,a,l,h){if(Aa(r),r.stateNode===null){var m=ho,v=a.contextType;typeof v=="object"&&v!==null&&(m=Gn(v)),m=new a(l,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=zf,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=l,m.state=r.memoizedState,m.refs={},gf(r),v=a.contextType,m.context=typeof v=="object"&&v!==null?Gn(v):ho,m.state=r.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Uf(r,a,v,l),m.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&zf.enqueueReplaceState(m,m.state,null),$l(r,l,m,h),Gl(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){m=r.stateNode;var x=r.memoizedProps,z=ka(a,x);m.props=z;var ne=m.context,de=a.contextType;v=ho,typeof de=="object"&&de!==null&&(v=Gn(de));var pe=a.getDerivedStateFromProps;de=typeof pe=="function"||typeof m.getSnapshotBeforeUpdate=="function",x=r.pendingProps!==x,de||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x||ne!==v)&&g_(r,m,l,v),Ss=!1;var se=r.memoizedState;m.state=se,$l(r,l,m,h),Gl(),ne=r.memoizedState,x||se!==ne||Ss?(typeof pe=="function"&&(Uf(r,a,pe,l),ne=r.memoizedState),(z=Ss||m_(r,a,z,l,se,ne,v))?(de||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=ne),m.props=l,m.state=ne,m.context=v,l=z):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{m=r.stateNode,pf(t,r),v=r.memoizedProps,de=ka(a,v),m.props=de,pe=r.pendingProps,se=m.context,ne=a.contextType,z=ho,typeof ne=="object"&&ne!==null&&(z=Gn(ne)),x=a.getDerivedStateFromProps,(ne=typeof x=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==pe||se!==z)&&g_(r,m,l,z),Ss=!1,se=r.memoizedState,m.state=se,$l(r,l,m,h),Gl();var oe=r.memoizedState;v!==pe||se!==oe||Ss||t!==null&&t.dependencies!==null&&Iu(t.dependencies)?(typeof x=="function"&&(Uf(r,a,x,l),oe=r.memoizedState),(de=Ss||m_(r,a,de,l,se,oe,z)||t!==null&&t.dependencies!==null&&Iu(t.dependencies))?(ne||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,oe,z),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,oe,z)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&se===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&se===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=oe),m.props=l,m.state=oe,m.context=z,l=de):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&se===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&se===t.memoizedState||(r.flags|=1024),l=!1)}return m=l,Yu(t,r),l=(r.flags&128)!==0,m||l?(m=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&l?(r.child=Da(r,t.child,null,h),r.child=Da(r,null,a,h)):$n(t,r,a,h),r.memoizedState=m.state,t=r.child):t=zi(t,r,h),t}function D_(t,r,a,l){return wa(),r.flags|=256,$n(t,r,a,l),r.child}var qf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gf(t){return{baseLanes:t,cachePool:vy()}}function $f(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Tr),t}function O_(t,r,a){var l=r.pendingProps,h=!1,m=(r.flags&128)!==0,v;if((v=m)||(v=t!==null&&t.memoizedState===null?!1:(Sn.current&2)!==0),v&&(h=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,t===null){if(It){if(h?Ts(r):As(),(t=tn)?(t=U0(t,Vr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:_s!==null?{id:fi,overflow:mi}:null,retryLane:536870912,hydrationErrors:null},a=uy(t),a.return=r,r.child=a,qn=r,tn=null)):t=null,t===null)throw bs(r);return Rm(t)?r.lanes=32:r.lanes=536870912,null}var x=l.children;return l=l.fallback,h?(As(),h=r.mode,x=Qu({mode:"hidden",children:x},h),l=xa(l,h,a,null),x.return=r,l.return=r,x.sibling=l,r.child=x,l=r.child,l.memoizedState=Gf(a),l.childLanes=$f(t,v,a),r.memoizedState=qf,Xl(null,l)):(Ts(r),Wf(r,x))}var z=t.memoizedState;if(z!==null&&(x=z.dehydrated,x!==null)){if(m)r.flags&256?(Ts(r),r.flags&=-257,r=Yf(t,r,a)):r.memoizedState!==null?(As(),r.child=t.child,r.flags|=128,r=null):(As(),x=l.fallback,h=r.mode,l=Qu({mode:"visible",children:l.children},h),x=xa(x,h,a,null),x.flags|=2,l.return=r,x.return=r,l.sibling=x,r.child=l,Da(r,t.child,null,a),l=r.child,l.memoizedState=Gf(a),l.childLanes=$f(t,v,a),r.memoizedState=qf,r=Xl(null,l));else if(Ts(r),Rm(x)){if(v=x.nextSibling&&x.nextSibling.dataset,v)var ne=v.dgst;v=ne,l=Error(s(419)),l.stack="",l.digest=v,Ul({value:l,source:null,stack:null}),r=Yf(t,r,a)}else if(Rn||po(t,r,a,!1),v=(a&t.childLanes)!==0,Rn||v){if(v=Kt,v!==null&&(l=ua(v,a),l!==0&&l!==z.retryLane))throw z.retryLane=l,Sa(t,l),mr(v,t,l),Ff;Cm(x)||id(),r=Yf(t,r,a)}else Cm(x)?(r.flags|=192,r.child=t.child,r=null):(t=z.treeContext,tn=Pr(x.nextSibling),qn=r,It=!0,vs=null,Vr=!1,t!==null&&fy(r,t),r=Wf(r,l.children),r.flags|=4096);return r}return h?(As(),x=l.fallback,h=r.mode,z=t.child,ne=z.sibling,l=Ni(z,{mode:"hidden",children:l.children}),l.subtreeFlags=z.subtreeFlags&65011712,ne!==null?x=Ni(ne,x):(x=xa(x,h,a,null),x.flags|=2),x.return=r,l.return=r,l.sibling=x,r.child=l,Xl(null,l),l=r.child,x=t.child.memoizedState,x===null?x=Gf(a):(h=x.cachePool,h!==null?(z=An._currentValue,h=h.parent!==z?{parent:z,pool:z}:h):h=vy(),x={baseLanes:x.baseLanes|a,cachePool:h}),l.memoizedState=x,l.childLanes=$f(t,v,a),r.memoizedState=qf,Xl(t.child,l)):(Ts(r),a=t.child,t=a.sibling,a=Ni(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(v=r.deletions,v===null?(r.deletions=[t],r.flags|=16):v.push(t)),r.child=a,r.memoizedState=null,a)}function Wf(t,r){return r=Qu({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Qu(t,r){return t=Er(22,t,null,r),t.lanes=0,t}function Yf(t,r,a){return Da(r,t.child,null,a),t=Wf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function k_(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),cf(t.return,r,a)}function Qf(t,r,a,l,h,m){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:m}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=h,v.treeForkCount=m)}function M_(t,r,a){var l=r.pendingProps,h=l.revealOrder,m=l.tail;l=l.children;var v=Sn.current,x=(v&2)!==0;if(x?(v=v&1|2,r.flags|=128):v&=1,Q(Sn,v),$n(t,r,l,a),l=It?Pl:0,!x&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&k_(t,a,r);else if(t.tag===19)k_(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&Lu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),Qf(r,!1,h,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Lu(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Qf(r,!0,a,null,m,l);break;case"together":Qf(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function zi(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Is|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(po(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=Ni(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Ni(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Kf(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Iu(t)))}function B1(t,r,a){switch(r.tag){case 3:$e(r,r.stateNode.containerInfo),Es(r,An,t.memoizedState.cache),wa();break;case 27:case 5:ct(r);break;case 4:$e(r,r.stateNode.containerInfo);break;case 10:Es(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Ef(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Ts(r),r.flags|=128,null):(a&r.child.childLanes)!==0?O_(t,r,a):(Ts(r),t=zi(t,r,a),t!==null?t.sibling:null);Ts(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(po(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return M_(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Q(Sn,Sn.current),l)break;return null;case 22:return r.lanes=0,T_(t,r,a,r.pendingProps);case 24:Es(r,An,t.memoizedState.cache)}return zi(t,r,a)}function N_(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Rn=!0;else{if(!Kf(t,a)&&(r.flags&128)===0)return Rn=!1,B1(t,r,a);Rn=(t.flags&131072)!==0}else Rn=!1,It&&(r.flags&1048576)!==0&&hy(r,Pl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=Ra(r.elementType),r.type=t,typeof t=="function")ef(t)?(l=ka(t,l),r.tag=1,r=I_(null,r,t,l,a)):(r.tag=0,r=Hf(null,r,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===Ce){r.tag=11,r=S_(null,r,t,l,a);break e}else if(h===R){r.tag=14,r=x_(null,r,t,l,a);break e}}throw r=rt(t)||t,Error(s(306,r,""))}}return r;case 0:return Hf(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=ka(l,r.pendingProps),I_(t,r,l,h,a);case 3:e:{if($e(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var m=r.memoizedState;h=m.element,pf(t,r),$l(r,l,null,a);var v=r.memoizedState;if(l=v.cache,Es(r,An,l),l!==m.cache&&uf(r,[An],a,!0),Gl(),l=v.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=D_(t,r,l,a);break e}else if(l!==h){h=Mr(Error(s(424)),r),Ul(h),r=D_(t,r,l,a);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,tn=Pr(t.firstChild),qn=r,It=!0,vs=null,Vr=!0,a=Ty(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(wa(),l===h){r=zi(t,r,a);break e}$n(t,r,l,a)}r=r.child}return r;case 26:return Yu(t,r),t===null?(a=G0(r.type,null,r.pendingProps,null))?r.memoizedState=a:It||(a=r.type,t=r.pendingProps,l=dd(Oe.current).createElement(a),l[ie]=r,l[Z]=t,Wn(l,a,t),yt(l),r.stateNode=l):r.memoizedState=G0(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return ct(r),t===null&&It&&(l=r.stateNode=F0(r.type,r.pendingProps,Oe.current),qn=r,Vr=!0,h=tn,Ns(r.type)?(Im=h,tn=Pr(l.firstChild)):tn=h),$n(t,r,r.pendingProps.children,a),Yu(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&It&&((h=l=tn)&&(l=yw(l,r.type,r.pendingProps,Vr),l!==null?(r.stateNode=l,qn=r,tn=Pr(l.firstChild),Vr=!1,h=!0):h=!1),h||bs(r)),ct(r),h=r.type,m=r.pendingProps,v=t!==null?t.memoizedProps:null,l=m.children,wm(h,m)?l=null:v!==null&&wm(h,v)&&(r.flags|=32),r.memoizedState!==null&&(h=xf(t,r,k1,null,null,a),hc._currentValue=h),Yu(t,r),$n(t,r,l,a),r.child;case 6:return t===null&&It&&((t=a=tn)&&(a=_w(a,r.pendingProps,Vr),a!==null?(r.stateNode=a,qn=r,tn=null,t=!0):t=!1),t||bs(r)),null;case 13:return O_(t,r,a);case 4:return $e(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Da(r,null,l,a):$n(t,r,l,a),r.child;case 11:return S_(t,r,r.type,r.pendingProps,a);case 7:return $n(t,r,r.pendingProps,a),r.child;case 8:return $n(t,r,r.pendingProps.children,a),r.child;case 12:return $n(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Es(r,r.type,l.value),$n(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,Aa(r),h=Gn(h),l=l(h),r.flags|=1,$n(t,r,l,a),r.child;case 14:return x_(t,r,r.type,r.pendingProps,a);case 15:return w_(t,r,r.type,r.pendingProps,a);case 19:return M_(t,r,a);case 31:return z1(t,r,a);case 22:return T_(t,r,a,r.pendingProps);case 24:return Aa(r),l=Gn(An),t===null?(h=ff(),h===null&&(h=Kt,m=df(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),r.memoizedState={parent:l,cache:h},gf(r),Es(r,An,h)):((t.lanes&a)!==0&&(pf(t,r),$l(r,null,null,a),Gl()),h=t.memoizedState,m=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Es(r,An,l)):(l=m.cache,Es(r,An,l),l!==h.cache&&uf(r,[An],a,!0))),$n(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Bi(t){t.flags|=4}function Xf(t,r,a,l,h){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(o0())t.flags|=8192;else throw Ia=Mu,mf}else t.flags&=-16777217}function j_(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!K0(r))if(o0())t.flags|=8192;else throw Ia=Mu,mf}function Ku(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Xa():536870912,t.lanes|=r,Ro|=r)}function Jl(t,r){if(!It)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function nn(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function F1(t,r,a){var l=r.pendingProps;switch(sf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(r),null;case 1:return nn(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Li(An),Ze(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(go(r)?Bi(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,of())),nn(r),null;case 26:var h=r.type,m=r.memoizedState;return t===null?(Bi(r),m!==null?(nn(r),j_(r,m)):(nn(r),Xf(r,h,null,l,a))):m?m!==t.memoizedState?(Bi(r),nn(r),j_(r,m)):(nn(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&Bi(r),nn(r),Xf(r,h,t,l,a)),null;case 27:if(Xt(r),a=Oe.current,h=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Bi(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return nn(r),null}t=Y.current,go(r)?my(r):(t=F0(h,l,a),r.stateNode=t,Bi(r))}return nn(r),null;case 5:if(Xt(r),h=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Bi(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return nn(r),null}if(m=Y.current,go(r))my(r);else{var v=dd(Oe.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?v.createElement(h,{is:l.is}):v.createElement(h)}}m[ie]=r,m[Z]=l;e:for(v=r.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break e;for(;v.sibling===null;){if(v.return===null||v.return===r)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}r.stateNode=m;e:switch(Wn(m,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Bi(r)}}return nn(r),Xf(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,a),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Bi(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=Oe.current,go(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=qn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[ie]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||O0(t.nodeValue,a)),t||bs(r,!0)}else t=dd(t).createTextNode(l),t[ie]=r,r.stateNode=t}return nn(r),null;case 31:if(a=r.memoizedState,t===null||t.memoizedState!==null){if(l=go(r),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[ie]=r}else wa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;nn(r),t=!1}else a=of(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return r.flags&256?(xr(r),r):(xr(r),null);if((r.flags&128)!==0)throw Error(s(558))}return nn(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=go(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[ie]=r}else wa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;nn(r),h=!1}else h=of(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(xr(r),r):(xr(r),null)}return xr(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048)),a!==t&&a&&(r.child.flags|=8192),Ku(r,r.updateQueue),nn(r),null);case 4:return Ze(),t===null&&vm(r.stateNode.containerInfo),nn(r),null;case 10:return Li(r.type),nn(r),null;case 19:if(L(Sn),l=r.memoizedState,l===null)return nn(r),null;if(h=(r.flags&128)!==0,m=l.rendering,m===null)if(h)Jl(l,!1);else{if(pn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=Lu(t),m!==null){for(r.flags|=128,Jl(l,!1),t=m.updateQueue,r.updateQueue=t,Ku(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)cy(a,t),a=a.sibling;return Q(Sn,Sn.current&1|2),It&&ji(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&X()>td&&(r.flags|=128,h=!0,Jl(l,!1),r.lanes=4194304)}else{if(!h)if(t=Lu(m),t!==null){if(r.flags|=128,h=!0,t=t.updateQueue,r.updateQueue=t,Ku(r,t),Jl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!It)return nn(r),null}else 2*X()-l.renderingStartTime>td&&a!==536870912&&(r.flags|=128,h=!0,Jl(l,!1),r.lanes=4194304);l.isBackwards?(m.sibling=r.child,r.child=m):(t=l.last,t!==null?t.sibling=m:r.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=X(),t.sibling=null,a=Sn.current,Q(Sn,h?a&1|2:a&1),It&&ji(r,l.treeForkCount),t):(nn(r),null);case 22:case 23:return xr(r),bf(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(nn(r),r.subtreeFlags&6&&(r.flags|=8192)):nn(r),a=r.updateQueue,a!==null&&Ku(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&L(Ca),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Li(An),nn(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function H1(t,r){switch(sf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Li(An),Ze(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Xt(r),null;case 31:if(r.memoizedState!==null){if(xr(r),r.alternate===null)throw Error(s(340));wa()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(xr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));wa()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return L(Sn),null;case 4:return Ze(),null;case 10:return Li(r.type),null;case 22:case 23:return xr(r),bf(),t!==null&&L(Ca),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Li(An),null;case 25:return null;default:return null}}function V_(t,r){switch(sf(r),r.tag){case 3:Li(An),Ze();break;case 26:case 27:case 5:Xt(r);break;case 4:Ze();break;case 31:r.memoizedState!==null&&xr(r);break;case 13:xr(r);break;case 19:L(Sn);break;case 10:Li(r.type);break;case 22:case 23:xr(r),bf(),t!==null&&L(Ca);break;case 24:Li(An)}}function Zl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var m=a.create,v=a.inst;l=m(),v.destroy=l}a=a.next}while(a!==h)}}catch(x){Ft(r,r.return,x)}}function Cs(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&t)===t){var v=l.inst,x=v.destroy;if(x!==void 0){v.destroy=void 0,h=r;var z=a,ne=x;try{ne()}catch(de){Ft(h,z,de)}}}l=l.next}while(l!==m)}}catch(de){Ft(r,r.return,de)}}function L_(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Cy(r,a)}catch(l){Ft(t,t.return,l)}}}function P_(t,r,a){a.props=ka(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Ft(t,r,l)}}function ec(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){Ft(t,r,h)}}function gi(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Ft(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Ft(t,r,h)}else a.current=null}function U_(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Ft(t,t.return,h)}}function Jf(t,r,a){try{var l=t.stateNode;dw(l,t.type,a,r),l[Z]=r}catch(h){Ft(t,t.return,h)}}function z_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ns(t.type)||t.tag===4}function Zf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||z_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ns(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function em(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=$r));else if(l!==4&&(l===27&&Ns(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(em(t,r,a),t=t.sibling;t!==null;)em(t,r,a),t=t.sibling}function Xu(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Ns(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Xu(t,r,a),t=t.sibling;t!==null;)Xu(t,r,a),t=t.sibling}function B_(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);Wn(r,l,a),r[ie]=t,r[Z]=a}catch(m){Ft(t,t.return,m)}}var Fi=!1,In=!1,tm=!1,F_=typeof WeakSet=="function"?WeakSet:Set,Pn=null;function q1(t,r){if(t=t.containerInfo,Sm=_d,t=ey(t),Wh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,x=-1,z=-1,ne=0,de=0,pe=t,se=null;t:for(;;){for(var oe;pe!==a||h!==0&&pe.nodeType!==3||(x=v+h),pe!==m||l!==0&&pe.nodeType!==3||(z=v+l),pe.nodeType===3&&(v+=pe.nodeValue.length),(oe=pe.firstChild)!==null;)se=pe,pe=oe;for(;;){if(pe===t)break t;if(se===a&&++ne===h&&(x=v),se===m&&++de===l&&(z=v),(oe=pe.nextSibling)!==null)break;pe=se,se=pe.parentNode}pe=oe}a=x===-1||z===-1?null:{start:x,end:z}}else a=null}a=a||{start:0,end:0}}else a=null;for(xm={focusedElem:t,selectionRange:a},_d=!1,Pn=r;Pn!==null;)if(r=Pn,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Pn=t;else for(;Pn!==null;){switch(r=Pn,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=r,h=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Be=ka(a.type,h);t=l.getSnapshotBeforeUpdate(Be,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(nt){Ft(a,a.return,nt)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)Am(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Am(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Pn=t;break}Pn=r.return}}function H_(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:qi(t,a),l&4&&Zl(5,a);break;case 1:if(qi(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(v){Ft(a,a.return,v)}else{var h=ka(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(v){Ft(a,a.return,v)}}l&64&&L_(a),l&512&&ec(a,a.return);break;case 3:if(qi(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Cy(t,r)}catch(v){Ft(a,a.return,v)}}break;case 27:r===null&&l&4&&B_(a);case 26:case 5:qi(t,a),r===null&&l&4&&U_(a),l&512&&ec(a,a.return);break;case 12:qi(t,a);break;case 31:qi(t,a),l&4&&$_(t,a);break;case 13:qi(t,a),l&4&&W_(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Z1.bind(null,a),vw(t,a))));break;case 22:if(l=a.memoizedState!==null||Fi,!l){r=r!==null&&r.memoizedState!==null||In,h=Fi;var m=In;Fi=l,(In=r)&&!m?Gi(t,a,(a.subtreeFlags&8772)!==0):qi(t,a),Fi=h,In=m}break;case 30:break;default:qi(t,a)}}function q_(t){var r=t.alternate;r!==null&&(t.alternate=null,q_(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Ke(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var cn=null,ur=!1;function Hi(t,r,a){for(a=a.child;a!==null;)G_(t,r,a),a=a.sibling}function G_(t,r,a){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(Ln,a)}catch{}switch(a.tag){case 26:In||gi(a,r),Hi(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:In||gi(a,r);var l=cn,h=ur;Ns(a.type)&&(cn=a.stateNode,ur=!1),Hi(t,r,a),cc(a.stateNode),cn=l,ur=h;break;case 5:In||gi(a,r);case 6:if(l=cn,h=ur,cn=null,Hi(t,r,a),cn=l,ur=h,cn!==null)if(ur)try{(cn.nodeType===9?cn.body:cn.nodeName==="HTML"?cn.ownerDocument.body:cn).removeChild(a.stateNode)}catch(m){Ft(a,r,m)}else try{cn.removeChild(a.stateNode)}catch(m){Ft(a,r,m)}break;case 18:cn!==null&&(ur?(t=cn,L0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Vo(t)):L0(cn,a.stateNode));break;case 4:l=cn,h=ur,cn=a.stateNode.containerInfo,ur=!0,Hi(t,r,a),cn=l,ur=h;break;case 0:case 11:case 14:case 15:Cs(2,a,r),In||Cs(4,a,r),Hi(t,r,a);break;case 1:In||(gi(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&P_(a,r,l)),Hi(t,r,a);break;case 21:Hi(t,r,a);break;case 22:In=(l=In)||a.memoizedState!==null,Hi(t,r,a),In=l;break;default:Hi(t,r,a)}}function $_(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Vo(t)}catch(a){Ft(r,r.return,a)}}}function W_(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Vo(t)}catch(a){Ft(r,r.return,a)}}function G1(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new F_),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new F_),r;default:throw Error(s(435,t.tag))}}function Ju(t,r){var a=G1(t);r.forEach(function(l){if(!a.has(l)){a.add(l);var h=ew.bind(null,t,l);l.then(h,h)}})}function dr(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],m=t,v=r,x=v;e:for(;x!==null;){switch(x.tag){case 27:if(Ns(x.type)){cn=x.stateNode,ur=!1;break e}break;case 5:cn=x.stateNode,ur=!1;break e;case 3:case 4:cn=x.stateNode.containerInfo,ur=!0;break e}x=x.return}if(cn===null)throw Error(s(160));G_(m,v,h),cn=null,ur=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Y_(r,t),r=r.sibling}var Jr=null;function Y_(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:dr(r,t),hr(t),l&4&&(Cs(3,t,t.return),Zl(3,t),Cs(5,t,t.return));break;case 1:dr(r,t),hr(t),l&512&&(In||a===null||gi(a,a.return)),l&64&&Fi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Jr;if(dr(r,t),hr(t),l&512&&(In||a===null||gi(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":m=h.getElementsByTagName("title")[0],(!m||m[We]||m[ie]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(l),h.head.insertBefore(m,h.querySelector("head > title"))),Wn(m,l,a),m[ie]=t,yt(m),l=m;break e;case"link":var v=Y0("link","href",h).get(l+(a.href||""));if(v){for(var x=0;x<v.length;x++)if(m=v[x],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(x,1);break t}}m=h.createElement(l),Wn(m,l,a),h.head.appendChild(m);break;case"meta":if(v=Y0("meta","content",h).get(l+(a.content||""))){for(x=0;x<v.length;x++)if(m=v[x],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(x,1);break t}}m=h.createElement(l),Wn(m,l,a),h.head.appendChild(m);break;default:throw Error(s(468,l))}m[ie]=t,yt(m),l=m}t.stateNode=l}else Q0(h,t.type,t.stateNode);else t.stateNode=W0(h,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?Q0(h,t.type,t.stateNode):W0(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Jf(t,t.memoizedProps,a.memoizedProps)}break;case 27:dr(r,t),hr(t),l&512&&(In||a===null||gi(a,a.return)),a!==null&&l&4&&Jf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(dr(r,t),hr(t),l&512&&(In||a===null||gi(a,a.return)),t.flags&32){h=t.stateNode;try{cr(h,"")}catch(Be){Ft(t,t.return,Be)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Jf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(tm=!0);break;case 6:if(dr(r,t),hr(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Be){Ft(t,t.return,Be)}}break;case 3:if(md=null,h=Jr,Jr=hd(r.containerInfo),dr(r,t),Jr=h,hr(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Vo(r.containerInfo)}catch(Be){Ft(t,t.return,Be)}tm&&(tm=!1,Q_(t));break;case 4:l=Jr,Jr=hd(t.stateNode.containerInfo),dr(r,t),hr(t),Jr=l;break;case 12:dr(r,t),hr(t);break;case 31:dr(r,t),hr(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ju(t,l)));break;case 13:dr(r,t),hr(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ed=X()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ju(t,l)));break;case 22:h=t.memoizedState!==null;var z=a!==null&&a.memoizedState!==null,ne=Fi,de=In;if(Fi=ne||h,In=de||z,dr(r,t),In=de,Fi=ne,hr(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||z||Fi||In||Ma(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){z=a=r;try{if(m=z.stateNode,h)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{x=z.stateNode;var pe=z.memoizedProps.style,se=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;x.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(Be){Ft(z,z.return,Be)}}}else if(r.tag===6){if(a===null){z=r;try{z.stateNode.nodeValue=h?"":z.memoizedProps}catch(Be){Ft(z,z.return,Be)}}}else if(r.tag===18){if(a===null){z=r;try{var oe=z.stateNode;h?P0(oe,!0):P0(z.stateNode,!1)}catch(Be){Ft(z,z.return,Be)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Ju(t,a))));break;case 19:dr(r,t),hr(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ju(t,l)));break;case 30:break;case 21:break;default:dr(r,t),hr(t)}}function hr(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(z_(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,m=Zf(t);Xu(t,m,h);break;case 5:var v=a.stateNode;a.flags&32&&(cr(v,""),a.flags&=-33);var x=Zf(t);Xu(t,x,v);break;case 3:case 4:var z=a.stateNode.containerInfo,ne=Zf(t);em(t,ne,z);break;default:throw Error(s(161))}}catch(de){Ft(t,t.return,de)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Q_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Q_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function qi(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)H_(t,r.alternate,r),r=r.sibling}function Ma(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Cs(4,r,r.return),Ma(r);break;case 1:gi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&P_(r,r.return,a),Ma(r);break;case 27:cc(r.stateNode);case 26:case 5:gi(r,r.return),Ma(r);break;case 22:r.memoizedState===null&&Ma(r);break;case 30:Ma(r);break;default:Ma(r)}t=t.sibling}}function Gi(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,m=r,v=m.flags;switch(m.tag){case 0:case 11:case 15:Gi(h,m,a),Zl(4,m);break;case 1:if(Gi(h,m,a),l=m,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(ne){Ft(l,l.return,ne)}if(l=m,h=l.updateQueue,h!==null){var x=l.stateNode;try{var z=h.shared.hiddenCallbacks;if(z!==null)for(h.shared.hiddenCallbacks=null,h=0;h<z.length;h++)Ay(z[h],x)}catch(ne){Ft(l,l.return,ne)}}a&&v&64&&L_(m),ec(m,m.return);break;case 27:B_(m);case 26:case 5:Gi(h,m,a),a&&l===null&&v&4&&U_(m),ec(m,m.return);break;case 12:Gi(h,m,a);break;case 31:Gi(h,m,a),a&&v&4&&$_(h,m);break;case 13:Gi(h,m,a),a&&v&4&&W_(h,m);break;case 22:m.memoizedState===null&&Gi(h,m,a),ec(m,m.return);break;case 30:break;default:Gi(h,m,a)}r=r.sibling}}function nm(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&zl(a))}function rm(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&zl(t))}function Zr(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)K_(t,r,a,l),r=r.sibling}function K_(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:Zr(t,r,a,l),h&2048&&Zl(9,r);break;case 1:Zr(t,r,a,l);break;case 3:Zr(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&zl(t)));break;case 12:if(h&2048){Zr(t,r,a,l),t=r.stateNode;try{var m=r.memoizedProps,v=m.id,x=m.onPostCommit;typeof x=="function"&&x(v,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(z){Ft(r,r.return,z)}}else Zr(t,r,a,l);break;case 31:Zr(t,r,a,l);break;case 13:Zr(t,r,a,l);break;case 23:break;case 22:m=r.stateNode,v=r.alternate,r.memoizedState!==null?m._visibility&2?Zr(t,r,a,l):tc(t,r):m._visibility&2?Zr(t,r,a,l):(m._visibility|=2,To(t,r,a,l,(r.subtreeFlags&10256)!==0||!1)),h&2048&&nm(v,r);break;case 24:Zr(t,r,a,l),h&2048&&rm(r.alternate,r);break;default:Zr(t,r,a,l)}}function To(t,r,a,l,h){for(h=h&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,v=r,x=a,z=l,ne=v.flags;switch(v.tag){case 0:case 11:case 15:To(m,v,x,z,h),Zl(8,v);break;case 23:break;case 22:var de=v.stateNode;v.memoizedState!==null?de._visibility&2?To(m,v,x,z,h):tc(m,v):(de._visibility|=2,To(m,v,x,z,h)),h&&ne&2048&&nm(v.alternate,v);break;case 24:To(m,v,x,z,h),h&&ne&2048&&rm(v.alternate,v);break;default:To(m,v,x,z,h)}r=r.sibling}}function tc(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:tc(a,l),h&2048&&nm(l.alternate,l);break;case 24:tc(a,l),h&2048&&rm(l.alternate,l);break;default:tc(a,l)}r=r.sibling}}var nc=8192;function Ao(t,r,a){if(t.subtreeFlags&nc)for(t=t.child;t!==null;)X_(t,r,a),t=t.sibling}function X_(t,r,a){switch(t.tag){case 26:Ao(t,r,a),t.flags&nc&&t.memoizedState!==null&&Ow(a,Jr,t.memoizedState,t.memoizedProps);break;case 5:Ao(t,r,a);break;case 3:case 4:var l=Jr;Jr=hd(t.stateNode.containerInfo),Ao(t,r,a),Jr=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=nc,nc=16777216,Ao(t,r,a),nc=l):Ao(t,r,a));break;default:Ao(t,r,a)}}function J_(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function rc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Pn=l,e0(l,t)}J_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Z_(t),t=t.sibling}function Z_(t){switch(t.tag){case 0:case 11:case 15:rc(t),t.flags&2048&&Cs(9,t,t.return);break;case 3:rc(t);break;case 12:rc(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Zu(t)):rc(t);break;default:rc(t)}}function Zu(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Pn=l,e0(l,t)}J_(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Cs(8,r,r.return),Zu(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Zu(r));break;default:Zu(r)}t=t.sibling}}function e0(t,r){for(;Pn!==null;){var a=Pn;switch(a.tag){case 0:case 11:case 15:Cs(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:zl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Pn=l;else e:for(a=t;Pn!==null;){l=Pn;var h=l.sibling,m=l.return;if(q_(l),l===a){Pn=null;break e}if(h!==null){h.return=m,Pn=h;break e}Pn=m}}}var $1={getCacheForType:function(t){var r=Gn(An),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a},cacheSignal:function(){return Gn(An).controller.signal}},W1=typeof WeakMap=="function"?WeakMap:Map,jt=0,Kt=null,Et=null,wt=0,Bt=0,wr=null,Rs=!1,Co=!1,im=!1,$i=0,pn=0,Is=0,Na=0,sm=0,Tr=0,Ro=0,ic=null,fr=null,am=!1,ed=0,t0=0,td=1/0,nd=null,Ds=null,jn=0,Os=null,Io=null,Wi=0,om=0,lm=null,n0=null,sc=0,cm=null;function Ar(){return(jt&2)!==0&&wt!==0?wt&-wt:ee.T!==null?gm():Ja()}function r0(){if(Tr===0)if((wt&536870912)===0||It){var t=Ne;Ne<<=1,(Ne&3932160)===0&&(Ne=262144),Tr=t}else Tr=536870912;return t=Sr.current,t!==null&&(t.flags|=32),Tr}function mr(t,r,a){(t===Kt&&(Bt===2||Bt===9)||t.cancelPendingCommit!==null)&&(Do(t,0),ks(t,wt,Tr,!1)),Ci(t,a),((jt&2)===0||t!==Kt)&&(t===Kt&&((jt&2)===0&&(Na|=a),pn===4&&ks(t,wt,Tr,!1)),pi(t))}function i0(t,r,a){if((jt&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&t.expiredLanes)===0||an(t,r),h=l?K1(t,r):dm(t,r,!0),m=l;do{if(h===0){Co&&!l&&ks(t,r,0,!1);break}else{if(a=t.current.alternate,m&&!Y1(a)){h=dm(t,r,!1),m=!1;continue}if(h===2){if(m=r,t.errorRecoveryDisabledLanes&m)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;e:{var x=t;h=ic;var z=x.current.memoizedState.isDehydrated;if(z&&(Do(x,v).flags|=256),v=dm(x,v,!1),v!==2){if(im&&!z){x.errorRecoveryDisabledLanes|=m,Na|=m,h=4;break e}m=fr,fr=h,m!==null&&(fr===null?fr=m:fr.push.apply(fr,m))}h=v}if(m=!1,h!==2)continue}}if(h===1){Do(t,0),ks(t,r,0,!0);break}e:{switch(l=t,m=h,m){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:ks(l,r,Tr,!Rs);break e;case 2:fr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=ed+300-X(),10<h)){if(ks(l,r,Tr,!Rs),Ut(l,0,!0)!==0)break e;Wi=r,l.timeoutHandle=j0(s0.bind(null,l,a,fr,nd,am,r,Tr,Na,Ro,Rs,m,"Throttled",-0,0),h);break e}s0(l,a,fr,nd,am,r,Tr,Na,Ro,Rs,m,null,-0,0)}}break}while(!0);pi(t)}function s0(t,r,a,l,h,m,v,x,z,ne,de,pe,se,oe){if(t.timeoutHandle=-1,pe=r.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$r},X_(r,m,pe);var Be=(m&62914560)===m?ed-X():(m&4194048)===m?t0-X():0;if(Be=kw(pe,Be),Be!==null){Wi=m,t.cancelPendingCommit=Be(f0.bind(null,t,r,m,a,l,h,v,x,z,de,pe,null,se,oe)),ks(t,m,v,!ne);return}}f0(t,r,m,a,l,h,v,x,z)}function Y1(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],m=h.getSnapshot;h=h.value;try{if(!br(m(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ks(t,r,a,l){r&=~sm,r&=~Na,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var m=31-Qt(h),v=1<<m;l[m]=-1,h&=~v}a!==0&&Ri(t,a,r)}function rd(){return(jt&6)===0?(ac(0),!1):!0}function um(){if(Et!==null){if(Bt===0)var t=Et.return;else t=Et,Vi=Ta=null,Af(t),bo=null,Fl=0,t=Et;for(;t!==null;)V_(t.alternate,t),t=t.return;Et=null}}function Do(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,mw(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Wi=0,um(),Kt=t,Et=a=Ni(t.current,null),wt=r,Bt=0,wr=null,Rs=!1,Co=an(t,r),im=!1,Ro=Tr=sm=Na=Is=pn=0,fr=ic=null,am=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-Qt(l),m=1<<h;r|=t[h],l&=~m}return $i=r,wu(),a}function a0(t,r){gt=null,ee.H=Kl,r===vo||r===ku?(r=Sy(),Bt=3):r===mf?(r=Sy(),Bt=4):Bt=r===Ff?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,wr=r,Et===null&&(pn=1,$u(t,Mr(r,t.current)))}function o0(){var t=Sr.current;return t===null?!0:(wt&4194048)===wt?Lr===null:(wt&62914560)===wt||(wt&536870912)!==0?t===Lr:!1}function l0(){var t=ee.H;return ee.H=Kl,t===null?Kl:t}function c0(){var t=ee.A;return ee.A=$1,t}function id(){pn=4,Rs||(wt&4194048)!==wt&&Sr.current!==null||(Co=!0),(Is&134217727)===0&&(Na&134217727)===0||Kt===null||ks(Kt,wt,Tr,!1)}function dm(t,r,a){var l=jt;jt|=2;var h=l0(),m=c0();(Kt!==t||wt!==r)&&(nd=null,Do(t,r)),r=!1;var v=pn;e:do try{if(Bt!==0&&Et!==null){var x=Et,z=wr;switch(Bt){case 8:um(),v=6;break e;case 3:case 2:case 9:case 6:Sr.current===null&&(r=!0);var ne=Bt;if(Bt=0,wr=null,Oo(t,x,z,ne),a&&Co){v=0;break e}break;default:ne=Bt,Bt=0,wr=null,Oo(t,x,z,ne)}}Q1(),v=pn;break}catch(de){a0(t,de)}while(!0);return r&&t.shellSuspendCounter++,Vi=Ta=null,jt=l,ee.H=h,ee.A=m,Et===null&&(Kt=null,wt=0,wu()),v}function Q1(){for(;Et!==null;)u0(Et)}function K1(t,r){var a=jt;jt|=2;var l=l0(),h=c0();Kt!==t||wt!==r?(nd=null,td=X()+500,Do(t,r)):Co=an(t,r);e:do try{if(Bt!==0&&Et!==null){r=Et;var m=wr;t:switch(Bt){case 1:Bt=0,wr=null,Oo(t,r,m,1);break;case 2:case 9:if(by(m)){Bt=0,wr=null,d0(r);break}r=function(){Bt!==2&&Bt!==9||Kt!==t||(Bt=7),pi(t)},m.then(r,r);break e;case 3:Bt=7;break e;case 4:Bt=5;break e;case 7:by(m)?(Bt=0,wr=null,d0(r)):(Bt=0,wr=null,Oo(t,r,m,7));break;case 5:var v=null;switch(Et.tag){case 26:v=Et.memoizedState;case 5:case 27:var x=Et;if(v?K0(v):x.stateNode.complete){Bt=0,wr=null;var z=x.sibling;if(z!==null)Et=z;else{var ne=x.return;ne!==null?(Et=ne,sd(ne)):Et=null}break t}}Bt=0,wr=null,Oo(t,r,m,5);break;case 6:Bt=0,wr=null,Oo(t,r,m,6);break;case 8:um(),pn=6;break e;default:throw Error(s(462))}}X1();break}catch(de){a0(t,de)}while(!0);return Vi=Ta=null,ee.H=l,ee.A=h,jt=a,Et!==null?0:(Kt=null,wt=0,wu(),pn)}function X1(){for(;Et!==null&&!ve();)u0(Et)}function u0(t){var r=N_(t.alternate,t,$i);t.memoizedProps=t.pendingProps,r===null?sd(t):Et=r}function d0(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=R_(a,r,r.pendingProps,r.type,void 0,wt);break;case 11:r=R_(a,r,r.pendingProps,r.type.render,r.ref,wt);break;case 5:Af(r);default:V_(a,r),r=Et=cy(r,$i),r=N_(a,r,$i)}t.memoizedProps=t.pendingProps,r===null?sd(t):Et=r}function Oo(t,r,a,l){Vi=Ta=null,Af(r),bo=null,Fl=0;var h=r.return;try{if(U1(t,h,r,a,wt)){pn=1,$u(t,Mr(a,t.current)),Et=null;return}}catch(m){if(h!==null)throw Et=h,m;pn=1,$u(t,Mr(a,t.current)),Et=null;return}r.flags&32768?(It||l===1?t=!0:Co||(wt&536870912)!==0?t=!1:(Rs=t=!0,(l===2||l===9||l===3||l===6)&&(l=Sr.current,l!==null&&l.tag===13&&(l.flags|=16384))),h0(r,t)):sd(r)}function sd(t){var r=t;do{if((r.flags&32768)!==0){h0(r,Rs);return}t=r.return;var a=F1(r.alternate,r,$i);if(a!==null){Et=a;return}if(r=r.sibling,r!==null){Et=r;return}Et=r=t}while(r!==null);pn===0&&(pn=5)}function h0(t,r){do{var a=H1(t.alternate,t);if(a!==null){a.flags&=32767,Et=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Et=t;return}Et=t=a}while(t!==null);pn=6,Et=null}function f0(t,r,a,l,h,m,v,x,z){t.cancelPendingCommit=null;do ad();while(jn!==0);if((jt&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(m=r.lanes|r.childLanes,m|=Jh,xl(t,a,m,v,x,z),t===Kt&&(Et=Kt=null,wt=0),Io=r,Os=t,Wi=a,om=m,lm=h,n0=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,tw(we,function(){return _0(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=ee.T,ee.T=null,h=q.p,q.p=2,v=jt,jt|=4;try{q1(t,r,a)}finally{jt=v,q.p=h,ee.T=l}}jn=1,m0(),g0(),p0()}}function m0(){if(jn===1){jn=0;var t=Os,r=Io,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=ee.T,ee.T=null;var l=q.p;q.p=2;var h=jt;jt|=4;try{Y_(r,t);var m=xm,v=ey(t.containerInfo),x=m.focusedElem,z=m.selectionRange;if(v!==x&&x&&x.ownerDocument&&Zp(x.ownerDocument.documentElement,x)){if(z!==null&&Wh(x)){var ne=z.start,de=z.end;if(de===void 0&&(de=ne),"selectionStart"in x)x.selectionStart=ne,x.selectionEnd=Math.min(de,x.value.length);else{var pe=x.ownerDocument||document,se=pe&&pe.defaultView||window;if(se.getSelection){var oe=se.getSelection(),Be=x.textContent.length,nt=Math.min(z.start,Be),Yt=z.end===void 0?nt:Math.min(z.end,Be);!oe.extend&&nt>Yt&&(v=Yt,Yt=nt,nt=v);var $=Jp(x,nt),H=Jp(x,Yt);if($&&H&&(oe.rangeCount!==1||oe.anchorNode!==$.node||oe.anchorOffset!==$.offset||oe.focusNode!==H.node||oe.focusOffset!==H.offset)){var te=pe.createRange();te.setStart($.node,$.offset),oe.removeAllRanges(),nt>Yt?(oe.addRange(te),oe.extend(H.node,H.offset)):(te.setEnd(H.node,H.offset),oe.addRange(te))}}}}for(pe=[],oe=x;oe=oe.parentNode;)oe.nodeType===1&&pe.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<pe.length;x++){var ge=pe[x];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}_d=!!Sm,xm=Sm=null}finally{jt=h,q.p=l,ee.T=a}}t.current=r,jn=2}}function g0(){if(jn===2){jn=0;var t=Os,r=Io,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=ee.T,ee.T=null;var l=q.p;q.p=2;var h=jt;jt|=4;try{H_(t,r.alternate,r)}finally{jt=h,q.p=l,ee.T=a}}jn=3}}function p0(){if(jn===4||jn===3){jn=0,fe();var t=Os,r=Io,a=Wi,l=n0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?jn=5:(jn=0,Io=Os=null,y0(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Ds=null),qr(a),r=r.stateNode,sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(Ln,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=ee.T,h=q.p,q.p=2,ee.T=null;try{for(var m=t.onRecoverableError,v=0;v<l.length;v++){var x=l[v];m(x.value,{componentStack:x.stack})}}finally{ee.T=r,q.p=h}}(Wi&3)!==0&&ad(),pi(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===cm?sc++:(sc=0,cm=t):sc=0,ac(0)}}function y0(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,zl(r)))}function ad(){return m0(),g0(),p0(),_0()}function _0(){if(jn!==5)return!1;var t=Os,r=om;om=0;var a=qr(Wi),l=ee.T,h=q.p;try{q.p=32>a?32:a,ee.T=null,a=lm,lm=null;var m=Os,v=Wi;if(jn=0,Io=Os=null,Wi=0,(jt&6)!==0)throw Error(s(331));var x=jt;if(jt|=4,Z_(m.current),K_(m,m.current,v,a),jt=x,ac(0,!1),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(Ln,m)}catch{}return!0}finally{q.p=h,ee.T=l,y0(t,r)}}function v0(t,r,a){r=Mr(a,r),r=Bf(t.stateNode,r,2),t=ws(t,r,2),t!==null&&(Ci(t,2),pi(t))}function Ft(t,r,a){if(t.tag===3)v0(t,t,a);else for(;r!==null;){if(r.tag===3){v0(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ds===null||!Ds.has(l))){t=Mr(a,t),a=b_(2),l=ws(r,a,2),l!==null&&(E_(a,l,r,t),Ci(l,2),pi(l));break}}r=r.return}}function hm(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new W1;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(im=!0,h.add(a),t=J1.bind(null,t,r,a),r.then(t,t))}function J1(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Kt===t&&(wt&a)===a&&(pn===4||pn===3&&(wt&62914560)===wt&&300>X()-ed?(jt&2)===0&&Do(t,0):sm|=a,Ro===wt&&(Ro=0)),pi(t)}function b0(t,r){r===0&&(r=Xa()),t=Sa(t,r),t!==null&&(Ci(t,r),pi(t))}function Z1(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),b0(t,a)}function ew(t,r){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),b0(t,a)}function tw(t,r){return B(t,r)}var od=null,ko=null,fm=!1,ld=!1,mm=!1,Ms=0;function pi(t){t!==ko&&t.next===null&&(ko===null?od=ko=t:ko=ko.next=t),ld=!0,fm||(fm=!0,rw())}function ac(t,r){if(!mm&&ld){mm=!0;do for(var a=!1,l=od;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var m=0;else{var v=l.suspendedLanes,x=l.pingedLanes;m=(1<<31-Qt(42|t)+1)-1,m&=h&~(v&~x),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,w0(l,m))}else m=wt,m=Ut(l,l===Kt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||an(l,m)||(a=!0,w0(l,m));l=l.next}while(a);mm=!1}}function nw(){E0()}function E0(){ld=fm=!1;var t=0;Ms!==0&&fw()&&(t=Ms);for(var r=X(),a=null,l=od;l!==null;){var h=l.next,m=S0(l,r);m===0?(l.next=null,a===null?od=h:a.next=h,h===null&&(ko=a)):(a=l,(t!==0||(m&3)!==0)&&(ld=!0)),l=h}jn!==0&&jn!==5||ac(t),Ms!==0&&(Ms=0)}function S0(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var v=31-Qt(m),x=1<<v,z=h[v];z===-1?((x&a)===0||(x&l)!==0)&&(h[v]=ls(x,r)):z<=r&&(t.expiredLanes|=x),m&=~x}if(r=Kt,a=wt,a=Ut(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(Bt===2||Bt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&J(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||an(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&J(l),qr(a)){case 2:case 8:a=et;break;case 32:a=we;break;case 268435456:a=Le;break;default:a=we}return l=x0.bind(null,t),a=B(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&J(l),t.callbackPriority=2,t.callbackNode=null,2}function x0(t,r){if(jn!==0&&jn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(ad()&&t.callbackNode!==a)return null;var l=wt;return l=Ut(t,t===Kt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(i0(t,l,r),S0(t,X()),t.callbackNode!=null&&t.callbackNode===a?x0.bind(null,t):null)}function w0(t,r){if(ad())return null;i0(t,r,!0)}function rw(){gw(function(){(jt&6)!==0?B(be,nw):E0()})}function gm(){if(Ms===0){var t=yo;t===0&&(t=me,me<<=1,(me&261888)===0&&(me=256)),Ms=t}return Ms}function T0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:to(""+t)}function A0(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function iw(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var m=T0((h[Z]||null).action),v=l.submitter;v&&(r=(r=v[Z]||null)?T0(r.formAction):v.getAttribute("formAction"),r!==null&&(m=r,v=null));var x=new ci("action","action",null,l,h);t.push({event:x,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ms!==0){var z=v?A0(h,v):new FormData(h);jf(a,{pending:!0,data:z,method:h.method,action:m},null,z)}}else typeof m=="function"&&(x.preventDefault(),z=v?A0(h,v):new FormData(h),jf(a,{pending:!0,data:z,method:h.method,action:m},m,z))},currentTarget:h}]})}}for(var pm=0;pm<Xh.length;pm++){var ym=Xh[pm],sw=ym.toLowerCase(),aw=ym[0].toUpperCase()+ym.slice(1);Xr(sw,"on"+aw)}Xr(ry,"onAnimationEnd"),Xr(iy,"onAnimationIteration"),Xr(sy,"onAnimationStart"),Xr("dblclick","onDoubleClick"),Xr("focusin","onFocus"),Xr("focusout","onBlur"),Xr(S1,"onTransitionRun"),Xr(x1,"onTransitionStart"),Xr(w1,"onTransitionCancel"),Xr(ay,"onTransitionEnd"),en("onMouseEnter",["mouseout","mouseover"]),en("onMouseLeave",["mouseout","mouseover"]),en("onPointerEnter",["pointerout","pointerover"]),en("onPointerLeave",["pointerout","pointerover"]),Lt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Lt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Lt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Lt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Lt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Lt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ow=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(oc));function C0(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var m=void 0;if(r)for(var v=l.length-1;0<=v;v--){var x=l[v],z=x.instance,ne=x.currentTarget;if(x=x.listener,z!==m&&h.isPropagationStopped())break e;m=x,h.currentTarget=ne;try{m(h)}catch(de){xu(de)}h.currentTarget=null,m=z}else for(v=0;v<l.length;v++){if(x=l[v],z=x.instance,ne=x.currentTarget,x=x.listener,z!==m&&h.isPropagationStopped())break e;m=x,h.currentTarget=ne;try{m(h)}catch(de){xu(de)}h.currentTarget=null,m=z}}}}function St(t,r){var a=r[le];a===void 0&&(a=r[le]=new Set);var l=t+"__bubble";a.has(l)||(R0(r,t,2,!1),a.add(l))}function _m(t,r,a){var l=0;r&&(l|=4),R0(a,t,l,r)}var cd="_reactListening"+Math.random().toString(36).slice(2);function vm(t){if(!t[cd]){t[cd]=!0,dn.forEach(function(a){a!=="selectionchange"&&(ow.has(a)||_m(a,!1,t),_m(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[cd]||(r[cd]=!0,_m("selectionchange",!1,r))}}function R0(t,r,a,l){switch(rv(r)){case 2:var h=jw;break;case 8:h=Vw;break;default:h=Nm}a=h.bind(null,r,a,t),h=void 0,!ma||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function bm(t,r,a,l,h){var m=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var x=l.stateNode.containerInfo;if(x===h)break;if(v===4)for(v=l.return;v!==null;){var z=v.tag;if((z===3||z===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;x!==null;){if(v=xt(x),v===null)return;if(z=v.tag,z===5||z===6||z===26||z===27){l=m=v;continue e}x=x.parentNode}}l=l.return}ms(function(){var ne=m,de=Ir(a),pe=[];e:{var se=oy.get(t);if(se!==void 0){var oe=ci,Be=t;switch(t){case"keypress":if(pa(a)===0)break e;case"keydown":case"keyup":oe=bu;break;case"focusin":Be="focus",oe=_a;break;case"focusout":Be="blur",oe=_a;break;case"beforeblur":case"afterblur":oe=_a;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=kl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=du;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=_;break;case ry:case iy:case sy:oe=fu;break;case ay:oe=T;break;case"scroll":case"scrollend":oe=Ol;break;case"wheel":oe=ae;break;case"copy":case"cut":case"paste":oe=mu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=Mi;break;case"toggle":case"beforetoggle":oe=mt}var nt=(r&4)!==0,Yt=!nt&&(t==="scroll"||t==="scrollend"),$=nt?se!==null?se+"Capture":null:se;nt=[];for(var H=ne,te;H!==null;){var ge=H;if(te=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||te===null||$===null||(ge=Wr(H,$),ge!=null&&nt.push(lc(H,ge,te))),Yt)break;H=H.return}0<nt.length&&(se=new oe(se,Be,null,a,de),pe.push({event:se,listeners:nt}))}}if((r&7)===0){e:{if(se=t==="mouseover"||t==="pointerover",oe=t==="mouseout"||t==="pointerout",se&&a!==Rl&&(Be=a.relatedTarget||a.fromElement)&&(xt(Be)||Be[he]))break e;if((oe||se)&&(se=de.window===de?de:(se=de.ownerDocument)?se.defaultView||se.parentWindow:window,oe?(Be=a.relatedTarget||a.toElement,oe=ne,Be=Be?xt(Be):null,Be!==null&&(Yt=c(Be),nt=Be.tag,Be!==Yt||nt!==5&&nt!==27&&nt!==6)&&(Be=null)):(oe=null,Be=ne),oe!==Be)){if(nt=kl,ge="onMouseLeave",$="onMouseEnter",H="mouse",(t==="pointerout"||t==="pointerover")&&(nt=Mi,ge="onPointerLeave",$="onPointerEnter",H="pointer"),Yt=oe==null?se:Je(oe),te=Be==null?se:Je(Be),se=new nt(ge,H+"leave",oe,a,de),se.target=Yt,se.relatedTarget=te,ge=null,xt(de)===ne&&(nt=new nt($,H+"enter",Be,a,de),nt.target=te,nt.relatedTarget=Yt,ge=nt),Yt=ge,oe&&Be)t:{for(nt=lw,$=oe,H=Be,te=0,ge=$;ge;ge=nt(ge))te++;ge=0;for(var Ye=H;Ye;Ye=nt(Ye))ge++;for(;0<te-ge;)$=nt($),te--;for(;0<ge-te;)H=nt(H),ge--;for(;te--;){if($===H||H!==null&&$===H.alternate){nt=$;break t}$=nt($),H=nt(H)}nt=null}else nt=null;oe!==null&&I0(pe,se,oe,nt,!1),Be!==null&&Yt!==null&&I0(pe,Yt,Be,nt,!0)}}e:{if(se=ne?Je(ne):window,oe=se.nodeName&&se.nodeName.toLowerCase(),oe==="select"||oe==="input"&&se.type==="file")var kt=$p;else if(qp(se))if(Wp)kt=v1;else{kt=y1;var Fe=p1}else oe=se.nodeName,!oe||oe.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?ne&&eo(ne.elementType)&&(kt=$p):kt=_1;if(kt&&(kt=kt(t,ne))){Gp(pe,kt,a,de);break e}Fe&&Fe(t,se,ne),t==="focusout"&&ne&&se.type==="number"&&ne.memoizedProps.value!=null&&Tl(se,"number",se.value)}switch(Fe=ne?Je(ne):window,t){case"focusin":(qp(Fe)||Fe.contentEditable==="true")&&(lo=Fe,Yh=ne,Ll=null);break;case"focusout":Ll=Yh=lo=null;break;case"mousedown":Qh=!0;break;case"contextmenu":case"mouseup":case"dragend":Qh=!1,ty(pe,a,de);break;case"selectionchange":if(E1)break;case"keydown":case"keyup":ty(pe,a,de)}var pt;if(Nt)e:{switch(t){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else oo?va(t,a)&&(Tt="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Tt="onCompositionStart");Tt&&(hi&&a.locale!=="ko"&&(oo||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&oo&&(pt=Dl()):(li=de,Il="value"in li?li.value:li.textContent,oo=!0)),Fe=ud(ne,Tt),0<Fe.length&&(Tt=new di(Tt,t,null,a,de),pe.push({event:Tt,listeners:Fe}),pt?Tt.data=pt:(pt=ao(a),pt!==null&&(Tt.data=pt)))),(pt=Or?h1(t,a):f1(t,a))&&(Tt=ud(ne,"onBeforeInput"),0<Tt.length&&(Fe=new di("onBeforeInput","beforeinput",null,a,de),pe.push({event:Fe,listeners:Tt}),Fe.data=pt)),iw(pe,t,ne,a,de)}C0(pe,r)})}function lc(t,r,a){return{instance:t,listener:r,currentTarget:a}}function ud(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=Wr(t,a),h!=null&&l.unshift(lc(t,h,m)),h=Wr(t,r),h!=null&&l.push(lc(t,h,m))),t.tag===3)return l;t=t.return}return[]}function lw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function I0(t,r,a,l,h){for(var m=r._reactName,v=[];a!==null&&a!==l;){var x=a,z=x.alternate,ne=x.stateNode;if(x=x.tag,z!==null&&z===l)break;x!==5&&x!==26&&x!==27||ne===null||(z=ne,h?(ne=Wr(a,m),ne!=null&&v.unshift(lc(a,ne,z))):h||(ne=Wr(a,m),ne!=null&&v.push(lc(a,ne,z)))),a=a.return}v.length!==0&&t.push({event:r,listeners:v})}var cw=/\r\n?/g,uw=/\u0000|\uFFFD/g;function D0(t){return(typeof t=="string"?t:""+t).replace(cw,`
`).replace(uw,"")}function O0(t,r){return r=D0(r),D0(t)===r}function Wt(t,r,a,l,h,m){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||cr(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&cr(t,""+l);break;case"className":bn(t,"class",l);break;case"tabIndex":bn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":bn(t,a,l);break;case"style":Cl(t,l,m);break;case"data":if(r!=="object"){bn(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=to(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(r!=="input"&&Wt(t,r,"name",h.name,h,null),Wt(t,r,"formEncType",h.formEncType,h,null),Wt(t,r,"formMethod",h.formMethod,h,null),Wt(t,r,"formTarget",h.formTarget,h,null)):(Wt(t,r,"encType",h.encType,h,null),Wt(t,r,"method",h.method,h,null),Wt(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=to(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=$r);break;case"onScroll":l!=null&&St("scroll",t);break;case"onScrollEnd":l!=null&&St("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=to(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":St("beforetoggle",t),St("toggle",t),Gr(t,"popover",l);break;case"xlinkActuate":Jt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Jt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Jt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Jt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Jt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Jt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Jt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Jt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Jt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Gr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=uu.get(a)||a,Gr(t,a,l))}}function Em(t,r,a,l,h,m){switch(a){case"style":Cl(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?cr(t,l):(typeof l=="number"||typeof l=="bigint")&&cr(t,""+l);break;case"onScroll":l!=null&&St("scroll",t);break;case"onScrollEnd":l!=null&&St("scrollend",t);break;case"onClick":l!=null&&(t.onclick=$r);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!on.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),m=t[Z]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(r,m,h),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Gr(t,a,l)}}}function Wn(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":St("error",t),St("load",t);var l=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Wt(t,r,m,v,a,null)}}h&&Wt(t,r,"srcSet",a.srcSet,a,null),l&&Wt(t,r,"src",a.src,a,null);return;case"input":St("invalid",t);var x=m=v=h=null,z=null,ne=null;for(l in a)if(a.hasOwnProperty(l)){var de=a[l];if(de!=null)switch(l){case"name":h=de;break;case"type":v=de;break;case"checked":z=de;break;case"defaultChecked":ne=de;break;case"value":m=de;break;case"defaultValue":x=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(s(137,r));break;default:Wt(t,r,l,de,a,null)}}ou(t,m,x,z,ne,v,h,!1);return;case"select":St("invalid",t),l=v=m=null;for(h in a)if(a.hasOwnProperty(h)&&(x=a[h],x!=null))switch(h){case"value":m=x;break;case"defaultValue":v=x;break;case"multiple":l=x;default:Wt(t,r,h,x,a,null)}r=m,a=v,t.multiple=!!l,r!=null?us(t,!!l,r,!1):a!=null&&us(t,!!l,a,!0);return;case"textarea":St("invalid",t),m=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(x=a[v],x!=null))switch(v){case"value":l=x;break;case"defaultValue":h=x;break;case"children":m=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(91));break;default:Wt(t,r,v,x,a,null)}ds(t,l,h,m);return;case"option":for(z in a)a.hasOwnProperty(z)&&(l=a[z],l!=null)&&(z==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":Wt(t,r,z,l,a,null));return;case"dialog":St("beforetoggle",t),St("toggle",t),St("cancel",t),St("close",t);break;case"iframe":case"object":St("load",t);break;case"video":case"audio":for(l=0;l<oc.length;l++)St(oc[l],t);break;case"image":St("error",t),St("load",t);break;case"details":St("toggle",t);break;case"embed":case"source":case"link":St("error",t),St("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in a)if(a.hasOwnProperty(ne)&&(l=a[ne],l!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Wt(t,r,ne,l,a,null)}return;default:if(eo(r)){for(de in a)a.hasOwnProperty(de)&&(l=a[de],l!==void 0&&Em(t,r,de,l,a,void 0));return}}for(x in a)a.hasOwnProperty(x)&&(l=a[x],l!=null&&Wt(t,r,x,l,a,null))}function dw(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,v=null,x=null,z=null,ne=null,de=null;for(oe in a){var pe=a[oe];if(a.hasOwnProperty(oe)&&pe!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":z=pe;default:l.hasOwnProperty(oe)||Wt(t,r,oe,null,l,pe)}}for(var se in l){var oe=l[se];if(pe=a[se],l.hasOwnProperty(se)&&(oe!=null||pe!=null))switch(se){case"type":m=oe;break;case"name":h=oe;break;case"checked":ne=oe;break;case"defaultChecked":de=oe;break;case"value":v=oe;break;case"defaultValue":x=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(s(137,r));break;default:oe!==pe&&Wt(t,r,se,oe,l,pe)}}Za(t,v,x,z,ne,de,m,h);return;case"select":oe=v=x=se=null;for(m in a)if(z=a[m],a.hasOwnProperty(m)&&z!=null)switch(m){case"value":break;case"multiple":oe=z;default:l.hasOwnProperty(m)||Wt(t,r,m,null,l,z)}for(h in l)if(m=l[h],z=a[h],l.hasOwnProperty(h)&&(m!=null||z!=null))switch(h){case"value":se=m;break;case"defaultValue":x=m;break;case"multiple":v=m;default:m!==z&&Wt(t,r,h,m,l,z)}r=x,a=v,l=oe,se!=null?us(t,!!a,se,!1):!!l!=!!a&&(r!=null?us(t,!!a,r,!0):us(t,!!a,a?[]:"",!1));return;case"textarea":oe=se=null;for(x in a)if(h=a[x],a.hasOwnProperty(x)&&h!=null&&!l.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Wt(t,r,x,null,l,h)}for(v in l)if(h=l[v],m=a[v],l.hasOwnProperty(v)&&(h!=null||m!=null))switch(v){case"value":se=h;break;case"defaultValue":oe=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==m&&Wt(t,r,v,h,l,m)}lu(t,se,oe);return;case"option":for(var Be in a)se=a[Be],a.hasOwnProperty(Be)&&se!=null&&!l.hasOwnProperty(Be)&&(Be==="selected"?t.selected=!1:Wt(t,r,Be,null,l,se));for(z in l)se=l[z],oe=a[z],l.hasOwnProperty(z)&&se!==oe&&(se!=null||oe!=null)&&(z==="selected"?t.selected=se&&typeof se!="function"&&typeof se!="symbol":Wt(t,r,z,se,l,oe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in a)se=a[nt],a.hasOwnProperty(nt)&&se!=null&&!l.hasOwnProperty(nt)&&Wt(t,r,nt,null,l,se);for(ne in l)if(se=l[ne],oe=a[ne],l.hasOwnProperty(ne)&&se!==oe&&(se!=null||oe!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(s(137,r));break;default:Wt(t,r,ne,se,l,oe)}return;default:if(eo(r)){for(var Yt in a)se=a[Yt],a.hasOwnProperty(Yt)&&se!==void 0&&!l.hasOwnProperty(Yt)&&Em(t,r,Yt,void 0,l,se);for(de in l)se=l[de],oe=a[de],!l.hasOwnProperty(de)||se===oe||se===void 0&&oe===void 0||Em(t,r,de,se,l,oe);return}}for(var $ in a)se=a[$],a.hasOwnProperty($)&&se!=null&&!l.hasOwnProperty($)&&Wt(t,r,$,null,l,se);for(pe in l)se=l[pe],oe=a[pe],!l.hasOwnProperty(pe)||se===oe||se==null&&oe==null||Wt(t,r,pe,se,l,oe)}function k0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function hw(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],m=h.transferSize,v=h.initiatorType,x=h.duration;if(m&&x&&k0(v)){for(v=0,x=h.responseEnd,l+=1;l<a.length;l++){var z=a[l],ne=z.startTime;if(ne>x)break;var de=z.transferSize,pe=z.initiatorType;de&&k0(pe)&&(z=z.responseEnd,v+=de*(z<x?1:(x-ne)/(z-ne)))}if(--l,r+=8*(m+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Sm=null,xm=null;function dd(t){return t.nodeType===9?t:t.ownerDocument}function M0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function N0(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function wm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Tm=null;function fw(){var t=window.event;return t&&t.type==="popstate"?t===Tm?!1:(Tm=t,!0):(Tm=null,!1)}var j0=typeof setTimeout=="function"?setTimeout:void 0,mw=typeof clearTimeout=="function"?clearTimeout:void 0,V0=typeof Promise=="function"?Promise:void 0,gw=typeof queueMicrotask=="function"?queueMicrotask:typeof V0<"u"?function(t){return V0.resolve(null).then(t).catch(pw)}:j0;function pw(t){setTimeout(function(){throw t})}function Ns(t){return t==="head"}function L0(t,r){var a=r,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),Vo(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")cc(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,cc(a);for(var m=a.firstChild;m;){var v=m.nextSibling,x=m.nodeName;m[We]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=v}}else a==="body"&&cc(t.ownerDocument.body);a=h}while(a);Vo(r)}function P0(t,r){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Am(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Am(a),Ke(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function yw(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[We])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Pr(t.nextSibling),t===null)break}return null}function _w(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Pr(t.nextSibling),t===null))return null;return t}function U0(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Pr(t.nextSibling),t===null))return null;return t}function Cm(t){return t.data==="$?"||t.data==="$~"}function Rm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function vw(t,r){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Pr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var Im=null;function z0(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(r===0)return Pr(t.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}t=t.nextSibling}return null}function B0(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return t;r--}else a!=="/$"&&a!=="/&"||r++}t=t.previousSibling}return null}function F0(t,r,a){switch(r=dd(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function cc(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Ke(t)}var Ur=new Map,H0=new Set;function hd(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Yi=q.d;q.d={f:bw,r:Ew,D:Sw,C:xw,L:ww,m:Tw,X:Cw,S:Aw,M:Rw};function bw(){var t=Yi.f(),r=rd();return t||r}function Ew(t){var r=Ht(t);r!==null&&r.tag===5&&r.type==="form"?a_(r):Yi.r(t)}var Mo=typeof document>"u"?null:document;function q0(t,r,a){var l=Mo;if(l&&typeof r=="string"&&r){var h=lr(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),H0.has(h)||(H0.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),Wn(r,"link",t),yt(r),l.head.appendChild(r)))}}function Sw(t){Yi.D(t),q0("dns-prefetch",t,null)}function xw(t,r){Yi.C(t,r),q0("preconnect",t,r)}function ww(t,r,a){Yi.L(t,r,a);var l=Mo;if(l&&t&&r){var h='link[rel="preload"][as="'+lr(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+lr(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+lr(a.imageSizes)+'"]')):h+='[href="'+lr(t)+'"]';var m=h;switch(r){case"style":m=No(t);break;case"script":m=jo(t)}Ur.has(m)||(t=S({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Ur.set(m,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(uc(m))||r==="script"&&l.querySelector(dc(m))||(r=l.createElement("link"),Wn(r,"link",t),yt(r),l.head.appendChild(r)))}}function Tw(t,r){Yi.m(t,r);var a=Mo;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+lr(l)+'"][href="'+lr(t)+'"]',m=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=jo(t)}if(!Ur.has(m)&&(t=S({rel:"modulepreload",href:t},r),Ur.set(m,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(dc(m)))return}l=a.createElement("link"),Wn(l,"link",t),yt(l),a.head.appendChild(l)}}}function Aw(t,r,a){Yi.S(t,r,a);var l=Mo;if(l&&t){var h=bt(l).hoistableStyles,m=No(t);r=r||"default";var v=h.get(m);if(!v){var x={loading:0,preload:null};if(v=l.querySelector(uc(m)))x.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Ur.get(m))&&Dm(t,a);var z=v=l.createElement("link");yt(z),Wn(z,"link",t),z._p=new Promise(function(ne,de){z.onload=ne,z.onerror=de}),z.addEventListener("load",function(){x.loading|=1}),z.addEventListener("error",function(){x.loading|=2}),x.loading|=4,fd(v,r,l)}v={type:"stylesheet",instance:v,count:1,state:x},h.set(m,v)}}}function Cw(t,r){Yi.X(t,r);var a=Mo;if(a&&t){var l=bt(a).hoistableScripts,h=jo(t),m=l.get(h);m||(m=a.querySelector(dc(h)),m||(t=S({src:t,async:!0},r),(r=Ur.get(h))&&Om(t,r),m=a.createElement("script"),yt(m),Wn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function Rw(t,r){Yi.M(t,r);var a=Mo;if(a&&t){var l=bt(a).hoistableScripts,h=jo(t),m=l.get(h);m||(m=a.querySelector(dc(h)),m||(t=S({src:t,async:!0,type:"module"},r),(r=Ur.get(h))&&Om(t,r),m=a.createElement("script"),yt(m),Wn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function G0(t,r,a,l){var h=(h=Oe.current)?hd(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=No(a.href),a=bt(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=No(a.href);var m=bt(h).hoistableStyles,v=m.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,v),(m=h.querySelector(uc(t)))&&!m._p&&(v.instance=m,v.state.loading=5),Ur.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ur.set(t,a),m||Iw(h,t,a,v.state))),r&&l===null)throw Error(s(528,""));return v}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=jo(a),a=bt(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function No(t){return'href="'+lr(t)+'"'}function uc(t){return'link[rel="stylesheet"]['+t+"]"}function $0(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function Iw(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Wn(r,"link",a),yt(r),t.head.appendChild(r))}function jo(t){return'[src="'+lr(t)+'"]'}function dc(t){return"script[async]"+t}function W0(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+lr(a.href)+'"]');if(l)return r.instance=l,yt(l),l;var h=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),yt(l),Wn(l,"style",h),fd(l,a.precedence,t),r.instance=l;case"stylesheet":h=No(a.href);var m=t.querySelector(uc(h));if(m)return r.state.loading|=4,r.instance=m,yt(m),m;l=$0(a),(h=Ur.get(h))&&Dm(l,h),m=(t.ownerDocument||t).createElement("link"),yt(m);var v=m;return v._p=new Promise(function(x,z){v.onload=x,v.onerror=z}),Wn(m,"link",l),r.state.loading|=4,fd(m,a.precedence,t),r.instance=m;case"script":return m=jo(a.src),(h=t.querySelector(dc(m)))?(r.instance=h,yt(h),h):(l=a,(h=Ur.get(m))&&(l=S({},a),Om(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),yt(h),Wn(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,fd(l,a.precedence,t));return r.instance}function fd(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,m=h,v=0;v<l.length;v++){var x=l[v];if(x.dataset.precedence===r)m=x;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function Dm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Om(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var md=null;function Y0(t,r,a){if(md===null){var l=new Map,h=md=new Map;h.set(a,l)}else h=md,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[We]||m[ie]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(r)||"";v=t+v;var x=l.get(v);x?x.push(m):l.set(v,[m])}}return l}function Q0(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function Dw(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function K0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Ow(t,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=No(l.href),m=r.querySelector(uc(h));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=gd.bind(t),r.then(t,t)),a.state.loading|=4,a.instance=m,yt(m);return}m=r.ownerDocument||r,l=$0(l),(h=Ur.get(h))&&Dm(l,h),m=m.createElement("link"),yt(m);var v=m;v._p=new Promise(function(x,z){v.onload=x,v.onerror=z}),Wn(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=gd.bind(t),r.addEventListener("load",a),r.addEventListener("error",a))}}var km=0;function kw(t,r){return t.stylesheets&&t.count===0&&yd(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&yd(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&km===0&&(km=62500*hw());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&yd(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>km?50:800)+r);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function gd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)yd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var pd=null;function yd(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,pd=new Map,r.forEach(Mw,t),pd=null,gd.call(t))}function Mw(t,r){if(!(r.state.loading&4)){var a=pd.get(t);if(a)var l=a.get(null);else{a=new Map,pd.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var v=h[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=r.instance,v=h.getAttribute("data-precedence"),m=a.get(v)||l,m===l&&a.set(null,h),a.set(v,h),this.count++,l=gd.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var hc={$$typeof:re,Provider:null,Consumer:null,_currentValue:De,_currentValue2:De,_threadCount:0};function Nw(t,r,a,l,h,m,v,x,z){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=or(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=or(0),this.hiddenUpdates=or(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function X0(t,r,a,l,h,m,v,x,z,ne,de,pe){return t=new Nw(t,r,a,v,z,ne,de,pe,x),r=1,m===!0&&(r|=24),m=Er(3,null,null,r),t.current=m,m.stateNode=t,r=df(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:r},gf(m),t}function J0(t){return t?(t=ho,t):ho}function Z0(t,r,a,l,h,m){h=J0(h),l.context===null?l.context=h:l.pendingContext=h,l=xs(r),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=ws(t,l,r),a!==null&&(mr(a,t,r),ql(a,t,r))}function ev(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Mm(t,r){ev(t,r),(t=t.alternate)&&ev(t,r)}function tv(t){if(t.tag===13||t.tag===31){var r=Sa(t,67108864);r!==null&&mr(r,t,67108864),Mm(t,67108864)}}function nv(t){if(t.tag===13||t.tag===31){var r=Ar();r=Ii(r);var a=Sa(t,r);a!==null&&mr(a,t,r),Mm(t,r)}}var _d=!0;function jw(t,r,a,l){var h=ee.T;ee.T=null;var m=q.p;try{q.p=2,Nm(t,r,a,l)}finally{q.p=m,ee.T=h}}function Vw(t,r,a,l){var h=ee.T;ee.T=null;var m=q.p;try{q.p=8,Nm(t,r,a,l)}finally{q.p=m,ee.T=h}}function Nm(t,r,a,l){if(_d){var h=jm(l);if(h===null)bm(t,r,l,vd,a),iv(t,l);else if(Pw(h,t,r,a,l))l.stopPropagation();else if(iv(t,l),r&4&&-1<Lw.indexOf(t)){for(;h!==null;){var m=Ht(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=vt(m.pendingLanes);if(v!==0){var x=m;for(x.pendingLanes|=2,x.entangledLanes|=2;v;){var z=1<<31-Qt(v);x.entanglements[1]|=z,v&=~z}pi(m),(jt&6)===0&&(td=X()+500,ac(0))}}break;case 31:case 13:x=Sa(m,2),x!==null&&mr(x,m,2),rd(),Mm(m,2)}if(m=jm(l),m===null&&bm(t,r,l,vd,a),m===h)break;h=m}h!==null&&l.stopPropagation()}else bm(t,r,l,null,a)}}function jm(t){return t=Ir(t),Vm(t)}var vd=null;function Vm(t){if(vd=null,t=xt(t),t!==null){var r=c(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===31){if(t=g(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return vd=t,null}function rv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ue()){case be:return 2;case et:return 8;case we:case tt:return 32;case Le:return 268435456;default:return 32}default:return 32}}var Lm=!1,js=null,Vs=null,Ls=null,fc=new Map,mc=new Map,Ps=[],Lw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iv(t,r){switch(t){case"focusin":case"focusout":js=null;break;case"dragenter":case"dragleave":Vs=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":fc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":mc.delete(r.pointerId)}}function gc(t,r,a,l,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},r!==null&&(r=Ht(r),r!==null&&tv(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function Pw(t,r,a,l,h){switch(r){case"focusin":return js=gc(js,t,r,a,l,h),!0;case"dragenter":return Vs=gc(Vs,t,r,a,l,h),!0;case"mouseover":return Ls=gc(Ls,t,r,a,l,h),!0;case"pointerover":var m=h.pointerId;return fc.set(m,gc(fc.get(m)||null,t,r,a,l,h)),!0;case"gotpointercapture":return m=h.pointerId,mc.set(m,gc(mc.get(m)||null,t,r,a,l,h)),!0}return!1}function sv(t){var r=xt(t.target);if(r!==null){var a=c(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,_r(t.priority,function(){nv(a)});return}}else if(r===31){if(r=g(a),r!==null){t.blockedOn=r,_r(t.priority,function(){nv(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bd(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=jm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Rl=l,a.target.dispatchEvent(l),Rl=null}else return r=Ht(a),r!==null&&tv(r),t.blockedOn=a,!1;r.shift()}return!0}function av(t,r,a){bd(t)&&a.delete(r)}function Uw(){Lm=!1,js!==null&&bd(js)&&(js=null),Vs!==null&&bd(Vs)&&(Vs=null),Ls!==null&&bd(Ls)&&(Ls=null),fc.forEach(av),mc.forEach(av)}function Ed(t,r){t.blockedOn===r&&(t.blockedOn=null,Lm||(Lm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Uw)))}var Sd=null;function ov(t){Sd!==t&&(Sd=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Sd===t&&(Sd=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(Vm(l||a)===null)continue;break}var m=Ht(a);m!==null&&(t.splice(r,3),r-=3,jf(m,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Vo(t){function r(z){return Ed(z,t)}js!==null&&Ed(js,t),Vs!==null&&Ed(Vs,t),Ls!==null&&Ed(Ls,t),fc.forEach(r),mc.forEach(r);for(var a=0;a<Ps.length;a++){var l=Ps[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ps.length&&(a=Ps[0],a.blockedOn===null);)sv(a),a.blockedOn===null&&Ps.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],m=a[l+1],v=h[Z]||null;if(typeof m=="function")v||ov(a);else if(v){var x=null;if(m&&m.hasAttribute("formAction")){if(h=m,v=m[Z]||null)x=v.formAction;else if(Vm(h)!==null)continue}else x=v.action;typeof x=="function"?a[l+1]=x:(a.splice(l,3),l-=3),ov(a)}}}function lv(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function r(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),h!==null&&(h(),h=null)}}}function Pm(t){this._internalRoot=t}xd.prototype.render=Pm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=Ar();Z0(a,l,t,r,null,null)},xd.prototype.unmount=Pm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Z0(t.current,2,null,t,null,null),rd(),r[he]=null}};function xd(t){this._internalRoot=t}xd.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ja();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Ps.length&&r!==0&&r<Ps[a].priority;a++);Ps.splice(a,0,t),a===0&&sv(t)}};var cv=e.version;if(cv!=="19.2.3")throw Error(s(527,cv,"19.2.3"));q.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=y(r),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var zw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wd.isDisabled&&wd.supportsFiber)try{Ln=wd.inject(zw),sn=wd}catch{}}return yc.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=p_,m=y_,v=__;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError)),r=X0(t,1,!1,null,null,a,l,null,h,m,v,lv),t[he]=r.current,vm(t),new Pm(r)},yc.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",m=p_,v=y_,x=__,z=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError),a.formState!==void 0&&(z=a.formState)),r=X0(t,1,!0,r,a??null,l,h,z,m,v,x,lv),r.context=J0(null),a=r.current,l=Ar(),l=Ii(l),h=xs(l),h.callback=null,ws(a,h,l),a=l,r.current.lanes=a,Ci(r,a),pi(r),t[he]=r.current,vm(t),new xd(r)},yc.version="19.2.3",yc}var vv;function Kw(){if(vv)return Bm.exports;vv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Bm.exports=Qw(),Bm.exports}var Xw=Kw();var bv="popstate";function Jw(i={}){function e(s,o){let{pathname:c,search:d,hash:g}=s.location;return cg("",{pathname:c,search:d,hash:g},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:kc(o)}return eT(e,n,null,i)}function un(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Fr(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Zw(){return Math.random().toString(36).substring(2,10)}function Ev(i,e){return{usr:i.state,key:i.key,idx:e}}function cg(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?cl(e):e,state:n,key:e&&e.key||s||Zw()}}function kc({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function cl(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function eT(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:c=!1}=s,d=o.history,g="POP",p=null,y=b();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function b(){return(d.state||{idx:null}).idx}function S(){g="POP";let j=b(),W=j==null?null:j-y;y=j,p&&p({action:g,location:P.location,delta:W})}function w(j,W){g="PUSH";let G=cg(P.location,j,W);y=b()+1;let re=Ev(G,y),Ce=P.createHref(G);try{d.pushState(re,"",Ce)}catch(je){if(je instanceof DOMException&&je.name==="DataCloneError")throw je;o.location.assign(Ce)}c&&p&&p({action:g,location:P.location,delta:1})}function O(j,W){g="REPLACE";let G=cg(P.location,j,W);y=b();let re=Ev(G,y),Ce=P.createHref(G);d.replaceState(re,"",Ce),c&&p&&p({action:g,location:P.location,delta:0})}function N(j){return tT(j)}let P={get action(){return g},get location(){return i(o,d)},listen(j){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(bv,S),p=j,()=>{o.removeEventListener(bv,S),p=null}},createHref(j){return e(o,j)},createURL:N,encodeLocation(j){let W=N(j);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:w,replace:O,go(j){return d.go(j)}};return P}function tT(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),un(n,"No window.location.(origin|href) available to create URL");let s=typeof i=="string"?i:kc(i);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function hE(i,e,n="/"){return nT(i,e,n,!1)}function nT(i,e,n,s){let o=typeof e=="string"?cl(e):e,c=es(o.pathname||"/",n);if(c==null)return null;let d=fE(i);rT(d);let g=null;for(let p=0;g==null&&p<d.length;++p){let y=mT(c);g=hT(d[p],y,s)}return g}function fE(i,e=[],n=[],s="",o=!1){let c=(d,g,p=o,y)=>{let b={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:g,route:d};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(s)&&p)return;un(b.relativePath.startsWith(s),`Absolute route path "${b.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(s.length)}let S=Ji([s,b.relativePath]),w=n.concat(b);d.children&&d.children.length>0&&(un(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),fE(d.children,e,w,S,p)),!(d.path==null&&!d.index)&&e.push({path:S,score:uT(S,d.index),routesMeta:w})};return i.forEach((d,g)=>{if(d.path===""||!d.path?.includes("?"))c(d,g);else for(let p of mE(d.path))c(d,g,!0,p)}),e}function mE(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(s.length===0)return o?[c,""]:[c];let d=mE(s.join("/")),g=[];return g.push(...d.map(p=>p===""?c:[c,p].join("/"))),o&&g.push(...d),g.map(p=>i.startsWith("/")&&p===""?"/":p)}function rT(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:dT(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var iT=/^:[\w-]+$/,sT=3,aT=2,oT=1,lT=10,cT=-2,Sv=i=>i==="*";function uT(i,e){let n=i.split("/"),s=n.length;return n.some(Sv)&&(s+=cT),e&&(s+=aT),n.filter(o=>!Sv(o)).reduce((o,c)=>o+(iT.test(c)?sT:c===""?oT:lT),s)}function dT(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function hT(i,e,n=!1){let{routesMeta:s}=i,o={},c="/",d=[];for(let g=0;g<s.length;++g){let p=s[g],y=g===s.length-1,b=c==="/"?e:e.slice(c.length)||"/",S=Qd({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},b),w=p.route;if(!S&&y&&n&&!s[s.length-1].route.index&&(S=Qd({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},b)),!S)return null;Object.assign(o,S.params),d.push({params:o,pathname:Ji([c,S.pathname]),pathnameBase:_T(Ji([c,S.pathnameBase])),route:w}),S.pathnameBase!=="/"&&(c=Ji([c,S.pathnameBase]))}return d}function Qd(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=fT(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:s.reduce((y,{paramName:b,isOptional:S},w)=>{if(b==="*"){let N=g[w]||"";d=c.slice(0,c.length-N.length).replace(/(.)\/+$/,"$1")}const O=g[w];return S&&!O?y[b]=void 0:y[b]=(O||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:d,pattern:i}}function fT(i,e=!1,n=!0){Fr(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,g,p)=>(s.push({paramName:g,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function mT(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fr(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function es(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}var gE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gT=i=>gE.test(i);function pT(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?cl(i):i,c;if(n)if(gT(n))c=n;else{if(n.includes("//")){let d=n;n=n.replace(/\/\/+/g,"/"),Fr(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${n}`)}n.startsWith("/")?c=xv(n.substring(1),"/"):c=xv(n,e)}else c=e;return{pathname:c,search:vT(s),hash:bT(o)}}function xv(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Gm(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function yT(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zg(i){let e=yT(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Bg(i,e,n,s=!1){let o;typeof i=="string"?o=cl(i):(o={...i},un(!o.pathname||!o.pathname.includes("?"),Gm("?","pathname","search",o)),un(!o.pathname||!o.pathname.includes("#"),Gm("#","pathname","hash",o)),un(!o.search||!o.search.includes("#"),Gm("#","search","hash",o)));let c=i===""||o.pathname==="",d=c?"/":o.pathname,g;if(d==null)g=n;else{let S=e.length-1;if(!s&&d.startsWith("..")){let w=d.split("/");for(;w[0]==="..";)w.shift(),S-=1;o.pathname=w.join("/")}g=S>=0?e[S]:"/"}let p=pT(o,g),y=d&&d!=="/"&&d.endsWith("/"),b=(c||d===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(y||b)&&(p.pathname+="/"),p}var Ji=i=>i.join("/").replace(/\/\/+/g,"/"),_T=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),vT=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,bT=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,ET=class{constructor(i,e,n,s=!1){this.status=i,this.statusText=e||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function ST(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function xT(i){return i.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var pE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function yE(i,e){let n=i;if(typeof n!="string"||!gE.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,o=!1;if(pE)try{let c=new URL(window.location.href),d=n.startsWith("//")?new URL(c.protocol+n):new URL(n),g=es(d.pathname,e);d.origin===c.origin&&g!=null?n=g+d.search+d.hash:o=!0}catch{Fr(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var _E=["POST","PUT","PATCH","DELETE"];new Set(_E);var wT=["GET",..._E];new Set(wT);var ul=C.createContext(null);ul.displayName="DataRouter";var vh=C.createContext(null);vh.displayName="DataRouterState";var TT=C.createContext(!1),vE=C.createContext({isTransitioning:!1});vE.displayName="ViewTransition";var AT=C.createContext(new Map);AT.displayName="Fetchers";var CT=C.createContext(null);CT.displayName="Await";var Rr=C.createContext(null);Rr.displayName="Navigation";var Fc=C.createContext(null);Fc.displayName="Location";var ii=C.createContext({outlet:null,matches:[],isDataRoute:!1});ii.displayName="Route";var Fg=C.createContext(null);Fg.displayName="RouteError";var bE="REACT_ROUTER_ERROR",RT="REDIRECT",IT="ROUTE_ERROR_RESPONSE";function DT(i){if(i.startsWith(`${bE}:${RT}:{`))try{let e=JSON.parse(i.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function OT(i){if(i.startsWith(`${bE}:${IT}:{`))try{let e=JSON.parse(i.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new ET(e.status,e.statusText,e.data)}catch{}}function kT(i,{relative:e}={}){un(dl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=C.useContext(Rr),{hash:o,pathname:c,search:d}=Hc(i,{relative:e}),g=c;return n!=="/"&&(g=c==="/"?n:Ji([n,c])),s.createHref({pathname:g,search:d,hash:o})}function dl(){return C.useContext(Fc)!=null}function Hr(){return un(dl(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Fc).location}var EE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function SE(i){C.useContext(Rr).static||C.useLayoutEffect(i)}function Hg(){let{isDataRoute:i}=C.useContext(ii);return i?WT():MT()}function MT(){un(dl(),"useNavigate() may be used only in the context of a <Router> component.");let i=C.useContext(ul),{basename:e,navigator:n}=C.useContext(Rr),{matches:s}=C.useContext(ii),{pathname:o}=Hr(),c=JSON.stringify(zg(s)),d=C.useRef(!1);return SE(()=>{d.current=!0}),C.useCallback((p,y={})=>{if(Fr(d.current,EE),!d.current)return;if(typeof p=="number"){n.go(p);return}let b=Bg(p,JSON.parse(c),o,y.relative==="path");i==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:Ji([e,b.pathname])),(y.replace?n.replace:n.push)(b,y.state,y)},[e,n,c,o,i])}var NT=C.createContext(null);function jT(i){let e=C.useContext(ii).outlet;return C.useMemo(()=>e&&C.createElement(NT.Provider,{value:i},e),[e,i])}function Hc(i,{relative:e}={}){let{matches:n}=C.useContext(ii),{pathname:s}=Hr(),o=JSON.stringify(zg(n));return C.useMemo(()=>Bg(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function VT(i,e){return xE(i,e)}function xE(i,e,n,s,o){un(dl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=C.useContext(Rr),{matches:d}=C.useContext(ii),g=d[d.length-1],p=g?g.params:{},y=g?g.pathname:"/",b=g?g.pathnameBase:"/",S=g&&g.route;{let G=S&&S.path||"";TE(y,!S||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let w=Hr(),O;if(e){let G=typeof e=="string"?cl(e):e;un(b==="/"||G.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${G.pathname}" was given in the \`location\` prop.`),O=G}else O=w;let N=O.pathname||"/",P=N;if(b!=="/"){let G=b.replace(/^\//,"").split("/");P="/"+N.replace(/^\//,"").split("/").slice(G.length).join("/")}let j=hE(i,{pathname:P});Fr(S||j!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),Fr(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let W=BT(j&&j.map(G=>Object.assign({},G,{params:Object.assign({},p,G.params),pathname:Ji([b,c.encodeLocation?c.encodeLocation(G.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?b:Ji([b,c.encodeLocation?c.encodeLocation(G.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathnameBase])})),d,n,s,o);return e&&W?C.createElement(Fc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},W):W}function LT(){let i=$T(),e=ST(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},c={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",i),d=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:c},"ErrorBoundary")," or"," ",C.createElement("code",{style:c},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:o},n):null,d)}var PT=C.createElement(LT,null),wE=class extends C.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const n=OT(i.digest);n&&(i=n)}let e=i!==void 0?C.createElement(ii.Provider,{value:this.props.routeContext},C.createElement(Fg.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?C.createElement(UT,{error:i},e):e}};wE.contextType=TT;var $m=new WeakMap;function UT({children:i,error:e}){let{basename:n}=C.useContext(Rr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=DT(e.digest);if(s){let o=$m.get(e);if(o)throw o;let c=yE(s.location,n);if(pE&&!$m.get(e))if(c.isExternal||s.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:s.replace}));throw $m.set(e,d),d}return C.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return i}function zT({routeContext:i,match:e,children:n}){let s=C.useContext(ul);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(ii.Provider,{value:i},n)}function BT(i,e=[],n=null,s=null,o=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let c=i,d=n?.errors;if(d!=null){let b=c.findIndex(S=>S.route.id&&d?.[S.route.id]!==void 0);un(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,b+1))}let g=!1,p=-1;if(n)for(let b=0;b<c.length;b++){let S=c[b];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(p=b),S.route.id){let{loaderData:w,errors:O}=n,N=S.route.loader&&!w.hasOwnProperty(S.route.id)&&(!O||O[S.route.id]===void 0);if(S.route.lazy||N){g=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}let y=n&&s?(b,S)=>{s(b,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:xT(n.matches),errorInfo:S})}:void 0;return c.reduceRight((b,S,w)=>{let O,N=!1,P=null,j=null;n&&(O=d&&S.route.id?d[S.route.id]:void 0,P=S.route.errorElement||PT,g&&(p<0&&w===0?(TE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,j=null):p===w&&(N=!0,j=S.route.hydrateFallbackElement||null)));let W=e.concat(c.slice(0,w+1)),G=()=>{let re;return O?re=P:N?re=j:S.route.Component?re=C.createElement(S.route.Component,null):S.route.element?re=S.route.element:re=b,C.createElement(zT,{match:S,routeContext:{outlet:b,matches:W,isDataRoute:n!=null},children:re})};return n&&(S.route.ErrorBoundary||S.route.errorElement||w===0)?C.createElement(wE,{location:n.location,revalidation:n.revalidation,component:P,error:O,children:G(),routeContext:{outlet:null,matches:W,isDataRoute:!0},onError:y}):G()},null)}function qg(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FT(i){let e=C.useContext(ul);return un(e,qg(i)),e}function HT(i){let e=C.useContext(vh);return un(e,qg(i)),e}function qT(i){let e=C.useContext(ii);return un(e,qg(i)),e}function Gg(i){let e=qT(i),n=e.matches[e.matches.length-1];return un(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function GT(){return Gg("useRouteId")}function $T(){let i=C.useContext(Fg),e=HT("useRouteError"),n=Gg("useRouteError");return i!==void 0?i:e.errors?.[n]}function WT(){let{router:i}=FT("useNavigate"),e=Gg("useNavigate"),n=C.useRef(!1);return SE(()=>{n.current=!0}),C.useCallback(async(o,c={})=>{Fr(n.current,EE),n.current&&(typeof o=="number"?await i.navigate(o):await i.navigate(o,{fromRouteId:e,...c}))},[i,e])}var wv={};function TE(i,e,n){!e&&!wv[i]&&(wv[i]=!0,Fr(!1,n))}C.memo(YT);function YT({routes:i,future:e,state:n,onError:s}){return xE(i,void 0,n,s,e)}function AE({to:i,replace:e,state:n,relative:s}){un(dl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=C.useContext(Rr);Fr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=C.useContext(ii),{pathname:d}=Hr(),g=Hg(),p=Bg(i,zg(c),d,s==="path"),y=JSON.stringify(p);return C.useEffect(()=>{g(JSON.parse(y),{replace:e,state:n,relative:s})},[g,y,s,e,n]),null}function $g(i){return jT(i.context)}function ar(i){un(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function QT({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:c=!1,unstable_useTransitions:d}){un(!dl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=i.replace(/^\/*/,"/"),p=C.useMemo(()=>({basename:g,navigator:o,static:c,unstable_useTransitions:d,future:{}}),[g,o,c,d]);typeof n=="string"&&(n=cl(n));let{pathname:y="/",search:b="",hash:S="",state:w=null,key:O="default"}=n,N=C.useMemo(()=>{let P=es(y,g);return P==null?null:{location:{pathname:P,search:b,hash:S,state:w,key:O},navigationType:s}},[g,y,b,S,w,O,s]);return Fr(N!=null,`<Router basename="${g}"> is not able to match the URL "${y}${b}${S}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:C.createElement(Rr.Provider,{value:p},C.createElement(Fc.Provider,{children:e,value:N}))}function KT({children:i,location:e}){return VT(ug(i),e)}function ug(i,e=[]){let n=[];return C.Children.forEach(i,(s,o)=>{if(!C.isValidElement(s))return;let c=[...e,o];if(s.type===C.Fragment){n.push.apply(n,ug(s.props.children,c));return}un(s.type===ar,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),un(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=ug(s.props.children,c)),n.push(d)}),n}var Ld="get",Pd="application/x-www-form-urlencoded";function bh(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function XT(i){return bh(i)&&i.tagName.toLowerCase()==="button"}function JT(i){return bh(i)&&i.tagName.toLowerCase()==="form"}function ZT(i){return bh(i)&&i.tagName.toLowerCase()==="input"}function eA(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function tA(i,e){return i.button===0&&(!e||e==="_self")&&!eA(i)}var Td=null;function nA(){if(Td===null)try{new FormData(document.createElement("form"),0),Td=!1}catch{Td=!0}return Td}var rA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Wm(i){return i!=null&&!rA.has(i)?(Fr(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Pd}"`),null):i}function iA(i,e){let n,s,o,c,d;if(JT(i)){let g=i.getAttribute("action");s=g?es(g,e):null,n=i.getAttribute("method")||Ld,o=Wm(i.getAttribute("enctype"))||Pd,c=new FormData(i)}else if(XT(i)||ZT(i)&&(i.type==="submit"||i.type==="image")){let g=i.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||g.getAttribute("action");if(s=p?es(p,e):null,n=i.getAttribute("formmethod")||g.getAttribute("method")||Ld,o=Wm(i.getAttribute("formenctype"))||Wm(g.getAttribute("enctype"))||Pd,c=new FormData(g,i),!nA()){let{name:y,type:b,value:S}=i;if(b==="image"){let w=y?`${y}.`:"";c.append(`${w}x`,"0"),c.append(`${w}y`,"0")}else y&&c.append(y,S)}}else{if(bh(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ld,s=null,o=Pd,d=i}return c&&o==="text/plain"&&(d=c,c=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Wg(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function sA(i,e,n){let s=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&es(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function aA(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oA(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function lA(i,e,n){let s=await Promise.all(i.map(async o=>{let c=e.routes[o.route.id];if(c){let d=await aA(c,n);return d.links?d.links():[]}return[]}));return hA(s.flat(1).filter(oA).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Tv(i,e,n,s,o,c){let d=(p,y)=>n[y]?p.route.id!==n[y].route.id:!0,g=(p,y)=>n[y].pathname!==p.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==p.params["*"];return c==="assets"?e.filter((p,y)=>d(p,y)||g(p,y)):c==="data"?e.filter((p,y)=>{let b=s.routes[p.route.id];if(!b||!b.hasLoader)return!1;if(d(p,y)||g(p,y))return!0;if(p.route.shouldRevalidate){let S=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function cA(i,e,{includeHydrateFallback:n}={}){return uA(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function uA(i){return[...new Set(i)]}function dA(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function hA(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let c=JSON.stringify(dA(o));return n.has(c)||(n.add(c),s.push({key:c,link:o})),s},[])}function CE(){let i=C.useContext(ul);return Wg(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function fA(){let i=C.useContext(vh);return Wg(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Yg=C.createContext(void 0);Yg.displayName="FrameworkContext";function RE(){let i=C.useContext(Yg);return Wg(i,"You must render this element inside a <HydratedRouter> element"),i}function mA(i,e){let n=C.useContext(Yg),[s,o]=C.useState(!1),[c,d]=C.useState(!1),{onFocus:g,onBlur:p,onMouseEnter:y,onMouseLeave:b,onTouchStart:S}=e,w=C.useRef(null);C.useEffect(()=>{if(i==="render"&&d(!0),i==="viewport"){let P=W=>{W.forEach(G=>{d(G.isIntersecting)})},j=new IntersectionObserver(P,{threshold:.5});return w.current&&j.observe(w.current),()=>{j.disconnect()}}},[i]),C.useEffect(()=>{if(s){let P=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(P)}}},[s]);let O=()=>{o(!0)},N=()=>{o(!1),d(!1)};return n?i!=="intent"?[c,w,{}]:[c,w,{onFocus:_c(g,O),onBlur:_c(p,N),onMouseEnter:_c(y,O),onMouseLeave:_c(b,N),onTouchStart:_c(S,O)}]:[!1,w,{}]}function _c(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function gA({page:i,...e}){let{router:n}=CE(),s=C.useMemo(()=>hE(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?C.createElement(yA,{page:i,matches:s,...e}):null}function pA(i){let{manifest:e,routeModules:n}=RE(),[s,o]=C.useState([]);return C.useEffect(()=>{let c=!1;return lA(i,e,n).then(d=>{c||o(d)}),()=>{c=!0}},[i,e,n]),s}function yA({page:i,matches:e,...n}){let s=Hr(),{manifest:o,routeModules:c}=RE(),{basename:d}=CE(),{loaderData:g,matches:p}=fA(),y=C.useMemo(()=>Tv(i,e,p,o,s,"data"),[i,e,p,o,s]),b=C.useMemo(()=>Tv(i,e,p,o,s,"assets"),[i,e,p,o,s]),S=C.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let N=new Set,P=!1;if(e.forEach(W=>{let G=o.routes[W.route.id];!G||!G.hasLoader||(!y.some(re=>re.route.id===W.route.id)&&W.route.id in g&&c[W.route.id]?.shouldRevalidate||G.hasClientLoader?P=!0:N.add(W.route.id))}),N.size===0)return[];let j=sA(i,d,"data");return P&&N.size>0&&j.searchParams.set("_routes",e.filter(W=>N.has(W.route.id)).map(W=>W.route.id).join(",")),[j.pathname+j.search]},[d,g,s,o,y,e,i,c]),w=C.useMemo(()=>cA(b,o),[b,o]),O=pA(b);return C.createElement(C.Fragment,null,S.map(N=>C.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...n})),w.map(N=>C.createElement("link",{key:N,rel:"modulepreload",href:N,...n})),O.map(({key:N,link:P})=>C.createElement("link",{key:N,nonce:n.nonce,...P})))}function _A(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var vA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vA&&(window.__reactRouterVersion="7.11.0")}catch{}function bA({basename:i,children:e,unstable_useTransitions:n,window:s}){let o=C.useRef();o.current==null&&(o.current=Jw({window:s,v5Compat:!0}));let c=o.current,[d,g]=C.useState({action:c.action,location:c.location}),p=C.useCallback(y=>{n===!1?g(y):C.startTransition(()=>g(y))},[n]);return C.useLayoutEffect(()=>c.listen(p),[c,p]),C.createElement(QT,{basename:i,children:e,location:d.location,navigationType:d.action,navigator:c,unstable_useTransitions:n})}var IE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hn=C.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:c,replace:d,state:g,target:p,to:y,preventScrollReset:b,viewTransition:S,unstable_defaultShouldRevalidate:w,...O},N){let{basename:P,unstable_useTransitions:j}=C.useContext(Rr),W=typeof y=="string"&&IE.test(y),G=yE(y,P);y=G.to;let re=kT(y,{relative:o}),[Ce,je,xe]=mA(s,O),R=wA(y,{replace:d,state:g,target:p,preventScrollReset:b,relative:o,viewTransition:S,unstable_defaultShouldRevalidate:w,unstable_useTransitions:j});function A(V){e&&e(V),V.defaultPrevented||R(V)}let I=C.createElement("a",{...O,...xe,href:G.absoluteURL||re,onClick:G.isExternal||c?e:A,ref:_A(N,je),target:p,"data-discover":!W&&n==="render"?"true":void 0});return Ce&&!W?C.createElement(C.Fragment,null,I,C.createElement(gA,{page:re})):I});hn.displayName="Link";var EA=C.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:c,to:d,viewTransition:g,children:p,...y},b){let S=Hc(d,{relative:y.relative}),w=Hr(),O=C.useContext(vh),{navigator:N,basename:P}=C.useContext(Rr),j=O!=null&&IA(S)&&g===!0,W=N.encodeLocation?N.encodeLocation(S).pathname:S.pathname,G=w.pathname,re=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(G=G.toLowerCase(),re=re?re.toLowerCase():null,W=W.toLowerCase()),re&&P&&(re=es(re,P)||re);const Ce=W!=="/"&&W.endsWith("/")?W.length-1:W.length;let je=G===W||!o&&G.startsWith(W)&&G.charAt(Ce)==="/",xe=re!=null&&(re===W||!o&&re.startsWith(W)&&re.charAt(W.length)==="/"),R={isActive:je,isPending:xe,isTransitioning:j},A=je?e:void 0,I;typeof s=="function"?I=s(R):I=[s,je?"active":null,xe?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let V=typeof c=="function"?c(R):c;return C.createElement(hn,{...y,"aria-current":A,className:I,ref:b,style:V,to:d,viewTransition:g},typeof p=="function"?p(R):p)});EA.displayName="NavLink";var SA=C.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:c,method:d=Ld,action:g,onSubmit:p,relative:y,preventScrollReset:b,viewTransition:S,unstable_defaultShouldRevalidate:w,...O},N)=>{let{unstable_useTransitions:P}=C.useContext(Rr),j=CA(),W=RA(g,{relative:y}),G=d.toLowerCase()==="get"?"get":"post",re=typeof g=="string"&&IE.test(g),Ce=je=>{if(p&&p(je),je.defaultPrevented)return;je.preventDefault();let xe=je.nativeEvent.submitter,R=xe?.getAttribute("formmethod")||d,A=()=>j(xe||je.currentTarget,{fetcherKey:e,method:R,navigate:n,replace:o,state:c,relative:y,preventScrollReset:b,viewTransition:S,unstable_defaultShouldRevalidate:w});P&&n!==!1?C.startTransition(()=>A()):A()};return C.createElement("form",{ref:N,method:G,action:W,onSubmit:s?p:Ce,...O,"data-discover":!re&&i==="render"?"true":void 0})});SA.displayName="Form";function xA(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DE(i){let e=C.useContext(ul);return un(e,xA(i)),e}function wA(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:g,unstable_useTransitions:p}={}){let y=Hg(),b=Hr(),S=Hc(i,{relative:c});return C.useCallback(w=>{if(tA(w,e)){w.preventDefault();let O=n!==void 0?n:kc(b)===kc(S),N=()=>y(i,{replace:O,state:s,preventScrollReset:o,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:g});p?C.startTransition(()=>N()):N()}},[b,y,S,n,s,e,i,o,c,d,g,p])}var TA=0,AA=()=>`__${String(++TA)}__`;function CA(){let{router:i}=DE("useSubmit"),{basename:e}=C.useContext(Rr),n=GT(),s=i.fetch,o=i.navigate;return C.useCallback(async(c,d={})=>{let{action:g,method:p,encType:y,formData:b,body:S}=iA(c,e);if(d.navigate===!1){let w=d.fetcherKey||AA();await s(w,n,d.action||g,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:b,body:S,formMethod:d.method||p,formEncType:d.encType||y,flushSync:d.flushSync})}else await o(d.action||g,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:b,body:S,formMethod:d.method||p,formEncType:d.encType||y,replace:d.replace,state:d.state,fromRouteId:n,flushSync:d.flushSync,viewTransition:d.viewTransition})},[s,o,e,n])}function RA(i,{relative:e}={}){let{basename:n}=C.useContext(Rr),s=C.useContext(ii);un(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),c={...Hc(i||".",{relative:e})},d=Hr();if(i==null){c.search=d.search;let g=new URLSearchParams(c.search),p=g.getAll("index");if(p.some(b=>b==="")){g.delete("index"),p.filter(S=>S).forEach(S=>g.append("index",S));let b=g.toString();c.search=b?`?${b}`:""}}return(!i||i===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:Ji([n,c.pathname])),kc(c)}function IA(i,{relative:e}={}){let n=C.useContext(vE);un(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=DE("useViewTransitionState"),o=Hc(i,{relative:e});if(!n.isTransitioning)return!1;let c=es(n.currentLocation.pathname,s)||n.currentLocation.pathname,d=es(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Qd(o.pathname,d)!=null||Qd(o.pathname,c)!=null}const DA=function(){},OA={is_logged_in:!1,is_auth_checked:!1,username:"",set_user_context:DA},qc=C.createContext(OA),kA=()=>{};var Av={};const OE=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},MA=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[n++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[n++],d=i[n++],g=i[n++],p=((o&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const c=i[n++],d=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},kE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const c=i[o],d=o+1<i.length,g=d?i[o+1]:0,p=o+2<i.length,y=p?i[o+2]:0,b=c>>2,S=(c&3)<<4|g>>4;let w=(g&15)<<2|y>>6,O=y&63;p||(O=64,d||(w=64)),s.push(n[b],n[S],n[w],n[O])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(OE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):MA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const c=n[i.charAt(o++)],g=o<i.length?n[i.charAt(o)]:0;++o;const y=o<i.length?n[i.charAt(o)]:64;++o;const S=o<i.length?n[i.charAt(o)]:64;if(++o,c==null||g==null||y==null||S==null)throw new NA;const w=c<<2|g>>4;if(s.push(w),y!==64){const O=g<<4&240|y>>2;if(s.push(O),S!==64){const N=y<<6&192|S;s.push(N)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class NA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jA=function(i){const e=OE(i);return kE.encodeByteArray(e,!0)},Kd=function(i){return jA(i).replace(/\./g,"")},ME=function(i){try{return kE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function VA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const LA=()=>VA().__FIREBASE_DEFAULTS__,PA=()=>{if(typeof process>"u"||typeof Av>"u")return;const i=Av.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},UA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&ME(i[1]);return e&&JSON.parse(e)},Eh=()=>{try{return kA()||LA()||PA()||UA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},NE=i=>Eh()?.emulatorHosts?.[i],zA=i=>{const e=NE(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},jE=()=>Eh()?.config,VE=i=>Eh()?.[`_${i}`];class BA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function hl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function LE(i){return(await fetch(i,{credentials:"include"})).ok}function FA(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Kd(JSON.stringify(n)),Kd(JSON.stringify(d)),""].join(".")}const Ac={};function HA(){const i={prod:[],emulator:[]};for(const e of Object.keys(Ac))Ac[e]?i.emulator.push(e):i.prod.push(e);return i}function qA(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Cv=!1;function PE(i,e){if(typeof window>"u"||typeof document>"u"||!hl(window.location.host)||Ac[i]===e||Ac[i]||Cv)return;Ac[i]=e;function n(w){return`__firebase__banner__${w}`}const s="__firebase__banner",c=HA().prod.length>0;function d(){const w=document.getElementById(s);w&&w.remove()}function g(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function p(w,O){w.setAttribute("width","24"),w.setAttribute("id",O),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function y(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{Cv=!0,d()},w}function b(w,O){w.setAttribute("id",O),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function S(){const w=qA(s),O=n("text"),N=document.getElementById(O)||document.createElement("span"),P=n("learnmore"),j=document.getElementById(P)||document.createElement("a"),W=n("preprendIcon"),G=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const re=w.element;g(re),b(j,P);const Ce=y();p(G,W),re.append(G,N,j,Ce),document.body.appendChild(re)}c?(N.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}function nr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nr())}function $A(){const i=Eh()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YA(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function QA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KA(){const i=nr();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function XA(){return!$A()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JA(){try{return typeof indexedDB=="object"}catch{return!1}}function ZA(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const eC="FirebaseError";class as extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=eC,Object.setPrototypeOf(this,as.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gc.prototype.create)}}class Gc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?tC(c,s):"Error",g=`${this.serviceName}: ${d} (${o}).`;return new as(o,g,s)}}function tC(i,e){return i.replace(nC,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const nC=/\{\$([^}]+)}/g;function rC(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Js(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const c=i[o],d=e[o];if(Rv(c)&&Rv(d)){if(!Js(c,d))return!1}else if(c!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Rv(i){return i!==null&&typeof i=="object"}function $c(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function bc(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,c]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Ec(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function iC(i,e){const n=new sC(i,e);return n.subscribe.bind(n)}class sC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");aC(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Ym),o.error===void 0&&(o.error=Ym),o.complete===void 0&&(o.complete=Ym);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aC(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Ym(){}function zn(i){return i&&i._delegate?i._delegate:i}class za{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ja="[DEFAULT]";class oC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new BA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cC(e))try{this.getOrInitializeService({instanceIdentifier:ja})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=ja){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ja){return this.instances.has(e)}getOptions(e=ja){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);s===g&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:lC(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ja){return this.component?this.component.multipleInstances?e:ja:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lC(i){return i===ja?void 0:i}function cC(i){return i.instantiationMode==="EAGER"}class uC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new oC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var At;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(At||(At={}));const dC={debug:At.DEBUG,verbose:At.VERBOSE,info:At.INFO,warn:At.WARN,error:At.ERROR,silent:At.SILENT},hC=At.INFO,fC={[At.DEBUG]:"log",[At.VERBOSE]:"log",[At.INFO]:"info",[At.WARN]:"warn",[At.ERROR]:"error"},mC=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=fC[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qg{constructor(e){this.name=e,this._logLevel=hC,this._logHandler=mC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in At))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,At.DEBUG,...e),this._logHandler(this,At.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,At.VERBOSE,...e),this._logHandler(this,At.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,At.INFO,...e),this._logHandler(this,At.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,At.WARN,...e),this._logHandler(this,At.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,At.ERROR,...e),this._logHandler(this,At.ERROR,...e)}}const gC=(i,e)=>e.some(n=>i instanceof n);let Iv,Dv;function pC(){return Iv||(Iv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yC(){return Dv||(Dv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const UE=new WeakMap,dg=new WeakMap,zE=new WeakMap,Qm=new WeakMap,Kg=new WeakMap;function _C(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",d)},c=()=>{n($s(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&UE.set(n,i)}).catch(()=>{}),Kg.set(e,i),e}function vC(i){if(dg.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",d),i.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",d),i.addEventListener("abort",d)});dg.set(i,e)}let hg={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return dg.get(i);if(e==="objectStoreNames")return i.objectStoreNames||zE.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $s(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function bC(i){hg=i(hg)}function EC(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Km(this),e,...n);return zE.set(s,e.sort?e.sort():[e]),$s(s)}:yC().includes(i)?function(...e){return i.apply(Km(this),e),$s(UE.get(this))}:function(...e){return $s(i.apply(Km(this),e))}}function SC(i){return typeof i=="function"?EC(i):(i instanceof IDBTransaction&&vC(i),gC(i,pC())?new Proxy(i,hg):i)}function $s(i){if(i instanceof IDBRequest)return _C(i);if(Qm.has(i))return Qm.get(i);const e=SC(i);return e!==i&&(Qm.set(i,e),Kg.set(e,i)),e}const Km=i=>Kg.get(i);function xC(i,e,{blocked:n,upgrade:s,blocking:o,terminated:c}={}){const d=indexedDB.open(i,e),g=$s(d);return s&&d.addEventListener("upgradeneeded",p=>{s($s(d.result),p.oldVersion,p.newVersion,$s(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const wC=["get","getKey","getAll","getAllKeys","count"],TC=["put","add","delete","clear"],Xm=new Map;function Ov(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Xm.get(e))return Xm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=TC.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||wC.includes(n)))return;const c=async function(d,...g){const p=this.transaction(d,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(g.shift())),(await Promise.all([y[n](...g),o&&p.done]))[0]};return Xm.set(e,c),c}bC(i=>({...i,get:(e,n,s)=>Ov(e,n)||i.get(e,n,s),has:(e,n)=>!!Ov(e,n)||i.has(e,n)}));class AC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(CC(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function CC(i){return i.getComponent()?.type==="VERSION"}const fg="@firebase/app",kv="0.14.6";const ts=new Qg("@firebase/app"),RC="@firebase/app-compat",IC="@firebase/analytics-compat",DC="@firebase/analytics",OC="@firebase/app-check-compat",kC="@firebase/app-check",MC="@firebase/auth",NC="@firebase/auth-compat",jC="@firebase/database",VC="@firebase/data-connect",LC="@firebase/database-compat",PC="@firebase/functions",UC="@firebase/functions-compat",zC="@firebase/installations",BC="@firebase/installations-compat",FC="@firebase/messaging",HC="@firebase/messaging-compat",qC="@firebase/performance",GC="@firebase/performance-compat",$C="@firebase/remote-config",WC="@firebase/remote-config-compat",YC="@firebase/storage",QC="@firebase/storage-compat",KC="@firebase/firestore",XC="@firebase/ai",JC="@firebase/firestore-compat",ZC="firebase",eR="12.6.0";const mg="[DEFAULT]",tR={[fg]:"fire-core",[RC]:"fire-core-compat",[DC]:"fire-analytics",[IC]:"fire-analytics-compat",[kC]:"fire-app-check",[OC]:"fire-app-check-compat",[MC]:"fire-auth",[NC]:"fire-auth-compat",[jC]:"fire-rtdb",[VC]:"fire-data-connect",[LC]:"fire-rtdb-compat",[PC]:"fire-fn",[UC]:"fire-fn-compat",[zC]:"fire-iid",[BC]:"fire-iid-compat",[FC]:"fire-fcm",[HC]:"fire-fcm-compat",[qC]:"fire-perf",[GC]:"fire-perf-compat",[$C]:"fire-rc",[WC]:"fire-rc-compat",[YC]:"fire-gcs",[QC]:"fire-gcs-compat",[KC]:"fire-fst",[JC]:"fire-fst-compat",[XC]:"fire-vertex","fire-js":"fire-js",[ZC]:"fire-js-all"};const Xd=new Map,nR=new Map,gg=new Map;function Mv(i,e){try{i.container.addComponent(e)}catch(n){ts.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Jo(i){const e=i.name;if(gg.has(e))return ts.debug(`There were multiple attempts to register component ${e}.`),!1;gg.set(e,i);for(const n of Xd.values())Mv(n,i);for(const n of nR.values())Mv(n,i);return!0}function Xg(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function ei(i){return i==null?!1:i.settings!==void 0}const rR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ws=new Gc("app","Firebase",rR);class iR{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new za("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ws.create("app-deleted",{appName:this._name})}}const fl=eR;function BE(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:mg,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Ws.create("bad-app-name",{appName:String(o)});if(n||(n=jE()),!n)throw Ws.create("no-options");const c=Xd.get(o);if(c){if(Js(n,c.options)&&Js(s,c.config))return c;throw Ws.create("duplicate-app",{appName:o})}const d=new uC(o);for(const p of gg.values())d.addComponent(p);const g=new iR(n,s,d);return Xd.set(o,g),g}function FE(i=mg){const e=Xd.get(i);if(!e&&i===mg&&jE())return BE();if(!e)throw Ws.create("no-app",{appName:i});return e}function Ys(i,e,n){let s=tR[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ts.warn(d.join(" "));return}Jo(new za(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const sR="firebase-heartbeat-database",aR=1,Mc="firebase-heartbeat-store";let Jm=null;function HE(){return Jm||(Jm=xC(sR,aR,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Mc)}catch(n){console.warn(n)}}}}).catch(i=>{throw Ws.create("idb-open",{originalErrorMessage:i.message})})),Jm}async function oR(i){try{const n=(await HE()).transaction(Mc),s=await n.objectStore(Mc).get(qE(i));return await n.done,s}catch(e){if(e instanceof as)ts.warn(e.message);else{const n=Ws.create("idb-get",{originalErrorMessage:e?.message});ts.warn(n.message)}}}async function Nv(i,e){try{const s=(await HE()).transaction(Mc,"readwrite");await s.objectStore(Mc).put(e,qE(i)),await s.done}catch(n){if(n instanceof as)ts.warn(n.message);else{const s=Ws.create("idb-set",{originalErrorMessage:n?.message});ts.warn(s.message)}}}function qE(i){return`${i.name}!${i.options.appId}`}const lR=1024,cR=30;class uR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=jv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>cR){const o=fR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ts.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=jv(),{heartbeatsToSend:n,unsentEntries:s}=dR(this._heartbeatsCache.heartbeats),o=Kd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ts.warn(e),""}}}function jv(){return new Date().toISOString().substring(0,10)}function dR(i,e=lR){const n=[];let s=i.slice();for(const o of i){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),Vv(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Vv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class hR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JA()?ZA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await oR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Nv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Nv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Vv(i){return Kd(JSON.stringify({version:2,heartbeats:i})).length}function fR(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}function mR(i){Jo(new za("platform-logger",e=>new AC(e),"PRIVATE")),Jo(new za("heartbeat",e=>new uR(e),"PRIVATE")),Ys(fg,kv,i),Ys(fg,kv,"esm2020"),Ys("fire-js","")}mR("");var Lv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Qs,GE;(function(){var i;function e(R,A){function I(){}I.prototype=A.prototype,R.F=A.prototype,R.prototype=new I,R.prototype.constructor=R,R.D=function(V,U,F){for(var k=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)k[rt-2]=arguments[rt];return A.prototype[U].apply(V,k)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,A,I){I||(I=0);const V=Array(16);if(typeof A=="string")for(var U=0;U<16;++U)V[U]=A.charCodeAt(I++)|A.charCodeAt(I++)<<8|A.charCodeAt(I++)<<16|A.charCodeAt(I++)<<24;else for(U=0;U<16;++U)V[U]=A[I++]|A[I++]<<8|A[I++]<<16|A[I++]<<24;A=R.g[0],I=R.g[1],U=R.g[2];let F=R.g[3],k;k=A+(F^I&(U^F))+V[0]+3614090360&4294967295,A=I+(k<<7&4294967295|k>>>25),k=F+(U^A&(I^U))+V[1]+3905402710&4294967295,F=A+(k<<12&4294967295|k>>>20),k=U+(I^F&(A^I))+V[2]+606105819&4294967295,U=F+(k<<17&4294967295|k>>>15),k=I+(A^U&(F^A))+V[3]+3250441966&4294967295,I=U+(k<<22&4294967295|k>>>10),k=A+(F^I&(U^F))+V[4]+4118548399&4294967295,A=I+(k<<7&4294967295|k>>>25),k=F+(U^A&(I^U))+V[5]+1200080426&4294967295,F=A+(k<<12&4294967295|k>>>20),k=U+(I^F&(A^I))+V[6]+2821735955&4294967295,U=F+(k<<17&4294967295|k>>>15),k=I+(A^U&(F^A))+V[7]+4249261313&4294967295,I=U+(k<<22&4294967295|k>>>10),k=A+(F^I&(U^F))+V[8]+1770035416&4294967295,A=I+(k<<7&4294967295|k>>>25),k=F+(U^A&(I^U))+V[9]+2336552879&4294967295,F=A+(k<<12&4294967295|k>>>20),k=U+(I^F&(A^I))+V[10]+4294925233&4294967295,U=F+(k<<17&4294967295|k>>>15),k=I+(A^U&(F^A))+V[11]+2304563134&4294967295,I=U+(k<<22&4294967295|k>>>10),k=A+(F^I&(U^F))+V[12]+1804603682&4294967295,A=I+(k<<7&4294967295|k>>>25),k=F+(U^A&(I^U))+V[13]+4254626195&4294967295,F=A+(k<<12&4294967295|k>>>20),k=U+(I^F&(A^I))+V[14]+2792965006&4294967295,U=F+(k<<17&4294967295|k>>>15),k=I+(A^U&(F^A))+V[15]+1236535329&4294967295,I=U+(k<<22&4294967295|k>>>10),k=A+(U^F&(I^U))+V[1]+4129170786&4294967295,A=I+(k<<5&4294967295|k>>>27),k=F+(I^U&(A^I))+V[6]+3225465664&4294967295,F=A+(k<<9&4294967295|k>>>23),k=U+(A^I&(F^A))+V[11]+643717713&4294967295,U=F+(k<<14&4294967295|k>>>18),k=I+(F^A&(U^F))+V[0]+3921069994&4294967295,I=U+(k<<20&4294967295|k>>>12),k=A+(U^F&(I^U))+V[5]+3593408605&4294967295,A=I+(k<<5&4294967295|k>>>27),k=F+(I^U&(A^I))+V[10]+38016083&4294967295,F=A+(k<<9&4294967295|k>>>23),k=U+(A^I&(F^A))+V[15]+3634488961&4294967295,U=F+(k<<14&4294967295|k>>>18),k=I+(F^A&(U^F))+V[4]+3889429448&4294967295,I=U+(k<<20&4294967295|k>>>12),k=A+(U^F&(I^U))+V[9]+568446438&4294967295,A=I+(k<<5&4294967295|k>>>27),k=F+(I^U&(A^I))+V[14]+3275163606&4294967295,F=A+(k<<9&4294967295|k>>>23),k=U+(A^I&(F^A))+V[3]+4107603335&4294967295,U=F+(k<<14&4294967295|k>>>18),k=I+(F^A&(U^F))+V[8]+1163531501&4294967295,I=U+(k<<20&4294967295|k>>>12),k=A+(U^F&(I^U))+V[13]+2850285829&4294967295,A=I+(k<<5&4294967295|k>>>27),k=F+(I^U&(A^I))+V[2]+4243563512&4294967295,F=A+(k<<9&4294967295|k>>>23),k=U+(A^I&(F^A))+V[7]+1735328473&4294967295,U=F+(k<<14&4294967295|k>>>18),k=I+(F^A&(U^F))+V[12]+2368359562&4294967295,I=U+(k<<20&4294967295|k>>>12),k=A+(I^U^F)+V[5]+4294588738&4294967295,A=I+(k<<4&4294967295|k>>>28),k=F+(A^I^U)+V[8]+2272392833&4294967295,F=A+(k<<11&4294967295|k>>>21),k=U+(F^A^I)+V[11]+1839030562&4294967295,U=F+(k<<16&4294967295|k>>>16),k=I+(U^F^A)+V[14]+4259657740&4294967295,I=U+(k<<23&4294967295|k>>>9),k=A+(I^U^F)+V[1]+2763975236&4294967295,A=I+(k<<4&4294967295|k>>>28),k=F+(A^I^U)+V[4]+1272893353&4294967295,F=A+(k<<11&4294967295|k>>>21),k=U+(F^A^I)+V[7]+4139469664&4294967295,U=F+(k<<16&4294967295|k>>>16),k=I+(U^F^A)+V[10]+3200236656&4294967295,I=U+(k<<23&4294967295|k>>>9),k=A+(I^U^F)+V[13]+681279174&4294967295,A=I+(k<<4&4294967295|k>>>28),k=F+(A^I^U)+V[0]+3936430074&4294967295,F=A+(k<<11&4294967295|k>>>21),k=U+(F^A^I)+V[3]+3572445317&4294967295,U=F+(k<<16&4294967295|k>>>16),k=I+(U^F^A)+V[6]+76029189&4294967295,I=U+(k<<23&4294967295|k>>>9),k=A+(I^U^F)+V[9]+3654602809&4294967295,A=I+(k<<4&4294967295|k>>>28),k=F+(A^I^U)+V[12]+3873151461&4294967295,F=A+(k<<11&4294967295|k>>>21),k=U+(F^A^I)+V[15]+530742520&4294967295,U=F+(k<<16&4294967295|k>>>16),k=I+(U^F^A)+V[2]+3299628645&4294967295,I=U+(k<<23&4294967295|k>>>9),k=A+(U^(I|~F))+V[0]+4096336452&4294967295,A=I+(k<<6&4294967295|k>>>26),k=F+(I^(A|~U))+V[7]+1126891415&4294967295,F=A+(k<<10&4294967295|k>>>22),k=U+(A^(F|~I))+V[14]+2878612391&4294967295,U=F+(k<<15&4294967295|k>>>17),k=I+(F^(U|~A))+V[5]+4237533241&4294967295,I=U+(k<<21&4294967295|k>>>11),k=A+(U^(I|~F))+V[12]+1700485571&4294967295,A=I+(k<<6&4294967295|k>>>26),k=F+(I^(A|~U))+V[3]+2399980690&4294967295,F=A+(k<<10&4294967295|k>>>22),k=U+(A^(F|~I))+V[10]+4293915773&4294967295,U=F+(k<<15&4294967295|k>>>17),k=I+(F^(U|~A))+V[1]+2240044497&4294967295,I=U+(k<<21&4294967295|k>>>11),k=A+(U^(I|~F))+V[8]+1873313359&4294967295,A=I+(k<<6&4294967295|k>>>26),k=F+(I^(A|~U))+V[15]+4264355552&4294967295,F=A+(k<<10&4294967295|k>>>22),k=U+(A^(F|~I))+V[6]+2734768916&4294967295,U=F+(k<<15&4294967295|k>>>17),k=I+(F^(U|~A))+V[13]+1309151649&4294967295,I=U+(k<<21&4294967295|k>>>11),k=A+(U^(I|~F))+V[4]+4149444226&4294967295,A=I+(k<<6&4294967295|k>>>26),k=F+(I^(A|~U))+V[11]+3174756917&4294967295,F=A+(k<<10&4294967295|k>>>22),k=U+(A^(F|~I))+V[2]+718787259&4294967295,U=F+(k<<15&4294967295|k>>>17),k=I+(F^(U|~A))+V[9]+3951481745&4294967295,R.g[0]=R.g[0]+A&4294967295,R.g[1]=R.g[1]+(U+(k<<21&4294967295|k>>>11))&4294967295,R.g[2]=R.g[2]+U&4294967295,R.g[3]=R.g[3]+F&4294967295}s.prototype.v=function(R,A){A===void 0&&(A=R.length);const I=A-this.blockSize,V=this.C;let U=this.h,F=0;for(;F<A;){if(U==0)for(;F<=I;)o(this,R,F),F+=this.blockSize;if(typeof R=="string"){for(;F<A;)if(V[U++]=R.charCodeAt(F++),U==this.blockSize){o(this,V),U=0;break}}else for(;F<A;)if(V[U++]=R[F++],U==this.blockSize){o(this,V),U=0;break}}this.h=U,this.o+=A},s.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var A=1;A<R.length-8;++A)R[A]=0;A=this.o*8;for(var I=R.length-8;I<R.length;++I)R[I]=A&255,A/=256;for(this.v(R),R=Array(16),A=0,I=0;I<4;++I)for(let V=0;V<32;V+=8)R[A++]=this.g[I]>>>V&255;return R};function c(R,A){var I=g;return Object.prototype.hasOwnProperty.call(I,R)?I[R]:I[R]=A(R)}function d(R,A){this.h=A;const I=[];let V=!0;for(let U=R.length-1;U>=0;U--){const F=R[U]|0;V&&F==A||(I[U]=F,V=!1)}this.g=I}var g={};function p(R){return-128<=R&&R<128?c(R,function(A){return new d([A|0],A<0?-1:0)}):new d([R|0],R<0?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return S;if(R<0)return j(y(-R));const A=[];let I=1;for(let V=0;R>=I;V++)A[V]=R/I|0,I*=4294967296;return new d(A,0)}function b(R,A){if(R.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(R.charAt(0)=="-")return j(b(R.substring(1),A));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=y(Math.pow(A,8));let V=S;for(let F=0;F<R.length;F+=8){var U=Math.min(8,R.length-F);const k=parseInt(R.substring(F,F+U),A);U<8?(U=y(Math.pow(A,U)),V=V.j(U).add(y(k))):(V=V.j(I),V=V.add(y(k)))}return V}var S=p(0),w=p(1),O=p(16777216);i=d.prototype,i.m=function(){if(P(this))return-j(this).m();let R=0,A=1;for(let I=0;I<this.g.length;I++){const V=this.i(I);R+=(V>=0?V:4294967296+V)*A,A*=4294967296}return R},i.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(N(this))return"0";if(P(this))return"-"+j(this).toString(R);const A=y(Math.pow(R,6));var I=this;let V="";for(;;){const U=Ce(I,A).g;I=W(I,U.j(A));let F=((I.g.length>0?I.g[0]:I.h)>>>0).toString(R);if(I=U,N(I))return F+V;for(;F.length<6;)F="0"+F;V=F+V}},i.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function N(R){if(R.h!=0)return!1;for(let A=0;A<R.g.length;A++)if(R.g[A]!=0)return!1;return!0}function P(R){return R.h==-1}i.l=function(R){return R=W(this,R),P(R)?-1:N(R)?0:1};function j(R){const A=R.g.length,I=[];for(let V=0;V<A;V++)I[V]=~R.g[V];return new d(I,~R.h).add(w)}i.abs=function(){return P(this)?j(this):this},i.add=function(R){const A=Math.max(this.g.length,R.g.length),I=[];let V=0;for(let U=0;U<=A;U++){let F=V+(this.i(U)&65535)+(R.i(U)&65535),k=(F>>>16)+(this.i(U)>>>16)+(R.i(U)>>>16);V=k>>>16,F&=65535,k&=65535,I[U]=k<<16|F}return new d(I,I[I.length-1]&-2147483648?-1:0)};function W(R,A){return R.add(j(A))}i.j=function(R){if(N(this)||N(R))return S;if(P(this))return P(R)?j(this).j(j(R)):j(j(this).j(R));if(P(R))return j(this.j(j(R)));if(this.l(O)<0&&R.l(O)<0)return y(this.m()*R.m());const A=this.g.length+R.g.length,I=[];for(var V=0;V<2*A;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(let U=0;U<R.g.length;U++){const F=this.i(V)>>>16,k=this.i(V)&65535,rt=R.i(U)>>>16,Ge=R.i(U)&65535;I[2*V+2*U]+=k*Ge,G(I,2*V+2*U),I[2*V+2*U+1]+=F*Ge,G(I,2*V+2*U+1),I[2*V+2*U+1]+=k*rt,G(I,2*V+2*U+1),I[2*V+2*U+2]+=F*rt,G(I,2*V+2*U+2)}for(R=0;R<A;R++)I[R]=I[2*R+1]<<16|I[2*R];for(R=A;R<2*A;R++)I[R]=0;return new d(I,0)};function G(R,A){for(;(R[A]&65535)!=R[A];)R[A+1]+=R[A]>>>16,R[A]&=65535,A++}function re(R,A){this.g=R,this.h=A}function Ce(R,A){if(N(A))throw Error("division by zero");if(N(R))return new re(S,S);if(P(R))return A=Ce(j(R),A),new re(j(A.g),j(A.h));if(P(A))return A=Ce(R,j(A)),new re(j(A.g),A.h);if(R.g.length>30){if(P(R)||P(A))throw Error("slowDivide_ only works with positive integers.");for(var I=w,V=A;V.l(R)<=0;)I=je(I),V=je(V);var U=xe(I,1),F=xe(V,1);for(V=xe(V,2),I=xe(I,2);!N(V);){var k=F.add(V);k.l(R)<=0&&(U=U.add(I),F=k),V=xe(V,1),I=xe(I,1)}return A=W(R,U.j(A)),new re(U,A)}for(U=S;R.l(A)>=0;){for(I=Math.max(1,Math.floor(R.m()/A.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),F=y(I),k=F.j(A);P(k)||k.l(R)>0;)I-=V,F=y(I),k=F.j(A);N(F)&&(F=w),U=U.add(F),R=W(R,k)}return new re(U,R)}i.B=function(R){return Ce(this,R).h},i.and=function(R){const A=Math.max(this.g.length,R.g.length),I=[];for(let V=0;V<A;V++)I[V]=this.i(V)&R.i(V);return new d(I,this.h&R.h)},i.or=function(R){const A=Math.max(this.g.length,R.g.length),I=[];for(let V=0;V<A;V++)I[V]=this.i(V)|R.i(V);return new d(I,this.h|R.h)},i.xor=function(R){const A=Math.max(this.g.length,R.g.length),I=[];for(let V=0;V<A;V++)I[V]=this.i(V)^R.i(V);return new d(I,this.h^R.h)};function je(R){const A=R.g.length+1,I=[];for(let V=0;V<A;V++)I[V]=R.i(V)<<1|R.i(V-1)>>>31;return new d(I,R.h)}function xe(R,A){const I=A>>5;A%=32;const V=R.g.length-I,U=[];for(let F=0;F<V;F++)U[F]=A>0?R.i(F+I)>>>A|R.i(F+I+1)<<32-A:R.i(F+I);return new d(U,R.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,GE=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=b,Qs=d}).apply(typeof Lv<"u"?Lv:typeof self<"u"?self:typeof window<"u"?window:{});var Ad=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var $E,Sc,WE,Ud,pg,YE,QE,KE;(function(){var i,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ad=="object"&&Ad];for(var _=0;_<u.length;++_){var E=u[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=n(this);function o(u,_){if(_)e:{var E=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var K=u[T];if(!(K in E))break e;E=E[K]}u=u[u.length-1],T=E[u],_=_(T),_!=T&&_!=null&&e(E,u,{configurable:!0,writable:!0,value:_})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(_){var E=[],T;for(T in _)Object.prototype.hasOwnProperty.call(_,T)&&E.push([T,_[T]]);return E}});var c=c||{},d=this||self;function g(u){var _=typeof u;return _=="object"&&u!=null||_=="function"}function p(u,_,E){return u.call.apply(u.bind,arguments)}function y(u,_,E){return y=p,y.apply(null,arguments)}function b(u,_){var E=Array.prototype.slice.call(arguments,1);return function(){var T=E.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function S(u,_){function E(){}E.prototype=_.prototype,u.Z=_.prototype,u.prototype=new E,u.prototype.constructor=u,u.Ob=function(T,K,ae){for(var Re=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)Re[mt-2]=arguments[mt];return _.prototype[K].apply(T,Re)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function O(u){const _=u.length;if(_>0){const E=Array(_);for(let T=0;T<_;T++)E[T]=u[T];return E}return[]}function N(u,_){for(let T=1;T<arguments.length;T++){const K=arguments[T];var E=typeof K;if(E=E!="object"?E:K?Array.isArray(K)?"array":E:"null",E=="array"||E=="object"&&typeof K.length=="number"){E=u.length||0;const ae=K.length||0;u.length=E+ae;for(let Re=0;Re<ae;Re++)u[E+Re]=K[Re]}else u.push(K)}}class P{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function j(u){d.setTimeout(()=>{throw u},0)}function W(){var u=R;let _=null;return u.g&&(_=u.g,u.g=u.g.next,u.g||(u.h=null),_.next=null),_}class G{constructor(){this.h=this.g=null}add(_,E){const T=re.get();T.set(_,E),this.h?this.h.next=T:this.g=T,this.h=T}}var re=new P(()=>new Ce,u=>u.reset());class Ce{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let je,xe=!1,R=new G,A=()=>{const u=Promise.resolve(void 0);je=()=>{u.then(I)}};function I(){for(var u;u=W();){try{u.h.call(u.g)}catch(E){j(E)}var _=re;_.j(u),_.h<100&&(_.h++,u.next=_.g,_.g=u)}xe=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(u,_){this.type=u,this.g=this.target=_,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,_=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const E=()=>{};d.addEventListener("test",E,_),d.removeEventListener("test",E,_)}catch{}return u})();function k(u){return/^[\s\xa0]*$/.test(u)}function rt(u,_){U.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,_)}S(rt,U),rt.prototype.init=function(u,_){const E=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=_,_=u.relatedTarget,_||(E=="mouseover"?_=u.fromElement:E=="mouseout"&&(_=u.toElement)),this.relatedTarget=_,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&rt.Z.h.call(this)},rt.prototype.h=function(){rt.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ge="closure_listenable_"+(Math.random()*1e6|0),ee=0;function q(u,_,E,T,K){this.listener=u,this.proxy=null,this.src=_,this.type=E,this.capture=!!T,this.ha=K,this.key=++ee,this.da=this.fa=!1}function De(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Me(u,_,E){for(const T in u)_.call(E,u[T],T,u)}function Xe(u,_){for(const E in u)_.call(void 0,u[E],E,u)}function M(u){const _={};for(const E in u)_[E]=u[E];return _}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(u,_){let E,T;for(let K=1;K<arguments.length;K++){T=arguments[K];for(E in T)u[E]=T[E];for(let ae=0;ae<L.length;ae++)E=L[ae],Object.prototype.hasOwnProperty.call(T,E)&&(u[E]=T[E])}}function Y(u){this.src=u,this.g={},this.h=0}Y.prototype.add=function(u,_,E,T,K){const ae=u.toString();u=this.g[ae],u||(u=this.g[ae]=[],this.h++);const Re=Oe(u,_,T,K);return Re>-1?(_=u[Re],E||(_.fa=!1)):(_=new q(_,this.src,ae,!!T,K),_.fa=E,u.push(_)),_};function ce(u,_){const E=_.type;if(E in u.g){var T=u.g[E],K=Array.prototype.indexOf.call(T,_,void 0),ae;(ae=K>=0)&&Array.prototype.splice.call(T,K,1),ae&&(De(_),u.g[E].length==0&&(delete u.g[E],u.h--))}}function Oe(u,_,E,T){for(let K=0;K<u.length;++K){const ae=u[K];if(!ae.da&&ae.listener==_&&ae.capture==!!E&&ae.ha==T)return K}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),$e={};function Ze(u,_,E,T,K){if(Array.isArray(_)){for(let ae=0;ae<_.length;ae++)Ze(u,_[ae],E,T,K);return null}return E=vn(E),u&&u[Ge]?u.J(_,E,g(T)?!!T.capture:!1,K):ct(u,_,E,!1,T,K)}function ct(u,_,E,T,K,ae){if(!_)throw Error("Invalid event type");const Re=g(K)?!!K.capture:!!K;let mt=He(u);if(mt||(u[ze]=mt=new Y(u)),E=mt.add(_,E,T,Re,ae),E.proxy)return E;if(T=Xt(),E.proxy=T,T.src=u,T.listener=E,u.addEventListener)F||(K=Re),K===void 0&&(K=!1),u.addEventListener(_.toString(),T,K);else if(u.attachEvent)u.attachEvent(it(_.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Xt(){function u(E){return _.call(u.src,u.listener,E)}const _=Vt;return u}function _n(u,_,E,T,K){if(Array.isArray(_))for(var ae=0;ae<_.length;ae++)_n(u,_[ae],E,T,K);else T=g(T)?!!T.capture:!!T,E=vn(E),u&&u[Ge]?(u=u.i,ae=String(_).toString(),ae in u.g&&(_=u.g[ae],E=Oe(_,E,T,K),E>-1&&(De(_[E]),Array.prototype.splice.call(_,E,1),_.length==0&&(delete u.g[ae],u.h--)))):u&&(u=He(u))&&(_=u.g[_.toString()],u=-1,_&&(u=Oe(_,E,T,K)),(E=u>-1?_[u]:null)&&Bn(E))}function Bn(u){if(typeof u!="number"&&u&&!u.da){var _=u.src;if(_&&_[Ge])ce(_.i,u);else{var E=u.type,T=u.proxy;_.removeEventListener?_.removeEventListener(E,T,u.capture):_.detachEvent?_.detachEvent(it(E),T):_.addListener&&_.removeListener&&_.removeListener(T),(E=He(_))?(ce(E,u),E.h==0&&(E.src=null,_[ze]=null)):De(u)}}}function it(u){return u in $e?$e[u]:$e[u]="on"+u}function Vt(u,_){if(u.da)u=!0;else{_=new rt(_,this);const E=u.listener,T=u.ha||u.src;u.fa&&Bn(u),u=E.call(T,_)}return u}function He(u){return u=u[ze],u instanceof Y?u:null}var ke="__closure_events_fn_"+(Math.random()*1e9>>>0);function vn(u){return typeof u=="function"?u:(u[ke]||(u[ke]=function(_){return u.handleEvent(_)}),u[ke])}function D(){V.call(this),this.i=new Y(this),this.M=this,this.G=null}S(D,V),D.prototype[Ge]=!0,D.prototype.removeEventListener=function(u,_,E,T){_n(this,u,_,E,T)};function B(u,_){var E,T=u.G;if(T)for(E=[];T;T=T.G)E.push(T);if(u=u.M,T=_.type||_,typeof _=="string")_=new U(_,u);else if(_ instanceof U)_.target=_.target||u;else{var K=_;_=new U(T,u),Q(_,K)}K=!0;let ae,Re;if(E)for(Re=E.length-1;Re>=0;Re--)ae=_.g=E[Re],K=J(ae,T,!0,_)&&K;if(ae=_.g=u,K=J(ae,T,!0,_)&&K,K=J(ae,T,!1,_)&&K,E)for(Re=0;Re<E.length;Re++)ae=_.g=E[Re],K=J(ae,T,!1,_)&&K}D.prototype.N=function(){if(D.Z.N.call(this),this.i){var u=this.i;for(const _ in u.g){const E=u.g[_];for(let T=0;T<E.length;T++)De(E[T]);delete u.g[_],u.h--}}this.G=null},D.prototype.J=function(u,_,E,T){return this.i.add(String(u),_,!1,E,T)},D.prototype.K=function(u,_,E,T){return this.i.add(String(u),_,!0,E,T)};function J(u,_,E,T){if(_=u.i.g[String(_)],!_)return!0;_=_.concat();let K=!0;for(let ae=0;ae<_.length;++ae){const Re=_[ae];if(Re&&!Re.da&&Re.capture==E){const mt=Re.listener,En=Re.ha||Re.src;Re.fa&&ce(u.i,Re),K=mt.call(En,T)!==!1&&K}}return K&&!T.defaultPrevented}function ve(u,_){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:d.setTimeout(u,_||0)}function fe(u){u.g=ve(()=>{u.g=null,u.i&&(u.i=!1,fe(u))},u.l);const _=u.h;u.h=null,u.m.apply(null,_)}class X extends V{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:fe(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ue(u){V.call(this),this.h=u,this.g={}}S(ue,V);var be=[];function et(u){Me(u.g,function(_,E){this.g.hasOwnProperty(E)&&Bn(_)},u),u.g={}}ue.prototype.N=function(){ue.Z.N.call(this),et(this)},ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var we=d.JSON.stringify,tt=d.JSON.parse,Le=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Ae(){}function ft(){}var Ln={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function sn(){U.call(this,"d")}S(sn,U);function Fn(){U.call(this,"c")}S(Fn,U);var Qt={},Ai=null;function Mn(){return Ai=Ai||new D}Qt.Ia="serverreachability";function si(u){U.call(this,Qt.Ia,u)}S(si,U);function me(u){const _=Mn();B(_,new si(_))}Qt.STAT_EVENT="statevent";function Ne(u,_){U.call(this,Qt.STAT_EVENT,u),this.stat=_}S(Ne,U);function Ue(u){const _=Mn();B(_,new Ne(_,u))}Qt.Ja="timingevent";function vt(u,_){U.call(this,Qt.Ja,u),this.size=_}S(vt,U);function Ut(u,_){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},_)}function an(){this.g=!0}an.prototype.ua=function(){this.g=!1};function ls(u,_,E,T,K,ae){u.info(function(){if(u.g)if(ae){var Re="",mt=ae.split("&");for(let Nt=0;Nt<mt.length;Nt++){var En=mt[Nt].split("=");if(En.length>1){const ln=En[0];En=En[1];const Or=ln.split("_");Re=Or.length>=2&&Or[1]=="type"?Re+(ln+"="+En+"&"):Re+(ln+"=redacted&")}}}else Re=null;else Re=ae;return"XMLHTTP REQ ("+T+") [attempt "+K+"]: "+_+`
`+E+`
`+Re})}function Xa(u,_,E,T,K,ae,Re){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+K+"]: "+_+`
`+E+`
`+ae+" "+Re})}function or(u,_,E,T){u.info(function(){return"XMLHTTP TEXT ("+_+"): "+xl(u,E)+(T?" "+T:"")})}function Ci(u,_){u.info(function(){return"TIMEOUT: "+_})}an.prototype.info=function(){};function xl(u,_){if(!u.g)return _;if(!_)return null;try{const ae=JSON.parse(_);if(ae){for(u=0;u<ae.length;u++)if(Array.isArray(ae[u])){var E=ae[u];if(!(E.length<2)){var T=E[1];if(Array.isArray(T)&&!(T.length<1)){var K=T[0];if(K!="noop"&&K!="stop"&&K!="close")for(let Re=1;Re<T.length;Re++)T[Re]=""}}}}return we(ae)}catch{return _}}var Ri={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ca={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ua;function Ii(){}S(Ii,Ae),Ii.prototype.g=function(){return new XMLHttpRequest},ua=new Ii;function qr(u){return encodeURIComponent(String(u))}function Ja(u){var _=1;u=u.split(":");const E=[];for(;_>0&&u.length;)E.push(u.shift()),_--;return u.length&&E.push(u.join(":")),E}function _r(u,_,E,T){this.j=u,this.i=_,this.l=E,this.S=T||1,this.V=new ue(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new vr}function vr(){this.i=null,this.g="",this.h=!1}var ie={},Z={};function he(u,_,E){u.M=1,u.A=da(Jt(_)),u.u=E,u.R=!0,le(u,null)}function le(u,_){u.F=Date.now(),We(u),u.B=Jt(u.A);var E=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),eo(E.i,"t",T),u.C=0,E=u.j.L,u.h=new vr,u.g=_u(u.j,E?_:null,!u.u),u.P>0&&(u.O=new X(y(u.Y,u,u.g),u.P)),_=u.V,E=u.g,T=u.ba;var K="readystatechange";Array.isArray(K)||(K&&(be[0]=K.toString()),K=be);for(let ae=0;ae<K.length;ae++){const Re=Ze(E,K[ae],T||_.handleEvent,!1,_.h||_);if(!Re)break;_.g[Re.key]=Re}_=u.J?M(u.J):{},u.u?(u.v||(u.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,_)):(u.v="GET",u.g.ea(u.B,u.v,null,_)),me(),ls(u.i,u.v,u.B,u.l,u.S,u.u)}_r.prototype.ba=function(u){u=u.target;const _=this.O;_&&Yr(u)==3?_.j():this.Y(u)},_r.prototype.Y=function(u){try{if(u==this.g)e:{const mt=Yr(this.g),En=this.g.ya(),Nt=this.g.ca();if(!(mt<3)&&(mt!=3||this.g&&(this.h.h||this.g.la()||Hn(this.g)))){this.K||mt!=4||En==7||(En==8||Nt<=0?me(3):me(2)),xt(this);var _=this.g.ca();this.X=_;var E=Ie(this);if(this.o=_==200,Xa(this.i,this.v,this.B,this.l,this.S,mt,_),this.o){if(this.U&&!this.L){t:{if(this.g){var T,K=this.g;if((T=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(T)){var ae=T;break t}}ae=null}if(u=ae)or(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bt(this,u);else{this.o=!1,this.m=3,Ue(12),Je(this),Ht(this);break e}}if(this.R){u=!0;let ln;for(;!this.K&&this.C<E.length;)if(ln=Ee(this,E),ln==Z){mt==4&&(this.m=4,Ue(14),u=!1),or(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==ie){this.m=4,Ue(15),or(this.i,this.l,E,"[Invalid Chunk]"),u=!1;break}else or(this.i,this.l,ln,null),bt(this,ln);if(Te(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||E.length!=0||this.h.h||(this.m=1,Ue(16),u=!1),this.o=this.o&&u,!u)or(this.i,this.l,E,"[Invalid Chunked Response]"),Je(this),Ht(this);else if(E.length>0&&!this.W){this.W=!0;var Re=this.j;Re.g==this&&Re.aa&&!Re.P&&(Re.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Ml(Re),Re.P=!0,Ue(11))}}else or(this.i,this.l,E,null),bt(this,E);mt==4&&Je(this),this.o&&!this.K&&(mt==4?mu(this.j,this):(this.o=!1,We(this)))}else ki(this.g),_==400&&E.indexOf("Unknown SID")>0?(this.m=3,Ue(12)):(this.m=0,Ue(13)),Je(this),Ht(this)}}}catch{}};function Ie(u){if(!Te(u))return u.g.la();const _=Hn(u.g);if(_==="")return"";let E="";const T=_.length,K=Yr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Je(u),Ht(u),"";u.h.i=new d.TextDecoder}for(let ae=0;ae<T;ae++)u.h.h=!0,E+=u.h.i.decode(_[ae],{stream:!(K&&ae==T-1)});return _.length=0,u.h.g+=E,u.C=0,u.h.g}function Te(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Ee(u,_){var E=u.C,T=_.indexOf(`
`,E);return T==-1?Z:(E=Number(_.substring(E,T)),isNaN(E)?ie:(T+=1,T+E>_.length?Z:(_=_.slice(T,T+E),u.C=T+E,_)))}_r.prototype.cancel=function(){this.K=!0,Je(this)};function We(u){u.T=Date.now()+u.H,Ke(u,u.H)}function Ke(u,_){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Ut(y(u.aa,u),_)}function xt(u){u.D&&(d.clearTimeout(u.D),u.D=null)}_r.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ci(this.i,this.B),this.M!=2&&(me(),Ue(17)),Je(this),this.m=2,Ht(this)):Ke(this,this.T-u)};function Ht(u){u.j.I==0||u.K||mu(u.j,u)}function Je(u){xt(u);var _=u.O;_&&typeof _.dispose=="function"&&_.dispose(),u.O=null,et(u.V),u.g&&(_=u.g,u.g=null,_.abort(),_.dispose())}function bt(u,_){try{var E=u.j;if(E.I!=0&&(E.g==u||en(E.h,u))){if(!u.L&&en(E.h,u)&&E.I==3){try{var T=E.Ba.g.parse(_)}catch{T=null}if(Array.isArray(T)&&T.length==3){var K=T;if(K[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<u.F)so(E),ps(E);else break e;_a(E),Ue(18)}}else E.xa=K[1],0<E.xa-E.K&&K[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Ut(y(E.Va,E),6e3));Lt(E.h)<=1&&E.ta&&(E.ta=void 0)}else di(E,11)}else if((u.L||E.g==u)&&so(E),!k(_))for(K=E.Ba.g.parse(_),_=0;_<K.length;_++){let Nt=K[_];const ln=Nt[0];if(!(ln<=E.K))if(E.K=ln,Nt=Nt[1],E.I==2)if(Nt[0]=="c"){E.M=Nt[1],E.ba=Nt[2];const Or=Nt[3];Or!=null&&(E.ka=Or,E.j.info("VER="+E.ka));const hi=Nt[4];hi!=null&&(E.za=hi,E.j.info("SVER="+E.za));const Qr=Nt[5];Qr!=null&&typeof Qr=="number"&&Qr>0&&(T=1.5*Qr,E.O=T,E.j.info("backChannelRequestTimeoutMs_="+T)),T=E;const Kr=u.g;if(Kr){const va=Kr.g?Kr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(va){var ae=T.h;ae.g||va.indexOf("spdy")==-1&&va.indexOf("quic")==-1&&va.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(qt(ae,ae.h),ae.h=null))}if(T.G){const ao=Kr.g?Kr.g.getResponseHeader("X-HTTP-Session-Id"):null;ao&&(T.wa=ao,zt(T.J,T.G,ao))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-u.F,E.j.info("Handshake RTT: "+E.T+"ms")),T=E;var Re=u;if(T.na=yu(T,T.L?T.ba:null,T.W),Re.L){Ot(T.h,Re);var mt=Re,En=T.O;En&&(mt.H=En),mt.D&&(xt(mt),We(mt)),T.g=Re}else hu(T);E.i.length>0&&ui(E)}else Nt[0]!="stop"&&Nt[0]!="close"||di(E,7);else E.I==3&&(Nt[0]=="stop"||Nt[0]=="close"?Nt[0]=="stop"?di(E,7):Ol(E):Nt[0]!="noop"&&E.l&&E.l.qa(Nt),E.A=0)}}me(4)}catch{}}var yt=class{constructor(u,_){this.g=u,this.map=_}};function dn(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function on(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Lt(u){return u.h?1:u.g?u.g.size:0}function en(u,_){return u.h?u.h==_:u.g?u.g.has(_):!1}function qt(u,_){u.g?u.g.add(_):u.h=_}function Ot(u,_){u.h&&u.h==_?u.h=null:u.g&&u.g.has(_)&&u.g.delete(_)}dn.prototype.cancel=function(){if(this.i=Nn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Nn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let _=u.i;for(const E of u.g.values())_=_.concat(E.G);return _}return O(u.i)}var Di=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gr(u,_){if(u){u=u.split("&");for(let E=0;E<u.length;E++){const T=u[E].indexOf("=");let K,ae=null;T>=0?(K=u[E].substring(0,T),ae=u[E].substring(T+1)):K=u[E],_(K,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function bn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;u instanceof bn?(this.l=u.l,mn(this,u.j),this.o=u.o,this.g=u.g,cs(this,u.u),this.h=u.h,wl(this,uu(u.i)),this.m=u.m):u&&(_=String(u).match(Di))?(this.l=!1,mn(this,_[1]||"",!0),this.o=ai(_[2]||""),this.g=ai(_[3]||"",!0),cs(this,_[4]),this.h=ai(_[5]||"",!0),wl(this,_[6]||"",!0),this.m=ai(_[7]||"")):(this.l=!1,this.i=new ds(null,this.l))}bn.prototype.toString=function(){const u=[];var _=this.j;_&&u.push(ha(_,Za,!0),":");var E=this.g;return(E||_=="file")&&(u.push("//"),(_=this.o)&&u.push(ha(_,Za,!0),"@"),u.push(qr(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&u.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&u.push("/"),u.push(ha(E,E.charAt(0)=="/"?Tl:ou,!0))),(E=this.i.toString())&&u.push("?",E),(E=this.m)&&u.push("#",ha(E,lu)),u.join("")},bn.prototype.resolve=function(u){const _=Jt(this);let E=!!u.j;E?mn(_,u.j):E=!!u.o,E?_.o=u.o:E=!!u.g,E?_.g=u.g:E=u.u!=null;var T=u.h;if(E)cs(_,u.u);else if(E=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var K=_.h.lastIndexOf("/");K!=-1&&(T=_.h.slice(0,K+1)+T)}if(K=T,K==".."||K==".")T="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){T=K.lastIndexOf("/",0)==0,K=K.split("/");const ae=[];for(let Re=0;Re<K.length;){const mt=K[Re++];mt=="."?T&&Re==K.length&&ae.push(""):mt==".."?((ae.length>1||ae.length==1&&ae[0]!="")&&ae.pop(),T&&Re==K.length&&ae.push("")):(ae.push(mt),T=!0)}T=ae.join("/")}else T=K}return E?_.h=T:E=u.i.toString()!=="",E?wl(_,uu(u.i)):E=!!u.m,E&&(_.m=u.m),_};function Jt(u){return new bn(u)}function mn(u,_,E){u.j=E?ai(_,!0):_,u.j&&(u.j=u.j.replace(/:$/,""))}function cs(u,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);u.u=_}else u.u=null}function wl(u,_,E){_ instanceof ds?(u.i=_,to(u.i,u.l)):(E||(_=ha(_,us)),u.i=new ds(_,u.l))}function zt(u,_,E){u.i.set(_,E)}function da(u){return zt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ai(u,_){return u?_?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ha(u,_,E){return typeof u=="string"?(u=encodeURI(u).replace(_,lr),E&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function lr(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Za=/[#\/\?@]/g,ou=/[#\?:]/g,Tl=/[#\?]/g,us=/[#\?@]/g,lu=/#/g;function ds(u,_){this.h=this.g=null,this.i=u||null,this.j=!!_}function cr(u){u.g||(u.g=new Map,u.h=0,u.i&&Gr(u.i,function(_,E){u.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}i=ds.prototype,i.add=function(u,_){cr(this),this.i=null,u=hs(this,u);let E=this.g.get(u);return E||this.g.set(u,E=[]),E.push(_),this.h+=1,this};function cu(u,_){cr(u),_=hs(u,_),u.g.has(_)&&(u.i=null,u.h-=u.g.get(_).length,u.g.delete(_))}function Al(u,_){return cr(u),_=hs(u,_),u.g.has(_)}i.forEach=function(u,_){cr(this),this.g.forEach(function(E,T){E.forEach(function(K){u.call(_,K,T,this)},this)},this)};function Cl(u,_){cr(u);let E=[];if(typeof _=="string")Al(u,_)&&(E=E.concat(u.g.get(hs(u,_))));else for(u=Array.from(u.g.values()),_=0;_<u.length;_++)E=E.concat(u[_]);return E}i.set=function(u,_){return cr(this),this.i=null,u=hs(this,u),Al(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[_]),this.h+=1,this},i.get=function(u,_){return u?(u=Cl(this,u),u.length>0?String(u[0]):_):_};function eo(u,_,E){cu(u,_),E.length>0&&(u.i=null,u.g.set(hs(u,_),O(E)),u.h+=E.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],_=Array.from(this.g.keys());for(let T=0;T<_.length;T++){var E=_[T];const K=qr(E);E=Cl(this,E);for(let ae=0;ae<E.length;ae++){let Re=K;E[ae]!==""&&(Re+="="+qr(E[ae])),u.push(Re)}}return this.i=u.join("&")};function uu(u){const _=new ds;return _.i=u.i,u.g&&(_.g=new Map(u.g),_.h=u.h),_}function hs(u,_){return _=String(_),u.j&&(_=_.toLowerCase()),_}function to(u,_){_&&!u.j&&(cr(u),u.i=null,u.g.forEach(function(E,T){const K=T.toLowerCase();T!=K&&(cu(this,T),eo(this,K,E))},u)),u.j=_}function $r(u,_){const E=new an;if(d.Image){const T=new Image;T.onload=b(Ir,E,"TestLoadImage: loaded",!0,_,T),T.onerror=b(Ir,E,"TestLoadImage: error",!1,_,T),T.onabort=b(Ir,E,"TestLoadImage: abort",!1,_,T),T.ontimeout=b(Ir,E,"TestLoadImage: timeout",!1,_,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else _(!1)}function Rl(u,_){const E=new an,T=new AbortController,K=setTimeout(()=>{T.abort(),Ir(E,"TestPingServer: timeout",!1,_)},1e4);fetch(u,{signal:T.signal}).then(ae=>{clearTimeout(K),ae.ok?Ir(E,"TestPingServer: ok",!0,_):Ir(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(K),Ir(E,"TestPingServer: error",!1,_)})}function Ir(u,_,E,T,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),T(E)}catch{}}function fs(){this.g=new Le}function oi(u){this.i=u.Sb||null,this.h=u.ab||!1}S(oi,Ae),oi.prototype.g=function(){return new fa(this.i,this.h)};function fa(u,_){D.call(this),this.H=u,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(fa,D),i=fa.prototype,i.open=function(u,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=_,this.readyState=1,Wr(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(_.body=u),(this.H||d).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ms(this)),this.readyState=0},i.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Wr(this)),this.g&&(this.readyState=3,Wr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;no(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function no(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}i.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var _=u.value?u.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!u.done}))&&(this.response=this.responseText+=_)}u.done?ms(this):Wr(this),this.readyState==3&&no(this)}},i.Oa=function(u){this.g&&(this.response=this.responseText=u,ms(this))},i.Na=function(u){this.g&&(this.response=u,ms(this))},i.ga=function(){this.g&&ms(this)};function ms(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Wr(u)}i.setRequestHeader=function(u,_){this.A.append(u,_)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,u.push(E[0]+": "+E[1]),E=_.next();return u.join(`\r
`)};function Wr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(fa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Dr(u){let _="";return Me(u,function(E,T){_+=T,_+=":",_+=E,_+=`\r
`}),_}function ma(u,_,E){e:{for(T in E){var T=!1;break e}T=!0}T||(E=Dr(E),typeof u=="string"?E!=null&&qr(E):zt(u,_,E))}function Gt(u){D.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(Gt,D);var li=/^https?$/i,Il=["POST","PUT"];i=Gt.prototype,i.Fa=function(u){this.H=u},i.ea=function(u,_,E,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);_=_?_.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ua.g(),this.g.onreadystatechange=w(y(this.Ca,this));try{this.B=!0,this.g.open(_,String(u),!0),this.B=!1}catch(ae){ga(this,ae);return}if(u=E||"",E=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var K in T)E.set(K,T[K]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const ae of T.keys())E.set(ae,T.get(ae));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(E.keys()).find(ae=>ae.toLowerCase()=="content-type"),K=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(Il,_,void 0)>=0)||T||K||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,Re]of E)this.g.setRequestHeader(ae,Re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(ae){ga(this,ae)}};function ga(u,_){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=_,u.o=5,Dl(u),Oi(u)}function Dl(u){u.A||(u.A=!0,B(u,"complete"),B(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,B(this,"complete"),B(this,"abort"),Oi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oi(this,!0)),Gt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?pa(this):this.Xa())},i.Xa=function(){pa(this)};function pa(u){if(u.h&&typeof c<"u"){if(u.v&&Yr(u)==4)setTimeout(u.Ca.bind(u),0);else if(B(u,"readystatechange"),Yr(u)==4){u.h=!1;try{const ae=u.ca();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var T;if(T=ae===0){let Re=String(u.D).match(Di)[1]||null;!Re&&d.self&&d.self.location&&(Re=d.self.location.protocol.slice(0,-1)),T=!li.test(Re?Re.toLowerCase():"")}E=T}if(E)B(u,"complete"),B(u,"success");else{u.o=6;try{var K=Yr(u)>2?u.g.statusText:""}catch{K=""}u.l=K+" ["+u.ca()+"]",Dl(u)}}finally{Oi(u)}}}}function Oi(u,_){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const E=u.g;u.g=null,_||B(u,"ready");try{E.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Yr(u){return u.g?u.g.readyState:0}i.ca=function(){try{return Yr(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(u){if(this.g){var _=this.g.responseText;return u&&_.indexOf(u)==0&&(_=_.substring(u.length)),tt(_)}};function Hn(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ki(u){const _={};u=(u.g&&Yr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(k(u[T]))continue;var E=Ja(u[T]);const K=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ae=_[K]||[];_[K]=ae,ae.push(E)}Xe(_,function(T){return T.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ci(u,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[u]||_}function gs(u){this.za=0,this.i=[],this.j=new an,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ci("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ci("baseRetryDelayMs",5e3,u),this.Za=ci("retryDelaySeedMs",1e4,u),this.Ta=ci("forwardChannelMaxRetries",2,u),this.va=ci("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new dn(u&&u.concurrentRequestLimit),this.Ba=new fs,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=gs.prototype,i.ka=8,i.I=1,i.connect=function(u,_,E,T){Ue(0),this.W=u,this.H=_||{},E&&T!==void 0&&(this.H.OSID=E,this.H.OAID=T),this.F=this.X,this.J=yu(this,null,this.W),ui(this)};function Ol(u){if(ro(u),u.I==3){var _=u.V++,E=Jt(u.J);if(zt(E,"SID",u.M),zt(E,"RID",_),zt(E,"TYPE","terminate"),ya(u,E),_=new _r(u,u.j,_),_.M=2,_.A=da(Jt(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(_.A.toString(),"")}catch{}!E&&d.Image&&(new Image().src=_.A,E=!0),E||(_.g=_u(_.j,null),_.g.ea(_.A)),_.F=Date.now(),We(_)}pu(u)}function ps(u){u.g&&(Ml(u),u.g.cancel(),u.g=null)}function ro(u){ps(u),u.v&&(d.clearTimeout(u.v),u.v=null),so(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function ui(u){if(!on(u.h)&&!u.m){u.m=!0;var _=u.Ea;je||A(),xe||(je(),xe=!0),R.add(_,u),u.D=0}}function io(u,_){return Lt(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=_.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Ut(y(u.Ea,u,_),gu(u,u.D)),u.D++,!0)}i.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const K=new _r(this,this.j,u);let ae=this.o;if(this.U&&(ae?(ae=M(ae),Q(ae,this.U)):ae=this.U),this.u!==null||this.R||(K.J=ae,ae=null),this.S)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var T=this.i[E];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(_+=T,_>4096){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=du(this,K,_),E=Jt(this.J),zt(E,"RID",u),zt(E,"CVER",22),this.G&&zt(E,"X-HTTP-Session-Id",this.G),ya(this,E),ae&&(this.R?_="headers="+qr(Dr(ae))+"&"+_:this.u&&ma(E,this.u,ae)),qt(this.h,K),this.Ra&&zt(E,"TYPE","init"),this.S?(zt(E,"$req",_),zt(E,"SID","null"),K.U=!0,he(K,E,null)):he(K,E,_),this.I=2}}else this.I==3&&(u?kl(this,u):this.i.length==0||on(this.h)||kl(this))};function kl(u,_){var E;_?E=_.l:E=u.V++;const T=Jt(u.J);zt(T,"SID",u.M),zt(T,"RID",E),zt(T,"AID",u.K),ya(u,T),u.u&&u.o&&ma(T,u.u,u.o),E=new _r(u,u.j,E,u.D+1),u.u===null&&(E.J=u.o),_&&(u.i=_.G.concat(u.i)),_=du(u,E,1e3),E.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),qt(u.h,E),he(E,T,_)}function ya(u,_){u.H&&Me(u.H,function(E,T){zt(_,T,E)}),u.l&&Me({},function(E,T){zt(_,T,E)})}function du(u,_,E){E=Math.min(u.i.length,E);const T=u.l?y(u.l.Ka,u.l,u):null;e:{var K=u.i;let mt=-1;for(;;){const En=["count="+E];mt==-1?E>0?(mt=K[0].g,En.push("ofs="+mt)):mt=0:En.push("ofs="+mt);let Nt=!0;for(let ln=0;ln<E;ln++){var ae=K[ln].g;const Or=K[ln].map;if(ae-=mt,ae<0)mt=Math.max(0,K[ln].g-100),Nt=!1;else try{ae="req"+ae+"_"||"";try{var Re=Or instanceof Map?Or:Object.entries(Or);for(const[hi,Qr]of Re){let Kr=Qr;g(Qr)&&(Kr=we(Qr)),En.push(ae+hi+"="+encodeURIComponent(Kr))}}catch(hi){throw En.push(ae+"type="+encodeURIComponent("_badmap")),hi}}catch{T&&T(Or)}}if(Nt){Re=En.join("&");break e}}Re=void 0}return u=u.i.splice(0,E),_.G=u,Re}function hu(u){if(!u.g&&!u.v){u.Y=1;var _=u.Da;je||A(),xe||(je(),xe=!0),R.add(_,u),u.A=0}}function _a(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Ut(y(u.Da,u),gu(u,u.A)),u.A++,!0)}i.Da=function(){if(this.v=null,fu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Ut(y(this.Wa,this),u)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ue(10),ps(this),fu(this))};function Ml(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function fu(u){u.g=new _r(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var _=Jt(u.na);zt(_,"RID","rpc"),zt(_,"SID",u.M),zt(_,"AID",u.K),zt(_,"CI",u.F?"0":"1"),!u.F&&u.ia&&zt(_,"TO",u.ia),zt(_,"TYPE","xmlhttp"),ya(u,_),u.u&&u.o&&ma(_,u.u,u.o),u.O&&(u.g.H=u.O);var E=u.g;u=u.ba,E.M=1,E.A=da(Jt(_)),E.u=null,E.R=!0,le(E,u)}i.Va=function(){this.C!=null&&(this.C=null,ps(this),_a(this),Ue(19))};function so(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function mu(u,_){var E=null;if(u.g==_){so(u),Ml(u),u.g=null;var T=2}else if(en(u.h,_))E=_.G,Ot(u.h,_),T=1;else return;if(u.I!=0){if(_.o)if(T==1){E=_.u?_.u.length:0,_=Date.now()-_.F;var K=u.D;T=Mn(),B(T,new vt(T,E)),ui(u)}else hu(u);else if(K=_.m,K==3||K==0&&_.X>0||!(T==1&&io(u,_)||T==2&&_a(u)))switch(E&&E.length>0&&(_=u.h,_.i=_.i.concat(E)),K){case 1:di(u,5);break;case 4:di(u,10);break;case 3:di(u,6);break;default:di(u,2)}}}function gu(u,_){let E=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(E*=2),E*_}function di(u,_){if(u.j.info("Error code "+_),_==2){var E=y(u.bb,u),T=u.Ua;const K=!T;T=new bn(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||mn(T,"https"),da(T),K?$r(T.toString(),E):Rl(T.toString(),E)}else Ue(2);u.I=0,u.l&&u.l.pa(_),pu(u),ro(u)}i.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Ue(2)):(this.j.info("Failed to ping google.com"),Ue(1))};function pu(u){if(u.I=0,u.ja=[],u.l){const _=Nn(u.h);(_.length!=0||u.i.length!=0)&&(N(u.ja,_),N(u.ja,u.i),u.h.i.length=0,O(u.i),u.i.length=0),u.l.oa()}}function yu(u,_,E){var T=E instanceof bn?Jt(E):new bn(E);if(T.g!="")_&&(T.g=_+"."+T.g),cs(T,T.u);else{var K=d.location;T=K.protocol,_=_?_+"."+K.hostname:K.hostname,K=+K.port;const ae=new bn(null);T&&mn(ae,T),_&&(ae.g=_),K&&cs(ae,K),E&&(ae.h=E),T=ae}return E=u.G,_=u.wa,E&&_&&zt(T,E,_),zt(T,"VER",u.ka),ya(u,T),T}function _u(u,_,E){if(_&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=u.Aa&&!u.ma?new Gt(new oi({ab:E})):new Gt(u.ma),_.Fa(u.L),_}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function vu(){}i=vu.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function ys(){}ys.prototype.g=function(u,_){return new rr(u,_)};function rr(u,_){D.call(this),this.g=new gs(_),this.l=u,this.h=_&&_.messageUrlParams||null,u=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(u?u["X-WebChannel-Content-Type"]=_.messageContentType:u={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(u?u["X-WebChannel-Client-Profile"]=_.sa:u={"X-WebChannel-Client-Profile":_.sa}),this.g.U=u,(u=_&&_.Qb)&&!k(u)&&(this.g.u=u),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!k(_)&&(this.g.G=_,u=this.h,u!==null&&_ in u&&(u=this.h,_ in u&&delete u[_])),this.j=new Mi(this)}S(rr,D),rr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},rr.prototype.close=function(){Ol(this.g)},rr.prototype.o=function(u){var _=this.g;if(typeof u=="string"){var E={};E.__data__=u,u=E}else this.v&&(E={},E.__data__=we(u),u=E);_.i.push(new yt(_.Ya++,u)),_.I==3&&ui(_)},rr.prototype.N=function(){this.g.l=null,delete this.j,Ol(this.g),delete this.g,rr.Z.N.call(this)};function bu(u){sn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var _=u.__sm__;if(_){e:{for(const E in _){u=E;break e}u=void 0}(this.i=u)&&(u=this.i,_=_!==null&&u in _?_[u]:void 0),this.data=_}else this.data=u}S(bu,sn);function Eu(){Fn.call(this),this.status=1}S(Eu,Fn);function Mi(u){this.g=u}S(Mi,vu),Mi.prototype.ra=function(){B(this.g,"a")},Mi.prototype.qa=function(u){B(this.g,new bu(u))},Mi.prototype.pa=function(u){B(this.g,new Eu)},Mi.prototype.oa=function(){B(this.g,"b")},ys.prototype.createWebChannel=ys.prototype.g,rr.prototype.send=rr.prototype.o,rr.prototype.open=rr.prototype.m,rr.prototype.close=rr.prototype.close,KE=function(){return new ys},QE=function(){return Mn()},YE=Qt,pg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ri.NO_ERROR=0,Ri.TIMEOUT=8,Ri.HTTP_ERROR=6,Ud=Ri,ca.COMPLETE="complete",WE=ca,ft.EventType=Ln,Ln.OPEN="a",Ln.CLOSE="b",Ln.ERROR="c",Ln.MESSAGE="d",D.prototype.listen=D.prototype.J,Sc=ft,Gt.prototype.listenOnce=Gt.prototype.K,Gt.prototype.getLastError=Gt.prototype.Ha,Gt.prototype.getLastErrorCode=Gt.prototype.ya,Gt.prototype.getStatus=Gt.prototype.ca,Gt.prototype.getResponseJson=Gt.prototype.La,Gt.prototype.getResponseText=Gt.prototype.la,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Fa,$E=Gt}).apply(typeof Ad<"u"?Ad:typeof self<"u"?self:typeof window<"u"?window:{});const Pv="@firebase/firestore",Uv="4.9.3";class er{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}er.UNAUTHENTICATED=new er(null),er.GOOGLE_CREDENTIALS=new er("google-credentials-uid"),er.FIRST_PARTY=new er("first-party-uid"),er.MOCK_USER=new er("mock-user");let ml="12.7.0";const Ba=new Qg("@firebase/firestore");function Fo(){return Ba.logLevel}function Pe(i,...e){if(Ba.logLevel<=At.DEBUG){const n=e.map(Jg);Ba.debug(`Firestore (${ml}): ${i}`,...n)}}function ns(i,...e){if(Ba.logLevel<=At.ERROR){const n=e.map(Jg);Ba.error(`Firestore (${ml}): ${i}`,...n)}}function Zo(i,...e){if(Ba.logLevel<=At.WARN){const n=e.map(Jg);Ba.warn(`Firestore (${ml}): ${i}`,...n)}}function Jg(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function at(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,XE(i,s,n)}function XE(i,e,n){let s=`FIRESTORE (${ml}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw ns(s),new Error(s)}function Pt(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||XE(e,o,s)}function ht(i,e){return i}const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends as{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Zi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class JE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(er.UNAUTHENTICATED)))}shutdown(){}}class pR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class yR{constructor(e){this.t=e,this.currentUser=er.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pt(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let c=new Zi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Zi,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const p=c;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},g=p=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Zi)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Pt(typeof s.accessToken=="string",31837,{l:s}),new JE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pt(e===null||typeof e=="string",2055,{h:e}),new er(e)}}class _R{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=er.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vR{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new _R(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(er.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ei(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Pt(this.o===void 0,3512);const s=c=>{c.error!=null&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,Pe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const o=c=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new zv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Pt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new zv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ER(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class Zg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=ER(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<n&&(s+=e.charAt(o[c]%62))}return s}}function Ct(i,e){return i<e?-1:i>e?1:0}function yg(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),c=e.charAt(s);if(o!==c)return Zm(o)===Zm(c)?Ct(o,c):Zm(o)?1:-1}return Ct(i.length,e.length)}const SR=55296,xR=57343;function Zm(i){const e=i.charCodeAt(0);return e>=SR&&e<=xR}function el(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}const Bv="__name__";class yi{constructor(e,n,s){n===void 0?n=0:n>e.length&&at(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&at(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return yi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const c=yi.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Ct(e.length,n.length)}static compareSegments(e,n){const s=yi.isNumericId(e),o=yi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?yi.extractNumericId(e).compare(yi.extractNumericId(n)):yg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qs.fromString(e.substring(4,e.length-2))}}class Zt extends yi{construct(e,n,s){return new Zt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ve(ye.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new Zt(n)}static emptyPath(){return new Zt([])}}const wR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kn extends yi{construct(e,n,s){return new Kn(e,n,s)}static isValidIdentifier(e){return wR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Bv}static keyField(){return new Kn([Bv])}static fromServerFormat(e){const n=[];let s="",o=0;const c=()=>{if(s.length===0)throw new Ve(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new Ve(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ve(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else g==="`"?(d=!d,o++):g!=="."||d?(s+=g,o++):(c(),o++)}if(c(),d)throw new Ve(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kn(n)}static emptyPath(){return new Kn([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(Zt.fromString(e))}static fromName(e){return new Qe(Zt.fromString(e).popFirst(5))}static empty(){return new Qe(Zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Zt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Zt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new Zt(e.slice()))}}function ZE(i,e,n){if(!n)throw new Ve(ye.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function TR(i,e,n,s){if(e===!0&&s===!0)throw new Ve(ye.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Fv(i){if(!Qe.isDocumentKey(i))throw new Ve(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Hv(i){if(Qe.isDocumentKey(i))throw new Ve(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function eS(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Sh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":at(12329,{type:typeof i})}function rs(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ve(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sh(i);throw new Ve(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function kn(i,e){const n={typeString:i};return e&&(n.value=e),n}function Wc(i,e){if(!eS(i))throw new Ve(ye.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const d=i[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new Ve(ye.INVALID_ARGUMENT,n);return!0}const qv=-62135596800,Gv=1e6;class rn{static now(){return rn.fromMillis(Date.now())}static fromDate(e){return rn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Gv);return new rn(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ve(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ve(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<qv)throw new Ve(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Gv}_compareTo(e){return this.seconds===e.seconds?Ct(this.nanoseconds,e.nanoseconds):Ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wc(e,rn._jsonSchema))return new rn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-qv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rn._jsonSchemaVersion="firestore/timestamp/1.0",rn._jsonSchema={type:kn("string",rn._jsonSchemaVersion),seconds:kn("number"),nanoseconds:kn("number")};class lt{static fromTimestamp(e){return new lt(e)}static min(){return new lt(new rn(0,0))}static max(){return new lt(new rn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Nc=-1;function AR(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=lt.fromTimestamp(s===1e9?new rn(n+1,0):new rn(n,s));return new Zs(o,Qe.empty(),e)}function CR(i){return new Zs(i.readTime,i.key,Nc)}class Zs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Zs(lt.min(),Qe.empty(),Nc)}static max(){return new Zs(lt.max(),Qe.empty(),Nc)}}function RR(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Qe.comparator(i.documentKey,e.documentKey),n!==0?n:Ct(i.largestBatchId,e.largestBatchId))}const IR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function gl(i){if(i.code!==ye.FAILED_PRECONDITION||i.message!==IR)throw i;Pe("LocalStore","Unexpectedly lost primary lease")}class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&at(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new _e(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof _e?n:_e.resolve(n)}catch(n){return _e.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):_e.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):_e.reject(n)}static resolve(e){return new _e(((n,s)=>{n(e)}))}static reject(e){return new _e(((n,s)=>{s(e)}))}static waitFor(e){return new _e(((n,s)=>{let o=0,c=0,d=!1;e.forEach((g=>{++o,g.next((()=>{++c,d&&c===o&&n()}),(p=>s(p)))})),d=!0,c===o&&n()}))}static or(e){let n=_e.resolve(!1);for(const s of e)n=n.next((o=>o?_e.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,c)=>{s.push(n.call(this,o,c))})),this.waitFor(s)}static mapArray(e,n){return new _e(((s,o)=>{const c=e.length,d=new Array(c);let g=0;for(let p=0;p<c;p++){const y=p;n(e[y]).next((b=>{d[y]=b,++g,g===c&&s(d)}),(b=>o(b)))}}))}static doWhile(e,n){return new _e(((s,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):s()};c()}))}}function OR(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pl(i){return i.name==="IndexedDbTransactionError"}class xh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xh.ce=-1;const ep=-1;function wh(i){return i==null}function Jd(i){return i===0&&1/i==-1/0}function kR(i){return typeof i=="number"&&Number.isInteger(i)&&!Jd(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const tS="";function MR(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=$v(e)),e=NR(i.get(n),e);return $v(e)}function NR(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const c=i.charAt(o);switch(c){case"\0":n+="";break;case tS:n+="";break;default:n+=c}}return n}function $v(i){return i+tS+""}function Wv(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function sa(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function nS(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class fn{constructor(e,n){this.comparator=e,this.root=n||Qn.EMPTY}insert(e,n){return new fn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qn.BLACK,null,null))}remove(e){return new fn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cd(this.root,e,this.comparator,!0)}}class Cd{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qn{constructor(e,n,s,o,c){this.key=e,this.value=n,this.color=s??Qn.RED,this.left=o??Qn.EMPTY,this.right=c??Qn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,c){return new Qn(e??this.key,n??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,s),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Qn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Qn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw at(43730,{key:this.key,value:this.value});if(this.right.isRed())throw at(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw at(27949);return e+(this.isRed()?0:1)}}Qn.EMPTY=null,Qn.RED=!0,Qn.BLACK=!1;Qn.EMPTY=new class{constructor(){this.size=0}get key(){throw at(57766)}get value(){throw at(16141)}get color(){throw at(16727)}get left(){throw at(29726)}get right(){throw at(36894)}copy(e,n,s,o,c){return this}insert(e,n,s){return new Qn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Vn{constructor(e){this.comparator=e,this.data=new fn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yv(this.data.getIterator())}getIteratorFrom(e){return new Yv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Vn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Vn(this.comparator);return n.data=e,n}}class Yv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Cr{constructor(e){this.fields=e,e.sort(Kn.comparator)}static empty(){return new Cr([])}unionWith(e){let n=new Vn(Kn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Cr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return el(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class rS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Xn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new rS("Invalid base64 string: "+c):c}})(e);return new Xn(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new Xn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xn.EMPTY_BYTE_STRING=new Xn("");const jR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ea(i){if(Pt(!!i,39018),typeof i=="string"){let e=0;const n=jR.exec(i);if(Pt(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:wn(i.seconds),nanos:wn(i.nanos)}}function wn(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ta(i){return typeof i=="string"?Xn.fromBase64String(i):Xn.fromUint8Array(i)}const iS="server_timestamp",sS="__type__",aS="__previous_value__",oS="__local_write_time__";function tp(i){return(i?.mapValue?.fields||{})[sS]?.stringValue===iS}function Th(i){const e=i.mapValue.fields[aS];return tp(e)?Th(e):e}function jc(i){const e=ea(i.mapValue.fields[oS].timestampValue);return new rn(e.seconds,e.nanos)}class VR{constructor(e,n,s,o,c,d,g,p,y,b){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=b}}const Zd="(default)";class Vc{constructor(e,n){this.projectId=e,this.database=n||Zd}static empty(){return new Vc("","")}get isDefaultDatabase(){return this.database===Zd}isEqual(e){return e instanceof Vc&&e.projectId===this.projectId&&e.database===this.database}}const lS="__type__",LR="__max__",Rd={mapValue:{}},cS="__vector__",eh="value";function na(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?tp(i)?4:UR(i)?9007199254740991:PR(i)?10:11:at(28295,{value:i})}function Ti(i,e){if(i===e)return!0;const n=na(i);if(n!==na(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return jc(i).isEqual(jc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=ea(o.timestampValue),g=ea(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return ta(o.bytesValue).isEqual(ta(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return wn(o.geoPointValue.latitude)===wn(c.geoPointValue.latitude)&&wn(o.geoPointValue.longitude)===wn(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return wn(o.integerValue)===wn(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=wn(o.doubleValue),g=wn(c.doubleValue);return d===g?Jd(d)===Jd(g):isNaN(d)&&isNaN(g)}return!1})(i,e);case 9:return el(i.arrayValue.values||[],e.arrayValue.values||[],Ti);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},g=c.mapValue.fields||{};if(Wv(d)!==Wv(g))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(g[p]===void 0||!Ti(d[p],g[p])))return!1;return!0})(i,e);default:return at(52216,{left:i})}}function Lc(i,e){return(i.values||[]).find((n=>Ti(n,e)))!==void 0}function tl(i,e){if(i===e)return 0;const n=na(i),s=na(e);if(n!==s)return Ct(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ct(i.booleanValue,e.booleanValue);case 2:return(function(c,d){const g=wn(c.integerValue||c.doubleValue),p=wn(d.integerValue||d.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(i,e);case 3:return Qv(i.timestampValue,e.timestampValue);case 4:return Qv(jc(i),jc(e));case 5:return yg(i.stringValue,e.stringValue);case 6:return(function(c,d){const g=ta(c),p=ta(d);return g.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(c,d){const g=c.split("/"),p=d.split("/");for(let y=0;y<g.length&&y<p.length;y++){const b=Ct(g[y],p[y]);if(b!==0)return b}return Ct(g.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,d){const g=Ct(wn(c.latitude),wn(d.latitude));return g!==0?g:Ct(wn(c.longitude),wn(d.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Kv(i.arrayValue,e.arrayValue);case 10:return(function(c,d){const g=c.fields||{},p=d.fields||{},y=g[eh]?.arrayValue,b=p[eh]?.arrayValue,S=Ct(y?.values?.length||0,b?.values?.length||0);return S!==0?S:Kv(y,b)})(i.mapValue,e.mapValue);case 11:return(function(c,d){if(c===Rd.mapValue&&d===Rd.mapValue)return 0;if(c===Rd.mapValue)return 1;if(d===Rd.mapValue)return-1;const g=c.fields||{},p=Object.keys(g),y=d.fields||{},b=Object.keys(y);p.sort(),b.sort();for(let S=0;S<p.length&&S<b.length;++S){const w=yg(p[S],b[S]);if(w!==0)return w;const O=tl(g[p[S]],y[b[S]]);if(O!==0)return O}return Ct(p.length,b.length)})(i.mapValue,e.mapValue);default:throw at(23264,{he:n})}}function Qv(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ct(i,e);const n=ea(i),s=ea(e),o=Ct(n.seconds,s.seconds);return o!==0?o:Ct(n.nanos,s.nanos)}function Kv(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const c=tl(n[o],s[o]);if(c)return c}return Ct(n.length,s.length)}function nl(i){return _g(i)}function _g(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=ea(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return ta(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Qe.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const c of n.values||[])o?o=!1:s+=",",s+=_g(c);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const d of s)c?c=!1:o+=",",o+=`${d}:${_g(n.fields[d])}`;return o+"}"})(i.mapValue):at(61005,{value:i})}function zd(i){switch(na(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Th(i);return e?16+zd(e):16;case 5:return 2*i.stringValue.length;case 6:return ta(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+zd(c)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return sa(s.fields,((c,d)=>{o+=c.length+zd(d)})),o})(i.mapValue);default:throw at(13486,{value:i})}}function Xv(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function vg(i){return!!i&&"integerValue"in i}function np(i){return!!i&&"arrayValue"in i}function Jv(i){return!!i&&"nullValue"in i}function Zv(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Bd(i){return!!i&&"mapValue"in i}function PR(i){return(i?.mapValue?.fields||{})[lS]?.stringValue===cS}function Cc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return sa(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Cc(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Cc(i.arrayValue.values[n]);return e}return{...i}}function UR(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===LR}class pr{constructor(e){this.value=e}static empty(){return new pr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Bd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cc(n)}setAll(e){let n=Kn.emptyPath(),s={},o=[];e.forEach(((d,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=g.popLast()}d?s[g.lastSegment()]=Cc(d):o.push(g.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,o)}delete(e){const n=this.field(e.popLast());Bd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Bd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){sa(n,((o,c)=>e[o]=c));for(const o of s)delete e[o]}clone(){return new pr(Cc(this.value))}}function uS(i){const e=[];return sa(i.fields,((n,s)=>{const o=new Kn([n]);if(Bd(s)){const c=uS(s.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new Cr(e)}class tr{constructor(e,n,s,o,c,d,g){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(e){return new tr(e,0,lt.min(),lt.min(),lt.min(),pr.empty(),0)}static newFoundDocument(e,n,s,o){return new tr(e,1,n,lt.min(),s,o,0)}static newNoDocument(e,n){return new tr(e,2,n,lt.min(),lt.min(),pr.empty(),0)}static newUnknownDocument(e,n){return new tr(e,3,n,lt.min(),lt.min(),pr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(lt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=lt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class th{constructor(e,n){this.position=e,this.inclusive=n}}function eb(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const c=e[o],d=i.position[o];if(c.field.isKeyField()?s=Qe.comparator(Qe.fromName(d.referenceValue),n.key):s=tl(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function tb(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Ti(i.position[n],e.position[n]))return!1;return!0}class nh{constructor(e,n="asc"){this.field=e,this.dir=n}}function zR(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class dS{}class On extends dS{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new FR(e,n,s):n==="array-contains"?new GR(e,s):n==="in"?new $R(e,s):n==="not-in"?new WR(e,s):n==="array-contains-any"?new YR(e,s):new On(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new HR(e,s):new qR(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(tl(n,this.value)):n!==null&&na(this.value)===na(n)&&this.matchesComparison(tl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return at(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ni extends dS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ni(e,n)}matches(e){return hS(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hS(i){return i.op==="and"}function fS(i){return BR(i)&&hS(i)}function BR(i){for(const e of i.filters)if(e instanceof ni)return!1;return!0}function bg(i){if(i instanceof On)return i.field.canonicalString()+i.op.toString()+nl(i.value);if(fS(i))return i.filters.map((e=>bg(e))).join(",");{const e=i.filters.map((n=>bg(n))).join(",");return`${i.op}(${e})`}}function mS(i,e){return i instanceof On?(function(s,o){return o instanceof On&&s.op===o.op&&s.field.isEqual(o.field)&&Ti(s.value,o.value)})(i,e):i instanceof ni?(function(s,o){return o instanceof ni&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,d,g)=>c&&mS(d,o.filters[g])),!0):!1})(i,e):void at(19439)}function gS(i){return i instanceof On?(function(n){return`${n.field.canonicalString()} ${n.op} ${nl(n.value)}`})(i):i instanceof ni?(function(n){return n.op.toString()+" {"+n.getFilters().map(gS).join(" ,")+"}"})(i):"Filter"}class FR extends On{constructor(e,n,s){super(e,n,s),this.key=Qe.fromName(s.referenceValue)}matches(e){const n=Qe.comparator(e.key,this.key);return this.matchesComparison(n)}}class HR extends On{constructor(e,n){super(e,"in",n),this.keys=pS("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class qR extends On{constructor(e,n){super(e,"not-in",n),this.keys=pS("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function pS(i,e){return(e.arrayValue?.values||[]).map((n=>Qe.fromName(n.referenceValue)))}class GR extends On{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return np(n)&&Lc(n.arrayValue,this.value)}}class $R extends On{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Lc(this.value.arrayValue,n)}}class WR extends On{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Lc(this.value.arrayValue,n)}}class YR extends On{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!np(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Lc(this.value.arrayValue,s)))}}class QR{constructor(e,n=null,s=[],o=[],c=null,d=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=d,this.endAt=g,this.Te=null}}function nb(i,e=null,n=[],s=[],o=null,c=null,d=null){return new QR(i,e,n,s,o,c,d)}function rp(i){const e=ht(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>bg(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),wh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>nl(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>nl(s))).join(",")),e.Te=n}return e.Te}function ip(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!zR(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!mS(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!tb(i.startAt,e.startAt)&&tb(i.endAt,e.endAt)}function Eg(i){return Qe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class Yc{constructor(e,n=null,s=[],o=[],c=null,d="F",g=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function KR(i,e,n,s,o,c,d,g){return new Yc(i,e,n,s,o,c,d,g)}function sp(i){return new Yc(i)}function rb(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function yS(i){return i.collectionGroup!==null}function Rc(i){const e=ht(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Vn(Kn.comparator);return d.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new nh(c,s))})),n.has(Kn.keyField().canonicalString())||e.Ie.push(new nh(Kn.keyField(),s))}return e.Ie}function _i(i){const e=ht(i);return e.Ee||(e.Ee=XR(e,Rc(i))),e.Ee}function XR(i,e){if(i.limitType==="F")return nb(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new nh(o.field,c)}));const n=i.endAt?new th(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new th(i.startAt.position,i.startAt.inclusive):null;return nb(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function Sg(i,e){const n=i.filters.concat([e]);return new Yc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function xg(i,e,n){return new Yc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Ah(i,e){return ip(_i(i),_i(e))&&i.limitType===e.limitType}function _S(i){return`${rp(_i(i))}|lt:${i.limitType}`}function Ho(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>gS(o))).join(", ")}]`),wh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>nl(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>nl(o))).join(",")),`Target(${s})`})(_i(i))}; limitType=${i.limitType})`}function Ch(i,e){return e.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Qe.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(i,e)&&(function(s,o){for(const c of Rc(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(d,g,p){const y=eb(d,g,p);return d.inclusive?y<=0:y<0})(s.startAt,Rc(s),o)||s.endAt&&!(function(d,g,p){const y=eb(d,g,p);return d.inclusive?y>=0:y>0})(s.endAt,Rc(s),o))})(i,e)}function JR(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function vS(i){return(e,n)=>{let s=!1;for(const o of Rc(i)){const c=ZR(o,e,n);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function ZR(i,e,n){const s=i.field.isKeyField()?Qe.comparator(e.key,n.key):(function(c,d,g){const p=d.data.field(c),y=g.data.field(c);return p!==null&&y!==null?tl(p,y):at(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return at(19790,{direction:i.dir})}}class $a{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){sa(this.inner,((n,s)=>{for(const[o,c]of s)e(o,c)}))}isEmpty(){return nS(this.inner)}size(){return this.innerSize}}const eI=new fn(Qe.comparator);function is(){return eI}const bS=new fn(Qe.comparator);function xc(...i){let e=bS;for(const n of i)e=e.insert(n.key,n);return e}function ES(i){let e=bS;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Pa(){return Ic()}function SS(){return Ic()}function Ic(){return new $a((i=>i.toString()),((i,e)=>i.isEqual(e)))}const tI=new fn(Qe.comparator),nI=new Vn(Qe.comparator);function Rt(...i){let e=nI;for(const n of i)e=e.add(n);return e}const rI=new Vn(Ct);function iI(){return rI}function ap(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jd(e)?"-0":e}}function xS(i){return{integerValue:""+i}}function sI(i,e){return kR(e)?xS(e):ap(i,e)}class Rh{constructor(){this._=void 0}}function aI(i,e,n){return i instanceof rh?(function(o,c){const d={fields:{[sS]:{stringValue:iS},[oS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&tp(c)&&(c=Th(c)),c&&(d.fields[aS]=c),{mapValue:d}})(n,e):i instanceof rl?TS(i,e):i instanceof Pc?AS(i,e):(function(o,c){const d=wS(o,c),g=ib(d)+ib(o.Ae);return vg(d)&&vg(o.Ae)?xS(g):ap(o.serializer,g)})(i,e)}function oI(i,e,n){return i instanceof rl?TS(i,e):i instanceof Pc?AS(i,e):n}function wS(i,e){return i instanceof ih?(function(s){return vg(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class rh extends Rh{}class rl extends Rh{constructor(e){super(),this.elements=e}}function TS(i,e){const n=CS(e);for(const s of i.elements)n.some((o=>Ti(o,s)))||n.push(s);return{arrayValue:{values:n}}}class Pc extends Rh{constructor(e){super(),this.elements=e}}function AS(i,e){let n=CS(e);for(const s of i.elements)n=n.filter((o=>!Ti(o,s)));return{arrayValue:{values:n}}}class ih extends Rh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function ib(i){return wn(i.integerValue||i.doubleValue)}function CS(i){return np(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class lI{constructor(e,n){this.field=e,this.transform=n}}function cI(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof rl&&o instanceof rl||s instanceof Pc&&o instanceof Pc?el(s.elements,o.elements,Ti):s instanceof ih&&o instanceof ih?Ti(s.Ae,o.Ae):s instanceof rh&&o instanceof rh})(i.transform,e.transform)}class uI{constructor(e,n){this.version=e,this.transformResults=n}}class vi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vi}static exists(e){return new vi(void 0,e)}static updateTime(e){return new vi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Ih{}function RS(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new DS(i.key,vi.none()):new Qc(i.key,i.data,vi.none());{const n=i.data,s=pr.empty();let o=new Vn(Kn.comparator);for(let c of e.fields)if(!o.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),o=o.add(c)}return new aa(i.key,s,new Cr(o.toArray()),vi.none())}}function dI(i,e,n){i instanceof Qc?(function(o,c,d){const g=o.value.clone(),p=ab(o.fieldTransforms,c,d.transformResults);g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(i,e,n):i instanceof aa?(function(o,c,d){if(!Fd(o.precondition,c))return void c.convertToUnknownDocument(d.version);const g=ab(o.fieldTransforms,c,d.transformResults),p=c.data;p.setAll(IS(o)),p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(i,e,n):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Dc(i,e,n,s){return i instanceof Qc?(function(c,d,g,p){if(!Fd(c.precondition,d))return g;const y=c.value.clone(),b=ob(c.fieldTransforms,p,d);return y.setAll(b),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(i,e,n,s):i instanceof aa?(function(c,d,g,p){if(!Fd(c.precondition,d))return g;const y=ob(c.fieldTransforms,p,d),b=d.data;return b.setAll(IS(c)),b.setAll(y),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((S=>S.field)))})(i,e,n,s):(function(c,d,g){return Fd(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(i,e,n)}function hI(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),c=wS(s.transform,o||null);c!=null&&(n===null&&(n=pr.empty()),n.set(s.field,c))}return n||null}function sb(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&el(s,o,((c,d)=>cI(c,d)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Qc extends Ih{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class aa extends Ih{constructor(e,n,s,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function IS(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function ab(i,e,n){const s=new Map;Pt(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const c=i[o],d=c.transform,g=e.data.field(c.field);s.set(c.field,oI(d,g,n[o]))}return s}function ob(i,e,n){const s=new Map;for(const o of i){const c=o.transform,d=n.data.field(o.field);s.set(o.field,aI(c,d,e))}return s}class DS extends Ih{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fI extends Ih{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class mI{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&dI(c,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Dc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Dc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=SS();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=n.has(o.key)?null:g;const p=RS(d,g);p!==null&&s.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(lt.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Rt())}isEqual(e){return this.batchId===e.batchId&&el(this.mutations,e.mutations,((n,s)=>sb(n,s)))&&el(this.baseMutations,e.baseMutations,((n,s)=>sb(n,s)))}}class op{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Pt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return tI})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,s[d].version);return new op(e,n,s,o)}}class gI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class pI{constructor(e,n){this.count=e,this.unchangedNames=n}}var Dn,Dt;function yI(i){switch(i){case ye.OK:return at(64938);case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0;default:return at(15467,{code:i})}}function OS(i){if(i===void 0)return ns("GRPC error has no .code"),ye.UNKNOWN;switch(i){case Dn.OK:return ye.OK;case Dn.CANCELLED:return ye.CANCELLED;case Dn.UNKNOWN:return ye.UNKNOWN;case Dn.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case Dn.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case Dn.INTERNAL:return ye.INTERNAL;case Dn.UNAVAILABLE:return ye.UNAVAILABLE;case Dn.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case Dn.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case Dn.NOT_FOUND:return ye.NOT_FOUND;case Dn.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case Dn.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case Dn.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case Dn.ABORTED:return ye.ABORTED;case Dn.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case Dn.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case Dn.DATA_LOSS:return ye.DATA_LOSS;default:return at(39323,{code:i})}}(Dt=Dn||(Dn={}))[Dt.OK=0]="OK",Dt[Dt.CANCELLED=1]="CANCELLED",Dt[Dt.UNKNOWN=2]="UNKNOWN",Dt[Dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dt[Dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dt[Dt.NOT_FOUND=5]="NOT_FOUND",Dt[Dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dt[Dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dt[Dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dt[Dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dt[Dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dt[Dt.ABORTED=10]="ABORTED",Dt[Dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dt[Dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dt[Dt.INTERNAL=13]="INTERNAL",Dt[Dt.UNAVAILABLE=14]="UNAVAILABLE",Dt[Dt.DATA_LOSS=15]="DATA_LOSS";function _I(){return new TextEncoder}const vI=new Qs([4294967295,4294967295],0);function lb(i){const e=_I().encode(i),n=new GE;return n.update(e),new Uint8Array(n.digest())}function cb(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Qs([n,s],0),new Qs([o,c],0)]}class lp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new wc(`Invalid padding: ${n}`);if(s<0)throw new wc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new wc(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new wc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Qs.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(Qs.fromNumber(s)));return o.compare(vI)===1&&(o=new Qs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=lb(e),[s,o]=cb(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,o,c);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new lp(c,o,n);return s.forEach((g=>d.insert(g))),d}insert(e){if(this.ge===0)return;const n=lb(e),[s,o]=cb(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,o,c);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Dh{constructor(e,n,s,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Kc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Dh(lt.min(),o,new fn(Ct),is(),Rt())}}class Kc{constructor(e,n,s,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Kc(s,n,Rt(),Rt(),Rt())}}class Hd{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class kS{constructor(e,n){this.targetId=e,this.Ce=n}}class MS{constructor(e,n,s=Xn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class ub{constructor(){this.ve=0,this.Fe=db(),this.Me=Xn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Rt(),n=Rt(),s=Rt();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:at(38017,{changeType:c})}})),new Kc(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=db()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Pt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class bI{constructor(e){this.Ge=e,this.ze=new Map,this.je=is(),this.Je=Id(),this.He=Id(),this.Ye=new fn(Ct)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:at(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(Eg(c))if(s===0){const d=new Qe(c.path);this.et(n,d,tr.newNoDocument(d,lt.min()))}else Pt(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const g=this.ut(e),p=g?this.ct(g,e,d):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=n;let d,g;try{d=ta(s).toUint8Array()}catch(p){if(p instanceof rS)return Zo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new lp(d,o,c)}catch(p){return Zo(p instanceof wc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((c=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const g=this.ot(d);if(g){if(c.current&&Eg(g.target)){const p=new Qe(g.target.path);this.It(p).has(d)||this.Et(d,p)||this.et(d,p,tr.newNoDocument(p,e))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let s=Rt();this.He.forEach(((c,d)=>{let g=!0;d.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const o=new Dh(e,n,this.Ye,this.je,s);return this.je=is(),this.Je=Id(),this.He=Id(),this.Ye=new fn(Ct),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ub,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Vn(Ct),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Vn(Ct),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Pe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ub),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Id(){return new fn(Qe.comparator)}function db(){return new fn(Qe.comparator)}const EI={asc:"ASCENDING",desc:"DESCENDING"},SI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xI={and:"AND",or:"OR"};class wI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wg(i,e){return i.useProto3Json||wh(e)?e:{value:e}}function sh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NS(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function TI(i,e){return sh(i,e.toTimestamp())}function bi(i){return Pt(!!i,49232),lt.fromTimestamp((function(n){const s=ea(n);return new rn(s.seconds,s.nanos)})(i))}function cp(i,e){return Tg(i,e).canonicalString()}function Tg(i,e){const n=(function(o){return new Zt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function jS(i){const e=Zt.fromString(i);return Pt(zS(e),10190,{key:e.toString()}),e}function Ag(i,e){return cp(i.databaseId,e.path)}function eg(i,e){const n=jS(e);if(n.get(1)!==i.databaseId.projectId)throw new Ve(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Ve(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Qe(LS(n))}function VS(i,e){return cp(i.databaseId,e)}function AI(i){const e=jS(i);return e.length===4?Zt.emptyPath():LS(e)}function Cg(i){return new Zt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function LS(i){return Pt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function hb(i,e,n){return{name:Ag(i,e),fields:n.value.mapValue.fields}}function CI(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:at(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,b){return y.useProto3Json?(Pt(b===void 0||typeof b=="string",58123),Xn.fromBase64String(b||"")):(Pt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Xn.fromUint8Array(b||new Uint8Array))})(i,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(y){const b=y.code===void 0?ye.UNKNOWN:OS(y.code);return new Ve(b,y.message||"")})(d);n=new MS(s,o,c,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=eg(i,s.document.name),c=bi(s.document.updateTime),d=s.document.createTime?bi(s.document.createTime):lt.min(),g=new pr({mapValue:{fields:s.document.fields}}),p=tr.newFoundDocument(o,c,d,g),y=s.targetIds||[],b=s.removedTargetIds||[];n=new Hd(y,b,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=eg(i,s.document),c=s.readTime?bi(s.readTime):lt.min(),d=tr.newNoDocument(o,c),g=s.removedTargetIds||[];n=new Hd([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=eg(i,s.document),c=s.removedTargetIds||[];n=new Hd([],c,o,null)}else{if(!("filter"in e))return at(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,d=new pI(o,c),g=s.targetId;n=new kS(g,d)}}return n}function RI(i,e){let n;if(e instanceof Qc)n={update:hb(i,e.key,e.value)};else if(e instanceof DS)n={delete:Ag(i,e.key)};else if(e instanceof aa)n={update:hb(i,e.key,e.data),updateMask:LI(e.fieldMask)};else{if(!(e instanceof fI))return at(16599,{Vt:e.type});n={verify:Ag(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const g=d.transform;if(g instanceof rh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof rl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Pc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof ih)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw at(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:TI(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:at(27497)})(i,e.precondition)),n}function II(i,e){return i&&i.length>0?(Pt(e!==void 0,14353),i.map((n=>(function(o,c){let d=o.updateTime?bi(o.updateTime):bi(c);return d.isEqual(lt.min())&&(d=bi(c)),new uI(d,o.transformResults||[])})(n,e)))):[]}function DI(i,e){return{documents:[VS(i,e.path)]}}function OI(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=VS(i,o);const c=(function(y){if(y.length!==0)return US(ni.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((b=>(function(w){return{field:qo(w.field),direction:NI(w.dir)}})(b)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const g=wg(i,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function kI(i){let e=AI(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Pt(s===1,65062);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let c=[];n.where&&(c=(function(S){const w=PS(S);return w instanceof ni&&fS(w)?w.getFilters():[w]})(n.where));let d=[];n.orderBy&&(d=(function(S){return S.map((w=>(function(N){return new nh(Go(N.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(w)))})(n.orderBy));let g=null;n.limit&&(g=(function(S){let w;return w=typeof S=="object"?S.value:S,wh(w)?null:w})(n.limit));let p=null;n.startAt&&(p=(function(S){const w=!!S.before,O=S.values||[];return new th(O,w)})(n.startAt));let y=null;return n.endAt&&(y=(function(S){const w=!S.before,O=S.values||[];return new th(O,w)})(n.endAt)),KR(e,o,d,c,g,"F",p,y)}function MI(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return at(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function PS(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Go(n.unaryFilter.field);return On.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Go(n.unaryFilter.field);return On.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Go(n.unaryFilter.field);return On.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Go(n.unaryFilter.field);return On.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return at(61313);default:return at(60726)}})(i):i.fieldFilter!==void 0?(function(n){return On.create(Go(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return at(58110);default:return at(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return ni.create(n.compositeFilter.filters.map((s=>PS(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return at(1026)}})(n.compositeFilter.op))})(i):at(30097,{filter:i})}function NI(i){return EI[i]}function jI(i){return SI[i]}function VI(i){return xI[i]}function qo(i){return{fieldPath:i.canonicalString()}}function Go(i){return Kn.fromServerFormat(i.fieldPath)}function US(i){return i instanceof On?(function(n){if(n.op==="=="){if(Zv(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NAN"}};if(Jv(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Zv(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NOT_NAN"}};if(Jv(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qo(n.field),op:jI(n.op),value:n.value}}})(i):i instanceof ni?(function(n){const s=n.getFilters().map((o=>US(o)));return s.length===1?s[0]:{compositeFilter:{op:VI(n.op),filters:s}}})(i):at(54877,{filter:i})}function LI(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function zS(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class Gs{constructor(e,n,s,o,c=lt.min(),d=lt.min(),g=Xn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new Gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class PI{constructor(e){this.yt=e}}function UI(i){const e=kI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?xg(e,e.limit,"L"):e}class zI{constructor(){this.Cn=new BI}addToCollectionParentIndex(e,n){return this.Cn.add(n),_e.resolve()}getCollectionParents(e,n){return _e.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return _e.resolve()}deleteFieldIndex(e,n){return _e.resolve()}deleteAllFieldIndexes(e){return _e.resolve()}createTargetIndexes(e,n){return _e.resolve()}getDocumentsMatchingTarget(e,n){return _e.resolve(null)}getIndexType(e,n){return _e.resolve(0)}getFieldIndexes(e,n){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}getMinOffset(e,n){return _e.resolve(Zs.min())}getMinOffsetFromCollectionGroup(e,n){return _e.resolve(Zs.min())}updateCollectionGroup(e,n,s){return _e.resolve()}updateIndexEntries(e,n){return _e.resolve()}}class BI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Vn(Zt.comparator),c=!o.has(s);return this.index[n]=o.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Vn(Zt.comparator)).toArray()}}const fb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},BS=41943040;class gr{static withCacheSize(e){return new gr(e,gr.DEFAULT_COLLECTION_PERCENTILE,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}gr.DEFAULT_COLLECTION_PERCENTILE=10,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gr.DEFAULT=new gr(BS,gr.DEFAULT_COLLECTION_PERCENTILE,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gr.DISABLED=new gr(-1,0,0);class il{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new il(0)}static cr(){return new il(-1)}}const mb="LruGarbageCollector",FI=1048576;function gb([i,e],[n,s]){const o=Ct(i,n);return o===0?Ct(e,s):o}class HI{constructor(e){this.Ir=e,this.buffer=new Vn(gb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();gb(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Pe(mb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){pl(n)?Pe(mb,"Ignoring IndexedDB error during garbage collection: ",n):await gl(n)}await this.Vr(3e5)}))}}class GI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return _e.resolve(xh.ce);const s=new HI(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(fb)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fb):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,c,d,g,p,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,d=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(s=S,g=Date.now(),this.removeTargets(e,s,n)))).next((S=>(c=S,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((S=>(y=Date.now(),Fo()<=At.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${o} in `+(g-d)+`ms
	Removed ${c} targets in `+(p-g)+`ms
	Removed ${S} documents in `+(y-p)+`ms
Total Duration: ${y-b}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:S}))))}}function $I(i,e){return new GI(i,e)}class WI{constructor(){this.changes=new $a((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?_e.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class QI{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&Dc(s.mutation,o,Cr.empty(),rn.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Rt()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Rt()){const o=Pa();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((c=>{let d=xc();return c.forEach(((g,p)=>{d=d.insert(g,p.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=Pa();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Rt())))}populateOverlays(e,n,s){const o=[];return s.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,g)=>{n.set(d,g)}))}))}computeViews(e,n,s,o){let c=is();const d=Ic(),g=(function(){return Ic()})();return n.forEach(((p,y)=>{const b=s.get(y.key);o.has(y.key)&&(b===void 0||b.mutation instanceof aa)?c=c.insert(y.key,y):b!==void 0?(d.set(y.key,b.mutation.getFieldMask()),Dc(b.mutation,y,b.mutation.getFieldMask(),rn.now())):d.set(y.key,Cr.empty())})),this.recalculateAndSaveOverlays(e,c).next((p=>(p.forEach(((y,b)=>d.set(y,b))),n.forEach(((y,b)=>g.set(y,new YI(b,d.get(y)??null)))),g)))}recalculateAndSaveOverlays(e,n){const s=Ic();let o=new fn(((d,g)=>d-g)),c=Rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const g of d)g.keys().forEach((p=>{const y=n.get(p);if(y===null)return;let b=s.get(p)||Cr.empty();b=g.applyToLocalView(y,b),s.set(p,b);const S=(o.get(g.batchId)||Rt()).add(p);o=o.insert(g.batchId,S)}))})).next((()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,b=p.value,S=SS();b.forEach((w=>{if(!c.has(w)){const O=RS(n.get(w),s.get(w));O!==null&&S.set(w,O),c=c.add(w)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,S))}return _e.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(d){return Qe.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-c.size):_e.resolve(Pa());let g=Nc,p=c;return d.next((y=>_e.forEach(y,((b,S)=>(g<S.largestBatchId&&(g=S.largestBatchId),c.get(b)?_e.resolve():this.remoteDocumentCache.getEntry(e,b).next((w=>{p=p.insert(b,w)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,p,y,Rt()))).next((b=>({batchId:g,changes:ES(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Qe(n)).next((s=>{let o=xc();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const c=n.collectionGroup;let d=xc();return this.indexManager.getCollectionParents(e,c).next((g=>_e.forEach(g,(p=>{const y=(function(S,w){return new Yc(w,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((b=>{b.forEach(((S,w)=>{d=d.insert(S,w)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,o)))).next((d=>{c.forEach(((p,y)=>{const b=y.getKey();d.get(b)===null&&(d=d.insert(b,tr.newInvalidDocument(b)))}));let g=xc();return d.forEach(((p,y)=>{const b=c.get(p);b!==void 0&&Dc(b.mutation,y,Cr.empty(),rn.now()),Ch(n,y)&&(g=g.insert(p,y))})),g}))}}class KI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return _e.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:bi(o.createTime)}})(n)),_e.resolve()}getNamedQuery(e,n){return _e.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:UI(o.bundledQuery),readTime:bi(o.readTime)}})(n)),_e.resolve()}}class XI{constructor(){this.overlays=new fn(Qe.comparator),this.qr=new Map}getOverlay(e,n){return _e.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Pa();return _e.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,c)=>{this.St(e,n,c)})),_e.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),_e.resolve()}getOverlaysForCollection(e,n,s){const o=Pa(),c=n.length+1,d=new Qe(n.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&p.largestBatchId>s&&o.set(p.getKey(),p)}return _e.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let c=new fn(((y,b)=>y-b));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let b=c.get(y.largestBatchId);b===null&&(b=Pa(),c=c.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const g=Pa(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,b)=>g.set(y,b))),!(g.size()>=o)););return _e.resolve(g)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new gI(n,s));let c=this.qr.get(n);c===void 0&&(c=Rt(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}class JI{constructor(){this.sessionToken=Xn.EMPTY_BYTE_STRING}getSessionToken(e){return _e.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,_e.resolve()}}class up{constructor(){this.Qr=new Vn(Un.$r),this.Ur=new Vn(Un.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Un(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Un(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Qe(new Zt([])),s=new Un(n,e),o=new Un(n,e+1),c=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Qe(new Zt([])),s=new Un(n,e),o=new Un(n,e+1);let c=Rt();return this.Ur.forEachInRange([s,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Un(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Un{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Qe.comparator(e.key,n.key)||Ct(e.Yr,n.Yr)}static Kr(e,n){return Ct(e.Yr,n.Yr)||Qe.comparator(e.key,n.key)}}class ZI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Vn(Un.$r)}checkEmpty(e){return _e.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new mI(c,n,s,o);this.mutationQueue.push(d);for(const g of o)this.Zr=this.Zr.add(new Un(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return _e.resolve(d)}lookupMutationBatch(e,n){return _e.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),c=o<0?0:o;return _e.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(this.mutationQueue.length===0?ep:this.tr-1)}getAllMutationBatches(e){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Un(n,0),o=new Un(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,o],(d=>{const g=this.Xr(d.Yr);c.push(g)})),_e.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Vn(Ct);return n.forEach((o=>{const c=new Un(o,0),d=new Un(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(g=>{s=s.add(g.Yr)}))})),_e.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let c=s;Qe.isDocumentKey(c)||(c=c.child(""));const d=new Un(new Qe(c),0);let g=new Vn(Ct);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(g=g.add(p.Yr)),!0)}),d),_e.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Pt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return _e.forEach(n.mutations,(o=>{const c=new Un(o.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Un(n,0),o=this.Zr.firstAfterOrEqual(s);return _e.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,_e.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class e2{constructor(e){this.ri=e,this.docs=(function(){return new fn(Qe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),c=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return _e.resolve(s?s.document.mutableCopy():tr.newInvalidDocument(n))}getEntries(e,n){let s=is();return n.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():tr.newInvalidDocument(o))})),_e.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let c=is();const d=n.path,g=new Qe(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:b}}=p.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||RR(CR(b),s)<=0||(o.has(b.key)||Ch(n,b))&&(c=c.insert(b.key,b.mutableCopy()))}return _e.resolve(c)}getAllFromCollectionGroup(e,n,s,o){at(9500)}ii(e,n){return _e.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new t2(this)}getSize(e){return _e.resolve(this.size)}}class t2 extends WI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),_e.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class n2{constructor(e){this.persistence=e,this.si=new $a((n=>rp(n)),ip),this.lastRemoteSnapshotVersion=lt.min(),this.highestTargetId=0,this.oi=0,this._i=new up,this.targetCount=0,this.ai=il.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),_e.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new il(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,_e.resolve()}updateTargetData(e,n){return this.Pr(n),_e.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,n,s){let o=0;const c=[];return this.si.forEach(((d,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),_e.waitFor(c).next((()=>o))}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return _e.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),_e.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),_e.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),_e.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return _e.resolve(s)}containsKey(e,n){return _e.resolve(this._i.containsKey(n))}}class FS{constructor(e,n){this.ui={},this.overlays={},this.ci=new xh(0),this.li=!1,this.li=!0,this.hi=new JI,this.referenceDelegate=e(this),this.Pi=new n2(this),this.indexManager=new zI,this.remoteDocumentCache=(function(o){return new e2(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new PI(n),this.Ii=new KI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new XI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new ZI(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Pe("MemoryPersistence","Starting transaction:",e);const o=new r2(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return _e.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class r2 extends DR{constructor(e){super(),this.currentSequenceNumber=e}}class dp{constructor(e){this.persistence=e,this.Ri=new up,this.Vi=null}static mi(e){return new dp(e)}get fi(){if(this.Vi)return this.Vi;throw at(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),_e.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),_e.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),_e.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.fi,(s=>{const o=Qe.fromPath(s);return this.gi(e,o).next((c=>{c||n.removeEntry(o,lt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return _e.or([()=>_e.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ah{constructor(e,n){this.persistence=e,this.pi=new $a((s=>MR(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=$I(this,n)}static mi(e,n){return new ah(e,n)}Ei(){}di(e){return _e.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return _e.forEach(this.pi,((s,o)=>this.br(e,s,o).next((c=>c?_e.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((g=>{g||(s++,c.removeEntry(d,lt.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),_e.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),_e.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),_e.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),_e.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=zd(e.data.value)),n}br(e,n,s){return _e.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return _e.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class hp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Rt(),o=Rt();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new hp(e,n.fromCache,s,o)}}class i2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class s2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return XA()?8:OR(nr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const c={result:null};return this.ys(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,n,o,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new i2;return this.Ss(e,n,d).next((g=>{if(c.result=g,this.Vs)return this.bs(e,n,d,g.size)}))})).next((()=>c.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(Fo()<=At.DEBUG&&Pe("QueryEngine","SDK will not create cache indexes for query:",Ho(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),_e.resolve()):(Fo()<=At.DEBUG&&Pe("QueryEngine","Query:",Ho(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Fo()<=At.DEBUG&&Pe("QueryEngine","The SDK decides to create cache indexes for query:",Ho(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_i(n))):_e.resolve())}ys(e,n){if(rb(n))return _e.resolve(null);let s=_i(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=xg(n,null,"F"),s=_i(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=Rt(...c);return this.ps.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,s).next((p=>{const y=this.Ds(n,g);return this.Cs(n,y,d,p.readTime)?this.ys(e,xg(n,null,"F")):this.vs(e,y,n,p)}))))})))))}ws(e,n,s,o){return rb(n)||o.isEqual(lt.min())?_e.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,s,o)?_e.resolve(null):(Fo()<=At.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ho(n)),this.vs(e,d,n,AR(o,Nc)).next((g=>g)))}))}Ds(e,n){let s=new Vn(vS(e));return n.forEach(((o,c)=>{Ch(e,c)&&(s=s.add(c))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,s){return Fo()<=At.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",Ho(n)),this.ps.getDocumentsMatchingQuery(e,n,Zs.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}const fp="LocalStore",a2=3e8;class o2{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new fn(Ct),this.xs=new $a((c=>rp(c)),ip),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function l2(i,e,n,s){return new o2(i,e,n,s)}async function HS(i,e){const n=ht(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],g=[];let p=Rt();for(const y of o){d.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}for(const y of c){g.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}return n.localDocuments.getDocuments(s,p).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:g})))}))}))}function c2(i,e){const n=ht(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,y,b){const S=y.batch,w=S.keys();let O=_e.resolve();return w.forEach((N=>{O=O.next((()=>b.getEntry(p,N))).next((P=>{const j=y.docVersions.get(N);Pt(j!==null,48541),P.version.compareTo(j)<0&&(S.applyToRemoteDocument(P,y),P.isValidDocument()&&(P.setReadTime(y.commitVersion),b.addEntry(P)))}))})),O.next((()=>g.mutationQueue.removeMutationBatch(p,S)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(g){let p=Rt();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function qS(i){const e=ht(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function u2(i,e){const n=ht(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((b,S)=>{const w=o.get(S);if(!w)return;g.push(n.Pi.removeMatchingKeys(c,b.removedDocuments,S).next((()=>n.Pi.addMatchingKeys(c,b.addedDocuments,S))));let O=w.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(S)!==null?O=O.withResumeToken(Xn.EMPTY_BYTE_STRING,lt.min()).withLastLimboFreeSnapshotVersion(lt.min()):b.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(b.resumeToken,s)),o=o.insert(S,O),(function(P,j,W){return P.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=a2?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(w,O,b)&&g.push(n.Pi.updateTargetData(c,O))}));let p=is(),y=Rt();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,b))})),g.push(d2(c,d,e.documentUpdates).next((b=>{p=b.ks,y=b.qs}))),!s.isEqual(lt.min())){const b=n.Pi.getLastRemoteSnapshotVersion(c).next((S=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));g.push(b)}return _e.waitFor(g).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,p,y))).next((()=>p))})).then((c=>(n.Ms=o,c)))}function d2(i,e,n){let s=Rt(),o=Rt();return n.forEach((c=>s=s.add(c))),e.getEntries(i,s).next((c=>{let d=is();return n.forEach(((g,p)=>{const y=c.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(g)),p.isNoDocument()&&p.version.isEqual(lt.min())?(e.removeEntry(g,p.readTime),d=d.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),d=d.insert(g,p)):Pe(fp,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)})),{ks:d,qs:o}}))}function h2(i,e){const n=ht(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=ep),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function f2(i,e){const n=ht(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((c=>c?(o=c,_e.resolve(o)):n.Pi.allocateTargetId(s).next((d=>(o=new Gs(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Rg(i,e,n){const s=ht(i),o=s.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!pl(d))throw d;Pe(fp,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function pb(i,e,n){const s=ht(i);let o=lt.min(),c=Rt();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(p,y,b){const S=ht(p),w=S.xs.get(b);return w!==void 0?_e.resolve(S.Ms.get(w)):S.Pi.getTargetData(y,b)})(s,d,_i(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,g.targetId).next((p=>{c=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?o:lt.min(),n?c:Rt()))).next((g=>(m2(s,JR(e),g),{documents:g,Qs:c})))))}function m2(i,e,n){let s=i.Os.get(e)||lt.min();n.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),i.Os.set(e,s)}class yb{constructor(){this.activeTargetIds=iI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class g2{constructor(){this.Mo=new yb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new yb,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class p2{Oo(e){}shutdown(){}}const _b="ConnectivityMonitor";class vb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Pe(_b,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Pe(_b,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Dd=null;function Ig(){return Dd===null?Dd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Dd++,"0x"+Dd.toString(16)}const tg="RestConnection",y2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Zd?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,c){const d=Ig(),g=this.zo(e,n.toUriEncodedString());Pe(tg,`Sending RPC '${e}' ${d}:`,g,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,c);const{host:y}=new URL(g),b=hl(y);return this.Jo(e,g,p,s,b).then((S=>(Pe(tg,`Received RPC '${e}' ${d}: `,S),S)),(S=>{throw Zo(tg,`RPC '${e}' ${d} failed with error: `,S,"url: ",g,"request:",s),S}))}Ho(e,n,s,o,c,d){return this.Go(e,n,s,o,c)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ml})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),s&&s.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const s=y2[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class v2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Zn="WebChannelConnection";class b2 extends _2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,c){const d=Ig();return new Promise(((g,p)=>{const y=new $E;y.setWithCredentials(!0),y.listenOnce(WE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Ud.NO_ERROR:const S=y.getResponseJson();Pe(Zn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(S)),g(S);break;case Ud.TIMEOUT:Pe(Zn,`RPC '${e}' ${d} timed out`),p(new Ve(ye.DEADLINE_EXCEEDED,"Request time out"));break;case Ud.HTTP_ERROR:const w=y.getStatus();if(Pe(Zn,`RPC '${e}' ${d} failed with status:`,w,"response text:",y.getResponseText()),w>0){let O=y.getResponseJson();Array.isArray(O)&&(O=O[0]);const N=O?.error;if(N&&N.status&&N.message){const P=(function(W){const G=W.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(G)>=0?G:ye.UNKNOWN})(N.status);p(new Ve(P,N.message))}else p(new Ve(ye.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new Ve(ye.UNAVAILABLE,"Connection failed."));break;default:at(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{Pe(Zn,`RPC '${e}' ${d} completed.`)}}));const b=JSON.stringify(o);Pe(Zn,`RPC '${e}' ${d} sending request:`,o),y.send(n,"POST",b,s,15)}))}T_(e,n,s){const o=Ig(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=KE(),g=QE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const b=c.join("");Pe(Zn,`Creating RPC '${e}' stream ${o}: ${b}`,p);const S=d.createWebChannel(b,p);this.I_(S);let w=!1,O=!1;const N=new v2({Yo:j=>{O?Pe(Zn,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(w||(Pe(Zn,`Opening RPC '${e}' stream ${o} transport.`),S.open(),w=!0),Pe(Zn,`RPC '${e}' stream ${o} sending:`,j),S.send(j))},Zo:()=>S.close()}),P=(j,W,G)=>{j.listen(W,(re=>{try{G(re)}catch(Ce){setTimeout((()=>{throw Ce}),0)}}))};return P(S,Sc.EventType.OPEN,(()=>{O||(Pe(Zn,`RPC '${e}' stream ${o} transport opened.`),N.o_())})),P(S,Sc.EventType.CLOSE,(()=>{O||(O=!0,Pe(Zn,`RPC '${e}' stream ${o} transport closed`),N.a_(),this.E_(S))})),P(S,Sc.EventType.ERROR,(j=>{O||(O=!0,Zo(Zn,`RPC '${e}' stream ${o} transport errored. Name:`,j.name,"Message:",j.message),N.a_(new Ve(ye.UNAVAILABLE,"The operation could not be completed")))})),P(S,Sc.EventType.MESSAGE,(j=>{if(!O){const W=j.data[0];Pt(!!W,16349);const G=W,re=G?.error||G[0]?.error;if(re){Pe(Zn,`RPC '${e}' stream ${o} received error:`,re);const Ce=re.status;let je=(function(A){const I=Dn[A];if(I!==void 0)return OS(I)})(Ce),xe=re.message;je===void 0&&(je=ye.INTERNAL,xe="Unknown error status: "+Ce+" with message "+re.message),O=!0,N.a_(new Ve(je,xe)),S.close()}else Pe(Zn,`RPC '${e}' stream ${o} received:`,W),N.u_(W)}})),P(g,YE.STAT_EVENT,(j=>{j.stat===pg.PROXY?Pe(Zn,`RPC '${e}' stream ${o} detected buffering proxy`):j.stat===pg.NOPROXY&&Pe(Zn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function ng(){return typeof document<"u"?document:null}function Oh(i){return new wI(i,!0)}class GS{constructor(e,n,s=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&Pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const bb="PersistentStream";class $S{constructor(e,n,s,o,c,d,g,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new GS(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ye.RESOURCE_EXHAUSTED?(ns(n.toString()),ns("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ye.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new Ve(ye.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Pe(bb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Pe(bb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class E2 extends $S{constructor(e,n,s,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=CI(this.serializer,e),s=(function(c){if(!("targetChange"in c))return lt.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?lt.min():d.readTime?bi(d.readTime):lt.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Cg(this.serializer),n.addTarget=(function(c,d){let g;const p=d.target;if(g=Eg(p)?{documents:DI(c,p)}:{query:OI(c,p).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=NS(c,d.resumeToken);const y=wg(c,d.expectedCount);y!==null&&(g.expectedCount=y)}else if(d.snapshotVersion.compareTo(lt.min())>0){g.readTime=sh(c,d.snapshotVersion.toTimestamp());const y=wg(c,d.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,e);const s=MI(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Cg(this.serializer),n.removeTarget=e,this.q_(n)}}class S2 extends $S{constructor(e,n,s,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=II(e.writeResults,e.commitTime),s=bi(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Cg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>RI(this.serializer,s)))};this.q_(n)}}class x2{}class w2 extends x2{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Ve(ye.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,Tg(n,s),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ve(ye.UNKNOWN,c.toString())}))}Ho(e,n,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Ho(e,Tg(n,s),o,d,g,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ve(ye.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class T2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ns(n),this.aa=!1):Pe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Fa="RemoteStore";class A2{constructor(e,n,s,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Wa(this)&&(Pe(Fa,"Restarting streams for network reachability change."),await(async function(p){const y=ht(p);y.Ea.add(4),await Xc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await kh(y)})(this))}))})),this.Ra=new T2(s,o)}}async function kh(i){if(Wa(i))for(const e of i.da)await e(!0)}async function Xc(i){for(const e of i.da)await e(!1)}function WS(i,e){const n=ht(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),yp(n)?pp(n):yl(n).O_()&&gp(n,e))}function mp(i,e){const n=ht(i),s=yl(n);n.Ia.delete(e),s.O_()&&YS(n,e),n.Ia.size===0&&(s.O_()?s.L_():Wa(n)&&n.Ra.set("Unknown"))}function gp(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(lt.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yl(i).Y_(e)}function YS(i,e){i.Va.Ue(e),yl(i).Z_(e)}function pp(i){i.Va=new bI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),yl(i).start(),i.Ra.ua()}function yp(i){return Wa(i)&&!yl(i).x_()&&i.Ia.size>0}function Wa(i){return ht(i).Ea.size===0}function QS(i){i.Va=void 0}async function C2(i){i.Ra.set("Online")}async function R2(i){i.Ia.forEach(((e,n)=>{gp(i,e)}))}async function I2(i,e){QS(i),yp(i)?(i.Ra.ha(e),pp(i)):i.Ra.set("Unknown")}async function D2(i,e,n){if(i.Ra.set("Online"),e instanceof MS&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const g of c.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,d),o.Ia.delete(g),o.Va.removeTarget(g))})(i,e)}catch(s){Pe(Fa,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await oh(i,s)}else if(e instanceof Hd?i.Va.Ze(e):e instanceof kS?i.Va.st(e):i.Va.tt(e),!n.isEqual(lt.min()))try{const s=await qS(i.localStore);n.compareTo(s)>=0&&await(function(c,d){const g=c.Va.Tt(d);return g.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const b=c.Ia.get(y);b&&c.Ia.set(y,b.withResumeToken(p.resumeToken,d))}})),g.targetMismatches.forEach(((p,y)=>{const b=c.Ia.get(p);if(!b)return;c.Ia.set(p,b.withResumeToken(Xn.EMPTY_BYTE_STRING,b.snapshotVersion)),YS(c,p);const S=new Gs(b.target,p,y,b.sequenceNumber);gp(c,S)})),c.remoteSyncer.applyRemoteEvent(g)})(i,n)}catch(s){Pe(Fa,"Failed to raise snapshot:",s),await oh(i,s)}}async function oh(i,e,n){if(!pl(e))throw e;i.Ea.add(1),await Xc(i),i.Ra.set("Offline"),n||(n=()=>qS(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Pe(Fa,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await kh(i)}))}function KS(i,e){return e().catch((n=>oh(i,n,e)))}async function Mh(i){const e=ht(i),n=ra(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ep;for(;O2(e);)try{const o=await h2(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,k2(e,o)}catch(o){await oh(e,o)}XS(e)&&JS(e)}function O2(i){return Wa(i)&&i.Ta.length<10}function k2(i,e){i.Ta.push(e);const n=ra(i);n.O_()&&n.X_&&n.ea(e.mutations)}function XS(i){return Wa(i)&&!ra(i).x_()&&i.Ta.length>0}function JS(i){ra(i).start()}async function M2(i){ra(i).ra()}async function N2(i){const e=ra(i);for(const n of i.Ta)e.ea(n.mutations)}async function j2(i,e,n){const s=i.Ta.shift(),o=op.from(s,e,n);await KS(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Mh(i)}async function V2(i,e){e&&ra(i).X_&&await(async function(s,o){if((function(d){return yI(d)&&d!==ye.ABORTED})(o.code)){const c=s.Ta.shift();ra(s).B_(),await KS(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Mh(s)}})(i,e),XS(i)&&JS(i)}async function Eb(i,e){const n=ht(i);n.asyncQueue.verifyOperationInProgress(),Pe(Fa,"RemoteStore received new credentials");const s=Wa(n);n.Ea.add(3),await Xc(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await kh(n)}async function L2(i,e){const n=ht(i);e?(n.Ea.delete(2),await kh(n)):e||(n.Ea.add(2),await Xc(n),n.Ra.set("Unknown"))}function yl(i){return i.ma||(i.ma=(function(n,s,o){const c=ht(n);return c.sa(),new E2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:C2.bind(null,i),t_:R2.bind(null,i),r_:I2.bind(null,i),H_:D2.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),yp(i)?pp(i):i.Ra.set("Unknown")):(await i.ma.stop(),QS(i))}))),i.ma}function ra(i){return i.fa||(i.fa=(function(n,s,o){const c=ht(n);return c.sa(),new S2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:M2.bind(null,i),r_:V2.bind(null,i),ta:N2.bind(null,i),na:j2.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Mh(i)):(await i.fa.stop(),i.Ta.length>0&&(Pe(Fa,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class _p{constructor(e,n,s,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new Zi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,c){const d=Date.now()+s,g=new _p(e,n,d,o,c);return g.start(s),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vp(i,e){if(ns("AsyncQueue",`${e}: ${i}`),pl(i))return new Ve(ye.UNAVAILABLE,`${e}: ${i}`);throw i}class Wo{static emptySet(e){return new Wo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Qe.comparator(n.key,s.key):(n,s)=>Qe.comparator(n.key,s.key),this.keyedMap=xc(),this.sortedSet=new fn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Wo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class Sb{constructor(){this.ga=new fn(Qe.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):at(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class sl{constructor(e,n,s,o,c,d,g,p,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,c){const d=[];return n.forEach((g=>{d.push({type:0,doc:g})})),new sl(e,n,Wo.emptySet(n),d,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ah(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class P2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class U2{constructor(){this.queries=xb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=ht(n),c=o.queries;o.queries=xb(),c.forEach(((d,g)=>{for(const p of g.Sa)p.onError(s)}))})(this,new Ve(ye.ABORTED,"Firestore shutting down"))}}function xb(){return new $a((i=>_S(i)),Ah)}async function ZS(i,e){const n=ht(i);let s=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(s=2):(c=new P2,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const g=vp(d,`Initialization of query '${Ho(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&bp(n)}async function ex(i,e){const n=ht(i),s=e.query;let o=3;const c=n.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function z2(i,e){const n=ht(i);let s=!1;for(const o of e){const c=o.query,d=n.queries.get(c);if(d){for(const g of d.Sa)g.Fa(o)&&(s=!0);d.wa=o}}s&&bp(n)}function B2(i,e,n){const s=ht(i),o=s.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);s.queries.delete(e)}function bp(i){i.Ca.forEach((e=>{e.next()}))}var Dg,wb;(wb=Dg||(Dg={})).Ma="default",wb.Cache="cache";class tx{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new sl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Dg.Cache}}class nx{constructor(e){this.key=e}}class rx{constructor(e){this.key=e}}class F2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Rt(),this.mutatedKeys=Rt(),this.eu=vS(e),this.tu=new Wo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new Sb,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=o,g=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,S)=>{const w=o.get(b),O=Ch(this.query,S)?S:null,N=!!w&&this.mutatedKeys.has(w.key),P=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let j=!1;w&&O?w.data.isEqual(O.data)?N!==P&&(s.track({type:3,doc:O}),j=!0):this.su(w,O)||(s.track({type:2,doc:O}),j=!0,(p&&this.eu(O,p)>0||y&&this.eu(O,y)<0)&&(g=!0)):!w&&O?(s.track({type:0,doc:O}),j=!0):w&&!O&&(s.track({type:1,doc:w}),j=!0,(p||y)&&(g=!0)),j&&(O?(d=d.add(O),c=P?c.add(b):c.delete(b)):(d=d.delete(b),c=c.delete(b)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),c=c.delete(b.key),s.track({type:1,doc:b})}return{tu:d,iu:s,Cs:g,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((b,S)=>(function(O,N){const P=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at(20277,{Rt:j})}};return P(O)-P(N)})(b.type,S.type)||this.eu(b.doc,S.doc))),this.ou(s),o=o??!1;const g=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,d.length!==0||y?{snapshot:new sl(this.query,e.tu,c,d,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Sb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Rt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new rx(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new nx(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Rt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return sl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ep="SyncEngine";class H2{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class q2{constructor(e){this.key=e,this.hu=!1}}class G2{constructor(e,n,s,o,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new $a((g=>_S(g)),Ah),this.Iu=new Map,this.Eu=new Set,this.du=new fn(Qe.comparator),this.Au=new Map,this.Ru=new up,this.Vu={},this.mu=new Map,this.fu=il.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function $2(i,e,n=!0){const s=cx(i);let o;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await ix(s,e,n,!0),o}async function W2(i,e){const n=cx(i);await ix(n,e,!0,!1)}async function ix(i,e,n,s){const o=await f2(i.localStore,_i(e)),c=o.targetId,d=i.sharedClientState.addLocalQueryTarget(c,n);let g;return s&&(g=await Y2(i,e,c,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&WS(i.remoteStore,o),g}async function Y2(i,e,n,s,o){i.pu=(S,w,O)=>(async function(P,j,W,G){let re=j.view.ru(W);re.Cs&&(re=await pb(P.localStore,j.query,!1).then((({documents:R})=>j.view.ru(R,re))));const Ce=G&&G.targetChanges.get(j.targetId),je=G&&G.targetMismatches.get(j.targetId)!=null,xe=j.view.applyChanges(re,P.isPrimaryClient,Ce,je);return Ab(P,j.targetId,xe.au),xe.snapshot})(i,S,w,O);const c=await pb(i.localStore,e,!0),d=new F2(e,c.Qs),g=d.ru(c.documents),p=Kc.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),y=d.applyChanges(g,i.isPrimaryClient,p);Ab(i,n,y.au);const b=new H2(e,n,d);return i.Tu.set(e,b),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),y.snapshot}async function Q2(i,e,n){const s=ht(i),o=s.Tu.get(e),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((d=>!Ah(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Rg(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&mp(s.remoteStore,o.targetId),Og(s,o.targetId)})).catch(gl)):(Og(s,o.targetId),await Rg(s.localStore,o.targetId,!0))}async function K2(i,e){const n=ht(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),mp(n.remoteStore,s.targetId))}async function X2(i,e,n){const s=iD(i);try{const o=await(function(d,g){const p=ht(d),y=rn.now(),b=g.reduce(((O,N)=>O.add(N.key)),Rt());let S,w;return p.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let N=is(),P=Rt();return p.Ns.getEntries(O,b).next((j=>{N=j,N.forEach(((W,G)=>{G.isValidDocument()||(P=P.add(W))}))})).next((()=>p.localDocuments.getOverlayedDocuments(O,N))).next((j=>{S=j;const W=[];for(const G of g){const re=hI(G,S.get(G.key).overlayedDocument);re!=null&&W.push(new aa(G.key,re,uS(re.value.mapValue),vi.exists(!0)))}return p.mutationQueue.addMutationBatch(O,y,W,g)})).next((j=>{w=j;const W=j.applyToLocalDocumentSet(S,P);return p.documentOverlayCache.saveOverlays(O,j.batchId,W)}))})).then((()=>({batchId:w.batchId,changes:ES(S)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,g,p){let y=d.Vu[d.currentUser.toKey()];y||(y=new fn(Ct)),y=y.insert(g,p),d.Vu[d.currentUser.toKey()]=y})(s,o.batchId,n),await Jc(s,o.changes),await Mh(s.remoteStore)}catch(o){const c=vp(o,"Failed to persist write");n.reject(c)}}async function sx(i,e){const n=ht(i);try{const s=await u2(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=n.Au.get(c);d&&(Pt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Pt(d.hu,14607):o.removedDocuments.size>0&&(Pt(d.hu,42227),d.hu=!1))})),await Jc(n,s,e)}catch(s){await gl(s)}}function Tb(i,e,n){const s=ht(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((c,d)=>{const g=d.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(d,g){const p=ht(d);p.onlineState=g;let y=!1;p.queries.forEach(((b,S)=>{for(const w of S.Sa)w.va(g)&&(y=!0)})),y&&bp(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function J2(i,e,n){const s=ht(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),c=o&&o.key;if(c){let d=new fn(Qe.comparator);d=d.insert(c,tr.newNoDocument(c,lt.min()));const g=Rt().add(c),p=new Dh(lt.min(),new Map,new fn(Ct),d,g);await sx(s,p),s.du=s.du.remove(c),s.Au.delete(e),Sp(s)}else await Rg(s.localStore,e,!1).then((()=>Og(s,e,n))).catch(gl)}async function Z2(i,e){const n=ht(i),s=e.batch.batchId;try{const o=await c2(n.localStore,e);ox(n,s,null),ax(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Jc(n,o)}catch(o){await gl(o)}}async function eD(i,e,n){const s=ht(i);try{const o=await(function(d,g){const p=ht(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return p.mutationQueue.lookupMutationBatch(y,g).next((S=>(Pt(S!==null,37113),b=S.keys(),p.mutationQueue.removeMutationBatch(y,S)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,b,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>p.localDocuments.getDocuments(y,b)))}))})(s.localStore,e);ox(s,e,n),ax(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Jc(s,o)}catch(o){await gl(o)}}function ax(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function ox(i,e,n){const s=ht(i);let o=s.Vu[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Og(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||lx(i,s)}))}function lx(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(mp(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),Sp(i))}function Ab(i,e,n){for(const s of n)s instanceof nx?(i.Ru.addReference(s.key,e),tD(i,s)):s instanceof rx?(Pe(Ep,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||lx(i,s.key)):at(19791,{wu:s})}function tD(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(Pe(Ep,"New document in limbo: "+n),i.Eu.add(s),Sp(i))}function Sp(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Qe(Zt.fromString(e)),s=i.fu.next();i.Au.set(s,new q2(n)),i.du=i.du.insert(n,s),WS(i.remoteStore,new Gs(_i(sp(n.path)),s,"TargetPurposeLimboResolution",xh.ce))}}async function Jc(i,e,n){const s=ht(i),o=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((g,p)=>{d.push(s.pu(p,e,n).then((y=>{if((y||n)&&s.isPrimaryClient){const b=y?!y.fromCache:n?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(y){o.push(y);const b=hp.As(p.targetId,y);c.push(b)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(p,y){const b=ht(p);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>_e.forEach(y,(w=>_e.forEach(w.Es,(O=>b.persistence.referenceDelegate.addReference(S,w.targetId,O))).next((()=>_e.forEach(w.ds,(O=>b.persistence.referenceDelegate.removeReference(S,w.targetId,O)))))))))}catch(S){if(!pl(S))throw S;Pe(fp,"Failed to update sequence numbers: "+S)}for(const S of y){const w=S.targetId;if(!S.fromCache){const O=b.Ms.get(w),N=O.snapshotVersion,P=O.withLastLimboFreeSnapshotVersion(N);b.Ms=b.Ms.insert(w,P)}}})(s.localStore,c))}async function nD(i,e){const n=ht(i);if(!n.currentUser.isEqual(e)){Pe(Ep,"User change. New user:",e.toKey());const s=await HS(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((g=>{g.forEach((p=>{p.reject(new Ve(ye.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Jc(n,s.Ls)}}function rD(i,e){const n=ht(i),s=n.Au.get(e);if(s&&s.hu)return Rt().add(s.key);{let o=Rt();const c=n.Iu.get(e);if(!c)return o;for(const d of c){const g=n.Tu.get(d);o=o.unionWith(g.view.nu)}return o}}function cx(i){const e=ht(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=sx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=J2.bind(null,e),e.Pu.H_=z2.bind(null,e.eventManager),e.Pu.yu=B2.bind(null,e.eventManager),e}function iD(i){const e=ht(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Z2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eD.bind(null,e),e}class lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Oh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return l2(this.persistence,new s2,e.initialUser,this.serializer)}Cu(e){return new FS(dp.mi,this.serializer)}Du(e){return new g2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lh.provider={build:()=>new lh};class sD extends lh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Pt(this.persistence.referenceDelegate instanceof ah,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new qI(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?gr.withCacheSize(this.cacheSizeBytes):gr.DEFAULT;return new FS((s=>ah.mi(s,n)),this.serializer)}}class kg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Tb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=nD.bind(null,this.syncEngine),await L2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new U2})()}createDatastore(e){const n=Oh(e.databaseInfo.databaseId),s=(function(c){return new b2(c)})(e.databaseInfo);return(function(c,d,g,p){return new w2(c,d,g,p)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,c,d,g){return new A2(s,o,c,d,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>Tb(this.syncEngine,n,0)),(function(){return vb.v()?new vb:new p2})())}createSyncEngine(e,n){return(function(o,c,d,g,p,y,b){const S=new G2(o,c,d,g,p,y);return b&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=ht(n);Pe(Fa,"RemoteStore shutting down."),s.Ea.add(5),await Xc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}kg.provider={build:()=>new kg};class ux{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ns("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const ia="FirestoreClient";class aD{constructor(e,n,s,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=er.UNAUTHENTICATED,this.clientId=Zg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{Pe(ia,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(Pe(ia,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=vp(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function rg(i,e){i.asyncQueue.verifyOperationInProgress(),Pe(ia,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await HS(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Cb(i,e){i.asyncQueue.verifyOperationInProgress();const n=await oD(i);Pe(ia,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>Eb(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>Eb(e.remoteStore,o))),i._onlineComponents=e}async function oD(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Pe(ia,"Using user provided OfflineComponentProvider");try{await rg(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ye.FAILED_PRECONDITION||o.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Zo("Error using user provided cache. Falling back to memory cache: "+n),await rg(i,new lh)}}else Pe(ia,"Using default OfflineComponentProvider"),await rg(i,new sD(void 0));return i._offlineComponents}async function dx(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Pe(ia,"Using user provided OnlineComponentProvider"),await Cb(i,i._uninitializedComponentsProvider._online)):(Pe(ia,"Using default OnlineComponentProvider"),await Cb(i,new kg))),i._onlineComponents}function lD(i){return dx(i).then((e=>e.syncEngine))}async function hx(i){const e=await dx(i),n=e.eventManager;return n.onListen=$2.bind(null,e.syncEngine),n.onUnlisten=Q2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=W2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=K2.bind(null,e.syncEngine),n}function cD(i,e,n={}){const s=new Zi;return i.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,p,y){const b=new ux({next:w=>{b.Nu(),d.enqueueAndForget((()=>ex(c,S)));const O=w.docs.has(g);!O&&w.fromCache?y.reject(new Ve(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&w.fromCache&&p&&p.source==="server"?y.reject(new Ve(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(w)},error:w=>y.reject(w)}),S=new tx(sp(g.path),b,{includeMetadataChanges:!0,qa:!0});return ZS(c,S)})(await hx(i),i.asyncQueue,e,n,s))),s.promise}function uD(i,e,n={}){const s=new Zi;return i.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,p,y){const b=new ux({next:w=>{b.Nu(),d.enqueueAndForget((()=>ex(c,S))),w.fromCache&&p.source==="server"?y.reject(new Ve(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(w)},error:w=>y.reject(w)}),S=new tx(g,b,{includeMetadataChanges:!0,qa:!0});return ZS(c,S)})(await hx(i),i.asyncQueue,e,n,s))),s.promise}function fx(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const Rb=new Map;const mx="firestore.googleapis.com",Ib=!0;class Db{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ve(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mx,this.ssl=Ib}else this.host=e.host,this.ssl=e.ssl??Ib;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=BS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FI)throw new Ve(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fx(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ve(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ve(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ve(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Db({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ve(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ve(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Db(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new gR;switch(s.type){case"firstParty":return new vR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ve(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Rb.get(n);s&&(Pe("ComponentProvider","Removing Datastore"),Rb.delete(n),s.terminate())})(this),Promise.resolve()}}function dD(i,e,n,s={}){i=rs(i,Nh);const o=hl(e),c=i._getSettings(),d={...c,emulatorOptions:i._getEmulatorOptions()},g=`${e}:${n}`;o&&(LE(`https://${g}`),PE("Firestore",!0)),c.host!==mx&&c.host!==g&&Zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:g,ssl:o,emulatorOptions:s};if(!Js(p,d)&&(i._setSettings(p),s.mockUserToken)){let y,b;if(typeof s.mockUserToken=="string")y=s.mockUserToken,b=er.MOCK_USER;else{y=FA(s.mockUserToken,i._app?.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new Ve(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new er(S)}i._authCredentials=new pR(new JE(y,b))}}class _l{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new _l(this.firestore,e,this._query)}}class Tn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ks(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tn(this.firestore,e,this._key)}toJSON(){return{type:Tn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Wc(n,Tn._jsonSchema))return new Tn(e,s||null,new Qe(Zt.fromString(n.referencePath)))}}Tn._jsonSchemaVersion="firestore/documentReference/1.0",Tn._jsonSchema={type:kn("string",Tn._jsonSchemaVersion),referencePath:kn("string")};class Ks extends _l{constructor(e,n,s){super(e,n,sp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new Qe(e))}withConverter(e){return new Ks(this.firestore,e,this._path)}}function Va(i,e,...n){if(i=zn(i),ZE("collection","path",e),i instanceof Nh){const s=Zt.fromString(e,...n);return Hv(s),new Ks(i,null,s)}{if(!(i instanceof Tn||i instanceof Ks))throw new Ve(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Zt.fromString(e,...n));return Hv(s),new Ks(i.firestore,null,s)}}function qe(i,e,...n){if(i=zn(i),arguments.length===1&&(e=Zg.newId()),ZE("doc","path",e),i instanceof Nh){const s=Zt.fromString(e,...n);return Fv(s),new Tn(i,null,new Qe(s))}{if(!(i instanceof Tn||i instanceof Ks))throw new Ve(ye.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Zt.fromString(e,...n));return Fv(s),new Tn(i.firestore,i instanceof Ks?i.converter:null,new Qe(s))}}const Ob="AsyncQueue";class kb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new GS(this,"async_queue_retry"),this._c=()=>{const s=ng();s&&Pe(Ob,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=ng();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ng();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Zi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!pl(e))throw e;Pe(Ob,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ns("INTERNAL UNHANDLED ERROR: ",Mb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=_p.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&at(47125,{Pc:Mb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Mb(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Zc extends Nh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new kb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kb(e),this._firestoreClient=void 0,await e}}}function Ya(i,e){const n=typeof i=="object"?i:FE(),s=typeof i=="string"?i:Zd,o=Xg(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=zA("firestore");c&&dD(o,...c)}return o}function xp(i){if(i._terminated)throw new Ve(ye.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||hD(i),i._firestoreClient}function hD(i){const e=i._freezeSettings(),n=(function(o,c,d,g){return new VR(o,c,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,fx(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new aD(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(i._componentsProvider))}class zr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zr(Xn.fromBase64String(e))}catch(n){throw new Ve(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zr(Xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wc(e,zr._jsonSchema))return zr.fromBase64String(e.bytes)}}zr._jsonSchemaVersion="firestore/bytes/1.0",zr._jsonSchema={type:kn("string",zr._jsonSchemaVersion),bytes:kn("string")};class jh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ve(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vh{constructor(e){this._methodName=e}}class Ei{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ve(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ve(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ct(this._lat,e._lat)||Ct(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ei._jsonSchemaVersion}}static fromJSON(e){if(Wc(e,Ei._jsonSchema))return new Ei(e.latitude,e.longitude)}}Ei._jsonSchemaVersion="firestore/geoPoint/1.0",Ei._jsonSchema={type:kn("string",Ei._jsonSchemaVersion),latitude:kn("number"),longitude:kn("number")};class Si{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Si._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wc(e,Si._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Si(e.vectorValues);throw new Ve(ye.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Si._jsonSchemaVersion="firestore/vectorValue/1.0",Si._jsonSchema={type:kn("string",Si._jsonSchemaVersion),vectorValues:kn("object")};const fD=/^__.*__$/;class mD{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new aa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qc(e,this.data,n,this.fieldTransforms)}}class gx{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new aa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function px(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at(40011,{Ac:i})}}class Lh{constructor(e,n,s,o,c,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Lh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ch(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(px(this.Ac)&&fD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class gD{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Oh(e)}Cc(e,n,s,o=!1){return new Lh({Ac:e,methodName:n,Dc:s,path:Kn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wp(i){const e=i._freezeSettings(),n=Oh(i._databaseId);return new gD(i._databaseId,!!e.ignoreUndefinedProperties,n)}function pD(i,e,n,s,o,c={}){const d=i.Cc(c.merge||c.mergeFields?2:0,e,n,o);Ap("Data must be an object, but it was:",d,s);const g=yx(s,d);let p,y;if(c.merge)p=new Cr(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const b=[];for(const S of c.mergeFields){const w=Mg(e,S,n);if(!d.contains(w))throw new Ve(ye.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);vx(b,w)||b.push(w)}p=new Cr(b),y=d.fieldTransforms.filter((S=>p.covers(S.field)))}else p=null,y=d.fieldTransforms;return new mD(new pr(g),p,y)}class Ph extends Vh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ph}}function yD(i,e,n){return new Lh({Ac:3,Dc:e.settings.Dc,methodName:i._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Tp extends Vh{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=yD(this,e,!0),s=this.vc.map((c=>vl(c,n))),o=new rl(s);return new lI(e.path,o)}isEqual(e){return e instanceof Tp&&Js(this.vc,e.vc)}}function _D(i,e,n,s){const o=i.Cc(1,e,n);Ap("Data must be an object, but it was:",o,s);const c=[],d=pr.empty();sa(s,((p,y)=>{const b=Cp(e,p,n);y=zn(y);const S=o.yc(b);if(y instanceof Ph)c.push(b);else{const w=vl(y,S);w!=null&&(c.push(b),d.set(b,w))}}));const g=new Cr(c);return new gx(d,g,o.fieldTransforms)}function vD(i,e,n,s,o,c){const d=i.Cc(1,e,n),g=[Mg(e,s,n)],p=[o];if(c.length%2!=0)throw new Ve(ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<c.length;w+=2)g.push(Mg(e,c[w])),p.push(c[w+1]);const y=[],b=pr.empty();for(let w=g.length-1;w>=0;--w)if(!vx(y,g[w])){const O=g[w];let N=p[w];N=zn(N);const P=d.yc(O);if(N instanceof Ph)y.push(O);else{const j=vl(N,P);j!=null&&(y.push(O),b.set(O,j))}}const S=new Cr(y);return new gx(b,S,d.fieldTransforms)}function bD(i,e,n,s=!1){return vl(n,i.Cc(s?4:3,e))}function vl(i,e){if(_x(i=zn(i)))return Ap("Unsupported field value:",e,i),yx(i,e);if(i instanceof Vh)return(function(s,o){if(!px(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const c=[];let d=0;for(const g of s){let p=vl(g,o.wc(d));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),d++}return{arrayValue:{values:c}}})(i,e)}return(function(s,o){if((s=zn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return sI(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=rn.fromDate(s);return{timestampValue:sh(o.serializer,c)}}if(s instanceof rn){const c=new rn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:sh(o.serializer,c)}}if(s instanceof Ei)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof zr)return{bytesValue:NS(o.serializer,s._byteString)};if(s instanceof Tn){const c=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:cp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Si)return(function(d,g){return{mapValue:{fields:{[lS]:{stringValue:cS},[eh]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return ap(g.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Sh(s)}`)})(i,e)}function yx(i,e){const n={};return nS(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sa(i,((s,o)=>{const c=vl(o,e.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function _x(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof rn||i instanceof Ei||i instanceof zr||i instanceof Tn||i instanceof Vh||i instanceof Si)}function Ap(i,e,n){if(!_x(n)||!eS(n)){const s=Sh(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function Mg(i,e,n){if((e=zn(e))instanceof jh)return e._internalPath;if(typeof e=="string")return Cp(i,e);throw ch("Field path arguments must be of type string or ",i,!1,void 0,n)}const ED=new RegExp("[~\\*/\\[\\]]");function Cp(i,e,n){if(e.search(ED)>=0)throw ch(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new jh(...e.split("."))._internalPath}catch{throw ch(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function ch(i,e,n,s,o){const c=s&&!s.isEmpty(),d=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(c||d)&&(p+=" (found",c&&(p+=` in field ${s}`),d&&(p+=` in document ${o}`),p+=")"),new Ve(ye.INVALID_ARGUMENT,g+i+p)}function vx(i,e){return i.some((n=>n.isEqual(e)))}class bx{constructor(e,n,s,o,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Rp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SD extends bx{data(){return super.data()}}function Rp(i,e){return typeof e=="string"?Cp(i,e):e instanceof jh?e._internalPath:e._delegate._internalPath}function xD(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Ve(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ip{}class wD extends Ip{}function Lo(i,e,...n){let s=[];e instanceof Ip&&s.push(e),s=s.concat(n),(function(c){const d=c.filter((p=>p instanceof Dp)).length,g=c.filter((p=>p instanceof Uh)).length;if(d>1||d>0&&g>0)throw new Ve(ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class Uh extends wD{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Uh(e,n,s)}_apply(e){const n=this._parse(e);return Ex(e._query,n),new _l(e.firestore,e.converter,Sg(e._query,n))}_parse(e){const n=wp(e.firestore);return(function(c,d,g,p,y,b,S){let w;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new Ve(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){jb(S,b);const N=[];for(const P of S)N.push(Nb(p,c,P));w={arrayValue:{values:N}}}else w=Nb(p,c,S)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||jb(S,b),w=bD(g,d,S,b==="in"||b==="not-in");return On.create(y,b,w)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Po(i,e,n){const s=e,o=Rp("where",i);return Uh._create(o,s,n)}class Dp extends Ip{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Dp(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:ni.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let d=o;const g=c.getFlattenedFilters();for(const p of g)Ex(d,p),d=Sg(d,p)})(e._query,n),new _l(e.firestore,e.converter,Sg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Nb(i,e,n){if(typeof(n=zn(n))=="string"){if(n==="")throw new Ve(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yS(e)&&n.indexOf("/")!==-1)throw new Ve(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Zt.fromString(n));if(!Qe.isDocumentKey(s))throw new Ve(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Xv(i,new Qe(s))}if(n instanceof Tn)return Xv(i,n._key);throw new Ve(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sh(n)}.`)}function jb(i,e){if(!Array.isArray(i)||i.length===0)throw new Ve(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ex(i,e){const n=(function(o,c){for(const d of o)for(const g of d.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ve(ye.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ve(ye.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class TD{convertValue(e,n="none"){switch(na(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ta(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw at(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return sa(e,((o,c)=>{s[o]=this.convertValue(c,n)})),s}convertVectorValue(e){const n=e.fields?.[eh].arrayValue?.values?.map((s=>wn(s.doubleValue)));return new Si(n)}convertGeoPoint(e){return new Ei(wn(e.latitude),wn(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Th(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(jc(e));default:return null}}convertTimestamp(e){const n=ea(e);return new rn(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Zt.fromString(e);Pt(zS(s),9688,{name:e});const o=new Vc(s.get(1),s.get(3)),c=new Qe(s.popFirst(5));return o.isEqual(n)||ns(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function AD(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class Tc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ua extends bx{constructor(e,n,s,o,c,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Rp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(ye.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ua._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ua._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ua._jsonSchema={type:kn("string",Ua._jsonSchemaVersion),bundleSource:kn("string","DocumentSnapshot"),bundleName:kn("string"),bundle:kn("string")};class qd extends Ua{data(e={}){return super.data(e)}}class Yo{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Tc(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new qd(this._firestore,this._userDataWriter,s.key,s,new Tc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ve(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((g=>{const p=new qd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Tc(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const p=new qd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Tc(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,b=-1;return g.type!==0&&(y=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),b=d.indexOf(g.doc.key)),{type:CD(g.type),doc:p,oldIndex:y,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(ye.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Yo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function CD(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at(61501,{type:i})}}function ot(i){i=rs(i,Tn);const e=rs(i.firestore,Zc);return cD(xp(e),i._key).then((n=>RD(e,i,n)))}Yo._jsonSchemaVersion="firestore/querySnapshot/1.0",Yo._jsonSchema={type:kn("string",Yo._jsonSchemaVersion),bundleSource:kn("string","QuerySnapshot"),bundleName:kn("string"),bundle:kn("string")};class Sx extends TD{constructor(e){super(),this.firestore=e}convertBytes(e){return new zr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,n)}}function La(i){i=rs(i,_l);const e=rs(i.firestore,Zc),n=xp(e),s=new Sx(e);return xD(i._query),uD(n,i._query).then((o=>new Yo(e,s,i,o)))}function dt(i,e,n){i=rs(i,Tn);const s=rs(i.firestore,Zc),o=AD(i.converter,e,n);return xx(s,[pD(wp(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,vi.none())])}function Od(i,e,n,...s){i=rs(i,Tn);const o=rs(i.firestore,Zc),c=wp(o);let d;return d=typeof(e=zn(e))=="string"||e instanceof jh?vD(c,"updateDoc",i._key,e,n,s):_D(c,"updateDoc",i._key,e),xx(o,[d.toMutation(i._key,vi.exists(!0))])}function xx(i,e){return(function(s,o){const c=new Zi;return s.asyncQueue.enqueueAndForget((async()=>X2(await lD(s),o,c))),c.promise})(xp(i),e)}function RD(i,e,n){const s=n.docs.get(e._key),o=new Sx(i);return new Ua(i,o,e._key,s,new Tc(n.hasPendingWrites,n.fromCache),e.converter)}function wx(...i){return new Tp("arrayUnion",i)}(function(e,n=!0){(function(o){ml=o})(fl),Jo(new za("firestore",((s,{instanceIdentifier:o,options:c})=>{const d=s.getProvider("app").getImmediate(),g=new Zc(new yR(s.getProvider("auth-internal")),new bR(d,s.getProvider("app-check-internal")),(function(y,b){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Ve(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vc(y.options.projectId,b)})(d,o),d);return c={useFetchStreams:n,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),Ys(Pv,Uv,e),Ys(Pv,Uv,"esm2020")})();var ID="firebase",DD="12.7.0";Ys(ID,DD,"app");const OD={apiKey:"AIzaSyCfvR8bEeW2CXdD31Ec34doRNThnbryXJo",authDomain:"budget-tkl.firebaseapp.com",projectId:"budget-tkl",storageBucket:"budget-tkl.firebasestorage.app",messagingSenderId:"631248313026",appId:"1:631248313026:web:36574d789a42b2d102f95b"},oa=BE(OD);function Tx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kD=Tx,Ax=new Gc("auth","Firebase",Tx());const uh=new Qg("@firebase/auth");function MD(i,...e){uh.logLevel<=At.WARN&&uh.warn(`Auth (${fl}): ${i}`,...e)}function Gd(i,...e){uh.logLevel<=At.ERROR&&uh.error(`Auth (${fl}): ${i}`,...e)}function ri(i,...e){throw Op(i,...e)}function xi(i,...e){return Op(i,...e)}function Cx(i,e,n){const s={...kD(),[e]:n};return new Gc("auth","Firebase",s).create(e,{appName:i.name})}function Xs(i){return Cx(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Op(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return Ax.create(i,...e)}function st(i,e,...n){if(!i)throw Op(e,...n)}function Ki(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Gd(e),new Error(e)}function ss(i,e){i||Ki(e)}function Ng(){return typeof self<"u"&&self.location?.href||""}function ND(){return Vb()==="http:"||Vb()==="https:"}function Vb(){return typeof self<"u"&&self.location?.protocol||null}function jD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ND()||YA()||"connection"in navigator)?navigator.onLine:!0}function VD(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class eu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ss(n>e,"Short delay should be less than long delay!"),this.isMobile=GA()||QA()}get(){return jD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function kp(i,e){ss(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Rx{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const LD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const PD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],UD=new eu(3e4,6e4);function Qa(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function la(i,e,n,s,o={}){return Ix(i,o,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const g=$c({key:i.config.apiKey,...d}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:p,...c};return WA()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&hl(i.emulatorConfig.host)&&(y.credentials="include"),Rx.fetch()(await Dx(i,i.config.apiHost,n,g),y)})}async function Ix(i,e,n){i._canInitEmulator=!1;const s={...LD,...e};try{const o=new BD(i),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw kd(i,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const g=c.ok?d.errorMessage:d.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw kd(i,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw kd(i,"email-already-in-use",d);if(p==="USER_DISABLED")throw kd(i,"user-disabled",d);const b=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Cx(i,b,y);ri(i,b)}}catch(o){if(o instanceof as)throw o;ri(i,"network-request-failed",{message:String(o)})}}async function zh(i,e,n,s,o={}){const c=await la(i,e,n,s,o);return"mfaPendingCredential"in c&&ri(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function Dx(i,e,n,s){const o=`${e}${n}?${s}`,c=i,d=c.config.emulator?kp(i.config,o):`${i.config.apiScheme}://${o}`;return PD.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function zD(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class BD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(xi(this.auth,"network-request-failed")),UD.get())})}}function kd(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=xi(i,e,s);return o.customData._tokenResponse=n,o}function Lb(i){return i!==void 0&&i.enterprise!==void 0}class FD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return zD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function HD(i,e){return la(i,"GET","/v2/recaptchaConfig",Qa(i,e))}async function qD(i,e){return la(i,"POST","/v1/accounts:delete",e)}async function dh(i,e){return la(i,"POST","/v1/accounts:lookup",e)}function Oc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GD(i,e=!1){const n=zn(i),s=await n.getIdToken(e),o=Mp(s);st(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c?.sign_in_provider;return{claims:o,token:s,authTime:Oc(ig(o.auth_time)),issuedAtTime:Oc(ig(o.iat)),expirationTime:Oc(ig(o.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function ig(i){return Number(i)*1e3}function Mp(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return Gd("JWT malformed, contained fewer than 3 sections"),null;try{const o=ME(n);return o?JSON.parse(o):(Gd("Failed to decode base64 JWT payload"),null)}catch(o){return Gd("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Pb(i){const e=Mp(i);return st(e,"internal-error"),st(typeof e.exp<"u","internal-error"),st(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Uc(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof as&&$D(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function $D({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class WD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class jg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oc(this.lastLoginAt),this.creationTime=Oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function hh(i){const e=i.auth,n=await i.getIdToken(),s=await Uc(i,dh(e,{idToken:n}));st(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const c=o.providerUserInfo?.length?Ox(o.providerUserInfo):[],d=QD(i.providerData,c),g=i.isAnonymous,p=!(i.email&&o.passwordHash)&&!d?.length,y=g?p:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new jg(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(i,b)}async function YD(i){const e=zn(i);await hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QD(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Ox(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function KD(i,e){const n=await Ix(i,{},async()=>{const s=$c({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,d=await Dx(i,o,"/v1/token",`key=${c}`),g=await i._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:s};return i.emulatorConfig&&hl(i.emulatorConfig.host)&&(p.credentials="include"),Rx.fetch()(d,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function XD(i,e){return la(i,"POST","/v2/accounts:revokeToken",Qa(i,e))}class Qo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){st(e.idToken,"internal-error"),st(typeof e.idToken<"u","internal-error"),st(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){st(e.length!==0,"internal-error");const n=Pb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(st(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:c}=await KD(e,n);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:c}=n,d=new Qo;return s&&(st(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(st(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(st(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qo,this.toJSON())}_performRefresh(){return Ki("not implemented")}}function zs(i,e){st(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ti{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new WD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new jg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Uc(this,this.stsTokenManager.getToken(this.auth,e));return st(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return GD(this,e)}reload(){return YD(this)}_assign(e){this!==e&&(st(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ti({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){st(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await hh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ei(this.auth.app))return Promise.reject(Xs(this.auth));const e=await this.getIdToken();return await Uc(this,qD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,g=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:S,emailVerified:w,isAnonymous:O,providerData:N,stsTokenManager:P}=n;st(S&&P,e,"internal-error");const j=Qo.fromJSON(this.name,P);st(typeof S=="string",e,"internal-error"),zs(s,e.name),zs(o,e.name),st(typeof w=="boolean",e,"internal-error"),st(typeof O=="boolean",e,"internal-error"),zs(c,e.name),zs(d,e.name),zs(g,e.name),zs(p,e.name),zs(y,e.name),zs(b,e.name);const W=new ti({uid:S,auth:e,email:o,emailVerified:w,displayName:s,isAnonymous:O,photoURL:d,phoneNumber:c,tenantId:g,stsTokenManager:j,createdAt:y,lastLoginAt:b});return N&&Array.isArray(N)&&(W.providerData=N.map(G=>({...G}))),p&&(W._redirectEventId=p),W}static async _fromIdTokenResponse(e,n,s=!1){const o=new Qo;o.updateFromServerResponse(n);const c=new ti({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await hh(c),c}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];st(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Ox(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!c?.length,g=new Qo;g.updateFromIdToken(s);const p=new ti({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new jg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(p,y),p}}const Ub=new Map;function Xi(i){ss(i instanceof Function,"Expected a class definition");let e=Ub.get(i);return e?(ss(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Ub.set(i,e),e)}class kx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}kx.type="NONE";const zb=kx;function $d(i,e,n){return`firebase:${i}:${e}:${n}`}class Ko{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=$d(this.userKey,o.apiKey,c),this.fullPersistenceKey=$d("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await dh(this.auth,{idToken:e}).catch(()=>{});return n?ti._fromGetAccountInfoResponse(this.auth,n,e):null}return ti._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ko(Xi(zb),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||Xi(zb);const d=$d(s,e.config.apiKey,e.name);let g=null;for(const y of n)try{const b=await y._get(d);if(b){let S;if(typeof b=="string"){const w=await dh(e,{idToken:b}).catch(()=>{});if(!w)break;S=await ti._fromGetAccountInfoResponse(e,w,b)}else S=ti._fromJSON(e,b);y!==c&&(g=S),c=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new Ko(c,e,s):(c=p[0],g&&await c._set(d,g.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new Ko(c,e,s))}}function Bb(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Vx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Mx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Px(e))return"Blackberry";if(Ux(e))return"Webos";if(Nx(e))return"Safari";if((e.includes("chrome/")||jx(e))&&!e.includes("edge/"))return"Chrome";if(Lx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function Mx(i=nr()){return/firefox\//i.test(i)}function Nx(i=nr()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jx(i=nr()){return/crios\//i.test(i)}function Vx(i=nr()){return/iemobile/i.test(i)}function Lx(i=nr()){return/android/i.test(i)}function Px(i=nr()){return/blackberry/i.test(i)}function Ux(i=nr()){return/webos/i.test(i)}function Np(i=nr()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function JD(i=nr()){return Np(i)&&!!window.navigator?.standalone}function ZD(){return KA()&&document.documentMode===10}function zx(i=nr()){return Np(i)||Lx(i)||Ux(i)||Px(i)||/windows phone/i.test(i)||Vx(i)}function Bx(i,e=[]){let n;switch(i){case"Browser":n=Bb(nr());break;case"Worker":n=`${Bb(nr())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${fl}/${s}`}class e5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((d,g)=>{try{const p=e(c);d(p)}catch(p){g(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function t5(i,e={}){return la(i,"GET","/v2/passwordPolicy",Qa(i,e))}const n5=6;class r5{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??n5,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class i5{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fb(this),this.idTokenSubscription=new Fb(this),this.beforeStateQueue=new e5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ax,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ko.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await dh(this,{idToken:e}),s=await ti._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ei(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,g=await this.tryRedirectSignIn(e);(!c||c===d)&&g?.user&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return st(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=VD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ei(this.app))return Promise.reject(Xs(this));const n=e?zn(e):null;return n&&st(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&st(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ei(this.app)?Promise.reject(Xs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ei(this.app)?Promise.reject(Xs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await t5(this),n=new r5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await XD(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xi(e)||this._popupRedirectResolver;st(n,this,"argument-error"),this.redirectPersistenceManager=await Ko.create(this,[Xi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(st(g,this,"internal-error"),g.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return st(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Bx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&MD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function bl(i){return zn(i)}class Fb{constructor(e){this.auth=e,this.observer=null,this.addObserver=iC(n=>this.observer=n)}get next(){return st(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Bh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function s5(i){Bh=i}function Fx(i){return Bh.loadJS(i)}function a5(){return Bh.recaptchaEnterpriseScript}function o5(){return Bh.gapiScript}function l5(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class c5{constructor(){this.enterprise=new u5}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class u5{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const d5="recaptcha-enterprise",Hx="NO_RECAPTCHA";class h5{constructor(e){this.type=d5,this.auth=bl(e)}async verify(e="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,g)=>{HD(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const y=new FD(p);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,d(y.siteKey)}}).catch(p=>{g(p)})})}function o(c,d,g){const p=window.grecaptcha;Lb(p)?p.enterprise.ready(()=>{p.enterprise.execute(c,{action:e}).then(y=>{d(y)}).catch(()=>{d(Hx)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new c5().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(g=>{if(!n&&Lb(window.grecaptcha))o(g,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=a5();p.length!==0&&(p+=g),Fx(p).then(()=>{o(g,c,d)}).catch(y=>{d(y)})}}).catch(g=>{d(g)})})}}async function Hb(i,e,n,s=!1,o=!1){const c=new h5(i);let d;if(o)d=Hx;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,y=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return s?Object.assign(g,{captchaResp:d}):Object.assign(g,{captchaResponse:d}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function qb(i,e,n,s,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Hb(i,e,n,n==="getOobCode");return s(i,c)}else return s(i,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Hb(i,e,n,n==="getOobCode");return s(i,d)}else return Promise.reject(c)})}function f5(i,e){const n=Xg(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Js(c,e??{}))return o;ri(o,"already-initialized")}return n.initialize({options:e})}function m5(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Xi);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function g5(i,e,n){const s=bl(i);st(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=qx(e),{host:d,port:g}=p5(e),p=g===null?"":`:${g}`,y={url:`${c}//${d}${p}/`},b=Object.freeze({host:d,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){st(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),st(Js(y,s.config.emulator)&&Js(b,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=b,s.settings.appVerificationDisabledForTesting=!0,hl(d)?(LE(`${c}//${d}${p}`),PE("Auth",!0)):y5()}function qx(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function p5(i){const e=qx(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:Gb(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:Gb(d)}}}function Gb(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function y5(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class jp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ki("not implemented")}_getIdTokenResponse(e){return Ki("not implemented")}_linkToIdToken(e,n){return Ki("not implemented")}_getReauthenticationResolver(e){return Ki("not implemented")}}async function _5(i,e){return la(i,"POST","/v1/accounts:signUp",e)}async function v5(i,e){return zh(i,"POST","/v1/accounts:signInWithPassword",Qa(i,e))}async function b5(i,e){return zh(i,"POST","/v1/accounts:signInWithEmailLink",Qa(i,e))}async function E5(i,e){return zh(i,"POST","/v1/accounts:signInWithEmailLink",Qa(i,e))}class zc extends jp{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new zc(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new zc(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qb(e,n,"signInWithPassword",v5);case"emailLink":return b5(e,{email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qb(e,s,"signUpPassword",_5);case"emailLink":return E5(e,{idToken:n,email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Xo(i,e){return zh(i,"POST","/v1/accounts:signInWithIdp",Qa(i,e))}const S5="http://localhost";class Ha extends jp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ha(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ri("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...c}=n;if(!s||!o)return null;const d=new Ha(s,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Xo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Xo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xo(e,n)}buildRequest(){const e={requestUri:S5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$c(n)}return e}}function x5(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function w5(i){const e=bc(Ec(i)).link,n=e?bc(Ec(e)).deep_link_id:null,s=bc(Ec(i)).deep_link_id;return(s?bc(Ec(s)).link:null)||s||n||e||i}class Vp{constructor(e){const n=bc(Ec(e)),s=n.apiKey??null,o=n.oobCode??null,c=x5(n.mode??null);st(s&&o&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=w5(e);try{return new Vp(n)}catch{return null}}}class El{constructor(){this.providerId=El.PROVIDER_ID}static credential(e,n){return zc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Vp.parseLink(n);return st(s,"argument-error"),zc._fromEmailAndCode(e,s.code,s.tenantId)}}El.PROVIDER_ID="password";El.EMAIL_PASSWORD_SIGN_IN_METHOD="password";El.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Gx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class tu extends Gx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Bs extends tu{constructor(){super("facebook.com")}static credential(e){return Ha._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bs.credential(e.oauthAccessToken)}catch{return null}}}Bs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bs.PROVIDER_ID="facebook.com";class Fs extends tu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ha._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Fs.credential(n,s)}catch{return null}}}Fs.GOOGLE_SIGN_IN_METHOD="google.com";Fs.PROVIDER_ID="google.com";class Hs extends tu{constructor(){super("github.com")}static credential(e){return Ha._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hs.credential(e.oauthAccessToken)}catch{return null}}}Hs.GITHUB_SIGN_IN_METHOD="github.com";Hs.PROVIDER_ID="github.com";class qs extends tu{constructor(){super("twitter.com")}static credential(e,n){return Ha._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return qs.credential(n,s)}catch{return null}}}qs.TWITTER_SIGN_IN_METHOD="twitter.com";qs.PROVIDER_ID="twitter.com";class al{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const c=await ti._fromIdTokenResponse(e,s,o),d=$b(s);return new al({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=$b(s);return new al({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function $b(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class fh extends as{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,fh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new fh(e,n,s,o)}}function $x(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?fh._fromErrorAndOperation(i,c,e,s):c})}async function T5(i,e,n=!1){const s=await Uc(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return al._forOperation(i,"link",s)}async function A5(i,e,n=!1){const{auth:s}=i;if(ei(s.app))return Promise.reject(Xs(s));const o="reauthenticate";try{const c=await Uc(i,$x(s,o,e,i),n);st(c.idToken,s,"internal-error");const d=Mp(c.idToken);st(d,s,"internal-error");const{sub:g}=d;return st(i.uid===g,s,"user-mismatch"),al._forOperation(i,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&ri(s,"user-mismatch"),c}}async function Wx(i,e,n=!1){if(ei(i.app))return Promise.reject(Xs(i));const s="signIn",o=await $x(i,s,e),c=await al._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(c.user),c}async function C5(i,e){return Wx(bl(i),e)}async function R5(i){const e=bl(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function I5(i,e,n){return ei(i.app)?Promise.reject(Xs(i)):C5(zn(i),El.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&R5(i),s})}function D5(i,e,n,s){return zn(i).onIdTokenChanged(e,n,s)}function O5(i,e,n){return zn(i).beforeAuthStateChanged(e,n)}function k5(i,e,n,s){return zn(i).onAuthStateChanged(e,n,s)}function M5(i){return zn(i).signOut()}const mh="__sak";class Yx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mh,"1"),this.storage.removeItem(mh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const N5=1e3,j5=10;class Qx extends Yx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,g,p)=>{this.notifyListeners(d,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);ZD()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,j5):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},N5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Qx.type="LOCAL";const V5=Qx;class Kx extends Yx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Kx.type="SESSION";const Xx=Kx;function L5(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Fh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Fh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const g=Array.from(d).map(async y=>y(n.origin,c)),p=await L5(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fh.receivers=[];function Lp(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}class P5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((g,p)=>{const y=Lp("",20);o.port1.start();const b=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(S){const w=S;if(w.data.eventId===y)switch(w.data.status){case"ack":clearTimeout(b),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(w.data.response);break;default:clearTimeout(b),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function wi(){return window}function U5(i){wi().location.href=i}function Jx(){return typeof wi().WorkerGlobalScope<"u"&&typeof wi().importScripts=="function"}async function z5(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function B5(){return navigator?.serviceWorker?.controller||null}function F5(){return Jx()?self:null}const Zx="firebaseLocalStorageDb",H5=1,gh="firebaseLocalStorage",e1="fbase_key";class nu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hh(i,e){return i.transaction([gh],e?"readwrite":"readonly").objectStore(gh)}function q5(){const i=indexedDB.deleteDatabase(Zx);return new nu(i).toPromise()}function Vg(){const i=indexedDB.open(Zx,H5);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(gh,{keyPath:e1})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(gh)?e(s):(s.close(),await q5(),e(await Vg()))})})}async function Wb(i,e,n){const s=Hh(i,!0).put({[e1]:e,value:n});return new nu(s).toPromise()}async function G5(i,e){const n=Hh(i,!1).get(e),s=await new nu(n).toPromise();return s===void 0?null:s.value}function Yb(i,e){const n=Hh(i,!0).delete(e);return new nu(n).toPromise()}const $5=800,W5=3;class t1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>W5)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fh._getInstance(F5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await z5(),!this.activeServiceWorker)return;this.sender=new P5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||B5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vg();return await Wb(e,mh,"1"),await Yb(e,mh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Wb(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>G5(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Hh(o,!1).getAll();return new nu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}t1.type="LOCAL";const Y5=t1;new eu(3e4,6e4);function Q5(i,e){return e?Xi(e):(st(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Pp extends jp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function K5(i){return Wx(i.auth,new Pp(i),i.bypassAuthState)}function X5(i){const{auth:e,user:n}=i;return st(n,e,"internal-error"),A5(n,new Pp(i),i.bypassAuthState)}async function J5(i){const{auth:e,user:n}=i;return st(n,e,"internal-error"),T5(n,new Pp(i),i.bypassAuthState)}class n1{constructor(e,n,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:c,error:d,type:g}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return K5;case"linkViaPopup":case"linkViaRedirect":return J5;case"reauthViaPopup":case"reauthViaRedirect":return X5;default:ri(this.auth,"internal-error")}}resolve(e){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Z5=new eu(2e3,1e4);class $o extends n1{constructor(e,n,s,o,c){super(e,n,o,c),this.provider=s,this.authWindow=null,this.pollId=null,$o.currentPopupAction&&$o.currentPopupAction.cancel(),$o.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return st(e,this.auth,"internal-error"),e}async onExecution(){ss(this.filter.length===1,"Popup operations only handle one event");const e=Lp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(xi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(xi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$o.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Z5.get())};e()}}$o.currentPopupAction=null;const eO="pendingRedirect",Wd=new Map;class tO extends n1{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Wd.get(this.auth._key());if(!e){try{const s=await nO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Wd.set(this.auth._key(),e)}return this.bypassAuthState||Wd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nO(i,e){const n=sO(e),s=iO(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function rO(i,e){Wd.set(i._key(),e)}function iO(i){return Xi(i._redirectPersistence)}function sO(i){return $d(eO,i.config.apiKey,i.name)}async function aO(i,e,n=!1){if(ei(i.app))return Promise.reject(Xs(i));const s=bl(i),o=Q5(s,e),d=await new tO(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}const oO=600*1e3;class lO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!r1(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(xi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oO&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qb(e))}saveEventToCache(e){this.cachedEventUids.add(Qb(e)),this.lastProcessedEventTime=Date.now()}}function Qb(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function r1({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function cO(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return r1(i);default:return!1}}async function uO(i,e={}){return la(i,"GET","/v1/projects",e)}const dO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hO=/^https?/;async function fO(i){if(i.config.emulator)return;const{authorizedDomains:e}=await uO(i);for(const n of e)try{if(mO(n))return}catch{}ri(i,"unauthorized-domain")}function mO(i){const e=Ng(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!hO.test(n))return!1;if(dO.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const gO=new eu(3e4,6e4);function Kb(){const i=wi().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function pO(i){return new Promise((e,n)=>{function s(){Kb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Kb(),n(xi(i,"network-request-failed"))},timeout:gO.get()})}if(wi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(wi().gapi?.load)s();else{const o=l5("iframefcb");return wi()[o]=()=>{gapi.load?s():n(xi(i,"network-request-failed"))},Fx(`${o5()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw Yd=null,e})}let Yd=null;function yO(i){return Yd=Yd||pO(i),Yd}const _O=new eu(5e3,15e3),vO="__/auth/iframe",bO="emulator/auth/iframe",EO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xO(i){const e=i.config;st(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?kp(e,bO):`https://${i.config.authDomain}/${vO}`,s={apiKey:e.apiKey,appName:i.name,v:fl},o=SO.get(i.config.apiHost);o&&(s.eid=o);const c=i._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${$c(s).slice(1)}`}async function wO(i){const e=await yO(i),n=wi().gapi;return st(n,i,"internal-error"),e.open({where:document.body,url:xO(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:EO,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const d=xi(i,"network-request-failed"),g=wi().setTimeout(()=>{c(d)},_O.get());function p(){wi().clearTimeout(g),o(s)}s.ping(p).then(p,()=>{c(d)})}))}const TO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AO=500,CO=600,RO="_blank",IO="http://localhost";class Xb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DO(i,e,n,s=AO,o=CO){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const p={...TO,width:s.toString(),height:o.toString(),top:c,left:d},y=nr().toLowerCase();n&&(g=jx(y)?RO:n),Mx(y)&&(e=e||IO,p.scrollbars="yes");const b=Object.entries(p).reduce((w,[O,N])=>`${w}${O}=${N},`,"");if(JD(y)&&g!=="_self")return OO(e||"",g),new Xb(null);const S=window.open(e||"",g,b);st(S,i,"popup-blocked");try{S.focus()}catch{}return new Xb(S)}function OO(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const kO="__/auth/handler",MO="emulator/auth/handler",NO=encodeURIComponent("fac");async function Jb(i,e,n,s,o,c){st(i.config.authDomain,i,"auth-domain-config-required"),st(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:fl,eventId:o};if(e instanceof Gx){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",rC(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,S]of Object.entries({}))d[b]=S}if(e instanceof tu){const b=e.getScopes().filter(S=>S!=="");b.length>0&&(d.scopes=b.join(","))}i.tenantId&&(d.tid=i.tenantId);const g=d;for(const b of Object.keys(g))g[b]===void 0&&delete g[b];const p=await i._getAppCheckToken(),y=p?`#${NO}=${encodeURIComponent(p)}`:"";return`${jO(i)}?${$c(g).slice(1)}${y}`}function jO({config:i}){return i.emulator?kp(i,MO):`https://${i.authDomain}/${kO}`}const sg="webStorageSupport";class VO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xx,this._completeRedirectFn=aO,this._overrideRedirectResult=rO}async _openPopup(e,n,s,o){ss(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Jb(e,n,s,Ng(),o);return DO(e,c,Lp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const c=await Jb(e,n,s,Ng(),o);return U5(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(ss(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await wO(e),s=new lO(e);return n.register("authEvent",o=>(st(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sg,{type:sg},o=>{const c=o?.[0]?.[sg];c!==void 0&&n(!!c),ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return zx()||Nx()||Np()}}const LO=VO;var Zb="@firebase/auth",eE="1.12.0";class PO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){st(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function UO(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zO(i){Jo(new za("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=s.options;st(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:g,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bx(i)},y=new i5(s,o,c,p);return m5(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Jo(new za("auth-internal",e=>{const n=bl(e.getProvider("auth").getImmediate());return(s=>new PO(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ys(Zb,eE,UO(i)),Ys(Zb,eE,"esm2020")}const BO=300,FO=VE("authIdTokenMaxAge")||BO;let tE=null;const HO=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>FO)return;const o=n?.token;tE!==o&&(tE=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function qO(i=FE()){const e=Xg(i,"auth");if(e.isInitialized())return e.getImmediate();const n=f5(i,{popupRedirectResolver:LO,persistence:[Y5,V5,Xx]}),s=VE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=HO(c.toString());O5(n,d,()=>d(n.currentUser)),D5(n,g=>d(g))}}const o=NE("auth");return o&&g5(n,`http://${o}`),n}function GO(){return document.getElementsByTagName("head")?.[0]??document}s5({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const c=xi("internal-error");c.customData=o,n(c)},s.type="text/javascript",s.charset="UTF-8",GO().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zO("Browser");function ru(){const i=qO(oa);async function e(){return!1}async function n(g,p){return I5(i,g,p)}function s(){return M5(i)}function o(g){k5(i,p=>{g(p)})}function c(){return i.currentUser}return{set_user_listener:o,delete_firebase_user:e,login_firebase_user:n,logout_firebase_user:s,get_current_firebase_user:c}}const i1=1,$O=3600*1e3,Yn={USER_DOC:i=>`cache_user_${i}`,BUDGET:i=>`cache_budget_${i}`,MONTH:(i,e,n)=>`cache_month_${i}_${e}_${n}`,PAYEES:i=>`cache_payees_${i}`,ACCESSIBLE_BUDGETS:i=>`cache_accessible_budgets_${i}`,CATEGORY_BALANCES:i=>`cache_category_balances_${i}`,LAST_REFRESH:"cache_last_refresh"};function Md(i,e=$O){try{const n=localStorage.getItem(i);if(!n)return null;const s=JSON.parse(n);if(s.version!==i1)return localStorage.removeItem(i),null;const o=Date.now()-s.timestamp;return o>e?(console.log(`[Cache] ${i} is stale (${Math.round(o/1e3)}s old)`),null):(console.log(`[Cache] HIT: ${i} (${Math.round(o/1e3)}s old)`),s.data)}catch(n){return console.warn(`[Cache] Error reading ${i}:`,n),localStorage.removeItem(i),null}}function sr(i,e){try{const n={data:e,timestamp:Date.now(),version:i1};localStorage.setItem(i,JSON.stringify(n)),console.log(`[Cache] SAVED: ${i}`)}catch(n){console.warn(`[Cache] Error saving ${i}:`,n),KO()}}function WO(i){localStorage.removeItem(i),console.log(`[Cache] REMOVED: ${i}`)}function YO(i){const e=[];for(let n=0;n<localStorage.length;n++){const s=localStorage.key(n);s?.includes(i)&&s.startsWith("cache_")&&e.push(s)}e.forEach(n=>localStorage.removeItem(n)),console.log(`[Cache] Cleared ${e.length} entries for budget ${i}`)}function QO(){const i=[];for(let e=0;e<localStorage.length;e++){const n=localStorage.key(e);n?.startsWith("cache_")&&i.push(n)}i.forEach(e=>localStorage.removeItem(e)),console.log(`[Cache] Cleared all ${i.length} cache entries`)}function KO(){const i=[];for(let n=0;n<localStorage.length;n++){const s=localStorage.key(n);if(s?.startsWith("cache_"))try{const o=localStorage.getItem(s);if(o){const c=JSON.parse(o);i.push({key:s,timestamp:c.timestamp||0})}}catch{s&&localStorage.removeItem(s)}}i.sort((n,s)=>n.timestamp-s.timestamp);const e=i.slice(0,Math.ceil(i.length/2));e.forEach(n=>localStorage.removeItem(n.key)),console.log(`[Cache] Cleared ${e.length} old entries to free space`)}function XO(){try{const i=localStorage.getItem(Yn.LAST_REFRESH);return i?parseInt(i,10):null}catch{return null}}function JO(){localStorage.setItem(Yn.LAST_REFRESH,Date.now().toString())}function ZO(){const i=[];let e=0;for(let n=0;n<localStorage.length;n++){const s=localStorage.key(n);if(s?.startsWith("cache_")){const o=localStorage.getItem(s)||"",c=o.length*2;e+=c;let d="unknown";try{const g=JSON.parse(o),p=Date.now()-g.timestamp;p<6e4?d=`${Math.round(p/1e3)}s`:p<36e5?d=`${Math.round(p/6e4)}m`:d=`${Math.round(p/36e5)}h`}catch{}i.push({key:s,size:c,age:d})}}return{count:i.length,totalSize:e,entries:i}}const s1=C.createContext({currentBudget:null,loading:!1,error:null,isOwner:!1,isAdmin:!1,isTest:!1,currentUserId:null,isInitialized:!1,accounts:[],accountGroups:[],categories:[],categoryGroups:[],budgetUserIds:[],acceptedUserIds:[],pendingInvites:[],hasPendingInvites:!1,needsFirstBudget:!1,accessibleBudgets:[],currentMonth:null,currentYear:new Date().getFullYear(),currentMonthNumber:new Date().getMonth()+1,monthLoading:!1,payees:[],lastRefreshTime:null,cacheStats:null,isUsingCache:!1,ensureBudgetLoaded:async()=>{},refreshBudget:async()=>{},forceRefreshFromFirebase:async()=>{},clearCache:()=>{},inviteUserToBudget:async()=>{},revokeUserFromBudget:async()=>{},checkBudgetInvite:async()=>null,acceptBudgetInvite:async()=>{},loadAccessibleBudgets:async()=>{},switchToBudget:async()=>{},createNewBudget:async()=>{},renameBudget:async()=>{},setAccounts:()=>{},setAccountGroups:()=>{},setCategories:()=>{},setCategoryGroups:()=>{},saveBudgetData:async()=>{},loadMonth:async()=>{},goToPreviousMonth:async()=>{},goToNextMonth:async()=>{},addIncome:async()=>{},updateIncome:async()=>{},deleteIncome:async()=>{},recomputeMonthTotals:async()=>{},recomputeAllBalances:async()=>{},checkBalanceMismatch:async()=>null,reconcileBalances:async()=>{},balanceMismatch:null,loadPayees:async()=>{},saveAllocations:async()=>{},finalizeAllocations:async()=>{},unfinalizeAllocations:async()=>{},getCategoryBalances:async()=>({}),getOnBudgetTotal:()=>0,getPreviousMonthIncome:async()=>0});function Nd(i){return i.map(e=>{const n={id:e.id,nickname:e.nickname,balance:e.balance,account_group_id:e.account_group_id??null,sort_order:e.sort_order};return e.is_income_account!==void 0&&(n.is_income_account=e.is_income_account),e.is_income_default!==void 0&&(n.is_income_default=e.is_income_default),e.is_outgo_account!==void 0&&(n.is_outgo_account=e.is_outgo_account),e.is_outgo_default!==void 0&&(n.is_outgo_default=e.is_outgo_default),e.on_budget!==void 0&&(n.on_budget=e.on_budget),e.is_active!==void 0&&(n.is_active=e.is_active),n})}function ek({children:i}){const e=ru(),[n,s]=C.useState(null),[o,c]=C.useState(!1),[d,g]=C.useState(null),[p,y]=C.useState(!1),b=C.useRef(null),[S,w]=C.useState([]),[O,N]=C.useState([]),[P,j]=C.useState([]),[W,G]=C.useState([]),[re,Ce]=C.useState([]),[je,xe]=C.useState([]),[R,A]=C.useState([]),[I,V]=C.useState([]),[U,F]=C.useState(!1),[k,rt]=C.useState(!1),[Ge,ee]=C.useState(!1),[q,De]=C.useState(null),[Me,Xe]=C.useState(new Date().getFullYear()),[M,L]=C.useState(new Date().getMonth()+1),[Q,Y]=C.useState(!1),[ce,Oe]=C.useState([]),[ze,$e]=C.useState(null),[Ze,ct]=C.useState(()=>XO()),[Xt,_n]=C.useState(null),[Bn,it]=C.useState(!1),Vt=C.useRef(!1),He=Ya(oa),ke=e.get_current_firebase_user(),vn=C.useCallback(()=>{const ie=ZO();_n({count:ie.count,totalSize:ie.totalSize})},[]);async function D(ie=!1){if(!ke)throw new Error("Not authenticated");const Z=Yn.USER_DOC(ke.uid);if(!Vt.current&&!ie){const le=Md(Z);if(le)return it(!0),le}const he=qe(He,"users",ke.uid);try{const le=await ot(he);if(it(!1),le.exists()){const Te=le.data();return sr(Z,Te),Te}const Ie={uid:ke.uid,email:ke.email||null,budget_ids:[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return await dt(he,Ie),sr(Z,Ie),Ie}catch(le){throw console.error("[BudgetContext] Error getting/creating user doc:",le),le}}async function B(){if(!ke){s(null),w([]),N([]),j([]),G([]),Ce([]),xe([]),A([]),V([]),F(!1),c(!1),y(!1),b.current=null;return}c(!0),g(null);try{let ie=null,Z=!1;try{ie=await D();const le=ie?.permission_flags;rt(le?.is_admin===!0),ee(le?.is_test===!0)}catch(le){console.warn("[BudgetContext] Failed to get user doc, falling back to old approach:",le),Z=!0,rt(!1),ee(!1)}const he=[];try{const le=Va(He,"budgets"),Ie=Lo(le,Po("user_ids","array-contains",ke.uid)),Te=await La(Ie);for(const Ee of Te.docs){const We=Ee.data(),Ke=We.user_ids?.includes(ke.uid),xt=We.accepted_user_ids?.includes(ke.uid),Ht=ie?.budget_ids?.includes(Ee.id);Ke&&!xt&&!Ht&&he.push({budgetId:Ee.id,budgetName:We.name||"Unnamed Budget",ownerEmail:We.owner_email||null})}}catch(le){console.warn("[BudgetContext] Could not check for pending invites:",le)}if(A(he),Z||ie&&ie.budget_ids.length===0){const le=Va(He,"budgets"),Ie=Lo(le,Po("user_ids","array-contains",ke.uid)),Te=await La(Ie);it(!1);const Ee=Te.docs.filter(We=>We.data().accepted_user_ids?.includes(ke.uid));if(Ee.length>0){const We=Ee[0],Ke=We.data();sr(Yn.BUDGET(We.id),Ke),await J(We.id,Ke)}else he.length>0?(s(null),w([]),N([]),j([]),G([]),Ce([]),xe([]),F(!1)):(s(null),w([]),N([]),j([]),G([]),Ce([]),xe([]),F(!0))}else if(ie&&ie.budget_ids.length>0){const le=ie.budget_ids[0],Ie=Yn.BUDGET(le);let Te=null;if(Vt.current||(Te=Md(Ie)),Te)it(!0),await J(le,Te);else{const Ee=qe(He,"budgets",le),We=await ot(Ee);if(it(!1),!We.exists())throw new Error(`Budget ${le} not found`);Te=We.data(),sr(Ie,Te),await J(le,Te)}}b.current=ke.uid,y(!0)}catch(ie){console.error("[BudgetContext] Error loading budget:",ie),g(ie instanceof Error?ie.message:"Failed to load budget")}finally{c(!1)}}async function J(ie,Z){s({id:ie,name:Z.name,user_ids:Z.user_ids||[],accepted_user_ids:Z.accepted_user_ids||[],owner_id:Z.owner_id||Z.user_ids?.[0]||ke.uid,owner_email:Z.owner_email||null}),Ce(Z.user_ids||[]),xe(Z.accepted_user_ids||[]);const he=(Z.accounts||[]).map(Ee=>({id:Ee.id,nickname:Ee.nickname,balance:Ee.balance,account_group_id:Ee.account_group_id??null,sort_order:Ee.sort_order??0,is_income_account:Ee.is_income_account,is_income_default:Ee.is_income_default,is_outgo_account:Ee.is_outgo_account,is_outgo_default:Ee.is_outgo_default,on_budget:Ee.on_budget,is_active:Ee.is_active}));he.sort((Ee,We)=>Ee.sort_order-We.sort_order),w(he);const le=(Z.account_groups||[]).map(Ee=>({id:Ee.id,name:Ee.name,sort_order:Ee.sort_order??0,expected_balance:Ee.expected_balance??"positive",on_budget:Ee.on_budget,is_active:Ee.is_active}));le.sort((Ee,We)=>Ee.sort_order-We.sort_order),N(le);const Ie=(Z.categories||[]).map(Ee=>({id:Ee.id,name:Ee.name,description:Ee.description,category_group_id:Ee.category_group_id??null,sort_order:Ee.sort_order??0,default_monthly_amount:Ee.default_monthly_amount,default_monthly_type:Ee.default_monthly_type}));Ie.sort((Ee,We)=>Ee.sort_order-We.sort_order),j(Ie);const Te=(Z.category_groups||[]).map(Ee=>({id:Ee.id,name:Ee.name,sort_order:Ee.sort_order??0}));Te.sort((Ee,We)=>Ee.sort_order-We.sort_order),G(Te)}async function ve(){ke&&(p&&b.current===ke.uid||await B())}async function fe(ie){if(!(!n||!ke))try{const Z=qe(He,"budgets",n.id),he=await ot(Z);if(he.exists()){const le=he.data();if(le.user_ids?.includes(ie))throw new Error("User is already invited to this budget");const Ie=[...le.user_ids||[],ie];await dt(Z,{...le,user_ids:Ie}),s({...n,user_ids:Ie}),Ce(Ie)}}catch(Z){throw new Error(Z instanceof Error?Z.message:"Failed to invite user")}}async function X(ie){if(!(!n||!ke))try{const Z=qe(He,"budgets",n.id),he=await ot(Z);if(he.exists()){const le=he.data(),Ie=(le.user_ids||[]).filter(Ee=>Ee!==ie),Te=(le.accepted_user_ids||[]).filter(Ee=>Ee!==ie);await dt(Z,{...le,user_ids:Ie,accepted_user_ids:Te}),s({...n,user_ids:Ie,accepted_user_ids:Te}),Ce(Ie),xe(Te)}}catch(Z){throw new Error(Z instanceof Error?Z.message:"Failed to revoke user access")}}async function ue(ie){if(!ke)return null;try{const Z=qe(He,"budgets",ie),he=await ot(Z);if(!he.exists())return null;const le=he.data();return!le.user_ids?.includes(ke.uid)||(await D()).budget_ids.includes(ie)?null:{budgetId:he.id,budgetName:le.name,ownerEmail:le.owner_email||null}}catch{return null}}async function be(ie){if(ke)try{const Z=qe(He,"budgets",ie),he=await ot(Z);if(!he.exists())throw new Error("Budget not found");const le=he.data();if(!le.user_ids?.includes(ke.uid))throw new Error("You have not been invited to this budget");const Ie=await D();if(Ie.budget_ids.includes(ie))throw new Error("You have already accepted this invite");await dt(qe(He,"users",ke.uid),{...Ie,budget_ids:[...Ie.budget_ids,ie],updated_at:new Date().toISOString()});const Te=[...le.accepted_user_ids||[],ke.uid];await dt(Z,{...le,accepted_user_ids:Te}),b.current=null,await B()}catch(Z){throw new Error(Z instanceof Error?Z.message:"Failed to accept invite")}}async function et(){if(n)try{const ie=qe(He,"budgets",n.id),Z=await ot(ie);if(Z.exists()){const le={...Z.data(),accounts:S,account_groups:O,categories:P,category_groups:W};await dt(ie,le),sr(Yn.BUDGET(n.id),le)}}catch(ie){throw new Error(ie instanceof Error?ie.message:"Failed to save budget data")}}async function we(){if(!ke){V([]);return}try{const ie=[];let Z=null;try{Z=await D()}catch{console.warn("[BudgetContext] Could not get user doc for accessible budgets")}const he=Va(He,"budgets"),le=Lo(he,Po("user_ids","array-contains",ke.uid)),Ie=await La(le);for(const Te of Ie.docs){const Ee=Te.data(),We=Ee.accepted_user_ids?.includes(ke.uid)||Z?.budget_ids?.includes(Te.id),Ke=Ee.owner_id===ke.uid;ie.push({id:Te.id,name:Ee.name||"Unnamed Budget",ownerEmail:Ee.owner_email||null,isOwner:Ke,isPending:!We})}ie.sort((Te,Ee)=>Te.isOwner!==Ee.isOwner?Te.isOwner?-1:1:Te.isPending!==Ee.isPending?Te.isPending?1:-1:Te.name.localeCompare(Ee.name)),V(ie)}catch(ie){console.error("[BudgetContext] Error loading accessible budgets:",ie)}}async function tt(ie){if(ke){c(!0),g(null);try{const Z=qe(He,"budgets",ie),he=await ot(Z);if(!he.exists())throw new Error("Budget not found");const le=he.data();if(!(le.accepted_user_ids?.includes(ke.uid)||le.owner_id===ke.uid))throw new Error("You do not have access to this budget. Please accept the invite first.");try{const Te=qe(He,"users",ke.uid),Ee=await ot(Te);if(Ee.exists()){const We=Ee.data(),Ke=[ie,...We.budget_ids.filter(xt=>xt!==ie)];await dt(Te,{...We,budget_ids:Ke,updated_at:new Date().toISOString()})}}catch(Te){console.warn("[BudgetContext] Could not update user doc primary budget:",Te)}await J(ie,le),b.current=ke.uid}catch(Z){throw console.error("[BudgetContext] Error switching budget:",Z),g(Z instanceof Error?Z.message:"Failed to switch budget"),Z}finally{c(!1)}}}async function Le(ie){if(!ke)return;const Z=ie?.trim()||"My Budget";c(!0),g(null);try{const he=`budget_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,le={id:he,name:Z,user_ids:[ke.uid],accepted_user_ids:[ke.uid],owner_id:ke.uid,owner_email:ke.email||null};await dt(qe(He,"budgets",he),{name:le.name,user_ids:le.user_ids,accepted_user_ids:le.accepted_user_ids,owner_id:le.owner_id,owner_email:le.owner_email,accounts:[],account_groups:[],categories:[],category_groups:[],created_at:new Date().toISOString()});try{const Ie=qe(He,"users",ke.uid),Te=await ot(Ie);if(Te.exists()){const Ee=Te.data();await dt(Ie,{...Ee,budget_ids:[he,...Ee.budget_ids],updated_at:new Date().toISOString()})}else await dt(Ie,{uid:ke.uid,email:ke.email||null,budget_ids:[he],created_at:new Date().toISOString(),updated_at:new Date().toISOString()})}catch(Ie){console.warn("[BudgetContext] Could not update user doc:",Ie)}s(le),w([]),N([]),j([]),G([]),Ce([ke.uid]),xe([ke.uid]),A([]),F(!1),b.current=ke.uid}catch(he){throw console.error("[BudgetContext] Error creating new budget:",he),g(he instanceof Error?he.message:"Failed to create new budget"),he}finally{c(!1)}}async function Ae(ie){if(!ke||!n)return;if(n.owner_id!==ke.uid)throw new Error("Only the budget owner can rename the budget");const Z=ie.trim();if(!Z)throw new Error("Budget name cannot be empty");try{const he=qe(He,"budgets",n.id),le=await ot(he);if(!le.exists())throw new Error("Budget not found");const Ie=le.data();await dt(he,{...Ie,name:Z}),s({...n,name:Z})}catch(he){throw console.error("[BudgetContext] Error renaming budget:",he),new Error(he instanceof Error?he.message:"Failed to rename budget")}}function ft(ie,Z,he){const le=he.toString().padStart(2,"0");return`${ie}_${Z}_${le}`}const Ln=C.useCallback(async(ie,Z,he=!1)=>{if(!(!n||!ke)){Y(!0),Xe(ie),L(Z);try{const le=Yn.MONTH(n.id,ie,Z);if(!Vt.current&&!he){const Te=Md(le);if(Te){it(!0),De(Te),Y(!1);return}}const Ie=await me(n.id,ie,Z);it(!1),sr(le,Ie),De(Ie)}catch(le){throw console.error("[BudgetContext] Error loading month:",le),new Error(le instanceof Error?le.message:"Failed to load month")}finally{Y(!1)}}},[n?.id,ke?.uid]);async function sn(){let ie=Me,Z=M-1;Z<1&&(Z=12,ie-=1),await Ln(ie,Z)}async function Fn(){let ie=Me,Z=M+1;Z>12&&(Z=1,ie+=1),await Ln(ie,Z)}async function Qt(ie){if(!n||!ie.trim())return;const Z=ie.trim();if(!ce.includes(Z))try{const he=qe(He,"payees",n.id),le=[...ce,Z].sort((Ie,Te)=>Ie.toLowerCase().localeCompare(Te.toLowerCase()));await dt(he,{budget_id:n.id,payees:le,updated_at:new Date().toISOString()}),sr(Yn.PAYEES(n.id),le),Oe(le)}catch(he){console.warn("[BudgetContext] Error saving payee:",he)}}const Ai=C.useCallback(async(ie=!1)=>{if(!n){Oe([]);return}const Z=Yn.PAYEES(n.id);if(!Vt.current&&!ie){const he=Md(Z);if(he){Oe(he);return}}try{const he=qe(He,"payees",n.id),le=await ot(he);if(le.exists()){const Te=le.data().payees||[];sr(Z,Te),Oe(Te)}else Oe([])}catch(he){console.warn("[BudgetContext] Error loading payees:",he),Oe([])}},[n?.id]);function Mn(ie){return ie.map(Z=>{const he={id:Z.id,amount:Z.amount,account_id:Z.account_id,date:Z.date,created_at:Z.created_at};return Z.payee&&(he.payee=Z.payee),Z.description&&(he.description=Z.description),he})}const si=C.useRef(new Map);async function me(ie,Z,he){const le=ft(ie,Z,he),Ie=si.current.get(le);if(Ie)return Ie;const Te=(async()=>{const Ee=qe(He,"months",le),We=await ot(Ee);if(We.exists()){const Ke=We.data(),xt=Ke.income||[];return{budget_id:Ke.budget_id,year:Ke.year,month:Ke.month,income:xt,total_income:Ke.total_income??xt.reduce((Ht,Je)=>Ht+(Je.amount||0),0),allocations:Ke.allocations||[],allocations_finalized:Ke.allocations_finalized||!1,created_at:Ke.created_at,updated_at:Ke.updated_at||Ke.created_at}}else{const Ke=new Date().toISOString(),xt={budget_id:ie,year:Z,month:he,income:[],total_income:0,allocations:[],allocations_finalized:!1,created_at:Ke,updated_at:Ke};return await dt(Ee,xt),xt}})();si.current.set(le,Te);try{return await Te}finally{si.current.delete(le)}}async function Ne(ie,Z,he,le,Ie){if(!n||!ke)throw new Error("No budget loaded");try{const[Te,Ee]=he.split("-").map(Number),We={id:`income_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,amount:ie,account_id:Z,date:he,created_at:new Date().toISOString()};le?.trim()&&(We.payee=le.trim()),Ie&&(We.description=Ie);const Ke=await me(n.id,Te,Ee),xt=ft(n.id,Te,Ee),Ht=qe(He,"months",xt),Je=[...Ke.income,We],bt=Je.reduce((en,qt)=>en+qt.amount,0),yt={budget_id:Ke.budget_id,year:Ke.year,month:Ke.month,income:Mn(Je),total_income:bt,updated_at:new Date().toISOString()};Ke.created_at&&(yt.created_at=Ke.created_at),await dt(Ht,yt);const dn={...Ke,income:Je,total_income:bt,updated_at:new Date().toISOString()};sr(Yn.MONTH(n.id,Te,Ee),dn),q&&Te===Me&&Ee===M&&De({...q,income:Je,total_income:bt}),le?.trim()&&await Qt(le);const on=qe(He,"budgets",n.id),Lt=await ot(on);if(Lt.exists()){const en=Lt.data(),qt=en.accounts||[];if(qt.find(Nn=>Nn.id===Z)){const Nn=qt.map(bn=>bn.id===Z?{...bn,balance:bn.balance+ie}:bn),Di=Nd(Nn),Gr={...en,accounts:Di};await dt(on,Gr),sr(Yn.BUDGET(n.id),Gr),w(Nn)}else console.warn("[BudgetContext] addIncome - target account not found:",Z)}else console.error("[BudgetContext] addIncome - budget document not found")}catch(Te){throw console.error("[BudgetContext] Error adding income:",Te),new Error(Te instanceof Error?Te.message:"Failed to add income")}}async function Ue(ie,Z,he,le,Ie,Te){if(!n||!ke||!q)throw new Error("No budget or month loaded");try{const Ee=q.income.find(yt=>yt.id===ie);if(!Ee)throw new Error("Income transaction not found");const[We,Ke]=le.split("-").map(Number),xt=We!==Me||Ke!==M,Ht={id:Ee.id,amount:Z,account_id:he,date:le,created_at:Ee.created_at};if(Ie?.trim()&&(Ht.payee=Ie.trim()),Te&&(Ht.description=Te),xt){const yt=ft(n.id,Me,M),dn=qe(He,"months",yt),on=q.income.filter(Jt=>Jt.id!==ie),Lt=on.reduce((Jt,mn)=>Jt+mn.amount,0),en={budget_id:q.budget_id,year:q.year,month:q.month,income:Mn(on),total_income:Lt,updated_at:new Date().toISOString()};q.created_at&&(en.created_at=q.created_at),await dt(dn,en),De({...q,income:on,total_income:Lt});const qt=await me(n.id,We,Ke),Ot=ft(n.id,We,Ke),Nn=qe(He,"months",Ot),Di=[...qt.income,Ht],Gr=Di.reduce((Jt,mn)=>Jt+mn.amount,0),bn={budget_id:qt.budget_id,year:qt.year,month:qt.month,income:Mn(Di),total_income:Gr,updated_at:new Date().toISOString()};qt.created_at&&(bn.created_at=qt.created_at),await dt(Nn,bn)}else{const yt=ft(n.id,Me,M),dn=qe(He,"months",yt),on=q.income.map(qt=>qt.id===ie?Ht:qt),Lt=on.reduce((qt,Ot)=>qt+Ot.amount,0),en={budget_id:q.budget_id,year:q.year,month:q.month,income:Mn(on),total_income:Lt,updated_at:new Date().toISOString()};q.created_at&&(en.created_at=q.created_at),await dt(dn,en),De({...q,income:on,total_income:Lt})}Ie?.trim()&&await Qt(Ie);const Je=Z!==Ee.amount,bt=Ee.account_id!==he;if(Je||bt){const yt=qe(He,"budgets",n.id),dn=await ot(yt);if(dn.exists()){const on=dn.data();let Lt=on.accounts||[];if(bt)Lt=Lt.map(Ot=>Ot.id===Ee.account_id?{...Ot,balance:Ot.balance-Ee.amount}:Ot),Lt=Lt.map(Ot=>Ot.id===he?{...Ot,balance:Ot.balance+Z}:Ot);else if(Je){const Ot=Z-Ee.amount;Lt=Lt.map(Nn=>Nn.id===he?{...Nn,balance:Nn.balance+Ot}:Nn)}const en=Nd(Lt),qt={...on,accounts:en};await dt(yt,qt),sr(Yn.BUDGET(n.id),qt),w(Lt)}}}catch(Ee){throw console.error("[BudgetContext] Error updating income:",Ee),new Error(Ee instanceof Error?Ee.message:"Failed to update income")}}async function vt(ie){if(!n||!ke||!q)throw new Error("No budget or month loaded");try{const Z=q.income.find(xt=>xt.id===ie);if(!Z)throw new Error("Income transaction not found");const he=ft(n.id,Me,M),le=qe(He,"months",he),Ie=q.income.filter(xt=>xt.id!==ie),Te=Ie.reduce((xt,Ht)=>xt+Ht.amount,0),Ee={budget_id:q.budget_id,year:q.year,month:q.month,income:Mn(Ie),total_income:Te,updated_at:new Date().toISOString()};q.created_at&&(Ee.created_at=q.created_at),await dt(le,Ee),De({...q,income:Ie,total_income:Te});const We=qe(He,"budgets",n.id),Ke=await ot(We);if(Ke.exists()){const xt=Ke.data(),Je=(xt.accounts||[]).map(dn=>dn.id===Z.account_id?{...dn,balance:dn.balance-Z.amount}:dn),bt=Nd(Je),yt={...xt,accounts:bt};await dt(We,yt),sr(Yn.BUDGET(n.id),yt),w(Je)}}catch(Z){throw console.error("[BudgetContext] Error deleting income:",Z),new Error(Z instanceof Error?Z.message:"Failed to delete income")}}async function Ut(){if(!n||!ke||!q)throw new Error("No budget or month loaded");try{const ie=q.income.reduce((Ie,Te)=>Ie+Te.amount,0),Z=ft(n.id,Me,M),he=qe(He,"months",Z),le={budget_id:q.budget_id,year:q.year,month:q.month,income:Mn(q.income),total_income:ie,updated_at:new Date().toISOString()};q.created_at&&(le.created_at=q.created_at),q.account_balances_start&&(le.account_balances_start=q.account_balances_start),q.account_balances_end&&(le.account_balances_end=q.account_balances_end),await dt(he,le),De({...q,total_income:ie})}catch(ie){throw console.error("[BudgetContext] Error recomputing month totals:",ie),new Error(ie instanceof Error?ie.message:"Failed to recompute month totals")}}async function an(){if(!n||!ke)throw new Error("No budget loaded");try{const ie=Lo(Va(He,"months"),Po("budget_id","==",n.id)),Z=await La(ie),he=[];Z.forEach(Je=>{const bt=Je.data();he.push({budget_id:bt.budget_id,year:bt.year,month:bt.month,income:bt.income||[],total_income:bt.total_income||0,account_balances_start:bt.account_balances_start,account_balances_end:bt.account_balances_end,created_at:bt.created_at,updated_at:bt.updated_at})}),he.sort((Je,bt)=>Je.year!==bt.year?Je.year-bt.year:Je.month-bt.month);const le=qe(He,"budgets",n.id),Ie=await ot(le);if(!Ie.exists())throw new Error("Budget document not found");const Te=Ie.data(),Ee=Te.accounts||[],We=Ee.map(Je=>Je.id);let Ke={};We.forEach(Je=>{Ke[Je]=0});for(const Je of he){const bt={...Ke},yt=Je.income.reduce((Ot,Nn)=>Ot+Nn.amount,0),dn={};for(const Ot of Je.income)dn[Ot.account_id]=(dn[Ot.account_id]||0)+Ot.amount;const on={};We.forEach(Ot=>{on[Ot]=bt[Ot]+(dn[Ot]||0)}),Ke={...on};const Lt=ft(n.id,Je.year,Je.month),en=qe(He,"months",Lt),qt={budget_id:Je.budget_id,year:Je.year,month:Je.month,income:Mn(Je.income),total_income:yt,account_balances_start:bt,account_balances_end:on,updated_at:new Date().toISOString()};Je.created_at&&(qt.created_at=Je.created_at),await dt(en,qt),Je.year===Me&&Je.month===M&&De({...Je,total_income:yt,account_balances_start:bt,account_balances_end:on})}const xt=Ee.map(Je=>({...Je,balance:Ke[Je.id]||0})),Ht=Nd(xt);await dt(le,{...Te,accounts:Ht}),w(xt),$e(null)}catch(ie){throw console.error("[BudgetContext] Error recomputing all balances:",ie),new Error(ie instanceof Error?ie.message:"Failed to recompute all balances")}}async function ls(){if(!n||!ke)return null;try{const ie=Lo(Va(He,"months"),Po("budget_id","==",n.id)),Z=await La(ie),he={};S.forEach(Te=>{he[Te.id]=0}),Z.forEach(Te=>{const We=Te.data().income||[];for(const Ke of We)he[Ke.account_id]=(he[Ke.account_id]||0)+Ke.amount});const le={};for(const Te of S){const Ee=Te.balance,We=he[Te.id]||0;Math.abs(Ee-We)>.001&&(le[Te.id]={stored:Ee,calculated:We})}const Ie=Object.keys(le).length>0;return $e(Ie?le:null),Ie?le:null}catch(ie){return console.error("[BudgetContext] Error checking balance mismatch:",ie),null}}async function Xa(){await an()}function or(ie){return ie.map(Z=>({category_id:Z.category_id,amount:Z.amount}))}async function Ci(ie){if(!n||!ke||!q)throw new Error("No budget or month loaded");try{const Z=ft(n.id,Me,M),he=qe(He,"months",Z),le={budget_id:q.budget_id,year:q.year,month:q.month,income:Mn(q.income),total_income:q.total_income,allocations:or(ie),allocations_finalized:q.allocations_finalized||!1,updated_at:new Date().toISOString()};q.created_at&&(le.created_at=q.created_at),q.account_balances_start&&(le.account_balances_start=q.account_balances_start),q.account_balances_end&&(le.account_balances_end=q.account_balances_end),await dt(he,le);const Ie={...q,allocations:ie};De(Ie),sr(Yn.MONTH(n.id,Me,M),Ie)}catch(Z){throw console.error("[BudgetContext] Error saving allocations:",Z),new Error(Z instanceof Error?Z.message:"Failed to save allocations")}}async function xl(){if(!n||!ke||!q)throw new Error("No budget or month loaded");try{const ie=ft(n.id,Me,M),Z=qe(He,"months",ie),he={budget_id:q.budget_id,year:q.year,month:q.month,income:Mn(q.income),total_income:q.total_income,allocations:or(q.allocations||[]),allocations_finalized:!0,updated_at:new Date().toISOString()};q.created_at&&(he.created_at=q.created_at),q.account_balances_start&&(he.account_balances_start=q.account_balances_start),q.account_balances_end&&(he.account_balances_end=q.account_balances_end),await dt(Z,he);const le={...q,allocations_finalized:!0};De(le),sr(Yn.MONTH(n.id,Me,M),le)}catch(ie){throw console.error("[BudgetContext] Error finalizing allocations:",ie),new Error(ie instanceof Error?ie.message:"Failed to finalize allocations")}}async function Ri(){if(!n||!ke||!q)throw new Error("No budget or month loaded");try{const ie=ft(n.id,Me,M),Z=qe(He,"months",ie),he={budget_id:q.budget_id,year:q.year,month:q.month,income:Mn(q.income),total_income:q.total_income,allocations:or(q.allocations||[]),allocations_finalized:!1,updated_at:new Date().toISOString()};q.created_at&&(he.created_at=q.created_at),q.account_balances_start&&(he.account_balances_start=q.account_balances_start),q.account_balances_end&&(he.account_balances_end=q.account_balances_end),await dt(Z,he);const le={...q,allocations_finalized:!1};De(le),sr(Yn.MONTH(n.id,Me,M),le)}catch(ie){throw console.error("[BudgetContext] Error unfinalizing allocations:",ie),new Error(ie instanceof Error?ie.message:"Failed to unfinalize allocations")}}const ca=C.useCallback(async()=>{if(!n)return{};try{const ie=Lo(Va(He,"months"),Po("budget_id","==",n.id)),Z=await La(ie),he={};return P.forEach(le=>{he[le.id]=0}),Z.forEach(le=>{const Ie=le.data();if(Ie.allocations_finalized&&Ie.allocations)for(const Te of Ie.allocations)he[Te.category_id]=(he[Te.category_id]||0)+Te.amount}),he}catch(ie){return console.error("[BudgetContext] Error getting category balances:",ie),{}}},[n?.id,P]);function ua(){return S.filter(ie=>{const Z=O.find(Ie=>Ie.id===ie.account_group_id),he=Z?.on_budget!==void 0?Z.on_budget:ie.on_budget!==!1,le=Z?.is_active!==void 0?Z.is_active:ie.is_active!==!1;return he&&le}).reduce((ie,Z)=>ie+Z.balance,0)}const Ii=C.useCallback(async()=>{if(!n)return 0;let ie=Me,Z=M-1;Z<1&&(Z=12,ie-=1);try{const he=ft(n.id,ie,Z),le=qe(He,"months",he),Ie=await ot(le);return Ie.exists()&&Ie.data().total_income||0}catch(he){return console.error("[BudgetContext] Error getting previous month income:",he),0}},[n?.id,Me,M]),qr=!!(n&&ke&&n.owner_id===ke.uid),Ja=R.length>0;async function _r(){if(ke){console.log("[BudgetContext] Force refreshing from Firebase..."),Vt.current=!0;try{n&&YO(n.id),WO(Yn.USER_DOC(ke.uid)),b.current=null,y(!1),await B(),n&&q&&(await Ln(Me,M,!0),await Ai(!0)),JO(),ct(Date.now()),vn(),console.log("[BudgetContext] Force refresh complete")}finally{Vt.current=!1}}}function vr(){QO(),ct(null),vn(),console.log("[BudgetContext] Cache cleared")}return f.jsx(s1.Provider,{value:{currentBudget:n,loading:o,error:d,isOwner:qr,isAdmin:k,isTest:Ge,currentUserId:ke?.uid||null,isInitialized:p,accounts:S,accountGroups:O,categories:P,categoryGroups:W,budgetUserIds:re,acceptedUserIds:je,pendingInvites:R,hasPendingInvites:Ja,needsFirstBudget:U,accessibleBudgets:I,currentMonth:q,currentYear:Me,currentMonthNumber:M,monthLoading:Q,payees:ce,lastRefreshTime:Ze,cacheStats:Xt,isUsingCache:Bn,ensureBudgetLoaded:ve,refreshBudget:B,forceRefreshFromFirebase:_r,clearCache:vr,inviteUserToBudget:fe,revokeUserFromBudget:X,checkBudgetInvite:ue,acceptBudgetInvite:be,loadAccessibleBudgets:we,switchToBudget:tt,createNewBudget:Le,renameBudget:Ae,setAccounts:w,setAccountGroups:N,setCategories:j,setCategoryGroups:G,saveBudgetData:et,loadMonth:Ln,goToPreviousMonth:sn,goToNextMonth:Fn,addIncome:Ne,updateIncome:Ue,deleteIncome:vt,recomputeMonthTotals:Ut,recomputeAllBalances:an,checkBalanceMismatch:ls,reconcileBalances:Xa,balanceMismatch:ze,loadPayees:Ai,saveAllocations:Ci,finalizeAllocations:xl,unfinalizeAllocations:Ri,getCategoryBalances:ca,getOnBudgetTotal:ua,getPreviousMonthIncome:Ii},children:i})}function os(){return C.useContext(s1)}function tk(){return f.jsxs("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:[f.jsx("h1",{children:"Welcome"}),f.jsx("nav",{children:f.jsxs("ul",{children:[f.jsx("li",{children:f.jsx(hn,{to:"/sql-test",children:"SQL Test"})}),f.jsx("li",{children:f.jsx(hn,{to:"/budget",children:"Budget"})}),f.jsx("li",{children:f.jsx(hn,{to:"/account",children:"Account"})})]})})]})}function nk(){return f.jsxs("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:[f.jsx("nav",{children:f.jsx(hn,{to:"/",children:" Back to Home"})}),f.jsx("h1",{children:"SQL Test"}),f.jsx("h2",{children:"Setup"}),f.jsxs("h3",{children:["1. Open up your preferred web browser to ",f.jsx("a",{href:"https://www.programiz.com/sql/online-compiler/",target:"_blank",rel:"noopener noreferrer",children:"https://www.programiz.com/sql/online-compiler/"})]}),f.jsxs("ul",{children:[f.jsx("li",{children:"This is a basic online sql query editor"}),f.jsxs("li",{children:["It will include three tables: ",f.jsx("b",{children:'"Customer"'}),", ",f.jsx("b",{children:'"Orders"'}),", and ",f.jsx("b",{children:'"Shippings"'})]})]}),f.jsx("h3",{children:"2. Run the below query block inside the online editor to make some updates to the schema."}),f.jsx("pre",{style:{backgroundColor:"#1a1a1a",padding:"1rem",borderRadius:"8px",overflow:"auto"},children:f.jsx("code",{children:`ALTER TABLE shippings
ADD order_id INT;

UPDATE shippings
SET order_id = CASE
  WHEN shipping_id = 1 THEN 5
    WHEN shipping_id = 2 THEN 1
    WHEN shipping_id = 3 THEN 3
    WHEN shipping_id = 4 THEN 6
    WHEN shipping_id = 5 THEN 4
END
WHERE shipping_id IN (1,2,3,4,5);

INSERT INTO shippings (shipping_id, status, customer, order_id)
VALUES (6, "Cancelled", 4, 2);

INSERT INTO orders (order_id, item, amount, customer_id)
VALUES (6, "Monitor", 800, 5);`})}),f.jsx("h2",{children:"SQL Problems"}),f.jsx("p",{children:"Write queries in the online editor to answer these questions."}),f.jsx("h3",{children:"Question #1"}),f.jsx("p",{children:'Calculate the total number of orders, the total $ amount, and the total items "delivered" by Country. Show the following columns: country, order count, total $ amount, and total delivered. Order by total $ amount largest to smallest.'}),f.jsx("h3",{children:"Question #2"}),f.jsx("p",{children:"Find the customers who have placed orders with the HIGHEST total amount for each country. One record per country. Display the customer's first name, last name, country, and the corresponding highest total order amount. Also include the shipping status of the associated order."})]})}function rk(){const i=C.useContext(qc),e=ru(),[n,s]=C.useState(!1),o=Hr(),c=Hg(),d=o.state?.from||"/";C.useEffect(()=>{i.is_logged_in&&d!=="/"&&c(d,{replace:!0})},[i.is_logged_in,d,c]);function g(){s(!0),e.logout_firebase_user().then(function(){s(!1)})}return f.jsxs("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:[f.jsx("h1",{children:"Account"}),i.is_logged_in?n?f.jsx("p",{children:"Logging Out..."}):f.jsxs(f.Fragment,{children:[f.jsxs("p",{children:["You are logged in as ",i.username]}),f.jsx("button",{onClick:g,style:{marginTop:"1rem"},children:"Logout"})]}):f.jsx(ik,{}),f.jsx("p",{children:f.jsx(hn,{to:"/",children:"Back to Home"})})]})}function ik(){const i=ru(),[e,n]=C.useState(""),[s,o]=C.useState(""),[c,d]=C.useState(!1),[g,p]=C.useState("");function y(w){n(w.target.value)}function b(w){o(w.target.value)}function S(w){w.preventDefault(),d(!0),p(""),i.login_firebase_user(e,s).then(function(){}).catch(function(){p("Incorrect login credentials")}).finally(function(){d(!1)})}return f.jsxs("form",{onSubmit:S,children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"username",children:"Email: "}),f.jsx("input",{id:"username",type:"email",value:e,onChange:y})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",children:"Password: "}),f.jsx("input",{id:"password",type:"password",value:s,onChange:b})]}),c?f.jsx("p",{children:"Logging in..."}):f.jsx("button",{children:"Login"}),g&&f.jsx("p",{style:{color:"red"},children:g})]})}const Se={primary:"#646cff",primaryLight:"#a5b4fc",error:"#f87171",errorBg:"rgba(220, 38, 38, 0.1)",errorBorder:"rgba(220, 38, 38, 0.3)",success:"#4ade80",danger:"#f87171",warning:"#facc15"},sk={maxWidth:"60rem",margin:"0 auto",padding:"2rem"},ag={marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},iu={background:"color-mix(in srgb, currentColor 8%, transparent)",padding:"1rem 1.25rem",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"},ak={...iu,padding:"0.6rem 0.875rem",gap:"0.5rem"},ok={background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1rem 1.5rem",borderRadius:"8px",marginBottom:"1.5rem"},lk={background:"color-mix(in srgb, currentColor 8%, transparent)",padding:"1.25rem",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"1rem"},ck={display:"flex",flexDirection:"column",gap:"0.5rem"},uk={fontSize:"0.9rem",fontWeight:500},su={padding:"0.6rem 0.8rem",borderRadius:"6px",border:"1px solid color-mix(in srgb, currentColor 20%, transparent)",background:"color-mix(in srgb, currentColor 5%, transparent)",fontSize:"1rem",color:"inherit"},dk={...su,cursor:"pointer"},Up={padding:"0.6rem 1.25rem",borderRadius:"6px",cursor:"pointer",fontWeight:500,fontSize:"0.9rem",transition:"opacity 0.15s"},a1={...Up,background:Se.primary,color:"white",border:"none"},hk={...a1,padding:"0.75rem 1.5rem",borderRadius:"8px"},fk={...Up,background:"transparent",border:"1px solid color-mix(in srgb, currentColor 30%, transparent)"},mk={...Up,background:"transparent",border:`1px solid ${Se.errorBorder}`,color:Se.error},gk={background:"transparent",border:"1px solid color-mix(in srgb, currentColor 25%, transparent)",padding:"0.35rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",opacity:.8,transition:"opacity 0.15s"},pk={display:"flex",gap:"0.5rem"},yk={display:"flex",gap:"0.25rem"},o1={background:"transparent",border:"1px solid color-mix(in srgb, currentColor 20%, transparent)",padding:"0.35rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center",minWidth:"2rem",minHeight:"2rem",transition:"opacity 0.15s, border-color 0.15s"},_k={...o1,borderColor:Se.errorBorder,color:Se.error},ol={background:"transparent",border:"1px solid color-mix(in srgb, currentColor 15%, transparent)",padding:"0.25rem 0.35rem",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center",opacity:.6,transition:"opacity 0.15s, background 0.15s"},zp={display:"flex",flexDirection:"column",gap:"2px"},vk={display:"flex",gap:"0.75rem",marginTop:"0.5rem"},l1={opacity:.4,cursor:"grab"},c1={position:"absolute",top:"-4px",left:0,right:0,height:"3px",background:Se.primary,borderRadius:"2px",transition:"opacity 0.15s"},bk={position:"relative",height:"2rem",marginTop:"-0.25rem"},Ek={position:"absolute",top:"50%",left:0,right:0,height:"3px",background:Se.primary,borderRadius:"2px",transition:"opacity 0.15s"},Sk={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"0.75rem",opacity:.7,background:"var(--background, #1a1a1a)",padding:"0 0.5rem",whiteSpace:"nowrap"},xk={background:Se.errorBg,border:`1px solid ${Se.errorBorder}`,color:Se.error,padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"},wk={background:"transparent",border:"none",color:Se.error,cursor:"pointer",fontSize:"1.2rem",padding:"0 0.25rem",lineHeight:1},qh={opacity:.7,marginBottom:"1.5rem"},ll={margin:0,fontSize:"0.85rem",textTransform:"uppercase",letterSpacing:"0.5px",opacity:.6},ph={fontWeight:500,fontSize:"1.1rem"},qa={display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"1.5rem"};function og({children:i}){return f.jsx("div",{style:sk,children:i})}function au({message:i,children:e,onDismiss:n,style:s}){return f.jsxs("div",{style:{...xk,...s},children:[f.jsx("span",{children:e??i}),n&&f.jsx("button",{onClick:n,style:wk,children:""})]})}const Tk={primary:a1,"primary-large":hk,secondary:fk,danger:mk,small:gk};function _t({variant:i="primary",isLoading:e,loadingText:n="Saving...",children:s,disabled:o,style:c,...d}){const g=Tk[i],p=o||e;return f.jsx("button",{disabled:p,style:{...g,cursor:p?"not-allowed":"pointer",opacity:p?.7:1,...c},...d,children:e?n:s})}function Sl({children:i,onSubmit:e}){return f.jsx("form",{onSubmit:e,style:lk,children:i})}function yr({label:i,htmlFor:e,children:n,hint:s}){return f.jsxs("div",{style:ck,children:[f.jsx("label",{htmlFor:e,style:uk,children:i}),n,s&&f.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.85rem",opacity:.6},children:s})]})}function Ga(i){return f.jsx("input",{style:su,...i})}function Bc({children:i,...e}){return f.jsx("select",{style:dk,...e,children:i})}function Bp({minHeight:i="6rem",style:e,...n}){return f.jsx("textarea",{style:{...su,width:"100%",minHeight:i,resize:"vertical",fontFamily:"inherit",boxSizing:"border-box",...e},...n})}function Ka({children:i}){return f.jsx("div",{style:vk,children:i})}function lg(i){const n=i.replace(/[^\d.]/g,"").split("."),s=n[0]||"",o=n[1],c=s.replace(/\B(?=(\d{3})+(?!\d))/g,",");return o!==void 0?`$${c}.${o.slice(0,2)}`:c?`$${c}`:""}function Ak(i){return i.replace(/[$,]/g,"")}function u1({id:i,value:e,onChange:n,placeholder:s="$0.00",required:o,autoFocus:c}){const[d,g]=C.useState(()=>lg(e)),p=C.useRef(null);C.useEffect(()=>{const b=lg(e);Ak(d)!==e&&g(b)},[e]);function y(b){const S=b.target.value;if(!S||S==="$"){g(""),n("");return}const O=S.replace(/[^\d.]/g,"").split(".");let N=O[0];O.length>1&&(N+="."+O.slice(1).join("").slice(0,2));const P=lg(N);g(P),n(N)}return f.jsx("input",{ref:p,id:i,type:"text",inputMode:"decimal",value:d,onChange:y,placeholder:s,required:o,autoFocus:c,style:su})}function Ck(i,e){const n=i.toLowerCase(),s=e.toLowerCase();if(s.includes(n)){const g=s.indexOf(n);return{match:!0,score:g===0||/\s/.test(s[g-1])?100:90}}let o=0,c=0,d=0;for(let g=0;g<s.length&&o<n.length;g++)s[g]===n[o]?(o++,d++,c+=d*2):d=0;return o===n.length?{match:!0,score:c}:{match:!1,score:0}}function Rk({id:i,value:e,onChange:n,payees:s,placeholder:o="Enter payee name"}){const[c,d]=C.useState(!1),[g,p]=C.useState(-1),y=C.useRef(null),b=C.useRef(null),S=e.trim()?s.map(N=>({payee:N,...Ck(e,N)})).filter(N=>N.match).sort((N,P)=>P.score-N.score).slice(0,8).map(N=>N.payee):[];C.useEffect(()=>{function N(P){y.current&&!y.current.contains(P.target)&&d(!1)}return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]);function w(N){!c||S.length===0||(N.key==="ArrowDown"?(N.preventDefault(),p(P=>Math.min(P+1,S.length-1))):N.key==="ArrowUp"?(N.preventDefault(),p(P=>Math.max(P-1,-1))):N.key==="Enter"&&g>=0?(N.preventDefault(),n(S[g]),d(!1),p(-1)):N.key==="Escape"&&(d(!1),p(-1)))}function O(N){n(N),d(!1),p(-1),b.current?.focus()}return f.jsxs("div",{ref:y,style:{position:"relative"},children:[f.jsx("input",{ref:b,id:i,type:"text",value:e,onChange:N=>{n(N.target.value),d(!0),p(-1)},onFocus:()=>d(!0),onKeyDown:w,placeholder:o,autoComplete:"off",style:su}),c&&S.length>0&&f.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",background:"var(--background, #1a1a1a)",border:"1px solid color-mix(in srgb, currentColor 20%, transparent)",borderRadius:"6px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",zIndex:1e3,maxHeight:"200px",overflowY:"auto"},children:S.map((N,P)=>f.jsx("div",{onClick:()=>O(N),style:{padding:"0.6rem 0.8rem",cursor:"pointer",background:P===g?`color-mix(in srgb, ${Se.primary} 20%, transparent)`:"transparent",borderBottom:P<S.length-1?"1px solid color-mix(in srgb, currentColor 10%, transparent)":"none",transition:"background 0.1s"},onMouseEnter:()=>p(P),children:N},N))})]})}const Ik=640;function Fp(i=Ik){const[e,n]=C.useState(()=>typeof window>"u"?!1:window.innerWidth<i);return C.useEffect(()=>{function s(){n(window.innerWidth<i)}return window.addEventListener("resize",s),s(),()=>window.removeEventListener("resize",s)},[i]),e}function yh({children:i,isDragging:e,isDragOver:n,onDragStart:s,onDragOver:o,onDragLeave:c,onDragEnd:d,onDrop:g,onEdit:p,onDelete:y,onMoveUp:b,onMoveDown:S,canMoveUp:w=!0,canMoveDown:O=!0}){const N=Fp(),P=b||S;return f.jsxs("div",{onDragOver:j=>{j.stopPropagation(),o(j)},onDragLeave:j=>{j.stopPropagation(),c()},onDrop:j=>{j.stopPropagation(),g(j)},style:{position:"relative"},children:[f.jsx("div",{style:{...c1,opacity:n?1:0,boxShadow:n?"0 0 8px rgba(100, 108, 255, 0.6)":"none"}}),f.jsxs("div",{style:{...N?ak:iu,opacity:e?.5:1},children:[f.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",gap:N?"0.5rem":"0.75rem",minWidth:0},children:[f.jsx("span",{draggable:!0,onDragStart:s,onDragEnd:d,style:{...l1,fontSize:N?"0.9rem":void 0,cursor:"grab",padding:"0.25rem",margin:"-0.25rem",borderRadius:"4px",userSelect:"none"},title:"Drag to reorder",children:""}),f.jsx("div",{style:{flex:1,minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},children:i})]}),f.jsxs("div",{style:N?yk:pk,children:[N?f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:p,style:o1,title:"Edit","aria-label":"Edit",children:""}),f.jsx("button",{onClick:y,style:_k,title:"Delete","aria-label":"Delete",children:""})]}):f.jsxs(f.Fragment,{children:[f.jsx(_t,{variant:"secondary",onClick:p,children:"Edit"}),f.jsx(_t,{variant:"danger",onClick:y,children:"Delete"})]}),P&&f.jsxs("div",{style:zp,children:[f.jsx("button",{onClick:j=>{j.stopPropagation(),b?.()},disabled:!w,style:{...ol,opacity:w?.6:.2,cursor:w?"pointer":"default"},title:"Move up","aria-label":"Move up",children:""}),f.jsx("button",{onClick:j=>{j.stopPropagation(),S?.()},disabled:!O,style:{...ol,opacity:O?.6:.2,cursor:O?"pointer":"default"},title:"Move down","aria-label":"Move down",children:""})]})]})]})]})}function Hp({isActive:i,onDragOver:e,onDragLeave:n,onDrop:s,label:o="Move to end"}){return f.jsxs("div",{onDragOver:e,onDragLeave:n,onDrop:s,style:bk,children:[f.jsx("div",{style:{...Ek,opacity:i?1:.3,boxShadow:i?"0 0 8px rgba(100, 108, 255, 0.6)":"none"}}),i&&f.jsx("span",{style:Sk,children:o})]})}function Qi({children:i,style:e}){return f.jsx("div",{style:{...ok,...e},children:i})}function yn(i){return`$${i.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function Br(i){return i>=0?Se.success:Se.danger}function Lg({isOpen:i,onClose:e,title:n,children:s,maxWidth:o="28rem"}){return i?f.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1001,padding:"1rem"},onClick:e,children:f.jsxs("div",{style:{background:"#1a1a1a",color:"rgba(255, 255, 255, 0.87)",borderRadius:"12px",padding:"1.5rem",width:"100%",maxWidth:o,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)"},onClick:c=>c.stopPropagation(),children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[f.jsx("h2",{style:{margin:0,fontSize:"1.25rem"},children:n}),f.jsx("button",{onClick:e,style:{background:"transparent",border:"none",color:"inherit",cursor:"pointer",fontSize:"1.5rem",opacity:.6,lineHeight:1},children:""})]}),s]})}):null}const Dk={critical_bug:{label:"Critical Bug",color:"#ff4757",bgColor:"rgba(255, 71, 87, 0.15)"},bug:{label:"Bug",color:"#ffa502",bgColor:"rgba(255, 165, 2, 0.15)"},new_feature:{label:"New Feature",color:"#2ed573",bgColor:"rgba(46, 213, 115, 0.15)"},core_feature:{label:"Core Feature",color:"#1e90ff",bgColor:"rgba(30, 144, 255, 0.15)"},qol:{label:"QOL",color:"#a55eea",bgColor:"rgba(165, 94, 234, 0.15)"}};function Ok(){const[i,e]=C.useState(!1),[n,s]=C.useState(""),[o,c]=C.useState("bug"),[d,g]=C.useState(!1),[p,y]=C.useState(!1),[b,S]=C.useState(null),w=C.useContext(qc),O=Hr(),N=Ya(oa);if(O.pathname.includes("/admin/feedback")||!w.is_logged_in)return null;async function j(W){if(W.preventDefault(),!(!n.trim()||!w.username)){g(!0),S(null);try{const G=w.username.replace(/[.@]/g,"_"),re=qe(N,"feedback",G),Ce={id:`feedback_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,text:n.trim(),created_at:new Date().toISOString(),is_done:!1,completed_at:null,sort_order:Date.now(),feedback_type:o};(await ot(re)).exists()?await dt(re,{items:wx(Ce)},{merge:!0}):await dt(re,{user_email:w.username,items:[Ce]}),s(""),c("bug"),y(!0),setTimeout(()=>{y(!1),e(!1)},1500)}catch(G){S(G instanceof Error?G.message:"Failed to submit feedback")}finally{g(!1)}}}return f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>e(!0),style:{position:"fixed",bottom:"1.5rem",right:"1.5rem",width:"3rem",height:"3rem",borderRadius:"50%",background:Se.primary,color:"white",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.25rem",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",transition:"transform 0.15s, box-shadow 0.15s",zIndex:1e3},title:"Send Feedback",onMouseEnter:W=>{W.currentTarget.style.transform="scale(1.1)",W.currentTarget.style.boxShadow="0 6px 16px rgba(0, 0, 0, 0.4)"},onMouseLeave:W=>{W.currentTarget.style.transform="scale(1)",W.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.3)"},children:""}),f.jsx(Lg,{isOpen:i,onClose:()=>{e(!1),c("bug")},title:"Send Feedback",children:p?f.jsxs("div",{style:{textAlign:"center",padding:"2rem 0",color:Se.success},children:[f.jsx("span",{style:{fontSize:"2rem",display:"block",marginBottom:"0.5rem"},children:""}),"Feedback submitted!"]}):f.jsxs("form",{onSubmit:j,children:[f.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem",paddingBottom:"1rem",flexWrap:"wrap"},children:["critical_bug","bug","new_feature","core_feature","qol"].map(W=>{const G=Dk[W],re=o===W;return f.jsxs("button",{type:"button",onClick:()=>c(W),style:{flex:1,padding:"0.6rem 0.5rem",border:`2px solid ${G.color}`,borderRadius:"0.5rem",background:re?G.bgColor:"transparent",color:re?G.color:"rgba(255,255,255,0.5)",cursor:"pointer",fontWeight:re?600:400,fontSize:"0.8rem",transition:"all 0.15s ease",opacity:re?1:.5,boxShadow:re?`0 0 12px ${G.bgColor}`:"none",position:"relative"},children:[G.label,re&&f.jsx("span",{style:{position:"absolute",bottom:"-14px",left:"10%",right:"10%",height:"3px",background:"white",borderRadius:"2px"}})]},W)})}),f.jsx(Bp,{value:n,onChange:W=>s(W.target.value),placeholder:"Share your feedback, bug reports, or feature requests...",minHeight:"8rem",autoFocus:!0,required:!0}),b&&f.jsx("p",{style:{color:Se.error,fontSize:"0.85rem",margin:"0.5rem 0"},children:b}),f.jsxs(Ka,{children:[f.jsx(_t,{type:"button",variant:"secondary",onClick:()=>{e(!1),c("bug")},children:"Cancel"}),f.jsx(_t,{type:"submit",isLoading:d,disabled:!n.trim(),children:"Submit"})]})]})})]})}function Uo({children:i,labelStyle:e,...n}){return f.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",flex:1,cursor:"pointer",...e},children:[f.jsx("input",{type:"checkbox",style:{width:"1.25rem",height:"1.25rem",marginTop:"0.1rem",cursor:"pointer",accentColor:Se.primary},...n}),i]})}function kk({title:i,count:e,children:n,defaultExpanded:s=!1}){const[o,c]=C.useState(s);return f.jsxs("div",{style:{marginTop:"2rem"},children:[f.jsxs("button",{onClick:()=>c(!o),style:{background:"transparent",border:"none",color:"inherit",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0",fontSize:"0.9rem",opacity:.7},children:[f.jsx("span",{style:{transition:"transform 0.2s",transform:o?"rotate(90deg)":"rotate(0deg)"},children:""}),i,e!==void 0&&` (${e})`]}),o&&n]})}function Pg(i){return new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})}const Mk=["January","February","March","April","May","June","July","August","September","October","November","December"];function Nk(){const{currentBudget:i,isOwner:e,hasPendingInvites:n,pendingInvites:s,needsFirstBudget:o,acceptBudgetInvite:c,createNewBudget:d,accounts:g,accountGroups:p,categories:y,categoryGroups:b,currentMonth:S,currentYear:w,currentMonthNumber:O,monthLoading:N,loadMonth:P,goToPreviousMonth:j,goToNextMonth:W,addIncome:G,updateIncome:re,deleteIncome:Ce,recomputeMonthTotals:je,payees:xe,loadPayees:R,saveAllocations:A,finalizeAllocations:I,unfinalizeAllocations:V,getOnBudgetTotal:U,getPreviousMonthIncome:F,getCategoryBalances:k}=os(),[rt,Ge]=C.useState(null),[ee,q]=C.useState(!1),[De,Me]=C.useState(null),[Xe,M]=C.useState(!1),[L,Q]=C.useState(()=>{const me=localStorage.getItem("budget_active_tab");return me==="income"||me==="allocations"?me:"income"});C.useEffect(()=>{localStorage.setItem("budget_active_tab",L)},[L]);const[Y,ce]=C.useState({}),[Oe,ze]=C.useState(!1),[$e,Ze]=C.useState(!1),[ct,Xt]=C.useState(0),[_n,Bn]=C.useState(0);C.useEffect(()=>{i&&!S&&!N&&P(w,O).catch(me=>{Ge(me instanceof Error?me.message:"Failed to load month")})},[i,S,N,w,O,P]),C.useEffect(()=>{i&&R().catch(me=>{console.warn("Failed to load payees:",me)})},[i,R]),C.useEffect(()=>{async function me(){if(!S)return;const Ne=await F();Xt(Ne)}me()},[S?.year,S?.month,F]),C.useEffect(()=>{async function me(){if(!i)return;const Ne=await k(),Ue=Object.values(Ne).reduce((vt,Ut)=>vt+Ut,0);Bn(Ue)}me()},[i,S?.allocations_finalized,k]),C.useEffect(()=>{if(!S)return;const me={};y.forEach(Ne=>{if(Ne.default_monthly_type==="percentage")return;const Ue=S.allocations?.find(vt=>vt.category_id===Ne.id);Ue?me[Ne.id]=Ue.amount.toString():Ne.default_monthly_amount!==void 0&&Ne.default_monthly_amount>0?me[Ne.id]=Ne.default_monthly_amount.toString():me[Ne.id]=""}),ce(me)},[S?.year,S?.month,y]);function it(me){const Ne=p.find(Ue=>Ue.id===me.account_group_id);return Ne?.is_active!==void 0?Ne.is_active:me.is_active!==!1}function Vt(me){const Ne=p.find(Ue=>Ue.id===me.account_group_id);return Ne?.on_budget!==void 0?Ne.on_budget:me.on_budget!==!1}const He=g.filter(me=>it(me)&&Vt(me)),ke=He.filter(me=>me.is_income_account),vn=ke.length>0?ke:He,D=He.find(me=>me.is_income_default);if(!i&&n)return f.jsxs(og,{children:[f.jsx("nav",{style:ag,children:f.jsx(hn,{to:"/",children:" Back to Home"})}),f.jsx(Lk,{invites:s,onAccept:c,onCreateNew:d})]});if(!i&&o)return f.jsxs(og,{children:[f.jsx("nav",{style:ag,children:f.jsx(hn,{to:"/",children:" Back to Home"})}),f.jsx(Vk,{onCreateNew:d})]});async function B(){Ge(null);try{await j()}catch(me){Ge(me instanceof Error?me.message:"Failed to navigate")}}async function J(){Ge(null);try{await W()}catch(me){Ge(me instanceof Error?me.message:"Failed to navigate")}}function ve(me,Ne,Ue,vt,Ut){Ge(null),q(!1),G(me,Ne,Ue,vt,Ut).catch(an=>{Ge(an instanceof Error?an.message:"Failed to add income")})}function fe(me,Ne,Ue,vt,Ut,an){Ge(null),Me(null),re(me,Ne,Ue,vt,Ut,an).catch(ls=>{Ge(ls instanceof Error?ls.message:"Failed to update income")})}async function X(){Ge(null),M(!0);try{await je()}catch(me){Ge(me instanceof Error?me.message:"Failed to recompute totals")}finally{M(!1)}}function ue(me){confirm("Are you sure you want to delete this income entry?")&&(Ge(null),Ce(me).catch(Ne=>{Ge(Ne instanceof Error?Ne.message:"Failed to delete income")}))}const be=S?.income.reduce((me,Ne)=>me+Ne.amount,0)||0;function et(me){if(me.default_monthly_type==="percentage"&&me.default_monthly_amount!==void 0)return me.default_monthly_amount/100*ct;const Ne=Y[me.id],Ue=parseFloat(Ne||"0");return isNaN(Ue)?0:Ue}const we=y.reduce((me,Ne)=>me+et(Ne),0),tt=U(),Le=S?.allocations_finalized?(S.allocations||[]).reduce((me,Ne)=>me+Ne.amount,0):0,Ae=tt-_n,ft=Ae-we+Le,Ln=[...b].sort((me,Ne)=>me.sort_order-Ne.sort_order),sn=y.reduce((me,Ne)=>{const Ue=Ne.category_group_id||"ungrouped";return me[Ue]||(me[Ue]=[]),me[Ue].push(Ne),me},{});Object.keys(sn).forEach(me=>{sn[me].sort((Ne,Ue)=>Ne.sort_order-Ue.sort_order)});function Fn(me,Ne){ce(Ue=>({...Ue,[me]:Ne}))}function Qt(){const me=[];return y.forEach(Ne=>{const Ue=et(Ne);Ue>0&&me.push({category_id:Ne.id,amount:Ue})}),me}async function Ai(){Ge(null),ze(!0);try{await A(Qt())}catch(me){Ge(me instanceof Error?me.message:"Failed to save allocations")}finally{ze(!1)}}async function Mn(){Ge(null),Ze(!0);try{await A(Qt()),await I()}catch(me){Ge(me instanceof Error?me.message:"Failed to finalize allocations")}finally{Ze(!1)}}async function si(){Ge(null),Ze(!0);try{await V()}catch(me){Ge(me instanceof Error?me.message:"Failed to unfinalize allocations")}finally{Ze(!1)}}return f.jsxs(og,{children:[f.jsxs("nav",{style:ag,children:[f.jsx(hn,{to:"/",children:" Back to Home"}),f.jsx(hn,{to:"/budget/admin",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"2.5rem",height:"2.5rem",borderRadius:"8px",background:"color-mix(in srgb, currentColor 8%, transparent)",textDecoration:"none",fontSize:"1.25rem",transition:"background 0.15s"},title:e?"Admin Settings":"Budget Settings",children:""})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[f.jsx("h1",{style:{margin:0},children:"Budget"}),i&&f.jsx("span",{style:{background:`color-mix(in srgb, ${Se.primary} 15%, transparent)`,color:Se.primaryLight,padding:"0.25rem 0.75rem",borderRadius:"6px",fontSize:"0.85rem",fontWeight:500},children:i.name})]}),i&&f.jsxs("p",{style:{opacity:.6,fontSize:"0.85rem",marginBottom:"1.5rem"},children:[i.user_ids.length," user",i.user_ids.length!==1?"s":""," ",e?" You are the owner":" Shared with you"]}),rt&&f.jsx(au,{message:rt,onDismiss:()=>Ge(null)}),f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"1rem",marginBottom:"1.5rem",padding:"1rem",background:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"12px"},children:[f.jsx("button",{onClick:B,disabled:N,style:{background:"color-mix(in srgb, currentColor 10%, transparent)",border:"none",borderRadius:"8px",padding:"0.75rem 1rem",cursor:N?"not-allowed":"pointer",fontSize:"1.25rem",opacity:N?.5:1,transition:"opacity 0.15s, background 0.15s"},title:"Previous month",children:""}),f.jsxs("div",{style:{textAlign:"center",minWidth:"180px"},children:[f.jsxs("h2",{style:{margin:0,fontSize:"1.5rem"},children:[Mk[O-1]," ",w]}),N&&f.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.8rem",opacity:.6},children:"Loading..."})]}),f.jsx("button",{onClick:J,disabled:N,style:{background:"color-mix(in srgb, currentColor 10%, transparent)",border:"none",borderRadius:"8px",padding:"0.75rem 1rem",cursor:N?"not-allowed":"pointer",fontSize:"1.25rem",opacity:N?.5:1,transition:"opacity 0.15s, background 0.15s"},title:"Next month",children:""})]}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem"},children:[f.jsx("button",{onClick:()=>Q("income"),style:{flex:1,padding:"0.75rem 1rem",borderRadius:"8px",border:L==="income"?`2px solid ${Se.primary}`:"2px solid transparent",background:L==="income"?`color-mix(in srgb, ${Se.primary} 15%, transparent)`:"color-mix(in srgb, currentColor 8%, transparent)",cursor:"pointer",fontWeight:L==="income"?600:400,fontSize:"0.95rem",color:"inherit",transition:"all 0.15s"},children:" Income"}),f.jsxs("button",{onClick:()=>Q("allocations"),style:{flex:1,padding:"0.75rem 1rem",borderRadius:"8px",border:L==="allocations"?`2px solid ${Se.primary}`:"2px solid transparent",background:L==="allocations"?`color-mix(in srgb, ${Se.primary} 15%, transparent)`:"color-mix(in srgb, currentColor 8%, transparent)",cursor:"pointer",fontWeight:L==="allocations"?600:400,fontSize:"0.95rem",color:"inherit",transition:"all 0.15s"},children:[" Allocations",S?.allocations_finalized&&f.jsx("span",{style:{marginLeft:"0.5rem",fontSize:"0.7rem",background:Se.success,color:"white",padding:"0.15rem 0.4rem",borderRadius:"4px"},children:"Applied"})]})]}),L==="income"&&f.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",paddingBottom:"0.75rem",borderBottom:"1px solid color-mix(in srgb, currentColor 15%, transparent)"},children:[f.jsxs("div",{children:[f.jsx("h3",{style:{margin:0,fontSize:"1.1rem"},children:"Income"}),f.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.25rem",fontWeight:600,color:Br(be)},children:yn(be)})]}),!ee&&f.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[f.jsx(_t,{onClick:()=>q(!0),disabled:vn.length===0,children:"+ Add Income"}),f.jsxs("button",{onClick:X,disabled:Xe||N,style:{background:"color-mix(in srgb, currentColor 10%, transparent)",border:"none",borderRadius:"8px",padding:"0.5rem 0.75rem",cursor:Xe||N?"not-allowed":"pointer",fontSize:"0.85rem",opacity:Xe||N?.5:1,transition:"opacity 0.15s, background 0.15s"},title:"Recompute totals from income transactions",children:[Xe?"":""," Recompute"]})]})]}),vn.length===0&&f.jsxs("p",{style:{opacity:.6,fontSize:"0.9rem",marginBottom:"1rem"},children:[g.length===0?"You need to create at least one account before adding income.":'No accounts are set up for income deposits. Edit an account and enable "Show in income deposit list".'," ",f.jsx(hn,{to:"/budget/accounts",style:{color:Se.primaryLight},children:"Manage accounts "})]}),ee&&f.jsx("div",{style:{marginBottom:"1rem"},children:f.jsx(rE,{accounts:vn,accountGroups:p,payees:xe,defaultAccountId:D?.id,defaultDate:`${w}-${String(O).padStart(2,"0")}-01`,onSubmit:(me,Ne,Ue,vt,Ut)=>ve(me,Ne,Ue,vt,Ut),onCancel:()=>q(!1),submitLabel:"Add Income"})}),f.jsxs("div",{style:qa,children:[S?.income.slice().sort((me,Ne)=>{const Ue=me.date||"",vt=Ne.date||"";return Ue.localeCompare(vt)}).map(me=>De===me.id?f.jsx(rE,{accounts:vn,accountGroups:p,payees:xe,initialData:me,onSubmit:(Ne,Ue,vt,Ut,an)=>fe(me.id,Ne,Ue,vt,Ut,an),onCancel:()=>Me(null),submitLabel:"Save"},me.id):f.jsx(jk,{income:me,accountName:g.find(Ne=>Ne.id===me.account_id)?.nickname||"Unknown Account",accountGroupName:p.find(Ne=>Ne.id===g.find(Ue=>Ue.id===me.account_id)?.account_group_id)?.name,onEdit:()=>Me(me.id),onDelete:()=>ue(me.id)},me.id)),(!S?.income||S.income.length===0)&&!ee&&f.jsx("p",{style:{opacity:.5,fontSize:"0.9rem",textAlign:"center",padding:"1rem"},children:"No income recorded for this month"})]})]}),L==="allocations"&&f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[f.jsxs(Qi,{style:{flex:1,minWidth:"130px"},children:[f.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.7},children:"On-Budget Total"}),f.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.3rem",fontWeight:600,color:Br(tt)},children:yn(tt)})]}),f.jsxs(Qi,{style:{flex:1,minWidth:"130px"},children:[f.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.7},children:"Available Now"}),f.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.3rem",fontWeight:600,color:Br(Ae)},children:yn(Ae)}),f.jsx("p",{style:{margin:"0.15rem 0 0 0",fontSize:"0.7rem",opacity:.5},children:"(applied allocations only)"})]}),f.jsxs(Qi,{style:{flex:1,minWidth:"130px"},children:[f.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.7},children:"This Month's Draft"}),f.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.3rem",fontWeight:600,color:Se.primary},children:yn(we)})]}),f.jsxs(Qi,{style:{flex:1,minWidth:"130px"},children:[f.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.7},children:"After Apply"}),f.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.3rem",fontWeight:600,color:Br(ft)},children:yn(ft)}),f.jsx("p",{style:{margin:"0.15rem 0 0 0",fontSize:"0.7rem",opacity:.5},children:"(if you apply draft)"})]})]}),y.some(me=>me.default_monthly_type==="percentage")&&f.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"8px",padding:"0.6rem 1rem",marginBottom:"1rem",fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("span",{style:{opacity:.6},children:""}),f.jsxs("span",{style:{opacity:.7},children:["Percentage allocations based on prev month income: ",f.jsx("strong",{style:{color:Se.primary},children:yn(ct)})]})]}),f.jsxs("div",{style:{background:S?.allocations_finalized?`color-mix(in srgb, ${Se.success} 12%, transparent)`:`color-mix(in srgb, ${Se.warning} 12%, transparent)`,border:`1px solid ${S?.allocations_finalized?Se.success:Se.warning}`,borderRadius:"8px",padding:"0.75rem 1rem",marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"0.75rem"},children:[f.jsxs("div",{children:[f.jsx("p",{style:{margin:0,fontWeight:600,color:S?.allocations_finalized?Se.success:Se.warning},children:S?.allocations_finalized?" Allocations Applied":" Allocations Not Applied"}),f.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.8rem",opacity:.8},children:S?.allocations_finalized?"These allocations are affecting category balances.":"Save and apply to update category balances."})]}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[f.jsx(_t,{onClick:Ai,disabled:Oe||N,variant:"secondary",children:Oe?" Saving...":" Save Draft"}),S?.allocations_finalized?f.jsx(_t,{onClick:si,disabled:$e||N,variant:"secondary",children:$e?"...":" Unapply"}):f.jsx(_t,{onClick:Mn,disabled:$e||N,children:$e?" Applying...":" Save & Apply"})]})]}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[y.length===0&&f.jsxs("p",{style:{opacity:.6,textAlign:"center",padding:"2rem"},children:["No categories yet."," ",f.jsx(hn,{to:"/budget/admin/categories",style:{color:Se.primaryLight},children:"Create categories "})]}),Ln.map(me=>{const Ne=sn[me.id]||[];if(Ne.length===0)return null;const Ue=Ne.reduce((vt,Ut)=>{const an=parseFloat(Y[Ut.id]||"0");return vt+(isNaN(an)?0:an)},0);return f.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"12px",padding:"1rem"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem",paddingBottom:"0.5rem",borderBottom:"1px solid color-mix(in srgb, currentColor 15%, transparent)"},children:[f.jsxs("h3",{style:{...ll,margin:0},children:[me.name,f.jsxs("span",{style:{marginLeft:"0.5rem",opacity:.5,fontWeight:400,fontSize:"0.9rem"},children:["(",Ne.length,")"]})]}),f.jsx("span",{style:{fontWeight:600,color:Se.primary},children:yn(Ue)})]}),f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Ne.map(vt=>f.jsx(nE,{category:vt,value:Y[vt.id]||"",onChange:Ut=>Fn(vt.id,Ut),previousMonthIncome:ct},vt.id))})]},me.id)}),(()=>{const me=sn.ungrouped||[];if(me.length===0)return null;const Ne=me.reduce((Ue,vt)=>{const Ut=parseFloat(Y[vt.id]||"0");return Ue+(isNaN(Ut)?0:Ut)},0);return f.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"12px",padding:"1rem"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem",paddingBottom:"0.5rem",borderBottom:"1px solid color-mix(in srgb, currentColor 15%, transparent)"},children:[f.jsxs("h3",{style:{...ll,margin:0,opacity:.7},children:["Uncategorized",f.jsxs("span",{style:{marginLeft:"0.5rem",opacity:.5,fontWeight:400,fontSize:"0.9rem"},children:["(",me.length,")"]})]}),f.jsx("span",{style:{fontWeight:600,color:Se.primary},children:yn(Ne)})]}),f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:me.map(Ue=>f.jsx(nE,{category:Ue,value:Y[Ue.id]||"",onChange:vt=>Fn(Ue.id,vt),previousMonthIncome:ct},Ue.id))})]})})()]})]})]})}function nE({category:i,value:e,onChange:n,previousMonthIncome:s}){const o=i.default_monthly_type==="percentage"&&i.default_monthly_amount!==void 0&&i.default_monthly_amount>0,c=o?i.default_monthly_amount/100*s:0,d=o?c.toFixed(2):e;let g=null;return!o&&i.default_monthly_amount!==void 0&&i.default_monthly_amount>0&&(g=yn(i.default_monthly_amount)),f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem",padding:"0.6rem 0.75rem",background:o?"color-mix(in srgb, currentColor 3%, transparent)":"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"8px",maxWidth:"100%",boxSizing:"border-box",opacity:o?.8:1},children:[f.jsxs("div",{style:{flex:"1 1 auto",minWidth:0,overflow:"hidden"},children:[f.jsx("span",{style:{fontWeight:500,display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:i.name}),o?f.jsxs("span",{style:{fontSize:"0.7rem",opacity:.6,display:"block",marginTop:"0.15rem",color:Se.primary},children:[i.default_monthly_amount,"% of prev month income"]}):g&&f.jsxs("span",{style:{fontSize:"0.7rem",opacity:.5,display:"block",marginTop:"0.15rem"},children:["Suggested: ",g]})]}),f.jsx("div",{style:{flexShrink:0,width:"110px"},children:o?f.jsx("div",{style:{width:"100%",padding:"0.5rem 0.6rem",borderRadius:"6px",border:"1px dashed color-mix(in srgb, currentColor 15%, transparent)",background:"color-mix(in srgb, currentColor 3%, transparent)",fontSize:"0.9rem",color:"inherit",boxSizing:"border-box",textAlign:"right",opacity:.9},title:"Auto-calculated from previous month's income",children:yn(c)}):f.jsx("input",{type:"text",inputMode:"decimal",value:d?`$${d}`:"",onChange:p=>{const y=p.target.value.replace(/[^\d.]/g,"");n(y)},placeholder:"$0.00",style:{width:"100%",padding:"0.5rem 0.6rem",borderRadius:"6px",border:"1px solid color-mix(in srgb, currentColor 20%, transparent)",background:"color-mix(in srgb, currentColor 5%, transparent)",fontSize:"0.9rem",color:"inherit",boxSizing:"border-box"}})})]})}function rE({accounts:i,accountGroups:e,payees:n,initialData:s,defaultAccountId:o,defaultDate:c,onSubmit:d,onCancel:g,submitLabel:p}){const y=new Date().toISOString().split("T")[0],[b,S]=C.useState(s?.amount?.toString()||""),[w,O]=C.useState(s?.account_id||o||i[0]?.id||""),[N,P]=C.useState(s?.date||c||y),[j,W]=C.useState(s?.payee||""),[G,re]=C.useState(s?.description||""),Ce={},je=[];i.forEach(R=>{R.account_group_id?(Ce[R.account_group_id]||(Ce[R.account_group_id]=[]),Ce[R.account_group_id].push(R)):je.push(R)});function xe(R){R.preventDefault();const A=parseFloat(b);isNaN(A)||A<=0||w&&N&&d(A,w,N,j.trim()||void 0,G.trim()||void 0)}return f.jsxs(Sl,{onSubmit:xe,children:[f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[f.jsx(yr,{label:"Amount",htmlFor:"income-amount",children:f.jsx(u1,{id:"income-amount",value:b,onChange:S,placeholder:"$0.00",required:!0,autoFocus:!0})}),f.jsx(yr,{label:"Date",htmlFor:"income-date",children:f.jsx(Ga,{id:"income-date",type:"date",value:N,onChange:R=>P(R.target.value),required:!0})})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[f.jsx(yr,{label:"Deposit To",htmlFor:"income-account",children:f.jsxs(Bc,{id:"income-account",value:w,onChange:R=>O(R.target.value),required:!0,children:[e.map(R=>{const A=Ce[R.id];return!A||A.length===0?null:f.jsx("optgroup",{label:R.name,children:A.map(I=>f.jsx("option",{value:I.id,children:I.nickname},I.id))},R.id)}),je.length>0&&f.jsx("optgroup",{label:"Other",children:je.map(R=>f.jsx("option",{value:R.id,children:R.nickname},R.id))})]})}),f.jsx(yr,{label:"Payee",htmlFor:"income-payee",children:f.jsx(Rk,{id:"income-payee",value:j,onChange:W,payees:n,placeholder:"e.g., Employer, Client name"})})]}),f.jsx(yr,{label:"Description (optional)",htmlFor:"income-description",children:f.jsx(Ga,{id:"income-description",value:G,onChange:R=>re(R.target.value),placeholder:"e.g., January paycheck, Project bonus"})}),f.jsxs(Ka,{children:[f.jsx(_t,{type:"submit",children:p}),f.jsx(_t,{type:"button",variant:"secondary",onClick:g,children:"Cancel"})]})]})}function jk({income:i,accountName:e,accountGroupName:n,onEdit:s,onDelete:o}){return f.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 8%, transparent)",padding:"1rem 1.25rem",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"},children:[f.jsxs("div",{style:{flex:1},children:[f.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.75rem",flexWrap:"wrap"},children:[i.date&&f.jsx("span",{style:{fontSize:"0.8rem",opacity:.6,fontFamily:"monospace"},children:new Date(i.date+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})}),f.jsxs("span",{style:{fontSize:"1.15rem",fontWeight:600,color:Se.success},children:["+",yn(i.amount)]}),i.payee&&f.jsx("span",{style:{fontSize:"0.95rem",fontWeight:500},children:i.payee}),f.jsxs("span",{style:{fontSize:"0.85rem",opacity:.7,background:"color-mix(in srgb, currentColor 10%, transparent)",padding:"0.15rem 0.5rem",borderRadius:"4px"},children:[" ",n?`${n} / `:"",e]})]}),i.description&&f.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.9rem",opacity:.7},children:i.description})]}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[f.jsx("button",{onClick:s,style:{background:"transparent",border:"none",cursor:"pointer",opacity:.6,fontSize:"0.9rem",padding:"0.25rem"},title:"Edit",children:""}),f.jsx("button",{onClick:o,style:{background:"transparent",border:"none",cursor:"pointer",opacity:.6,fontSize:"0.9rem",padding:"0.25rem"},title:"Delete",children:""})]})]})}function Vk({onCreateNew:i}){const[e,n]=C.useState(""),[s,o]=C.useState(!1),[c,d]=C.useState(null);async function g(p){p.preventDefault(),o(!0),d(null);try{await i(e.trim()||void 0)}catch(y){d(y instanceof Error?y.message:"Failed to create budget"),o(!1)}}return f.jsxs("div",{style:{maxWidth:"500px",margin:"0 auto"},children:[f.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Welcome!"}),f.jsx("p",{style:{opacity:.7,marginBottom:"2rem"},children:"You don't have any budgets yet. Create your first budget to get started."}),c&&f.jsxs("div",{style:{background:"rgba(220, 38, 38, 0.1)",border:"1px solid rgba(220, 38, 38, 0.3)",color:"#f87171",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsx("span",{children:c}),f.jsx("button",{onClick:()=>d(null),style:{background:"transparent",border:"none",color:"#f87171",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.25rem",lineHeight:1},children:""})]}),f.jsxs("div",{style:{background:"color-mix(in srgb, #646cff 8%, transparent)",border:"1px solid color-mix(in srgb, #646cff 25%, transparent)",padding:"2rem",borderRadius:"12px"},children:[f.jsxs("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("span",{children:""})," Create Your Budget"]}),f.jsxs("form",{onSubmit:g,children:[f.jsxs("div",{style:{marginBottom:"1.5rem"},children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",opacity:.8},children:"Budget Name"}),f.jsx("input",{type:"text",value:e,onChange:p=>n(p.target.value),placeholder:"My Budget",autoFocus:!0,style:{width:"100%",padding:"0.75rem 1rem",borderRadius:"8px",border:"1px solid color-mix(in srgb, currentColor 25%, transparent)",background:"color-mix(in srgb, currentColor 5%, transparent)",fontSize:"1rem",color:"inherit",boxSizing:"border-box"}}),f.jsx("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.8rem",opacity:.5},children:"You can always rename this later"})]}),f.jsx("button",{type:"submit",disabled:s,style:{width:"100%",background:Se.primary,color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:s?"not-allowed":"pointer",fontWeight:600,opacity:s?.7:1,fontSize:"1rem"},children:s?"Creating...":"Create Budget"})]})]}),f.jsx("p",{style:{marginTop:"1.5rem",textAlign:"center",fontSize:"0.85rem",opacity:.6},children:"If someone has invited you to their budget, you can accept the invitation from the budget settings page after creating your account."})]})}function Lk({invites:i,onAccept:e,onCreateNew:n}){const[s,o]=C.useState(null),[c,d]=C.useState(!1),[g,p]=C.useState(""),[y,b]=C.useState(!1),[S,w]=C.useState(null);async function O(P){o(P),w(null);try{await e(P)}catch(j){w(j instanceof Error?j.message:"Failed to accept invitation"),o(null)}}async function N(P){P.preventDefault(),b(!0),w(null);try{await n(g.trim()||void 0)}catch(j){w(j instanceof Error?j.message:"Failed to create new budget"),b(!1)}}return f.jsxs("div",{children:[f.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Welcome!"}),f.jsxs("p",{style:{opacity:.7,marginBottom:"2rem"},children:["You've been invited to join ",i.length===1?"a budget":"some budgets",". Choose one to get started!"]}),S&&f.jsxs("div",{style:{background:"rgba(220, 38, 38, 0.1)",border:"1px solid rgba(220, 38, 38, 0.3)",color:"#f87171",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsx("span",{children:S}),f.jsx("button",{onClick:()=>w(null),style:{background:"transparent",border:"none",color:"#f87171",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.25rem",lineHeight:1},children:""})]}),f.jsxs("div",{style:{background:"color-mix(in srgb, #f59e0b 8%, transparent)",border:"1px solid color-mix(in srgb, #f59e0b 25%, transparent)",padding:"1.5rem",borderRadius:"12px",marginBottom:"1.5rem"},children:[f.jsxs("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("span",{children:""})," Budget Invitations"]}),f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:i.map(P=>f.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 8%, transparent)",padding:"1rem 1.25rem",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[f.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[f.jsx("p",{style:{margin:"0 0 0.25rem 0",fontWeight:600,fontSize:"1.05rem"},children:P.budgetName}),P.ownerEmail&&f.jsxs("p",{style:{margin:0,fontSize:"0.85rem",opacity:.6},children:["From: ",P.ownerEmail]})]}),f.jsx("button",{onClick:()=>O(P.budgetId),disabled:s!==null||y,style:{background:"#22c55e",color:"white",border:"none",padding:"0.6rem 1.5rem",borderRadius:"8px",cursor:s!==null||y?"not-allowed":"pointer",fontWeight:500,opacity:s!==null||y?.7:1,fontSize:"0.9rem"},children:s===P.budgetId?"Joining...":"Accept & Join"})]},P.budgetId))})]}),f.jsx("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",border:"1px dashed color-mix(in srgb, currentColor 20%, transparent)",padding:"1.5rem",borderRadius:"12px"},children:c?f.jsxs("form",{onSubmit:N,children:[f.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem"},children:"Create Your Budget"}),f.jsxs("div",{style:{marginBottom:"1rem"},children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",opacity:.8},children:"Budget Name"}),f.jsx("input",{type:"text",value:g,onChange:P=>p(P.target.value),placeholder:"My Budget",autoFocus:!0,style:{width:"100%",padding:"0.6rem 0.8rem",borderRadius:"6px",border:"1px solid color-mix(in srgb, currentColor 25%, transparent)",background:"color-mix(in srgb, currentColor 5%, transparent)",fontSize:"0.95rem",color:"inherit",boxSizing:"border-box"}})]}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[f.jsx("button",{type:"submit",disabled:y||s!==null,style:{background:Se.primary,color:"white",border:"none",padding:"0.6rem 1.25rem",borderRadius:"6px",cursor:y||s!==null?"not-allowed":"pointer",fontWeight:500,opacity:y||s!==null?.7:1,fontSize:"0.9rem"},children:y?"Creating...":"Create Budget"}),f.jsx("button",{type:"button",onClick:()=>{d(!1),p("")},disabled:y,style:{background:"transparent",color:"inherit",border:"1px solid color-mix(in srgb, currentColor 30%, transparent)",padding:"0.6rem 1.25rem",borderRadius:"6px",cursor:y?"not-allowed":"pointer",fontWeight:500,opacity:y?.7:.8,fontSize:"0.9rem"},children:"Cancel"})]})]}):f.jsxs("div",{style:{textAlign:"center"},children:[f.jsx("p",{style:{margin:"0 0 1rem 0",opacity:.7},children:"Or start fresh with your own budget"}),f.jsx("button",{onClick:()=>d(!0),disabled:s!==null,style:{background:Se.primary,color:"white",border:"none",padding:"0.6rem 1.5rem",borderRadius:"8px",cursor:s!==null?"not-allowed":"pointer",fontWeight:500,opacity:s!==null?.7:1,fontSize:"0.9rem"},children:"Create New Budget"})]})})]})}function Pk(i,e){return!e||e==="any"||i===0?!1:e==="positive"&&i<0||e==="negative"&&i>0}function Uk(i,e){return!e||e==="any"||i===0?null:e==="positive"&&i<0?"Unexpected negative balance":e==="negative"&&i>0?"Unexpected positive balance (credit owed to you?)":null}function zk(){const{currentBudget:i,accounts:e,setAccounts:n,accountGroups:s,setAccountGroups:o,checkBalanceMismatch:c,reconcileBalances:d,balanceMismatch:g}=os(),[p,y]=C.useState(null),[b,S]=C.useState(!1),[w,O]=C.useState(!1),N=Fp();C.useEffect(()=>{i&&e.length>0&&(O(!0),c().finally(()=>O(!1)))},[i?.id,e.length]);const[P,j]=C.useState(null),[W,G]=C.useState(null),[re,Ce]=C.useState(null),[je,xe]=C.useState(!1),[R,A]=C.useState(null),[I,V]=C.useState(null),[U,F]=C.useState(null),[k,rt]=C.useState(null),Ge=Ya(oa);async function ee(D){if(i)try{const B=qe(Ge,"budgets",i.id),J=await ot(B);if(J.exists()){const ve=J.data(),fe=D.map(X=>{const ue={id:X.id,nickname:X.nickname,balance:X.balance,account_group_id:X.account_group_id??null,sort_order:X.sort_order};return X.is_income_account!==void 0&&(ue.is_income_account=X.is_income_account),X.is_income_default!==void 0&&(ue.is_income_default=X.is_income_default),X.is_outgo_account!==void 0&&(ue.is_outgo_account=X.is_outgo_account),X.is_outgo_default!==void 0&&(ue.is_outgo_default=X.is_outgo_default),X.on_budget!==void 0&&(ue.on_budget=X.on_budget),X.is_active!==void 0&&(ue.is_active=X.is_active),ue});await dt(B,{...ve,accounts:fe})}}catch(B){throw new Error(B instanceof Error?B.message:"Failed to save accounts")}}async function q(D){if(i)try{const B=qe(Ge,"budgets",i.id),J=await ot(B);if(J.exists()){const ve=J.data(),fe=D.map(X=>{const ue={id:X.id,name:X.name,sort_order:X.sort_order,expected_balance:X.expected_balance||"positive"};return X.on_budget!==void 0&&(ue.on_budget=X.on_budget),X.is_active!==void 0&&(ue.is_active=X.is_active),ue});await dt(B,{...ve,account_groups:fe})}}catch(B){throw new Error(B instanceof Error?B.message:"Failed to save account groups")}}async function De(D,B){if(i)try{const J=qe(Ge,"budgets",i.id),ve=await ot(J);if(ve.exists()){const fe=ve.data();await dt(J,{...fe,accounts:D,account_groups:B})}}catch(J){throw new Error(J instanceof Error?J.message:"Failed to save changes")}}function Me(D,B){if(!i)return;const J=e.filter(ue=>B==="ungrouped"?!ue.account_group_id:ue.account_group_id===B),ve=J.length>0?Math.max(...J.map(ue=>ue.sort_order)):-1,fe={id:`account_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,nickname:D.nickname,balance:0,account_group_id:B==="ungrouped"?null:B,sort_order:ve+1,is_income_account:D.is_income_account,is_income_default:D.is_income_default,is_outgo_account:D.is_outgo_account,is_outgo_default:D.is_outgo_default,on_budget:D.on_budget!==!1,is_active:D.is_active!==!1};let X=[...e];D.is_income_default&&(X=X.map(ue=>({...ue,is_income_default:!1}))),D.is_outgo_default&&(X=X.map(ue=>({...ue,is_outgo_default:!1}))),X=[...X,fe].sort((ue,be)=>ue.sort_order-be.sort_order),n(X),G(null),ee(X).catch(ue=>{console.error("[Accounts] Error creating account:",ue),y(ue instanceof Error?ue.message:"Failed to create account. Changes may not persist.")})}function Xe(D,B){if(!i)return;const J=e.find(be=>be.id===D);if(!J)return;const ve=J.account_group_id||"ungrouped",fe=B.account_group_id;let X=J.sort_order;if(ve!==(fe||"ungrouped")){const be=e.filter(et=>(et.account_group_id||"ungrouped")===(fe||"ungrouped")&&et.id!==D);X=be.length>0?Math.max(...be.map(et=>et.sort_order))+1:0}let ue=e;B.is_income_default&&!J.is_income_default&&(ue=ue.map(be=>be.id!==D?{...be,is_income_default:!1}:be)),B.is_outgo_default&&!J.is_outgo_default&&(ue=ue.map(be=>be.id!==D?{...be,is_outgo_default:!1}:be)),ue=ue.map(be=>be.id===D?{...be,nickname:B.nickname,account_group_id:fe,sort_order:X,is_income_account:B.is_income_account,is_income_default:B.is_income_default,is_outgo_account:B.is_outgo_account,is_outgo_default:B.is_outgo_default,on_budget:B.on_budget!==!1,is_active:B.is_active!==!1}:be),n(ue),j(null),ee(ue).catch(be=>{console.error("[Accounts] Error saving account:",be),y(be instanceof Error?be.message:"Failed to save account. Changes may not persist.")})}function M(D){if(!confirm("Are you sure you want to delete this account?")||!i)return;const B=e.filter(J=>J.id!==D);n(B),ee(B).catch(J=>{console.error("[Accounts] Error deleting account:",J),y(J instanceof Error?J.message:"Failed to delete account. Changes may not persist.")})}function L(D){if(!i)return;const B=s.length>0?Math.max(...s.map(fe=>fe.sort_order)):-1,J={id:`account_group_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:D.name,sort_order:B+1,expected_balance:D.expected_balance,on_budget:D.on_budget,is_active:D.is_active},ve=[...s,J];o(ve),xe(!1),q(ve).catch(fe=>{console.error("[Accounts] Error creating group:",fe),y(fe instanceof Error?fe.message:"Failed to create account type. Changes may not persist.")})}function Q(D,B){if(!i)return;const J=s.map(ve=>ve.id===D?{...ve,name:B.name,expected_balance:B.expected_balance,on_budget:B.on_budget,is_active:B.is_active}:ve);o(J),Ce(null),q(J).catch(ve=>{console.error("[Accounts] Error updating group:",ve),y(ve instanceof Error?ve.message:"Failed to update account type. Changes may not persist.")})}function Y(D){if(!confirm("Are you sure you want to delete this account type? Accounts in this type will move to Ungrouped.")||!i)return;const B=e.map(ve=>ve.account_group_id===D?{...ve,account_group_id:null}:ve),J=s.filter(ve=>ve.id!==D);n(B),o(J),De(B,J).catch(ve=>{console.error("[Accounts] Error deleting group:",ve),y(ve instanceof Error?ve.message:"Failed to delete account type. Changes may not persist.")})}function ce(D,B){A("account"),V(B),D.dataTransfer.effectAllowed="move"}function Oe(D,B,J){D.preventDefault(),R==="account"&&(B!==I&&F(B),rt(J))}function ze(D,B){D.preventDefault(),R==="account"?(rt(B),F(null)):R==="group"&&B!==I&&F(B)}function $e(){F(null)}function Ze(){rt(null)}function ct(){A(null),V(null),F(null),rt(null)}async function Xt(D,B,J){if(D.preventDefault(),D.stopPropagation(),!I||R!=="account"){ct();return}const ve=e.find(we=>we.id===I);if(!ve)return;const fe=J==="ungrouped"?null:J,X=e.filter(we=>(we.account_group_id||"ungrouped")===J);let ue=e.filter(we=>we.id!==I),be;if(B==="__group_end__"||X.length===0||!X.find(we=>we.id===B))be=(X.length>0?Math.max(...X.filter(tt=>tt.id!==I).map(tt=>tt.sort_order)):-1)+1;else{const we=X.find(tt=>tt.id===B);we?(be=we.sort_order,ue=ue.map(tt=>(tt.account_group_id||"ungrouped")===J&&tt.sort_order>=be?{...tt,sort_order:tt.sort_order+1}:tt)):be=0}const et={...ve,account_group_id:fe,sort_order:be};if(ue.push(et),ue.sort((we,tt)=>we.sort_order-tt.sort_order),n(ue),ct(),!!i)try{await ee(ue)}catch(we){y(we instanceof Error?we.message:"Failed to save changes")}}async function _n(D,B){D.preventDefault(),R==="account"?await Xt(D,"__group_end__",B):R==="group"&&await it(D,B)}function Bn(D,B){D.stopPropagation(),A("group"),V(B),D.dataTransfer.effectAllowed="move"}async function it(D,B){if(D.preventDefault(),!I||R!=="group"||I===B){ct();return}const J=s.findIndex(ue=>ue.id===I),ve=[...s],[fe]=ve.splice(J,1);if(B==="__end__")ve.push(fe);else{const ue=ve.findIndex(be=>be.id===B);ve.splice(ue,0,fe)}const X=ve.map((ue,be)=>({...ue,sort_order:be}));if(o(X),ct(),!!i)try{await q(X)}catch(ue){y(ue instanceof Error?ue.message:"Failed to save new order")}}async function Vt(D,B){const J=e.find(we=>we.id===D);if(!J)return;const ve=J.account_group_id||"ungrouped",fe=e.filter(we=>(we.account_group_id||"ungrouped")===ve).sort((we,tt)=>we.sort_order-tt.sort_order),X=fe.findIndex(we=>we.id===D),ue=B==="up"?X-1:X+1;if(ue<0||ue>=fe.length)return;const be=fe[ue],et=e.map(we=>we.id===D?{...we,sort_order:be.sort_order}:we.id===be.id?{...we,sort_order:J.sort_order}:we);if(n(et),!!i)try{await ee(et)}catch(we){n(e),y(we instanceof Error?we.message:"Failed to move account")}}async function He(D,B){const J=[...s].sort((be,et)=>be.sort_order-et.sort_order),ve=J.findIndex(be=>be.id===D),fe=B==="up"?ve-1:ve+1;if(fe<0||fe>=J.length)return;const[X]=J.splice(ve,1);J.splice(fe,0,X);const ue=J.map((be,et)=>({...be,sort_order:et}));if(o(ue),!!i)try{await q(ue)}catch(be){o(s),y(be instanceof Error?be.message:"Failed to move account type")}}const ke=e.reduce((D,B)=>{const J=B.account_group_id||"ungrouped";return D[J]||(D[J]=[]),D[J].push(B),D},{}),vn=[...s].sort((D,B)=>D.sort_order-B.sort_order);return i?f.jsxs("div",{children:[f.jsx("h2",{style:{marginTop:0},children:"Accounts"}),f.jsxs("p",{style:qh,children:["Organize your financial accounts by type.",f.jsx("br",{}),f.jsx("span",{style:{fontSize:"0.9rem"},children:N?"Use  buttons to reorder items, or drag to move between types.":"Drag accounts between types, or use  buttons to reorder."})]}),p&&f.jsx(au,{message:p,onDismiss:()=>y(null)}),g&&Object.keys(g).length>0&&f.jsxs("div",{style:{background:"color-mix(in srgb, #f59e0b 15%, transparent)",border:"1px solid #f59e0b",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",display:"flex",flexDirection:N?"column":"row",alignItems:N?"flex-start":"center",gap:"1rem"},children:[f.jsxs("div",{style:{flex:1},children:[f.jsx("p",{style:{margin:0,fontWeight:600,color:"#f59e0b"},children:" Balance Mismatch Detected"}),f.jsxs("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.85rem",opacity:.9},children:[Object.keys(g).length," account",Object.keys(g).length!==1?"s have":" has"," balances that don't match the calculated totals from income history."]}),f.jsxs("ul",{style:{margin:"0.5rem 0 0 0",paddingLeft:"1.25rem",fontSize:"0.8rem",opacity:.8},children:[Object.entries(g).slice(0,3).map(([D,{stored:B,calculated:J}])=>{const ve=e.find(fe=>fe.id===D);return f.jsxs("li",{children:[ve?.nickname||"Unknown",": stored $",B.toFixed(2)," vs calculated $",J.toFixed(2)]},D)}),Object.keys(g).length>3&&f.jsxs("li",{children:["...and ",Object.keys(g).length-3," more"]})]})]}),f.jsx("button",{onClick:async()=>{S(!0);try{await d()}catch(D){y(D instanceof Error?D.message:"Failed to reconcile")}finally{S(!1)}},disabled:b,style:{background:"#f59e0b",color:"#000",border:"none",borderRadius:"6px",padding:"0.5rem 1rem",fontWeight:600,cursor:b?"not-allowed":"pointer",opacity:b?.7:1,whiteSpace:"nowrap"},children:b?" Reconciling...":" Reconcile Now"})]}),!g&&f.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"1rem",gap:"0.5rem"},children:[f.jsx("button",{onClick:async()=>{O(!0);try{await c()}finally{O(!1)}},disabled:w,style:{background:"color-mix(in srgb, currentColor 10%, transparent)",border:"none",borderRadius:"6px",padding:"0.5rem 0.75rem",fontSize:"0.85rem",cursor:w?"not-allowed":"pointer",opacity:w?.6:1},title:"Check if account balances match income history",children:w?" Checking...":" Check Balances"}),f.jsx("button",{onClick:async()=>{S(!0);try{await d()}catch(D){y(D instanceof Error?D.message:"Failed to reconcile")}finally{S(!1)}},disabled:b,style:{background:"color-mix(in srgb, currentColor 10%, transparent)",border:"none",borderRadius:"6px",padding:"0.5rem 0.75rem",fontSize:"0.85rem",cursor:b?"not-allowed":"pointer",opacity:b?.6:1},title:"Recalculate all account balances from income history",children:b?" Reconciling...":" Reconcile All"})]}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",marginBottom:"1.5rem"},children:[e.length===0&&s.length===0&&f.jsx("p",{style:{opacity:.7},children:"No accounts yet. Create an account type first, then add accounts!"}),vn.map((D,B)=>{const J=(ke[D.id]||[]).sort((Ae,ft)=>Ae.sort_order-ft.sort_order),ve=R==="group"&&I===D.id,fe=R==="group"&&U===D.id,X=R==="account"&&k===D.id,ue=I&&R==="account"?e.find(Ae=>Ae.id===I):null,be=ue&&(ue.account_group_id||"ungrouped")!==D.id,et=R==="group"&&fe&&I!==D.id,we=B>0,tt=B<vn.length-1,Le=J.reduce((Ae,ft)=>Ae+ft.balance,0);return f.jsxs("div",{children:[R==="group"&&!ve&&f.jsxs("div",{onDragOver:Ae=>{Ae.preventDefault(),F(D.id)},onDragLeave:$e,onDrop:Ae=>it(Ae,D.id),style:{position:"relative",height:et?"2.5rem":"0.5rem",marginBottom:et?"-0.5rem":"-0.25rem",transition:"height 0.15s"},children:[f.jsx("div",{style:{position:"absolute",top:"50%",left:0,right:0,height:"3px",background:Se.primary,borderRadius:"2px",opacity:et?1:0,transition:"opacity 0.15s",boxShadow:et?"0 0 8px rgba(100, 108, 255, 0.6)":"none"}}),et&&f.jsx("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"0.75rem",opacity:.7,background:"var(--background, #1a1a1a)",padding:"0 0.5rem",whiteSpace:"nowrap"},children:"Drop here"})]}),f.jsx("div",{draggable:re!==D.id,onDragStart:Ae=>Bn(Ae,D.id),onDragOver:Ae=>{ze(Ae,D.id)},onDragLeave:Ze,onDragEnd:ct,onDrop:Ae=>_n(Ae,D.id),style:{background:ve?"color-mix(in srgb, currentColor 3%, transparent)":X&&be?`color-mix(in srgb, ${Se.primary} 10%, transparent)`:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"12px",padding:"1rem",opacity:ve?.5:1,border:X&&be?`2px dashed ${Se.primary}`:"2px solid transparent",cursor:re===D.id?"default":"grab",transition:"all 0.15s"},children:re===D.id?f.jsx(iE,{initialData:{name:D.name,expected_balance:D.expected_balance||"positive",on_budget:D.on_budget,is_active:D.is_active},onSubmit:Ae=>Q(D.id,Ae),onCancel:()=>Ce(null),submitLabel:"Save"}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:N?"0.5rem":"0.75rem",paddingBottom:"0.5rem",borderBottom:"1px solid color-mix(in srgb, currentColor 15%, transparent)",gap:"0.5rem",flexWrap:N?"wrap":"nowrap"},children:[f.jsxs("h3",{style:{...ll,margin:0,display:"flex",alignItems:"center",gap:"0.5rem",flex:1,minWidth:0,flexWrap:"wrap"},children:[!N&&f.jsx("span",{style:{cursor:"grab",opacity:.4},children:""}),f.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:D.name}),f.jsxs("span",{style:{opacity:.5,fontWeight:400,fontSize:"0.9rem",flexShrink:0},children:["(",J.length,")"]}),f.jsx("span",{style:{marginLeft:"0.5rem",fontWeight:600,fontSize:"0.9rem",color:Br(Le),flexShrink:0},children:yn(Le)}),f.jsx(Bk,{group:D})]}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0,alignItems:"center"},children:[!N&&f.jsx(_t,{variant:"small",onClick:()=>G(D.id),disabled:W!==null,children:"+ Account"}),f.jsx("button",{onClick:()=>Ce(D.id),style:{background:"transparent",border:"none",cursor:"pointer",opacity:.6,fontSize:"0.9rem",padding:"0.25rem"},title:"Edit account type",children:""}),f.jsx("button",{onClick:()=>Y(D.id),style:{background:"transparent",border:"none",cursor:"pointer",opacity:.6,fontSize:"0.9rem",padding:"0.25rem"},title:"Delete account type",children:""}),f.jsxs("div",{style:zp,children:[f.jsx("button",{onClick:()=>He(D.id,"up"),disabled:!we,style:{...ol,opacity:we?.6:.2,cursor:we?"pointer":"default"},title:"Move account type up","aria-label":"Move account type up",children:""}),f.jsx("button",{onClick:()=>He(D.id,"down"),disabled:!tt,style:{...ol,opacity:tt?.6:.2,cursor:tt?"pointer":"default"},title:"Move account type down","aria-label":"Move account type down",children:""})]})]})]}),N&&f.jsx("div",{style:{marginBottom:"0.5rem"},children:f.jsx(_t,{variant:"small",onClick:()=>G(D.id),disabled:W!==null,children:"+ Account"})}),f.jsxs("div",{style:qa,children:[J.map(Ae=>P===Ae.id?f.jsx(jd,{initialData:{nickname:Ae.nickname,account_group_id:Ae.account_group_id,is_income_account:Ae.is_income_account,is_income_default:Ae.is_income_default,is_outgo_account:Ae.is_outgo_account,is_outgo_default:Ae.is_outgo_default,on_budget:Ae.on_budget,is_active:Ae.is_active},onSubmit:ft=>Xe(Ae.id,ft),onCancel:()=>j(null),submitLabel:"Save",accountGroups:s,showGroupSelector:!0,showIncomeSettings:!0,currentGroupId:Ae.account_group_id,hasExistingIncomeDefault:e.some(ft=>ft.is_income_default&&ft.id!==Ae.id),hasExistingOutgoDefault:e.some(ft=>ft.is_outgo_default&&ft.id!==Ae.id)},Ae.id):f.jsx(yh,{isDragging:R==="account"&&I===Ae.id,isDragOver:U===Ae.id,onDragStart:ft=>{ft.stopPropagation(),ce(ft,Ae.id)},onDragOver:ft=>Oe(ft,Ae.id,D.id),onDragLeave:$e,onDragEnd:ct,onDrop:ft=>Xt(ft,Ae.id,D.id),onEdit:()=>j(Ae.id),onDelete:()=>M(Ae.id),onMoveUp:()=>Vt(Ae.id,"up"),onMoveDown:()=>Vt(Ae.id,"down"),canMoveUp:J.findIndex(ft=>ft.id===Ae.id)>0,canMoveDown:J.findIndex(ft=>ft.id===Ae.id)<J.length-1,children:f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[f.jsx("span",{style:ph,children:Ae.nickname}),f.jsx(aE,{account:Ae,accountGroups:s})]}),f.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.1rem",fontWeight:600,color:Br(Ae.balance)},children:[yn(Ae.balance),Pk(Ae.balance,D.expected_balance)&&f.jsx("span",{title:Uk(Ae.balance,D.expected_balance)||"",style:{marginLeft:"0.5rem",fontSize:"0.85rem"},children:""})]})]})},Ae.id)),J.length===0&&!W&&f.jsx("p",{style:{opacity:.5,fontSize:"0.9rem",margin:"0.5rem 0"},children:"No accounts in this type"}),R==="account"&&J.length>0&&f.jsx(oE,{groupId:D.id,isActive:U===`__end__${D.id}`,onDragOver:Ae=>{Ae.preventDefault(),Ae.stopPropagation(),F(`__end__${D.id}`),rt(D.id)},onDragLeave:Ae=>{Ae.stopPropagation(),F(null)},onDrop:Ae=>{Ae.stopPropagation(),Xt(Ae,"__group_end__",D.id)}}),W===D.id&&f.jsx(jd,{initialData:{nickname:"",account_group_id:D.id},onSubmit:Ae=>Me(Ae,D.id),onCancel:()=>G(null),submitLabel:"Create",accountGroups:s,showIncomeSettings:!0,currentGroupId:D.id})]}),W!==D.id&&f.jsx("div",{style:{marginTop:"0.75rem",paddingTop:"0.5rem",borderTop:"1px solid color-mix(in srgb, currentColor 10%, transparent)"},children:f.jsx(_t,{variant:"small",onClick:()=>G(D.id),disabled:W!==null,children:"+ Add Account"})})]})})]},D.id)}),R==="group"&&vn.length>0&&f.jsx(Hp,{isActive:U==="__end__",onDragOver:D=>{D.preventDefault(),F("__end__")},onDragLeave:$e,onDrop:D=>it(D,"__end__"),label:"Move account type to end"}),(()=>{const D=(ke.ungrouped||[]).sort((X,ue)=>X.sort_order-ue.sort_order),B=R==="account"&&k==="ungrouped",J=I&&R==="account"?e.find(X=>X.id===I):null,ve=J&&J.account_group_id!==null;if(D.length===0&&!W&&s.length>0&&R!=="account")return null;const fe=D.reduce((X,ue)=>X+ue.balance,0);return f.jsxs("div",{onDragOver:X=>ze(X,"ungrouped"),onDragLeave:Ze,onDrop:X=>_n(X,"ungrouped"),style:{background:B&&ve?`color-mix(in srgb, ${Se.primary} 10%, transparent)`:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"12px",padding:"1rem",border:B&&ve?`2px dashed ${Se.primary}`:"2px solid transparent",transition:"all 0.15s"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem",paddingBottom:"0.5rem",borderBottom:"1px solid color-mix(in srgb, currentColor 15%, transparent)"},children:[f.jsxs("h3",{style:{...ll,margin:0,opacity:.7,display:"flex",alignItems:"center",gap:"0.5rem"},children:["Ungrouped",f.jsxs("span",{style:{marginLeft:"0.5rem",opacity:.5,fontWeight:400,fontSize:"0.9rem"},children:["(",D.length,")"]}),D.length>0&&f.jsx("span",{style:{marginLeft:"0.5rem",fontWeight:600,fontSize:"0.9rem",color:Br(fe)},children:yn(fe)})]}),f.jsx(_t,{variant:"small",onClick:()=>G("ungrouped"),disabled:W!==null,children:"+ Account"})]}),f.jsxs("div",{style:qa,children:[D.map(X=>P===X.id?f.jsx(jd,{initialData:{nickname:X.nickname,account_group_id:X.account_group_id,is_income_account:X.is_income_account,is_income_default:X.is_income_default,is_outgo_account:X.is_outgo_account,is_outgo_default:X.is_outgo_default,on_budget:X.on_budget,is_active:X.is_active},onSubmit:ue=>Xe(X.id,ue),onCancel:()=>j(null),submitLabel:"Save",accountGroups:s,showGroupSelector:!0,showIncomeSettings:!0,currentGroupId:null,hasExistingIncomeDefault:e.some(ue=>ue.is_income_default&&ue.id!==X.id),hasExistingOutgoDefault:e.some(ue=>ue.is_outgo_default&&ue.id!==X.id)},X.id):f.jsx(yh,{isDragging:R==="account"&&I===X.id,isDragOver:U===X.id,onDragStart:ue=>ce(ue,X.id),onDragOver:ue=>Oe(ue,X.id,"ungrouped"),onDragLeave:$e,onDragEnd:ct,onDrop:ue=>Xt(ue,X.id,"ungrouped"),onEdit:()=>j(X.id),onDelete:()=>M(X.id),onMoveUp:()=>Vt(X.id,"up"),onMoveDown:()=>Vt(X.id,"down"),canMoveUp:D.findIndex(ue=>ue.id===X.id)>0,canMoveDown:D.findIndex(ue=>ue.id===X.id)<D.length-1,children:f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[f.jsx("span",{style:ph,children:X.nickname}),f.jsx(aE,{account:X,accountGroups:s})]}),f.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.1rem",fontWeight:600,color:Br(X.balance)},children:yn(X.balance)})]})},X.id)),D.length===0&&R==="account"&&f.jsx("p",{style:{opacity:.5,fontSize:"0.9rem",margin:"0.5rem 0",textAlign:"center"},children:"Drop here to ungroup"}),R==="account"&&D.length>0&&f.jsx(oE,{groupId:"ungrouped",isActive:U==="__end__ungrouped",onDragOver:X=>{X.preventDefault(),X.stopPropagation(),F("__end__ungrouped"),rt("ungrouped")},onDragLeave:X=>{X.stopPropagation(),F(null)},onDrop:X=>{X.stopPropagation(),Xt(X,"__group_end__","ungrouped")}}),W==="ungrouped"&&f.jsx(jd,{initialData:{nickname:"",account_group_id:null},onSubmit:X=>Me(X,"ungrouped"),onCancel:()=>G(null),submitLabel:"Create",accountGroups:s,showIncomeSettings:!0,currentGroupId:null})]}),W!=="ungrouped"&&f.jsx("div",{style:{marginTop:"0.75rem",paddingTop:"0.5rem",borderTop:"1px solid color-mix(in srgb, currentColor 10%, transparent)"},children:f.jsx(_t,{variant:"small",onClick:()=>G("ungrouped"),disabled:W!==null,children:"+ Add Account"})})]})})()]}),je?f.jsx(iE,{onSubmit:L,onCancel:()=>xe(!1),submitLabel:"Create Account Type"}):f.jsx(_t,{variant:"primary-large",onClick:()=>xe(!0),children:"+ Add Account Type"})]}):f.jsx("p",{children:"No budget found. Please log in."})}function jd({initialData:i,onSubmit:e,onCancel:n,submitLabel:s,accountGroups:o,showGroupSelector:c=!1,showIncomeSettings:d=!1,hasExistingIncomeDefault:g=!1,hasExistingOutgoDefault:p=!1,currentGroupId:y}){const[b,S]=C.useState(i||{nickname:"",account_group_id:null,is_income_account:!1,is_income_default:!1,is_outgo_account:!1,is_outgo_default:!1,on_budget:!0,is_active:!0}),w=b.account_group_id||y,O=w?o.find(re=>re.id===w):null,N=O?.is_active!==void 0,P=O?.on_budget!==void 0;function j(re){re.preventDefault(),b.nickname.trim()&&e(b)}function W(re){S({...b,is_income_account:re,is_income_default:re?b.is_income_default:!1})}function G(re){S({...b,is_outgo_account:re,is_outgo_default:re?b.is_outgo_default:!1})}return f.jsxs(Sl,{onSubmit:j,children:[f.jsx(yr,{label:"Account Nickname",htmlFor:"account-nickname",children:f.jsx(Ga,{id:"account-nickname",type:"text",value:b.nickname,onChange:re=>S({...b,nickname:re.target.value}),placeholder:"e.g., Main Checking, Savings",required:!0,autoFocus:!0})}),c&&f.jsx(yr,{label:"Account Type",htmlFor:"account-group",children:f.jsxs(Bc,{id:"account-group",value:b.account_group_id||"ungrouped",onChange:re=>S({...b,account_group_id:re.target.value==="ungrouped"?null:re.target.value}),children:[f.jsx("option",{value:"ungrouped",children:"Ungrouped"}),o.map(re=>f.jsx("option",{value:re.id,children:re.name},re.id))]})}),d&&f.jsxs("div",{style:{padding:"0.75rem",background:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[f.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.7},children:"Account Status"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[f.jsx(Uo,{id:"is-active",checked:N?O.is_active:b.is_active!==!1,onChange:re=>S({...b,is_active:re.target.checked}),disabled:N,children:f.jsx("span",{style:{opacity:N?.5:1},children:"Active account"})}),N&&f.jsxs("p",{style:{margin:0,fontSize:"0.7rem",opacity:.6,marginLeft:"2rem",color:Se.warning},children:['Set by account type "',O.name,'"']})]}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[f.jsx(Uo,{id:"on-budget",checked:P?O.on_budget:b.on_budget!==!1,onChange:re=>S({...b,on_budget:re.target.checked}),disabled:P,children:f.jsx("span",{style:{opacity:P?.5:1},children:"On budget (affects budget totals)"})}),P&&f.jsxs("p",{style:{margin:0,fontSize:"0.7rem",opacity:.6,marginLeft:"2rem",color:Se.warning},children:['Set by account type "',O.name,'"']})]})]}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[f.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.7},children:"Income Settings"}),f.jsx(Uo,{id:"is-income-account",checked:b.is_income_account||!1,onChange:re=>W(re.target.checked),children:"Show in income deposit list"}),b.is_income_account&&f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem",marginLeft:"2rem"},children:[f.jsx(Uo,{id:"is-income-default",checked:b.is_income_default||!1,onChange:re=>S({...b,is_income_default:re.target.checked}),disabled:g&&!i?.is_income_default,children:"Default account for new income"}),g&&!i?.is_income_default&&f.jsx("p",{style:{margin:0,fontSize:"0.75rem",opacity:.5},children:"Another account is already set as default"})]})]}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[f.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.7},children:"Expense Settings"}),f.jsx(Uo,{id:"is-outgo-account",checked:b.is_outgo_account||!1,onChange:re=>G(re.target.checked),children:"Show in expense account list"}),b.is_outgo_account&&f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem",marginLeft:"2rem"},children:[f.jsx(Uo,{id:"is-outgo-default",checked:b.is_outgo_default||!1,onChange:re=>S({...b,is_outgo_default:re.target.checked}),disabled:p&&!i?.is_outgo_default,children:"Default account for new expenses"}),p&&!i?.is_outgo_default&&f.jsx("p",{style:{margin:0,fontSize:"0.75rem",opacity:.5},children:"Another account is already set as default"})]})]})]}),f.jsxs(Ka,{children:[f.jsx(_t,{type:"submit",children:s}),f.jsx(_t,{type:"button",variant:"secondary",onClick:n,children:"Cancel"})]})]})}function iE({initialData:i,onSubmit:e,onCancel:n,submitLabel:s}){const[o,c]=C.useState(i||{name:"",expected_balance:"positive"});function d(g){g.preventDefault(),o.name.trim()&&e(o)}return f.jsxs(Sl,{onSubmit:d,children:[f.jsx(yr,{label:"Account Type Name",htmlFor:"group-name",children:f.jsx(Ga,{id:"group-name",type:"text",value:o.name,onChange:g=>c({...o,name:g.target.value}),placeholder:"e.g., Checking, Savings, Credit Cards, Investments",required:!0,autoFocus:!0})}),f.jsx(yr,{label:"Expected Balance",htmlFor:"expected-balance",children:f.jsxs(Bc,{id:"expected-balance",value:o.expected_balance,onChange:g=>c({...o,expected_balance:g.target.value}),children:[f.jsx("option",{value:"positive",children:"Normally Positive (e.g., Checking, Savings)"}),f.jsx("option",{value:"negative",children:"Normally Negative (e.g., Credit Cards, Loans)"}),f.jsx("option",{value:"any",children:"Either (no warnings)"})]})}),f.jsxs("div",{style:{padding:"0.75rem",background:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[f.jsxs("p",{style:{margin:0,fontSize:"0.85rem",opacity:.7},children:["Group-Level Overrides ",f.jsx("span",{style:{fontSize:"0.75rem",opacity:.6},children:"(applies to all accounts in this type)"})]}),f.jsx(sE,{label:"Active status",value:o.is_active,onChange:g=>c({...o,is_active:g}),trueLabel:"All active",falseLabel:"All inactive",undefinedLabel:"Per account"}),f.jsx(sE,{label:"Budget status",value:o.on_budget,onChange:g=>c({...o,on_budget:g}),trueLabel:"All on budget",falseLabel:"All off budget",undefinedLabel:"Per account"})]}),f.jsxs(Ka,{children:[f.jsx(_t,{type:"submit",children:s}),f.jsx(_t,{type:"button",variant:"secondary",onClick:n,children:"Cancel"})]})]})}function sE({label:i,value:e,onChange:n,trueLabel:s,falseLabel:o,undefinedLabel:c}){function d(){n(e===void 0?!0:e===!0?!1:void 0)}const g=e===!0?s:e===!1?o:c,p=e===!0?Se.success:e===!1?Se.warning:"inherit",y=e===!0?"":e===!1?"":"";return f.jsxs("button",{type:"button",onClick:d,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",background:e!==void 0?`color-mix(in srgb, ${p} 15%, transparent)`:"color-mix(in srgb, currentColor 8%, transparent)",border:e!==void 0?`1px solid color-mix(in srgb, ${p} 40%, transparent)`:"1px solid color-mix(in srgb, currentColor 20%, transparent)",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem",color:"inherit",textAlign:"left",width:"100%"},children:[f.jsx("span",{style:{width:"1.25rem",height:"1.25rem",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",background:e!==void 0?p:"color-mix(in srgb, currentColor 20%, transparent)",color:e!==void 0?"white":"inherit",fontWeight:600,fontSize:"0.75rem"},children:y}),f.jsxs("span",{style:{flex:1},children:[f.jsxs("span",{style:{opacity:.7},children:[i,":"]})," ",f.jsx("span",{style:{fontWeight:500,color:p},children:g})]}),f.jsx("span",{style:{fontSize:"0.7rem",opacity:.5},children:"click to cycle"})]})}function Bk({group:i}){const e=[];return i.is_active===!1?e.push(f.jsx("span",{style:{fontSize:"0.65rem",fontWeight:500,padding:"0.15rem 0.35rem",borderRadius:"4px",background:`color-mix(in srgb, ${Se.warning} 20%, transparent)`,color:Se.warning,whiteSpace:"nowrap"},title:"All accounts in this type are inactive",children:"All Inactive"},"inactive")):i.is_active===!0&&e.push(f.jsx("span",{style:{fontSize:"0.65rem",fontWeight:500,padding:"0.15rem 0.35rem",borderRadius:"4px",background:`color-mix(in srgb, ${Se.success} 20%, transparent)`,color:Se.success,whiteSpace:"nowrap"},title:"All accounts in this type are active",children:"All Active"},"active")),i.on_budget===!1?e.push(f.jsx("span",{style:{fontSize:"0.65rem",fontWeight:500,padding:"0.15rem 0.35rem",borderRadius:"4px",background:`color-mix(in srgb, ${Se.warning} 20%, transparent)`,color:Se.warning,whiteSpace:"nowrap"},title:"All accounts in this type are off budget",children:"All Off Budget"},"off-budget")):i.on_budget===!0&&e.push(f.jsx("span",{style:{fontSize:"0.65rem",fontWeight:500,padding:"0.15rem 0.35rem",borderRadius:"4px",background:`color-mix(in srgb, ${Se.success} 20%, transparent)`,color:Se.success,whiteSpace:"nowrap"},title:"All accounts in this type are on budget",children:"All On Budget"},"on-budget")),e.length===0?null:f.jsx(f.Fragment,{children:e})}function zo({icon:i,label:e,variant:n,title:s}){const c={success:{background:`color-mix(in srgb, ${Se.success} 20%, transparent)`,border:`1px solid color-mix(in srgb, ${Se.success} 40%, transparent)`,color:Se.success,opacity:1},warning:{background:`color-mix(in srgb, ${Se.warning} 15%, transparent)`,border:`1px solid color-mix(in srgb, ${Se.warning} 35%, transparent)`,color:Se.warning,opacity:1},muted:{background:"color-mix(in srgb, currentColor 12%, transparent)",border:"1px solid color-mix(in srgb, currentColor 20%, transparent)",color:"inherit",opacity:.7},income:{background:`color-mix(in srgb, ${Se.success} 10%, transparent)`,border:`1px solid color-mix(in srgb, ${Se.success} 25%, transparent)`,color:Se.success,opacity:.7},expense:{background:`color-mix(in srgb, ${Se.warning} 10%, transparent)`,border:`1px solid color-mix(in srgb, ${Se.warning} 25%, transparent)`,color:Se.warning,opacity:.7}}[n];return f.jsxs("span",{title:s||e,style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",background:c.background,border:c.border,padding:"0.15rem 0.4rem",borderRadius:"4px",fontSize:"0.7rem",fontWeight:500,textTransform:"uppercase",letterSpacing:"0.3px",color:c.color,opacity:c.opacity,whiteSpace:"nowrap"},children:[f.jsx("span",{style:{fontSize:"0.75rem"},children:i}),e]})}function aE({account:i,accountGroups:e}){const n=[],s=i.account_group_id?e.find(d=>d.id===i.account_group_id):null,o=s?.is_active!==void 0?s.is_active:i.is_active!==!1,c=s?.on_budget!==void 0?s.on_budget:i.on_budget!==!1;if(!o){const d=s?.is_active!==void 0;n.push(f.jsx(zo,{icon:"",label:d?"Inactive (type)":"Inactive",variant:"warning",title:d?`Set by "${s.name}" account type`:"Account is inactive/archived"},"inactive"))}if(!c){const d=s?.on_budget!==void 0;n.push(f.jsx(zo,{icon:"",label:d?"Off Budget (type)":"Off Budget",variant:"warning",title:d?`Set by "${s.name}" account type`:"Tracking only - not included in budget"},"off-budget"))}return i.is_income_default?n.push(f.jsx(zo,{icon:"",label:"Income Default",variant:"success",title:"Default income deposit account"},"income-default")):i.is_income_account&&n.push(f.jsx(zo,{icon:"",label:"Income",variant:"income",title:"Income deposit account"},"income")),i.is_outgo_default?n.push(f.jsx(zo,{icon:"",label:"Expense Default",variant:"warning",title:"Default expense account"},"outgo-default")):i.is_outgo_account&&n.push(f.jsx(zo,{icon:"",label:"Expense",variant:"expense",title:"Expense account"},"outgo")),n.length===0?null:f.jsx(f.Fragment,{children:n})}function oE({isActive:i,onDragOver:e,onDragLeave:n,onDrop:s}){return f.jsxs("div",{onDragOver:e,onDragLeave:n,onDrop:s,style:{position:"relative",height:"2rem",marginTop:"-0.25rem"},children:[f.jsx("div",{style:{position:"absolute",top:"50%",left:0,right:0,height:"3px",background:Se.primary,borderRadius:"2px",opacity:i?1:.3,transition:"opacity 0.15s",boxShadow:i?"0 0 8px rgba(100, 108, 255, 0.6)":"none"}}),i&&f.jsx("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"0.75rem",opacity:.7,background:"var(--background, #1a1a1a)",padding:"0 0.5rem",whiteSpace:"nowrap"},children:"Move to end"})]})}function Fk(){const{currentBudget:i,categories:e,setCategories:n,categoryGroups:s,setCategoryGroups:o,getCategoryBalances:c,getOnBudgetTotal:d}=os(),[g,p]=C.useState(null),y=Fp(),[b,S]=C.useState({}),[w,O]=C.useState(!1),[N,P]=C.useState(null),[j,W]=C.useState(null),[G,re]=C.useState(null),[Ce,je]=C.useState(!1),[xe,R]=C.useState(null),[A,I]=C.useState(null),[V,U]=C.useState(null),[F,k]=C.useState(null),rt=Ya(oa);C.useEffect(()=>{i&&e.length>0&&(O(!0),c().then(D=>S(D)).catch(D=>console.warn("Failed to load category balances:",D)).finally(()=>O(!1)))},[i?.id,e.length,c]);function Ge(D){return D.map(B=>{const J={id:B.id,name:B.name,category_group_id:B.category_group_id??null,sort_order:B.sort_order};return B.description&&(J.description=B.description),B.default_monthly_amount!==void 0&&(J.default_monthly_amount=B.default_monthly_amount),B.default_monthly_type!==void 0&&(J.default_monthly_type=B.default_monthly_type),J})}async function ee(D){if(i)try{const B=qe(rt,"budgets",i.id),J=await ot(B);if(J.exists()){const ve=J.data();await dt(B,{...ve,categories:Ge(D)})}}catch(B){throw new Error(B instanceof Error?B.message:"Failed to save categories")}}async function q(D){if(i)try{const B=qe(rt,"budgets",i.id),J=await ot(B);if(J.exists()){const ve=J.data();await dt(B,{...ve,category_groups:D})}}catch(B){throw new Error(B instanceof Error?B.message:"Failed to save category groups")}}async function De(D,B){if(i)try{const J=qe(rt,"budgets",i.id),ve=await ot(J);if(ve.exists()){const fe=ve.data();await dt(J,{...fe,categories:Ge(D),category_groups:B})}}catch(J){throw new Error(J instanceof Error?J.message:"Failed to save changes")}}async function Me(D,B){if(!i)return;const J=B==="ungrouped"?null:B,ve=e.filter(be=>B==="ungrouped"?!be.category_group_id:be.category_group_id===B),fe=ve.length>0?Math.max(...ve.map(be=>be.sort_order)):-1,X={id:`category_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:D.name,description:D.description,category_group_id:J,sort_order:fe+1,default_monthly_amount:D.default_monthly_amount,default_monthly_type:D.default_monthly_type},ue=[...e,X].sort((be,et)=>be.sort_order-et.sort_order);n(ue),W(null);try{await ee(ue)}catch(be){n(e),p(be instanceof Error?be.message:"Failed to create category")}}async function Xe(D,B){if(i)try{const J=e.find(be=>be.id===D);if(!J)return;const ve=J.category_group_id||"ungrouped",fe=B.category_group_id;let X=J.sort_order;if(ve!==(fe||"ungrouped")){const be=e.filter(et=>(et.category_group_id||"ungrouped")===(fe||"ungrouped")&&et.id!==D);X=be.length>0?Math.max(...be.map(et=>et.sort_order))+1:0}const ue=e.map(be=>be.id===D?{...be,name:B.name,description:B.description,category_group_id:fe,sort_order:X,default_monthly_amount:B.default_monthly_amount,default_monthly_type:B.default_monthly_type}:be);n(ue),await ee(ue),P(null)}catch(J){p(J instanceof Error?J.message:"Failed to update category")}}async function M(D){if(confirm("Are you sure you want to delete this category?")&&i)try{const B=e.filter(J=>J.id!==D);n(B),await ee(B)}catch(B){p(B instanceof Error?B.message:"Failed to delete category")}}async function L(D){if(i)try{const B=s.length>0?Math.max(...s.map(fe=>fe.sort_order)):-1,J={id:`category_group_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:D.name,sort_order:B+1},ve=[...s,J];o(ve),await q(ve),je(!1)}catch(B){p(B instanceof Error?B.message:"Failed to create group")}}async function Q(D,B){if(i)try{const J=s.map(ve=>ve.id===D?{...ve,name:B.name}:ve);o(J),await q(J),re(null)}catch(J){p(J instanceof Error?J.message:"Failed to update group")}}async function Y(D){if(confirm("Are you sure you want to delete this group? Categories in this group will move to Uncategorized.")&&i)try{const B=e.map(ve=>ve.category_group_id===D?{...ve,category_group_id:null}:ve),J=s.filter(ve=>ve.id!==D);n(B),o(J),await De(B,J)}catch(B){p(B instanceof Error?B.message:"Failed to delete group")}}function ce(D,B){R("category"),I(B),D.dataTransfer.effectAllowed="move"}function Oe(D,B,J){D.preventDefault(),xe==="category"&&(B!==A&&U(B),k(J))}function ze(D,B){D.preventDefault(),xe==="category"?(k(B),U(null)):xe==="group"&&B!==A&&U(B)}function $e(){U(null)}function Ze(){k(null)}function ct(){R(null),I(null),U(null),k(null)}async function Xt(D,B,J){if(D.preventDefault(),D.stopPropagation(),!A||xe!=="category"){ct();return}const ve=e.find(we=>we.id===A);if(!ve)return;const fe=J==="ungrouped"?null:J,X=e.filter(we=>(we.category_group_id||"ungrouped")===J);let ue=e.filter(we=>we.id!==A),be;if(B==="__group_end__"||X.length===0||!X.find(we=>we.id===B))be=(X.length>0?Math.max(...X.filter(tt=>tt.id!==A).map(tt=>tt.sort_order)):-1)+1;else{const we=X.find(tt=>tt.id===B);we?(be=we.sort_order,ue=ue.map(tt=>(tt.category_group_id||"ungrouped")===J&&tt.sort_order>=be?{...tt,sort_order:tt.sort_order+1}:tt)):be=0}const et={...ve,category_group_id:fe,sort_order:be};if(ue.push(et),ue.sort((we,tt)=>we.sort_order-tt.sort_order),n(ue),ct(),!!i)try{await ee(ue)}catch(we){p(we instanceof Error?we.message:"Failed to save changes")}}async function _n(D,B){D.preventDefault(),xe==="category"?await Xt(D,"__group_end__",B):xe==="group"&&await it(D,B)}function Bn(D,B){D.stopPropagation(),R("group"),I(B),D.dataTransfer.effectAllowed="move"}async function it(D,B){if(D.preventDefault(),!A||xe!=="group"||A===B){ct();return}const J=s.findIndex(ue=>ue.id===A),ve=[...s],[fe]=ve.splice(J,1);if(B==="__end__")ve.push(fe);else{const ue=ve.findIndex(be=>be.id===B);ve.splice(ue,0,fe)}const X=ve.map((ue,be)=>({...ue,sort_order:be}));if(o(X),ct(),!!i)try{await q(X)}catch(ue){p(ue instanceof Error?ue.message:"Failed to save new order")}}async function Vt(D,B){const J=e.find(we=>we.id===D);if(!J)return;const ve=J.category_group_id||"ungrouped",fe=e.filter(we=>(we.category_group_id||"ungrouped")===ve).sort((we,tt)=>we.sort_order-tt.sort_order),X=fe.findIndex(we=>we.id===D),ue=B==="up"?X-1:X+1;if(ue<0||ue>=fe.length)return;const be=fe[ue],et=e.map(we=>we.id===D?{...we,sort_order:be.sort_order}:we.id===be.id?{...we,sort_order:J.sort_order}:we);if(n(et),!!i)try{await ee(et)}catch(we){n(e),p(we instanceof Error?we.message:"Failed to move category")}}async function He(D,B){const J=[...s].sort((be,et)=>be.sort_order-et.sort_order),ve=J.findIndex(be=>be.id===D),fe=B==="up"?ve-1:ve+1;if(fe<0||fe>=J.length)return;const[X]=J.splice(ve,1);J.splice(fe,0,X);const ue=J.map((be,et)=>({...be,sort_order:et}));if(o(ue),!!i)try{await q(ue)}catch(be){o(s),p(be instanceof Error?be.message:"Failed to move group")}}const ke=e.reduce((D,B)=>{const J=B.category_group_id||"ungrouped";return D[J]||(D[J]=[]),D[J].push(B),D},{}),vn=[...s].sort((D,B)=>D.sort_order-B.sort_order);return i?f.jsxs("div",{children:[f.jsx("h2",{style:{marginTop:0},children:"Categories & Groups"}),f.jsxs("p",{style:qh,children:["Organize your spending categories into groups.",f.jsx("br",{}),f.jsx("span",{style:{fontSize:"0.9rem"},children:y?"Use  buttons to reorder items, or drag to move between groups.":"Drag categories between groups, or use  buttons to reorder."})]}),g&&f.jsx(au,{message:g,onDismiss:()=>p(null)}),f.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem",flexWrap:"wrap"},children:[f.jsxs(Qi,{style:{flex:1,minWidth:"120px"},children:[f.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.7},children:"Categories"}),f.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.4rem",fontWeight:600},children:e.length})]}),f.jsxs(Qi,{style:{flex:1,minWidth:"120px"},children:[f.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.7},children:"Groups"}),f.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.4rem",fontWeight:600},children:s.length})]}),f.jsxs(Qi,{style:{flex:1,minWidth:"120px"},children:[f.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.7},children:"On-Budget"}),f.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.4rem",fontWeight:600,color:Br(d())},children:yn(d())})]}),f.jsxs(Qi,{style:{flex:1,minWidth:"120px"},children:[f.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.7},children:"Allocated"}),f.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.4rem",fontWeight:600,color:Se.primary},children:w?"...":yn(Object.values(b).reduce((D,B)=>D+B,0))})]}),f.jsxs(Qi,{style:{flex:1,minWidth:"120px"},children:[f.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.7},children:"Available"}),f.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.4rem",fontWeight:600,color:Br(d()-Object.values(b).reduce((D,B)=>D+B,0))},children:w?"...":yn(d()-Object.values(b).reduce((D,B)=>D+B,0))})]})]}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",marginBottom:"1.5rem"},children:[e.length===0&&s.length===0&&f.jsx("p",{style:{opacity:.7},children:"No categories yet. Create a group first, then add categories!"}),vn.map((D,B)=>{const J=(ke[D.id]||[]).sort((Le,Ae)=>Le.sort_order-Ae.sort_order),ve=xe==="group"&&A===D.id,fe=xe==="group"&&V===D.id,X=xe==="category"&&F===D.id,ue=A&&xe==="category"?e.find(Le=>Le.id===A):null,be=ue&&(ue.category_group_id||"ungrouped")!==D.id,et=xe==="group"&&fe&&A!==D.id,we=B>0,tt=B<vn.length-1;return f.jsxs("div",{children:[xe==="group"&&!ve&&f.jsxs("div",{onDragOver:Le=>{Le.preventDefault(),U(D.id)},onDragLeave:$e,onDrop:Le=>it(Le,D.id),style:{position:"relative",height:et?"2.5rem":"0.5rem",marginBottom:et?"-0.5rem":"-0.25rem",transition:"height 0.15s"},children:[f.jsx("div",{style:{position:"absolute",top:"50%",left:0,right:0,height:"3px",background:Se.primary,borderRadius:"2px",opacity:et?1:0,transition:"opacity 0.15s",boxShadow:et?"0 0 8px rgba(100, 108, 255, 0.6)":"none"}}),et&&f.jsx("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"0.75rem",opacity:.7,background:"var(--background, #1a1a1a)",padding:"0 0.5rem",whiteSpace:"nowrap"},children:"Drop here"})]}),f.jsx("div",{onDragOver:Le=>{ze(Le,D.id)},onDragLeave:Ze,onDrop:Le=>_n(Le,D.id),style:{background:ve?"color-mix(in srgb, currentColor 3%, transparent)":X&&be?`color-mix(in srgb, ${Se.primary} 10%, transparent)`:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"12px",padding:"1rem",opacity:ve?.5:1,border:X&&be?`2px dashed ${Se.primary}`:"2px solid transparent",transition:"all 0.15s"},children:G===D.id?f.jsx(lE,{initialData:{name:D.name},onSubmit:Le=>Q(D.id,Le),onCancel:()=>re(null),submitLabel:"Save"}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:y?"0.5rem":"0.75rem",paddingBottom:"0.5rem",borderBottom:"1px solid color-mix(in srgb, currentColor 15%, transparent)",gap:"0.5rem",flexWrap:y?"wrap":"nowrap"},children:[f.jsxs("h3",{style:{...ll,margin:0,display:"flex",alignItems:"center",gap:"0.5rem",flex:1,minWidth:0},children:[!y&&f.jsx("span",{draggable:!0,onDragStart:Le=>Bn(Le,D.id),onDragEnd:ct,style:{cursor:"grab",opacity:.4,padding:"0.25rem",margin:"-0.25rem",borderRadius:"4px",userSelect:"none"},title:"Drag to reorder group",children:""}),f.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:D.name}),f.jsxs("span",{style:{opacity:.5,fontWeight:400,fontSize:"0.9rem",flexShrink:0},children:["(",J.length,")"]})]}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0,alignItems:"center"},children:[!y&&f.jsx(_t,{variant:"small",onClick:()=>W(D.id),disabled:j!==null,children:"+ Category"}),f.jsx("button",{onClick:()=>re(D.id),style:{background:"transparent",border:"none",cursor:"pointer",opacity:.6,fontSize:"0.9rem",padding:"0.25rem"},title:"Edit group",children:""}),f.jsx("button",{onClick:()=>Y(D.id),style:{background:"transparent",border:"none",cursor:"pointer",opacity:.6,fontSize:"0.9rem",padding:"0.25rem"},title:"Delete group",children:""}),f.jsxs("div",{style:zp,children:[f.jsx("button",{onClick:()=>He(D.id,"up"),disabled:!we,style:{...ol,opacity:we?.6:.2,cursor:we?"pointer":"default"},title:"Move group up","aria-label":"Move group up",children:""}),f.jsx("button",{onClick:()=>He(D.id,"down"),disabled:!tt,style:{...ol,opacity:tt?.6:.2,cursor:tt?"pointer":"default"},title:"Move group down","aria-label":"Move group down",children:""})]})]})]}),y&&f.jsx("div",{style:{marginBottom:"0.5rem"},children:f.jsx(_t,{variant:"small",onClick:()=>W(D.id),disabled:j!==null,children:"+ Category"})}),f.jsxs("div",{style:qa,children:[J.map(Le=>N===Le.id?f.jsx(Vd,{initialData:{name:Le.name,description:Le.description,category_group_id:Le.category_group_id,default_monthly_amount:Le.default_monthly_amount,default_monthly_type:Le.default_monthly_type},onSubmit:Ae=>Xe(Le.id,Ae),onCancel:()=>P(null),submitLabel:"Save",categoryGroups:s,showGroupSelector:!0},Le.id):f.jsx(yh,{isDragging:xe==="category"&&A===Le.id,isDragOver:V===Le.id,onDragStart:Ae=>{Ae.stopPropagation(),ce(Ae,Le.id)},onDragOver:Ae=>Oe(Ae,Le.id,D.id),onDragLeave:$e,onDragEnd:ct,onDrop:Ae=>Xt(Ae,Le.id,D.id),onEdit:()=>P(Le.id),onDelete:()=>M(Le.id),onMoveUp:()=>Vt(Le.id,"up"),onMoveDown:()=>Vt(Le.id,"down"),canMoveUp:J.findIndex(Ae=>Ae.id===Le.id)>0,canMoveDown:J.findIndex(Ae=>Ae.id===Le.id)<J.length-1,children:f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"wrap"},children:[f.jsx("span",{style:ph,children:Le.name}),Le.default_monthly_amount!==void 0&&Le.default_monthly_amount>0&&f.jsxs("span",{style:{fontSize:"0.75rem",opacity:.8,background:"color-mix(in srgb, currentColor 10%, transparent)",padding:"0.15rem 0.4rem",borderRadius:"4px"},children:["Default: ",Le.default_monthly_type==="percentage"?f.jsxs(f.Fragment,{children:[f.jsxs("span",{style:{color:Se.success,fontWeight:500},children:[Le.default_monthly_amount,"%"]})," of prev income"]}):f.jsxs(f.Fragment,{children:[f.jsx("span",{style:{color:Se.success,fontWeight:500},children:yn(Le.default_monthly_amount)}),"/mo"]})]})]}),Le.description&&f.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.8rem",opacity:.6,lineHeight:1.3},children:Le.description}),f.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1rem",fontWeight:600,color:Br(b[Le.id]||0)},children:w?"...":yn(b[Le.id]||0)})]})},Le.id)),J.length===0&&!j&&f.jsx("p",{style:{opacity:.5,fontSize:"0.9rem",margin:"0.5rem 0"},children:"No categories in this group"}),xe==="category"&&J.length>0&&f.jsx(cE,{groupId:D.id,isActive:V===`__end__${D.id}`,onDragOver:Le=>{Le.preventDefault(),Le.stopPropagation(),U(`__end__${D.id}`),k(D.id)},onDragLeave:Le=>{Le.stopPropagation(),U(null)},onDrop:Le=>{Le.stopPropagation(),Xt(Le,"__group_end__",D.id)}}),j===D.id&&f.jsx(Vd,{initialData:{name:"",category_group_id:D.id},onSubmit:Le=>Me(Le,D.id),onCancel:()=>W(null),submitLabel:"Create",categoryGroups:s})]}),j!==D.id&&f.jsx("div",{style:{marginTop:"0.75rem",paddingTop:"0.5rem",borderTop:"1px solid color-mix(in srgb, currentColor 10%, transparent)"},children:f.jsx(_t,{variant:"small",onClick:()=>W(D.id),disabled:j!==null,children:"+ Add Category"})})]})})]},D.id)}),xe==="group"&&vn.length>0&&f.jsx(Hp,{isActive:V==="__end__",onDragOver:D=>{D.preventDefault(),U("__end__")},onDragLeave:$e,onDrop:D=>it(D,"__end__"),label:"Move group to end"}),(()=>{const D=(ke.ungrouped||[]).sort((fe,X)=>fe.sort_order-X.sort_order),B=xe==="category"&&F==="ungrouped",J=A&&xe==="category"?e.find(fe=>fe.id===A):null,ve=J&&J.category_group_id!==null;return D.length===0&&!j&&s.length>0&&xe!=="category"?null:f.jsxs("div",{onDragOver:fe=>ze(fe,"ungrouped"),onDragLeave:Ze,onDrop:fe=>_n(fe,"ungrouped"),style:{background:B&&ve?`color-mix(in srgb, ${Se.primary} 10%, transparent)`:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"12px",padding:"1rem",border:B&&ve?`2px dashed ${Se.primary}`:"2px solid transparent",transition:"all 0.15s"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem",paddingBottom:"0.5rem",borderBottom:"1px solid color-mix(in srgb, currentColor 15%, transparent)"},children:[f.jsxs("h3",{style:{...ll,margin:0,opacity:.7},children:["Uncategorized",f.jsxs("span",{style:{marginLeft:"0.5rem",opacity:.5,fontWeight:400,fontSize:"0.9rem"},children:["(",D.length,")"]})]}),f.jsx(_t,{variant:"small",onClick:()=>W("ungrouped"),disabled:j!==null,children:"+ Category"})]}),f.jsxs("div",{style:qa,children:[D.map(fe=>N===fe.id?f.jsx(Vd,{initialData:{name:fe.name,description:fe.description,category_group_id:fe.category_group_id,default_monthly_amount:fe.default_monthly_amount,default_monthly_type:fe.default_monthly_type},onSubmit:X=>Xe(fe.id,X),onCancel:()=>P(null),submitLabel:"Save",categoryGroups:s,showGroupSelector:!0},fe.id):f.jsx(yh,{isDragging:xe==="category"&&A===fe.id,isDragOver:V===fe.id,onDragStart:X=>ce(X,fe.id),onDragOver:X=>Oe(X,fe.id,"ungrouped"),onDragLeave:$e,onDragEnd:ct,onDrop:X=>Xt(X,fe.id,"ungrouped"),onEdit:()=>P(fe.id),onDelete:()=>M(fe.id),onMoveUp:()=>Vt(fe.id,"up"),onMoveDown:()=>Vt(fe.id,"down"),canMoveUp:D.findIndex(X=>X.id===fe.id)>0,canMoveDown:D.findIndex(X=>X.id===fe.id)<D.length-1,children:f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"wrap"},children:[f.jsx("span",{style:ph,children:fe.name}),fe.default_monthly_amount!==void 0&&fe.default_monthly_amount>0&&f.jsxs("span",{style:{fontSize:"0.75rem",opacity:.8,background:"color-mix(in srgb, currentColor 10%, transparent)",padding:"0.15rem 0.4rem",borderRadius:"4px"},children:["Default: ",fe.default_monthly_type==="percentage"?f.jsxs(f.Fragment,{children:[f.jsxs("span",{style:{color:Se.success,fontWeight:500},children:[fe.default_monthly_amount,"%"]})," of prev income"]}):f.jsxs(f.Fragment,{children:[f.jsx("span",{style:{color:Se.success,fontWeight:500},children:yn(fe.default_monthly_amount)}),"/mo"]})]})]}),fe.description&&f.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.8rem",opacity:.6,lineHeight:1.3},children:fe.description}),f.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1rem",fontWeight:600,color:Br(b[fe.id]||0)},children:w?"...":yn(b[fe.id]||0)})]})},fe.id)),D.length===0&&xe==="category"&&f.jsx("p",{style:{opacity:.5,fontSize:"0.9rem",margin:"0.5rem 0",textAlign:"center"},children:"Drop here to uncategorize"}),xe==="category"&&D.length>0&&f.jsx(cE,{groupId:"ungrouped",isActive:V==="__end__ungrouped",onDragOver:fe=>{fe.preventDefault(),fe.stopPropagation(),U("__end__ungrouped"),k("ungrouped")},onDragLeave:fe=>{fe.stopPropagation(),U(null)},onDrop:fe=>{fe.stopPropagation(),Xt(fe,"__group_end__","ungrouped")}}),j==="ungrouped"&&f.jsx(Vd,{initialData:{name:"",category_group_id:null},onSubmit:fe=>Me(fe,"ungrouped"),onCancel:()=>W(null),submitLabel:"Create",categoryGroups:s})]}),j!=="ungrouped"&&f.jsx("div",{style:{marginTop:"0.75rem",paddingTop:"0.5rem",borderTop:"1px solid color-mix(in srgb, currentColor 10%, transparent)"},children:f.jsx(_t,{variant:"small",onClick:()=>W("ungrouped"),disabled:j!==null,children:"+ Add Category"})})]})})()]}),Ce?f.jsx(lE,{onSubmit:L,onCancel:()=>je(!1),submitLabel:"Create Group"}):f.jsx(_t,{variant:"primary-large",onClick:()=>je(!0),children:"+ Add Category Group"})]}):f.jsx("p",{children:"No budget found. Please log in."})}function Vd({initialData:i,onSubmit:e,onCancel:n,submitLabel:s,categoryGroups:o=[],showGroupSelector:c=!1}){const[d,g]=C.useState(i||{name:"",category_group_id:null}),[p,y]=C.useState(i?.default_monthly_amount?.toString()||""),[b,S]=C.useState(i?.default_monthly_type||"fixed"),[w,O]=C.useState(!1);function N(P){if(P.preventDefault(),!d.name.trim())return;O(!0);const j=parseFloat(p),W=!isNaN(j)&&j>0;e({...d,description:d.description?.trim()||void 0,default_monthly_amount:W?j:void 0,default_monthly_type:W?b:void 0})}return f.jsxs(Sl,{onSubmit:N,children:[f.jsx(yr,{label:"Category Name",htmlFor:"category-name",children:f.jsx(Ga,{id:"category-name",type:"text",value:d.name,onChange:P=>g({...d,name:P.target.value}),placeholder:"e.g., Groceries, Rent, Gas",required:!0,autoFocus:!0})}),f.jsx(yr,{label:"Description (optional)",htmlFor:"category-description",children:f.jsx(Bp,{id:"category-description",value:d.description||"",onChange:P=>g({...d,description:P.target.value}),placeholder:"What is this category used for?",minHeight:"3rem"})}),c&&f.jsx(yr,{label:"Category Group",htmlFor:"category-group",children:f.jsxs(Bc,{id:"category-group",value:d.category_group_id||"ungrouped",onChange:P=>g({...d,category_group_id:P.target.value==="ungrouped"?null:P.target.value}),children:[f.jsx("option",{value:"ungrouped",children:"Uncategorized"}),o.map(P=>f.jsx("option",{value:P.id,children:P.name},P.id))]})}),f.jsxs(yr,{label:"Default Monthly Allocation (optional)",htmlFor:"default-amount",children:[f.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[f.jsxs(Bc,{id:"default-type",value:b,onChange:P=>S(P.target.value),style:{width:"auto",flex:"0 0 auto"},children:[f.jsx("option",{value:"fixed",children:"Fixed $"}),f.jsx("option",{value:"percentage",children:"% of Prev Income"})]}),b==="fixed"?f.jsx(u1,{id:"default-amount",value:p,onChange:y,placeholder:"$0.00"}):f.jsx(Ga,{id:"default-amount",type:"number",value:p,onChange:P=>y(P.target.value),placeholder:"0",min:"0",max:"100",step:"0.1",style:{width:"80px"}}),b==="percentage"&&f.jsx("span",{style:{opacity:.6},children:"%"})]}),f.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.75rem",opacity:.6},children:b==="fixed"?"Suggested fixed amount to allocate each month":"Percentage of previous month's total income"})]}),f.jsxs(Ka,{children:[f.jsx(_t,{type:"submit",isLoading:w,children:s}),f.jsx(_t,{type:"button",variant:"secondary",onClick:n,children:"Cancel"})]})]})}function lE({initialData:i,onSubmit:e,onCancel:n,submitLabel:s}){const[o,c]=C.useState(i||{name:""}),[d,g]=C.useState(!1);function p(y){y.preventDefault(),o.name.trim()&&(g(!0),e(o))}return f.jsxs(Sl,{onSubmit:p,children:[f.jsx(yr,{label:"Group Name",htmlFor:"group-name",children:f.jsx(Ga,{id:"group-name",type:"text",value:o.name,onChange:y=>c({...o,name:y.target.value}),placeholder:"e.g., Housing, Transportation, Food",required:!0,autoFocus:!0})}),f.jsxs(Ka,{children:[f.jsx(_t,{type:"submit",isLoading:d,children:s}),f.jsx(_t,{type:"button",variant:"secondary",onClick:n,children:"Cancel"})]})]})}function cE({isActive:i,onDragOver:e,onDragLeave:n,onDrop:s}){return f.jsxs("div",{onDragOver:e,onDragLeave:n,onDrop:s,style:{position:"relative",height:"2rem",marginTop:"-0.25rem"},children:[f.jsx("div",{style:{position:"absolute",top:"50%",left:0,right:0,height:"3px",background:Se.primary,borderRadius:"2px",opacity:i?1:.3,transition:"opacity 0.15s",boxShadow:i?"0 0 8px rgba(100, 108, 255, 0.6)":"none"}}),i&&f.jsx("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"0.75rem",opacity:.7,background:"var(--background, #1a1a1a)",padding:"0 0.5rem",whiteSpace:"nowrap"},children:"Move to end"})]})}const uE="admin_active_tab",Hk=["my-budgets","accounts","categories","users","migration","feedback","tests"];function qk(){const{currentBudget:i,loading:e,isOwner:n,isAdmin:s,isTest:o}=os(),c=Hr(),d=c.pathname.includes("/admin/accounts"),g=c.pathname.includes("/admin/categories"),p=c.pathname.includes("/admin/users"),y=c.pathname.includes("/admin/migration"),b=c.pathname.includes("/admin/feedback"),S=c.pathname.includes("/admin/my-budgets"),w=c.pathname.includes("/admin/tests"),O=c.pathname==="/budget/admin";C.useEffect(()=>{if(O)return;let G="my-budgets";d?G="accounts":g?G="categories":p?G="users":y?G="migration":b?G="feedback":w&&(G="tests"),localStorage.setItem(uE,G)},[c.pathname,O,d,g,p,y,b,S,w]);function N(){const G=localStorage.getItem(uE);return!G||!Hk.includes(G)||G==="users"&&!n||(G==="migration"||G==="feedback")&&!s||G==="tests"&&!o?"my-budgets":G}if(e)return f.jsx("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:f.jsx("p",{children:"Loading..."})});const P=p,j=y||b,W=w;return!n&&P||!s&&j||!o&&W?f.jsxs("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:[f.jsx("nav",{style:{marginBottom:"1.5rem"},children:f.jsx(hn,{to:"/budget",children:" Back to Budget"})}),f.jsx("h1",{children:"Access Denied"}),f.jsx("p",{style:{opacity:.7},children:W?"Only test users can access this section.":j?"Only administrators can access this section.":"Only the budget owner can access this section."}),f.jsx("p",{style:{marginTop:"1rem"},children:f.jsx(hn,{to:"/budget/admin/my-budgets",style:{color:"#646cff"},children:"Go to My Budgets "})})]}):f.jsxs("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:[f.jsx("nav",{style:{marginBottom:"1.5rem"},children:f.jsx(hn,{to:"/budget",children:" Back to Budget"})}),f.jsx("h1",{children:n?"Admin Settings":"Budget Settings"}),f.jsx("p",{style:{opacity:.7,marginBottom:"0.5rem"},children:n?"Manage your budget settings, users, and data migration.":"Manage your budgets, accounts, and categories."}),i&&f.jsxs("div",{style:{opacity:.6,marginBottom:"1.5rem",fontSize:"0.9rem",display:"flex",flexDirection:"column",gap:"0.25rem"},children:[f.jsxs("p",{style:{margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("span",{children:""}),f.jsxs("span",{children:["Budget Name: ",f.jsx("strong",{style:{opacity:1},children:i.name})]})]}),f.jsxs("p",{style:{margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("span",{children:""}),f.jsxs("span",{children:["Budget ID: ",f.jsx("code",{style:{opacity:1,background:"color-mix(in srgb, currentColor 10%, transparent)",padding:"0.1rem 0.4rem",borderRadius:"4px",fontSize:"0.85rem"},children:i.id})]})]}),f.jsxs("p",{style:{margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("span",{children:""}),f.jsxs("span",{children:["Budget Owner: ",f.jsx("strong",{style:{opacity:1},children:i.owner_email||i.owner_id})]})]})]}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"2rem",borderBottom:"1px solid color-mix(in srgb, currentColor 15%, transparent)",paddingBottom:"1rem",flexWrap:"wrap"},children:[f.jsx(hn,{to:"/budget/admin/my-budgets",style:{padding:"0.5rem 1rem",borderRadius:"6px",textDecoration:"none",color:"inherit",background:S?"color-mix(in srgb, #646cff 20%, transparent)":"color-mix(in srgb, currentColor 8%, transparent)",border:S?"1px solid #646cff":"1px solid transparent",fontWeight:S?500:400},children:" My Budgets"}),f.jsx(hn,{to:"/budget/admin/accounts",style:{padding:"0.5rem 1rem",borderRadius:"6px",textDecoration:"none",color:"inherit",background:d?"color-mix(in srgb, #646cff 20%, transparent)":"color-mix(in srgb, currentColor 8%, transparent)",border:d?"1px solid #646cff":"1px solid transparent",fontWeight:d?500:400},children:" Accounts"}),f.jsx(hn,{to:"/budget/admin/categories",style:{padding:"0.5rem 1rem",borderRadius:"6px",textDecoration:"none",color:"inherit",background:g?"color-mix(in srgb, #646cff 20%, transparent)":"color-mix(in srgb, currentColor 8%, transparent)",border:g?"1px solid #646cff":"1px solid transparent",fontWeight:g?500:400},children:" Categories"}),n&&f.jsx(hn,{to:"/budget/admin/users",style:{padding:"0.5rem 1rem",borderRadius:"6px",textDecoration:"none",color:"inherit",background:p?"color-mix(in srgb, #646cff 20%, transparent)":"color-mix(in srgb, currentColor 8%, transparent)",border:p?"1px solid #646cff":"1px solid transparent",fontWeight:p?500:400},children:" Users"}),s&&f.jsxs(f.Fragment,{children:[f.jsx(hn,{to:"/budget/admin/migration",style:{padding:"0.5rem 1rem",borderRadius:"6px",textDecoration:"none",color:"inherit",background:y?"color-mix(in srgb, #646cff 20%, transparent)":"color-mix(in srgb, currentColor 8%, transparent)",border:y?"1px solid #646cff":"1px solid transparent",fontWeight:y?500:400},children:" Migration"}),f.jsx(hn,{to:"/budget/admin/feedback",style:{padding:"0.5rem 1rem",borderRadius:"6px",textDecoration:"none",color:"inherit",background:b?"color-mix(in srgb, #646cff 20%, transparent)":"color-mix(in srgb, currentColor 8%, transparent)",border:b?"1px solid #646cff":"1px solid transparent",fontWeight:b?500:400},children:" Feedback"})]}),o&&f.jsx(hn,{to:"/budget/admin/tests",style:{padding:"0.5rem 1rem",borderRadius:"6px",textDecoration:"none",color:"inherit",background:w?"color-mix(in srgb, #ff6b6b 20%, transparent)":"color-mix(in srgb, currentColor 8%, transparent)",border:w?"1px solid #ff6b6b":"1px solid transparent",fontWeight:w?500:400},children:" Tests"})]}),O?f.jsx(AE,{to:`/budget/admin/${N()}`,replace:!0}):f.jsx($g,{})]})}function Gk(){const{currentBudget:i,currentUserId:e,budgetUserIds:n,acceptedUserIds:s,inviteUserToBudget:o,revokeUserFromBudget:c}=os(),[d,g]=C.useState(""),[p,y]=C.useState(!1),[b,S]=C.useState(null),[w,O]=C.useState(null);if(!i)return f.jsx("p",{children:"No budget found."});async function N(G){if(G.preventDefault(),!(!d.trim()||!i)){y(!0),S(null),O(null);try{await o(d.trim()),g(""),O("Invite sent! The user can now accept the invitation from their account.")}catch(re){S(re instanceof Error?re.message:"Failed to invite user")}finally{y(!1)}}}async function P(G){if(!i)return;if(G===i.owner_id){S("Cannot revoke the budget owner");return}if(G===e){S("Cannot revoke yourself from the budget");return}const re=s.includes(G);if(confirm(re?"Are you sure you want to revoke this user's access? They will lose access to this budget.":"Are you sure you want to cancel this invitation?")){S(null),O(null);try{await c(G),O(re?"User access revoked.":"Invitation cancelled.")}catch(je){S(je instanceof Error?je.message:"Failed to revoke user")}}}const j=n.filter(G=>s.includes(G)),W=n.filter(G=>!s.includes(G));return f.jsxs("div",{children:[f.jsx("h2",{style:{marginTop:0},children:"Budget Users"}),f.jsx("p",{style:{opacity:.7,marginBottom:"1.5rem"},children:"Invite users to access this budget. They must accept the invitation before they can access it."}),b&&f.jsxs("div",{style:{background:"rgba(220, 38, 38, 0.1)",border:"1px solid rgba(220, 38, 38, 0.3)",color:"#f87171",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsx("span",{children:b}),f.jsx("button",{onClick:()=>S(null),style:{background:"transparent",border:"none",color:"#f87171",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.25rem",lineHeight:1},children:""})]}),w&&f.jsxs("div",{style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#4ade80",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsx("span",{children:w}),f.jsx("button",{onClick:()=>O(null),style:{background:"transparent",border:"none",color:"#4ade80",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.25rem",lineHeight:1},children:""})]}),f.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.25rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[f.jsxs("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem"},children:["Active Users (",j.length,")"]}),j.length===0?f.jsx("p",{style:{opacity:.6,margin:0},children:"No users have accepted invitations yet."}):f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:j.map(G=>{const re=G===i.owner_id,Ce=G===e;return f.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 8%, transparent)",padding:"0.75rem 1rem",borderRadius:"6px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"},children:[f.jsx("div",{style:{flex:1,minWidth:0},children:f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[f.jsx("code",{style:{fontSize:"0.85rem",background:"color-mix(in srgb, currentColor 10%, transparent)",padding:"0.2rem 0.5rem",borderRadius:"4px",wordBreak:"break-all"},children:G}),re&&f.jsx("span",{style:{background:"color-mix(in srgb, #646cff 20%, transparent)",color:"#a5b4fc",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600},children:"Owner"}),Ce&&f.jsx("span",{style:{background:"color-mix(in srgb, #22c55e 20%, transparent)",color:"#4ade80",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600},children:"You"})]})}),!re&&!Ce&&f.jsx("button",{onClick:()=>P(G),style:{background:"transparent",border:"1px solid rgba(220, 38, 38, 0.4)",color:"#f87171",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",whiteSpace:"nowrap"},children:"Revoke Access"})]},G)})})]}),W.length>0&&f.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.25rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[f.jsxs("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem"},children:["Pending Invitations (",W.length,")"]}),f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:W.map(G=>f.jsxs("div",{style:{background:"color-mix(in srgb, #f59e0b 10%, transparent)",border:"1px solid color-mix(in srgb, #f59e0b 30%, transparent)",padding:"0.75rem 1rem",borderRadius:"6px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"},children:[f.jsx("div",{style:{flex:1,minWidth:0},children:f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[f.jsx("code",{style:{fontSize:"0.85rem",background:"color-mix(in srgb, currentColor 10%, transparent)",padding:"0.2rem 0.5rem",borderRadius:"4px",wordBreak:"break-all"},children:G}),f.jsx("span",{style:{background:"color-mix(in srgb, #f59e0b 20%, transparent)",color:"#fbbf24",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600},children:"Pending"})]})}),f.jsx("button",{onClick:()=>P(G),style:{background:"transparent",border:"1px solid color-mix(in srgb, currentColor 30%, transparent)",color:"inherit",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",whiteSpace:"nowrap",opacity:.8},children:"Cancel Invite"})]},G))})]}),f.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.25rem",borderRadius:"8px"},children:[f.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem"},children:"Invite User"}),f.jsxs("form",{onSubmit:N,style:{display:"flex",gap:"0.75rem"},children:[f.jsx("input",{type:"text",value:d,onChange:G=>g(G.target.value),placeholder:"Enter Firebase User ID",style:{flex:1,padding:"0.6rem 0.8rem",borderRadius:"6px",border:"1px solid color-mix(in srgb, currentColor 20%, transparent)",background:"color-mix(in srgb, currentColor 5%, transparent)",fontSize:"0.95rem",color:"inherit"}}),f.jsx("button",{type:"submit",disabled:p||!d.trim(),style:{background:"#646cff",color:"white",border:"none",padding:"0.6rem 1.25rem",borderRadius:"6px",cursor:p||!d.trim()?"not-allowed":"pointer",fontWeight:500,opacity:p||!d.trim()?.7:1,whiteSpace:"nowrap"},children:p?"Inviting...":"Send Invite"})]}),f.jsx("p",{style:{margin:"1rem 0 0 0",fontSize:"0.85rem",opacity:.6},children:" The invited user will need to accept the invitation from their Account page using this budget's ID:"}),f.jsx("code",{style:{display:"block",marginTop:"0.5rem",padding:"0.5rem 0.75rem",background:"color-mix(in srgb, currentColor 10%, transparent)",borderRadius:"6px",fontSize:"0.85rem",wordBreak:"break-all"},children:i.id})]})]})}function vc(){return f.jsx("span",{style:{display:"inline-block",width:"14px",height:"14px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTopColor:"white",borderRadius:"50%",animation:"spin 0.8s linear infinite",marginRight:"0.5rem",verticalAlign:"middle"}})}function $k(){const i=ru(),{currentBudget:e}=os(),n=C.useRef(!1),[s,o]=C.useState({ownerIdInFirestore:null,ownerEmailInFirestore:null,accountTypeMigrationNeeded:!1,accountsWithOldType:0,userDocsMigrationNeeded:!1,usersToMigrate:0,acceptedUserIdsMigrationNeeded:!1,loading:!0}),[c,d]=C.useState(!1),[g,p]=C.useState(null),[y,b]=C.useState(!1),[S,w]=C.useState(null),[O,N]=C.useState(!1),[P,j]=C.useState(null),[W,G]=C.useState(!1),[re,Ce]=C.useState(null),[je,xe]=C.useState(!1),[R,A]=C.useState(null),I=Ya(oa),V=i.get_current_firebase_user();C.useEffect(()=>{async function M(){if(!e||n.current){e||o({ownerIdInFirestore:null,ownerEmailInFirestore:null,accountTypeMigrationNeeded:!1,accountsWithOldType:0,userDocsMigrationNeeded:!1,usersToMigrate:0,acceptedUserIdsMigrationNeeded:!1,loading:!1});return}n.current=!0;try{const L=qe(I,"budgets",e.id),Q=await ot(L);if(Q.exists()){const Y=Q.data(),Oe=(Y.accounts||[]).filter(ct=>ct.account_type!==void 0),ze=Y.user_ids||[];let $e=0;for(const ct of ze){const Xt=qe(I,"users",ct),_n=await ot(Xt);_n.exists()&&_n.data().budget_ids?.includes(e.id)||$e++}const Ze=Y.accepted_user_ids===void 0;o({ownerIdInFirestore:Y.owner_id||null,ownerEmailInFirestore:Y.owner_email||null,accountTypeMigrationNeeded:Oe.length>0,accountsWithOldType:Oe.length,userDocsMigrationNeeded:$e>0,usersToMigrate:$e,acceptedUserIdsMigrationNeeded:Ze,loading:!1})}else o({ownerIdInFirestore:null,ownerEmailInFirestore:null,accountTypeMigrationNeeded:!1,accountsWithOldType:0,userDocsMigrationNeeded:!1,usersToMigrate:0,acceptedUserIdsMigrationNeeded:!1,loading:!1})}catch{o({ownerIdInFirestore:null,ownerEmailInFirestore:null,accountTypeMigrationNeeded:!1,accountsWithOldType:0,userDocsMigrationNeeded:!1,usersToMigrate:0,acceptedUserIdsMigrationNeeded:!1,loading:!1})}}M()},[e,I]);async function U(){if(!(!e||!V)){d(!0),p(null);try{const M=qe(I,"budgets",e.id),L=await ot(M);if(!L.exists())throw new Error("Budget document not found");const Q=L.data();if(Q.owner_id){p(`Owner ID already set: ${Q.owner_id}`),o(ce=>({...ce,ownerIdInFirestore:Q.owner_id})),d(!1);return}const Y=Q.user_ids?.[0]||V.uid;await dt(M,{...Q,owner_id:Y}),o(ce=>({...ce,ownerIdInFirestore:Y})),p(`Successfully added owner ID: ${Y}`)}catch(M){p(`Error: ${M instanceof Error?M.message:"Migration failed"}`)}finally{d(!1)}}}async function F(){if(!(!e||!V)){b(!0),w(null);try{const M=qe(I,"budgets",e.id),L=await ot(M);if(!L.exists())throw new Error("Budget document not found");const Q=L.data();if(Q.owner_email){w(`Owner email already set: ${Q.owner_email}`),o(Y=>({...Y,ownerEmailInFirestore:Q.owner_email})),b(!1);return}if(Q.owner_id!==V.uid)throw new Error("Only the budget owner can run this migration");await dt(M,{...Q,owner_email:V.email||null}),o(Y=>({...Y,ownerEmailInFirestore:V.email||null})),w(`Successfully added owner email: ${V.email}`)}catch(M){w(`Error: ${M instanceof Error?M.message:"Migration failed"}`)}finally{b(!1)}}}async function k(){if(!(!e||!V)){N(!0),j(null);try{const M=qe(I,"budgets",e.id),L=await ot(M);if(!L.exists())throw new Error("Budget document not found");const Q=L.data(),Y=Q.accounts||[],ce=Q.account_groups||[],Oe=Y.filter(it=>it.account_type!==void 0);if(Oe.length===0){j("No accounts need migration - already using new format"),o(it=>({...it,accountTypeMigrationNeeded:!1,accountsWithOldType:0})),N(!1);return}const ze={checking:{name:"Checking",expected_balance:"positive"},savings:{name:"Savings",expected_balance:"positive"},credit_card:{name:"Credit Card",expected_balance:"negative"}},$e=[...new Set(Oe.map(it=>it.account_type))],Ze={},ct=[...ce];let Xt=ce.length>0?Math.max(...ce.map(it=>it.sort_order))+1:0;for(const it of $e){const Vt=ze[it]||{name:it,expected_balance:"positive"},He=ct.find(ke=>ke.name.toLowerCase()===Vt.name.toLowerCase());if(He)Ze[it]=He.id;else{const ke={id:`account_group_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:Vt.name,sort_order:Xt++,expected_balance:Vt.expected_balance};ct.push(ke),Ze[it]=ke.id}}const _n=Y.map(it=>{if(it.account_type!==void 0){const{account_type:Vt,...He}=it;return{...He,account_group_id:Ze[Vt]||null}}return it});await dt(M,{...Q,accounts:_n,account_groups:ct}),o(it=>({...it,accountTypeMigrationNeeded:!1,accountsWithOldType:0}));const Bn=ct.length-ce.length;j(`Successfully migrated ${Oe.length} account(s). Created ${Bn} new account type(s): ${$e.map(it=>ze[it]?.name||it).join(", ")}`)}catch(M){j(`Error: ${M instanceof Error?M.message:"Migration failed"}`)}finally{N(!1)}}}async function rt(){if(!(!e||!V)){G(!0),Ce(null);try{const M=qe(I,"budgets",e.id),L=await ot(M);if(!L.exists())throw new Error("Budget document not found");const Y=L.data().user_ids||[];let ce=0,Oe=0;for(const ze of Y){const $e=qe(I,"users",ze),Ze=await ot($e);if(!Ze.exists())await dt($e,{uid:ze,email:null,budget_ids:[e.id],created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),Oe++,ce++;else{const ct=Ze.data();ct.budget_ids?.includes(e.id)||(await dt($e,{...ct,budget_ids:[...ct.budget_ids||[],e.id],updated_at:new Date().toISOString()}),ce++)}}o(ze=>({...ze,userDocsMigrationNeeded:!1,usersToMigrate:0})),Ce(ce===0?"All user documents are already up to date":`Successfully migrated ${ce} user(s). Created ${Oe} new user document(s), updated ${ce-Oe} existing.`)}catch(M){Ce(`Error: ${M instanceof Error?M.message:"Migration failed"}`)}finally{G(!1)}}}async function Ge(){if(!(!e||!V)){xe(!0),A(null);try{const M=qe(I,"budgets",e.id),L=await ot(M);if(!L.exists())throw new Error("Budget document not found");const Q=L.data();if(Q.accepted_user_ids!==void 0){A("accepted_user_ids field already exists"),o(ce=>({...ce,acceptedUserIdsMigrationNeeded:!1})),xe(!1);return}const Y=Q.user_ids||[];await dt(M,{...Q,accepted_user_ids:Y}),o(ce=>({...ce,acceptedUserIdsMigrationNeeded:!1})),A(`Successfully added accepted_user_ids field with ${Y.length} user(s) marked as accepted.`)}catch(M){A(`Error: ${M instanceof Error?M.message:"Migration failed"}`)}finally{xe(!1)}}}const ee=!!s.ownerIdInFirestore,q=!!s.ownerEmailInFirestore,De=s.accountTypeMigrationNeeded,Me=s.userDocsMigrationNeeded,Xe=s.acceptedUserIdsMigrationNeeded;return s.loading?f.jsxs("div",{children:[f.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),f.jsx("h2",{style:{marginTop:0},children:"Data Migrations"}),f.jsx("p",{style:{opacity:.7},children:"Checking migration status..."})]}):f.jsxs("div",{children:[f.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),f.jsx("h2",{style:{marginTop:0},children:"Data Migrations"}),f.jsx("p",{style:{opacity:.7,marginBottom:"1.5rem"},children:"Run migrations to update your budget data structure with new fields."}),f.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.5rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[f.jsxs("h3",{style:{marginTop:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("span",{style:{background:ee?"rgba(34, 197, 94, 0.2)":"rgba(100, 108, 255, 0.2)",color:ee?"#4ade80":"#a5b4fc",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600},children:ee?"Complete":"Step 1"}),"Add Owner ID to Budget"]}),f.jsx("p",{style:{opacity:.7,marginBottom:"1rem"},children:"Sets the budget owner to the first user in the user list (the original creator)."}),c?f.jsxs("div",{style:{background:"rgba(100, 108, 255, 0.1)",border:"1px solid rgba(100, 108, 255, 0.3)",color:"#a5b4fc",padding:"0.75rem 1rem",borderRadius:"8px",display:"flex",alignItems:"center"},children:[f.jsx(vc,{})," Running migration..."]}):ee?f.jsxs("div",{style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#4ade80",padding:"0.75rem 1rem",borderRadius:"8px"},children:[" Owner ID already set: ",f.jsx("strong",{children:s.ownerIdInFirestore})]}):f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:U,disabled:!V,style:{background:"#646cff",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:V?"pointer":"not-allowed",fontWeight:500,opacity:V?1:.7},children:"Add Owner ID"}),g&&f.jsx("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",borderRadius:"8px",background:g.startsWith("Error")?"rgba(220, 38, 38, 0.1)":"rgba(34, 197, 94, 0.1)",border:g.startsWith("Error")?"1px solid rgba(220, 38, 38, 0.3)":"1px solid rgba(34, 197, 94, 0.3)",color:g.startsWith("Error")?"#f87171":"#4ade80"},children:g})]})]}),f.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.5rem",borderRadius:"8px",opacity:ee?1:.5},children:[f.jsxs("h3",{style:{marginTop:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("span",{style:{background:q?"rgba(34, 197, 94, 0.2)":"rgba(100, 108, 255, 0.2)",color:q?"#4ade80":"#a5b4fc",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600},children:q?"Complete":"Step 2"}),"Add Owner Email to Budget"]}),f.jsxs("p",{style:{opacity:.7,marginBottom:"1rem"},children:["Stores the budget owner's email for display purposes.",V?.email&&f.jsxs(f.Fragment,{children:[" Your email: ",f.jsx("strong",{children:V.email})]})]}),!ee&&f.jsx("div",{style:{background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",color:"#fbbf24",padding:"0.75rem 1rem",borderRadius:"8px"},children:" Complete Step 1 first (Add Owner ID)"}),ee&&y&&f.jsxs("div",{style:{background:"rgba(100, 108, 255, 0.1)",border:"1px solid rgba(100, 108, 255, 0.3)",color:"#a5b4fc",padding:"0.75rem 1rem",borderRadius:"8px",display:"flex",alignItems:"center"},children:[f.jsx(vc,{})," Running migration..."]}),ee&&!y&&q&&f.jsxs("div",{style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#4ade80",padding:"0.75rem 1rem",borderRadius:"8px"},children:[" Owner email already set: ",f.jsx("strong",{children:s.ownerEmailInFirestore})]}),ee&&!y&&!q&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:F,disabled:!V,style:{background:"#646cff",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:V?"pointer":"not-allowed",fontWeight:500,opacity:V?1:.7},children:"Add Owner Email"}),S&&f.jsx("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",borderRadius:"8px",background:S.startsWith("Error")?"rgba(220, 38, 38, 0.1)":"rgba(34, 197, 94, 0.1)",border:S.startsWith("Error")?"1px solid rgba(220, 38, 38, 0.3)":"1px solid rgba(34, 197, 94, 0.3)",color:S.startsWith("Error")?"#f87171":"#4ade80"},children:S})]})]}),f.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.5rem",borderRadius:"8px",marginTop:"1.5rem"},children:[f.jsxs("h3",{style:{marginTop:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("span",{style:{background:De?"rgba(100, 108, 255, 0.2)":"rgba(34, 197, 94, 0.2)",color:De?"#a5b4fc":"#4ade80",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600},children:De?"Step 3":"Complete"}),"Migrate Account Types to Groups"]}),f.jsx("p",{style:{opacity:.7,marginBottom:"1rem"},children:"Converts the old fixed account types (Checking, Savings, Credit Card) to customizable account groups. This creates account groups for each existing type and updates your accounts to reference them."}),O?f.jsxs("div",{style:{background:"rgba(100, 108, 255, 0.1)",border:"1px solid rgba(100, 108, 255, 0.3)",color:"#a5b4fc",padding:"0.75rem 1rem",borderRadius:"8px",display:"flex",alignItems:"center"},children:[f.jsx(vc,{})," Running migration..."]}):De?f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",color:"#fbbf24",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1rem"},children:[" Found ",s.accountsWithOldType," account(s) using the old format"]}),f.jsx("button",{onClick:k,disabled:!V,style:{background:"#646cff",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:V?"pointer":"not-allowed",fontWeight:500,opacity:V?1:.7},children:"Migrate Account Types"}),P&&f.jsx("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",borderRadius:"8px",background:P.startsWith("Error")?"rgba(220, 38, 38, 0.1)":"rgba(34, 197, 94, 0.1)",border:P.startsWith("Error")?"1px solid rgba(220, 38, 38, 0.3)":"1px solid rgba(34, 197, 94, 0.3)",color:P.startsWith("Error")?"#f87171":"#4ade80"},children:P})]}):f.jsx("div",{style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#4ade80",padding:"0.75rem 1rem",borderRadius:"8px"},children:" All accounts are using the new group format"})]}),f.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.5rem",borderRadius:"8px",marginTop:"1.5rem"},children:[f.jsxs("h3",{style:{marginTop:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("span",{style:{background:Me?"rgba(100, 108, 255, 0.2)":"rgba(34, 197, 94, 0.2)",color:Me?"#a5b4fc":"#4ade80",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600},children:Me?"Step 4":"Complete"}),"Migrate User Documents (Budget Access)"]}),f.jsxs("p",{style:{opacity:.7,marginBottom:"1rem"},children:["Creates user documents in the ",f.jsx("code",{style:{background:"color-mix(in srgb, currentColor 10%, transparent)",padding:"0.1rem 0.4rem",borderRadius:"4px"},children:"users"})," collection and populates their ",f.jsx("code",{style:{background:"color-mix(in srgb, currentColor 10%, transparent)",padding:"0.1rem 0.4rem",borderRadius:"4px"},children:"budget_ids"})," array. This is required for the new permission system where user documents are the source of truth for budget access."]}),W?f.jsxs("div",{style:{background:"rgba(100, 108, 255, 0.1)",border:"1px solid rgba(100, 108, 255, 0.3)",color:"#a5b4fc",padding:"0.75rem 1rem",borderRadius:"8px",display:"flex",alignItems:"center"},children:[f.jsx(vc,{})," Running migration..."]}):Me?f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",color:"#fbbf24",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1rem"},children:[" Found ",s.usersToMigrate," user(s) needing user document migration"]}),f.jsx("button",{onClick:rt,disabled:!V,style:{background:"#646cff",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:V?"pointer":"not-allowed",fontWeight:500,opacity:V?1:.7},children:"Migrate User Documents"}),re&&f.jsx("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",borderRadius:"8px",background:re.startsWith("Error")?"rgba(220, 38, 38, 0.1)":"rgba(34, 197, 94, 0.1)",border:re.startsWith("Error")?"1px solid rgba(220, 38, 38, 0.3)":"1px solid rgba(34, 197, 94, 0.3)",color:re.startsWith("Error")?"#f87171":"#4ade80"},children:re})]}):f.jsx("div",{style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#4ade80",padding:"0.75rem 1rem",borderRadius:"8px"},children:" All user documents are set up with budget access"})]}),f.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.5rem",borderRadius:"8px",marginTop:"1.5rem"},children:[f.jsxs("h3",{style:{marginTop:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("span",{style:{background:Xe?"rgba(100, 108, 255, 0.2)":"rgba(34, 197, 94, 0.2)",color:Xe?"#a5b4fc":"#4ade80",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600},children:Xe?"Step 5":"Complete"}),"Add Accepted Users Tracking"]}),f.jsxs("p",{style:{opacity:.7,marginBottom:"1rem"},children:["Adds the ",f.jsx("code",{style:{background:"color-mix(in srgb, currentColor 10%, transparent)",padding:"0.1rem 0.4rem",borderRadius:"4px"},children:"accepted_user_ids"})," field to track which invited users have accepted. For existing budgets, all current users are marked as accepted."]}),je?f.jsxs("div",{style:{background:"rgba(100, 108, 255, 0.1)",border:"1px solid rgba(100, 108, 255, 0.3)",color:"#a5b4fc",padding:"0.75rem 1rem",borderRadius:"8px",display:"flex",alignItems:"center"},children:[f.jsx(vc,{})," Running migration..."]}):Xe?f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:Ge,disabled:!V,style:{background:"#646cff",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:V?"pointer":"not-allowed",fontWeight:500,opacity:V?1:.7},children:"Add Accepted Users Field"}),R&&f.jsx("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",borderRadius:"8px",background:R.startsWith("Error")?"rgba(220, 38, 38, 0.1)":"rgba(34, 197, 94, 0.1)",border:R.startsWith("Error")?"1px solid rgba(220, 38, 38, 0.3)":"1px solid rgba(34, 197, 94, 0.3)",color:R.startsWith("Error")?"#f87171":"#4ade80"},children:R})]}):f.jsx("div",{style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#4ade80",padding:"0.75rem 1rem",borderRadius:"8px"},children:" Budget already has accepted_user_ids tracking"})]})]})}const _h={critical_bug:{label:"Critical Bug",color:"#ff4757",bgColor:"rgba(255, 71, 87, 0.15)"},bug:{label:"Bug",color:"#ffa502",bgColor:"rgba(255, 165, 2, 0.15)"},new_feature:{label:"New Feature",color:"#2ed573",bgColor:"rgba(46, 213, 115, 0.15)"},core_feature:{label:"Core Feature",color:"#1e90ff",bgColor:"rgba(30, 144, 255, 0.15)"},qol:{label:"QOL",color:"#a55eea",bgColor:"rgba(165, 94, 234, 0.15)"}};function Wk(){const[i,e]=C.useState([]),[n,s]=C.useState(!0),[o,c]=C.useState(null),[d,g]=C.useState(null),[p,y]=C.useState(null),[b,S]=C.useState(!1),[w,O]=C.useState(""),[N,P]=C.useState("bug"),[j,W]=C.useState(!1),[G,re]=C.useState(null),[Ce,je]=C.useState(null),xe=C.useContext(qc),R=Ya(oa);C.useEffect(()=>{A()},[]);async function A(){try{const L=Va(R,"feedback"),Q=await La(L),Y=[];Q.forEach(ce=>{const Oe=ce.data();Oe.items&&Oe.items.forEach(ze=>{Y.push({...ze,user_email:Oe.user_email,doc_id:ce.id})})}),e(Y)}catch(L){c(L instanceof Error?L.message:"Failed to load feedback")}finally{s(!1)}}async function I(L){if(L.preventDefault(),!(!w.trim()||!xe.username)){W(!0),c(null);try{const Q=xe.username.replace(/[.@]/g,"_"),Y=qe(R,"feedback",Q),ce={id:`feedback_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,text:w.trim(),created_at:new Date().toISOString(),is_done:!1,completed_at:null,sort_order:Date.now(),feedback_type:N};(await ot(Y)).exists()?await dt(Y,{items:wx(ce)},{merge:!0}):await dt(Y,{user_email:xe.username,items:[ce]}),e(ze=>[...ze,{...ce,user_email:xe.username,doc_id:Q}]),O(""),P("bug"),S(!1)}catch(Q){c(Q instanceof Error?Q.message:"Failed to add feedback")}finally{W(!1)}}}async function V(L){try{const Q=qe(R,"feedback",L.doc_id),Y=await ot(Q);if(Y.exists()){const ce=Y.data(),Oe=ce.items.map(ze=>ze.id===L.id?{id:L.id,text:L.text,created_at:L.created_at,is_done:L.is_done,completed_at:L.completed_at,sort_order:L.sort_order,feedback_type:L.feedback_type||"bug"}:ze);await dt(Q,{...ce,items:Oe})}}catch(Q){c(Q instanceof Error?Q.message:"Failed to update feedback")}}function U(L){L.is_done?F(L):re(L)}async function F(L){const Q={...L,is_done:!L.is_done,completed_at:L.is_done?null:new Date().toISOString()};e(Y=>Y.map(ce=>ce.id===L.id?Q:ce)),await V(Q)}function k(){G&&(F(G),re(null))}async function rt(L){if(!Ce)return;const Q={...Ce,feedback_type:L};e(Y=>Y.map(ce=>ce.id===Ce.id?Q:ce)),je(null),await V(Q)}const Ge=i.filter(L=>!L.is_done).sort((L,Q)=>L.sort_order-Q.sort_order),ee=i.filter(L=>L.is_done).sort((L,Q)=>{const Y=L.completed_at?new Date(L.completed_at).getTime():0;return(Q.completed_at?new Date(Q.completed_at).getTime():0)-Y});function q(L,Q){g(Q),L.dataTransfer.effectAllowed="move"}function De(L,Q){L.preventDefault(),Q!==d&&y(Q)}function Me(){y(null)}function Xe(){g(null),y(null)}async function M(L,Q){if(L.preventDefault(),!d||d===Q){Xe();return}const Y=Ge.findIndex($e=>$e.id===d),ce=[...Ge],[Oe]=ce.splice(Y,1);if(Q==="__end__")ce.push(Oe);else{const $e=ce.findIndex(Ze=>Ze.id===Q);ce.splice($e,0,Oe)}const ze=ce.map(($e,Ze)=>({...$e,sort_order:Ze}));e($e=>[...$e.filter(Ze=>Ze.is_done),...ze]),Xe();for(const $e of ze)await V($e)}return n?f.jsx("p",{children:"Loading feedback..."}):f.jsxs("div",{children:[f.jsx("h2",{style:{marginTop:0},children:"Feedback"}),f.jsx("p",{style:{...qh,fontSize:"0.9rem"},children:"View and manage user feedback. Drag to reorder pending items."}),o&&f.jsx(au,{message:o,onDismiss:()=>c(null)}),f.jsxs("div",{style:qa,children:[Ge.length===0&&!b&&f.jsx("p",{style:{opacity:.7},children:"No pending feedback."}),Ge.map(L=>f.jsx(Yk,{item:L,isDragging:d===L.id,isDragOver:p===L.id,onDragStart:Q=>q(Q,L.id),onDragOver:Q=>De(Q,L.id),onDragLeave:Me,onDragEnd:Xe,onDrop:Q=>M(Q,L.id),onToggleDone:()=>U(L),onTypeClick:()=>je(L)},L.id)),d&&Ge.length>0&&f.jsx(Hp,{isActive:p==="__end__",onDragOver:L=>De(L,"__end__"),onDragLeave:Me,onDrop:L=>M(L,"__end__")})]}),b?f.jsxs(Sl,{onSubmit:I,children:[f.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem",paddingBottom:"1rem",flexWrap:"wrap"},children:["critical_bug","bug","new_feature","core_feature","qol"].map(L=>{const Q=_h[L],Y=N===L;return f.jsxs("button",{type:"button",onClick:()=>P(L),style:{flex:1,padding:"0.6rem 0.75rem",border:`2px solid ${Q.color}`,borderRadius:"0.5rem",background:Y?Q.bgColor:"transparent",color:Y?Q.color:"rgba(255,255,255,0.5)",cursor:"pointer",fontWeight:Y?600:400,fontSize:"0.85rem",transition:"all 0.15s ease",opacity:Y?1:.5,boxShadow:Y?`0 0 12px ${Q.bgColor}`:"none",position:"relative"},children:[Q.label,Y&&f.jsx("span",{style:{position:"absolute",bottom:"-14px",left:"10%",right:"10%",height:"3px",background:"white",borderRadius:"2px"}})]},L)})}),f.jsx(Bp,{value:w,onChange:L=>O(L.target.value),placeholder:"Enter your feedback, bug report, or feature request...",autoFocus:!0,required:!0}),f.jsxs(Ka,{children:[f.jsx(_t,{type:"submit",isLoading:j,disabled:!w.trim(),children:"Add Feedback"}),f.jsx(_t,{type:"button",variant:"secondary",onClick:()=>{S(!1),O(""),P("bug")},children:"Cancel"})]})]}):f.jsx(_t,{variant:"primary-large",onClick:()=>S(!0),children:"+ Add Feedback"}),ee.length>0&&f.jsx(kk,{title:"Completed",count:ee.length,children:f.jsx("div",{style:{...qa,marginTop:"0.5rem"},children:ee.map(L=>f.jsxs("div",{style:{...iu,opacity:.6,flexDirection:"column",alignItems:"stretch",gap:"0.5rem"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[f.jsx("input",{type:"checkbox",checked:L.is_done,onChange:()=>U(L),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer",accentColor:Se.primary,flexShrink:0}}),f.jsx(d1,{type:L.feedback_type,onClick:()=>je(L)})]}),f.jsxs("div",{style:{marginLeft:"2rem"},children:[f.jsx("p",{style:{margin:0,lineHeight:1.5,textDecoration:"line-through"},children:L.text}),f.jsxs("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.8rem",opacity:.8},children:[L.user_email,"  Created: ",Pg(L.created_at)]}),L.completed_at&&f.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.8rem",color:Se.success},children:[" Completed: ",Pg(L.completed_at)]})]})]},L.id))})}),f.jsxs(Lg,{isOpen:G!==null,onClose:()=>re(null),title:"Mark as Complete",children:[f.jsx("p",{style:{margin:"0 0 1.5rem 0"},children:"Are you sure you want to mark this feedback item as complete?"}),G&&f.jsxs("p",{style:{margin:"0 0 1.5rem 0",padding:"0.75rem",background:"rgba(255,255,255,0.05)",borderRadius:"0.5rem",fontSize:"0.9rem"},children:['"',G.text,'"']}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[f.jsx(_t,{variant:"secondary",onClick:()=>re(null),children:"Cancel"}),f.jsx(_t,{variant:"primary",onClick:k,children:"Mark Complete"})]})]}),f.jsxs(Lg,{isOpen:Ce!==null,onClose:()=>je(null),title:"Change Feedback Type",children:[f.jsx("p",{style:{margin:"0 0 1rem 0",fontSize:"0.9rem",opacity:.8},children:"Select a new type for this feedback:"}),f.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",paddingBottom:"1rem",flexWrap:"wrap"},children:["critical_bug","bug","new_feature","core_feature","qol"].map(L=>{const Q=_h[L],Y=Ce?.feedback_type==="feature"?"new_feature":Ce?.feedback_type,ce=Y===L||!Y&&L==="bug";return f.jsxs("button",{type:"button",onClick:()=>rt(L),style:{flex:1,padding:"0.75rem 0.5rem",border:`2px solid ${Q.color}`,borderRadius:"0.5rem",background:ce?Q.bgColor:"transparent",color:ce?Q.color:"rgba(255,255,255,0.5)",cursor:"pointer",fontWeight:ce?600:400,fontSize:"0.85rem",transition:"all 0.15s ease",opacity:ce?1:.5,boxShadow:ce?`0 0 12px ${Q.bgColor}`:"none",position:"relative"},children:[Q.label,ce&&f.jsx("span",{style:{position:"absolute",bottom:"-14px",left:"10%",right:"10%",height:"3px",background:"white",borderRadius:"2px"}})]},L)})}),f.jsx(_t,{variant:"secondary",onClick:()=>je(null),style:{width:"100%"},children:"Cancel"})]})]})}function d1({type:i,onClick:e}){const n=i==="feature"?"new_feature":i,s=n&&n in _h?n:"bug",o=_h[s];return f.jsx("button",{type:"button",onClick:e,style:{padding:"0.25rem 0.5rem",borderRadius:"0.25rem",background:o.bgColor,color:o.color,fontSize:"0.7rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.025em",flexShrink:0,border:"none",cursor:"pointer",transition:"opacity 0.15s, transform 0.15s"},onMouseEnter:c=>{c.currentTarget.style.opacity="0.8",c.currentTarget.style.transform="scale(1.05)"},onMouseLeave:c=>{c.currentTarget.style.opacity="1",c.currentTarget.style.transform="scale(1)"},title:"Click to change type",children:o.label})}function Yk({item:i,isDragging:e,isDragOver:n,onDragStart:s,onDragOver:o,onDragLeave:c,onDragEnd:d,onDrop:g,onToggleDone:p,onTypeClick:y}){return f.jsxs("div",{onDragOver:b=>{b.stopPropagation(),o(b)},onDragLeave:b=>{b.stopPropagation(),c()},onDrop:b=>{b.stopPropagation(),g(b)},style:{position:"relative"},children:[f.jsx("div",{style:{...c1,opacity:n?1:0,boxShadow:n?"0 0 8px rgba(100, 108, 255, 0.6)":"none"}}),f.jsxs("div",{draggable:!0,onDragStart:s,onDragEnd:d,style:{...iu,cursor:"grab",opacity:e?.5:1,flexDirection:"column",alignItems:"stretch",gap:"0.5rem"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[f.jsx("span",{style:{...l1},children:""}),f.jsx("input",{type:"checkbox",checked:i.is_done,onChange:p,style:{width:"1.25rem",height:"1.25rem",cursor:"pointer",accentColor:Se.primary,flexShrink:0}}),f.jsx(d1,{type:i.feedback_type,onClick:y})]}),f.jsxs("div",{style:{marginLeft:"3.25rem"},children:[f.jsx("p",{style:{margin:0,lineHeight:1.5},children:i.text}),f.jsxs("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.8rem",opacity:.6},children:[i.user_email,"  ",Pg(i.created_at)]})]})]})]})}function Qk(){const{currentUserId:i}=os(),[e,n]=C.useState([]),[s,o]=C.useState(!1),c=Ya(oa);function d(O,N){n(P=>P.map(j=>j.name===O?{...j,...N}:j))}async function g(){o(!0),n([]),n([{name:"Read unauthorized budget",status:"pending",message:"",expectedToFail:!0},{name:"Read another user's document",status:"pending",message:"",expectedToFail:!0},{name:"Read unauthorized budget month",status:"pending",message:"",expectedToFail:!0},{name:"Toggle is_admin in own permission_flags",status:"pending",message:"",expectedToFail:!0},{name:"Toggle is_test in own permission_flags",status:"pending",message:"",expectedToFail:!0},{name:"Read own user document",status:"pending",message:"",expectedToFail:!1}]),await p("Read unauthorized budget",async()=>{const P=qe(c,"budgets","unauthorized_budget_test_12345");return await ot(P),"Was able to read budget (unexpected)"},!0),await p("Read another user's document",async()=>{const P=qe(c,"users","another_user_test_12345");return await ot(P),"Was able to read user document (unexpected)"},!0),await p("Read unauthorized budget month",async()=>{const j=qe(c,"months","unauthorized_budget_test_12345_2024_01");return await ot(j),"Was able to read month document for unauthorized budget (unexpected)"},!0),await p("Toggle is_admin in own permission_flags",async()=>{if(!i)throw new Error("Not authenticated");const N=qe(c,"users",i),j=(await ot(N)).data()?.permission_flags?.is_admin??!1;return await Od(N,{"permission_flags.is_admin":!j}),`Was able to change is_admin from ${j} to ${!j} (SECURITY ISSUE!)`},!0),await p("Toggle is_test in own permission_flags",async()=>{if(!i)throw new Error("Not authenticated");const N=qe(c,"users",i),j=(await ot(N)).data()?.permission_flags?.is_test??!1;return await Od(N,{"permission_flags.is_test":!j}),`Was able to change is_test from ${j} to ${!j} (SECURITY ISSUE!)`},!0),await p("Read own user document",async()=>{if(!i)throw new Error("Not authenticated");const N=qe(c,"users",i);if((await ot(N)).exists())return"Successfully read own document";throw new Error("Document does not exist")},!1),o(!1)}async function p(O,N,P){d(O,{status:"running",message:"Running..."});try{const j=await N();P?d(O,{status:"failed",message:` ${j}`}):d(O,{status:"passed",message:` ${j}`})}catch(j){const W=j instanceof Error?j.message:"Unknown error";P?d(O,{status:"passed",message:` Blocked as expected: ${W}`}):d(O,{status:"failed",message:` ${W}`})}}async function y(O){switch(e.find(P=>P.name===O)||n(P=>[...P,{name:O,status:"pending",message:"",expectedToFail:!0}]),o(!0),O){case"Read unauthorized budget":await p(O,async()=>{const j=qe(c,"budgets","unauthorized_budget_test_12345");return await ot(j),"Was able to read budget (unexpected)"},!0);break;case"Read another user's document":await p(O,async()=>{const j=qe(c,"users","another_user_test_12345");return await ot(j),"Was able to read user document (unexpected)"},!0);break;case"Read unauthorized budget month":await p(O,async()=>{const W=qe(c,"months","unauthorized_budget_test_12345_2024_01");return await ot(W),"Was able to read month document for unauthorized budget (unexpected)"},!0);break;case"Toggle is_admin in own permission_flags":await p(O,async()=>{if(!i)throw new Error("Not authenticated");const P=qe(c,"users",i),W=(await ot(P)).data()?.permission_flags?.is_admin??!1;return await Od(P,{"permission_flags.is_admin":!W}),`Was able to change is_admin from ${W} to ${!W} (SECURITY ISSUE!)`},!0);break;case"Toggle is_test in own permission_flags":await p(O,async()=>{if(!i)throw new Error("Not authenticated");const P=qe(c,"users",i),W=(await ot(P)).data()?.permission_flags?.is_test??!1;return await Od(P,{"permission_flags.is_test":!W}),`Was able to change is_test from ${W} to ${!W} (SECURITY ISSUE!)`},!0);break;case"Read own user document":await p(O,async()=>{if(!i)throw new Error("Not authenticated");const P=qe(c,"users",i);if((await ot(P)).exists())return"Successfully read own document";throw new Error("Document does not exist")},!1);break}o(!1)}const b=e.filter(O=>O.status==="passed").length,S=e.filter(O=>O.status==="failed").length,w=e.length;return f.jsxs("div",{children:[f.jsx("p",{style:qh,children:'Run security tests to verify Firestore rules are working correctly. Tests that are expected to fail (blocked by security rules) should show as "passed".'}),f.jsx("div",{style:{marginBottom:"1.5rem"},children:f.jsx(_t,{onClick:g,disabled:s,variant:"primary",children:s?"Running Tests...":"Run All Tests"})}),e.length>0&&f.jsx("div",{style:{marginBottom:"1.5rem"},children:f.jsxs("div",{style:{display:"flex",gap:"1rem",padding:"0.75rem 1rem",borderRadius:"8px",background:"color-mix(in srgb, currentColor 5%, transparent)",marginBottom:"1rem"},children:[f.jsxs("span",{children:["Total: ",f.jsx("strong",{children:w})]}),f.jsxs("span",{style:{color:Se.success},children:["Passed: ",f.jsx("strong",{children:b})]}),f.jsxs("span",{style:{color:Se.danger},children:["Failed: ",f.jsx("strong",{children:S})]})]})}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[f.jsx("h3",{style:{margin:"0.5rem 0"},children:"Individual Tests"}),f.jsx(Bo,{name:"Read unauthorized budget",description:"Try to read a budget the user doesn't have access to",expectedBehavior:"Should be blocked by Firestore rules",result:e.find(O=>O.name==="Read unauthorized budget"),onRun:()=>y("Read unauthorized budget"),disabled:s}),f.jsx(Bo,{name:"Read another user's document",description:"Try to read another user's profile document",expectedBehavior:"Should be blocked by Firestore rules",result:e.find(O=>O.name==="Read another user's document"),onRun:()=>y("Read another user's document"),disabled:s}),f.jsx(Bo,{name:"Read unauthorized budget month",description:"Try to read a month document for a budget you don't have access to",expectedBehavior:"Should be blocked - months inherit budget access",result:e.find(O=>O.name==="Read unauthorized budget month"),onRun:()=>y("Read unauthorized budget month"),disabled:s}),f.jsx(Bo,{name:"Toggle is_admin in own permission_flags",description:"Try to change your admin privileges (toggles current value)",expectedBehavior:"Should be blocked - permission_flags is protected",result:e.find(O=>O.name==="Toggle is_admin in own permission_flags"),onRun:()=>y("Toggle is_admin in own permission_flags"),disabled:s}),f.jsx(Bo,{name:"Toggle is_test in own permission_flags",description:"Try to change your test privileges (toggles current value)",expectedBehavior:"Should be blocked - permission_flags is protected",result:e.find(O=>O.name==="Toggle is_test in own permission_flags"),onRun:()=>y("Toggle is_test in own permission_flags"),disabled:s}),f.jsx(Bo,{name:"Read own user document",description:"Read your own user profile document",expectedBehavior:"Should succeed - users can read their own data",result:e.find(O=>O.name==="Read own user document"),onRun:()=>y("Read own user document"),disabled:s,expectedToSucceed:!0})]}),S>0&&f.jsxs(au,{style:{marginTop:"1.5rem"},children:[" ",S," test(s) failed! This may indicate a security vulnerability in your Firestore rules."]})]})}function Bo({name:i,description:e,expectedBehavior:n,result:s,onRun:o,disabled:c,expectedToSucceed:d}){const g=s?.status==="passed"?Se.success:s?.status==="failed"?Se.danger:s?.status==="running"?Se.warning:"inherit";return f.jsxs("div",{style:{...iu,display:"flex",flexDirection:"column",gap:"0.5rem"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem"},children:[f.jsxs("div",{style:{flex:1},children:[f.jsx("h4",{style:{margin:0,fontSize:"0.95rem"},children:i}),f.jsx("p",{style:{margin:"0.25rem 0 0",opacity:.7,fontSize:"0.85rem"},children:e}),f.jsxs("p",{style:{margin:"0.25rem 0 0",fontSize:"0.8rem",color:d?Se.success:Se.warning},children:["Expected: ",n]})]}),f.jsx(_t,{onClick:o,disabled:c,variant:"secondary",style:{flexShrink:0},children:s?.status==="running"?"":"Run"})]}),s&&s.status!=="pending"&&f.jsx("div",{style:{padding:"0.5rem 0.75rem",borderRadius:"6px",background:`color-mix(in srgb, ${g} 15%, transparent)`,border:`1px solid color-mix(in srgb, ${g} 30%, transparent)`,fontSize:"0.85rem",color:g},children:s.message})]})}function Kk(){const{currentBudget:i,currentUserId:e,accessibleBudgets:n,loadAccessibleBudgets:s,switchToBudget:o,acceptBudgetInvite:c,checkBudgetInvite:d,renameBudget:g,loading:p}=os(),[y,b]=C.useState(!1),[S,w]=C.useState(null),[O,N]=C.useState(null),[P,j]=C.useState(null),[W,G]=C.useState(null),[re,Ce]=C.useState(null),[je,xe]=C.useState(""),[R,A]=C.useState(!1),[I,V]=C.useState(""),[U,F]=C.useState(!1),[k,rt]=C.useState(null);C.useEffect(()=>{async function Y(){b(!0),await s(),b(!1)}Y()},[]);async function Ge(Y){if(Y!==i?.id){w(Y),j(null),G(null);try{await o(Y),G("Switched to budget successfully!"),await s()}catch(ce){j(ce instanceof Error?ce.message:"Failed to switch budget")}finally{w(null)}}}async function ee(Y){N(Y),j(null),G(null);try{await c(Y),G("Invitation accepted! You now have access to this budget."),await s()}catch(ce){j(ce instanceof Error?ce.message:"Failed to accept invitation")}finally{N(null)}}async function q(Y){if(Y.preventDefault(),!!I.trim()){F(!0),j(null),rt(null);try{const ce=await d(I.trim());ce?rt(ce):j("No pending invitation found for this budget ID. Make sure you've been invited by the budget owner.")}catch(ce){j(ce instanceof Error?ce.message:"Failed to check invitation")}finally{F(!1)}}}async function De(){if(k){N(k.budgetId),j(null);try{await c(k.budgetId),G(`Successfully joined "${k.budgetName}"!`),rt(null),V(""),await s()}catch(Y){j(Y instanceof Error?Y.message:"Failed to accept invitation")}finally{N(null)}}}function Me(Y,ce){xe(ce),Ce(Y)}function Xe(){Ce(null),xe("")}async function M(Y){if(Y.preventDefault(),!(!je.trim()||!re)){A(!0),j(null),G(null);try{await g(je.trim()),G("Budget renamed successfully!"),Ce(null),await s()}catch(ce){j(ce instanceof Error?ce.message:"Failed to rename budget")}finally{A(!1)}}}const L=n.filter(Y=>!Y.isPending),Q=n.filter(Y=>Y.isPending);return p||y?f.jsx("p",{children:"Loading your budgets..."}):f.jsxs("div",{children:[f.jsx("h2",{style:{marginTop:0},children:"My Budgets"}),f.jsx("p",{style:{opacity:.7,marginBottom:"1.5rem"},children:"Manage your budgets, switch between them, and accept new invitations."}),P&&f.jsxs("div",{style:{background:"rgba(220, 38, 38, 0.1)",border:"1px solid rgba(220, 38, 38, 0.3)",color:"#f87171",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsx("span",{children:P}),f.jsx("button",{onClick:()=>j(null),style:{background:"transparent",border:"none",color:"#f87171",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.25rem",lineHeight:1},children:""})]}),W&&f.jsxs("div",{style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#4ade80",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsx("span",{children:W}),f.jsx("button",{onClick:()=>G(null),style:{background:"transparent",border:"none",color:"#4ade80",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.25rem",lineHeight:1},children:""})]}),Q.length>0&&f.jsxs("div",{style:{background:"color-mix(in srgb, #f59e0b 10%, transparent)",border:"1px solid color-mix(in srgb, #f59e0b 30%, transparent)",padding:"1.25rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[f.jsxs("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("span",{children:""})," Pending Invitations (",Q.length,")"]}),f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:Q.map(Y=>f.jsx(dE,{budget:Y,isCurrent:!1,isAccepting:O===Y.id,isSwitching:!1,isEditing:!1,editName:"",isRenaming:!1,onAccept:()=>ee(Y.id),onSwitch:()=>{},onStartEdit:()=>{},onCancelEdit:()=>{},onEditNameChange:()=>{},onSaveEdit:()=>{}},Y.id))})]}),f.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.25rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[f.jsxs("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("span",{children:""})," Your Budgets (",L.length,")"]}),L.length===0?f.jsx("p",{style:{opacity:.6,margin:0},children:"You don't have access to any budgets yet."}):f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:L.map(Y=>{const ce=Y.id===i?.id,Oe=re===Y.id;return f.jsx(dE,{budget:Y,isCurrent:ce,isAccepting:!1,isSwitching:S===Y.id,isEditing:Oe,editName:Oe?je:"",isRenaming:R,onAccept:()=>{},onSwitch:()=>Ge(Y.id),onStartEdit:()=>Me(Y.id,Y.name),onCancelEdit:Xe,onEditNameChange:xe,onSaveEdit:M},Y.id)})})]}),f.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.25rem",borderRadius:"8px"},children:[f.jsxs("h3",{style:{margin:"0 0 0.75rem 0",fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("span",{children:""})," Join Budget by ID"]}),f.jsx("p",{style:{margin:"0 0 1rem 0",fontSize:"0.9rem",opacity:.7},children:"If someone shared a budget ID with you, enter it below to accept the invitation:"}),k?f.jsxs("div",{style:{background:"color-mix(in srgb, #22c55e 10%, transparent)",border:"1px solid color-mix(in srgb, #22c55e 30%, transparent)",padding:"1rem",borderRadius:"8px"},children:[f.jsx("p",{style:{margin:"0 0 0.75rem 0",fontWeight:500},children:" You've been invited to join:"}),f.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 8%, transparent)",padding:"0.75rem 1rem",borderRadius:"6px",marginBottom:"1rem"},children:[f.jsx("p",{style:{margin:"0 0 0.25rem 0",fontWeight:600,fontSize:"1.1rem"},children:k.budgetName}),k.ownerEmail&&f.jsxs("p",{style:{margin:0,fontSize:"0.9rem",opacity:.7},children:["Owner: ",k.ownerEmail]})]}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[f.jsx("button",{onClick:De,disabled:O===k.budgetId,style:{background:"#22c55e",color:"white",border:"none",padding:"0.6rem 1.25rem",borderRadius:"6px",cursor:O===k.budgetId?"not-allowed":"pointer",fontWeight:500,opacity:O===k.budgetId?.7:1},children:O===k.budgetId?"Accepting...":"Accept Invitation"}),f.jsx("button",{onClick:()=>{rt(null),V("")},disabled:O===k.budgetId,style:{background:"transparent",color:"inherit",border:"1px solid color-mix(in srgb, currentColor 30%, transparent)",padding:"0.6rem 1.25rem",borderRadius:"6px",cursor:O===k.budgetId?"not-allowed":"pointer",fontWeight:500,opacity:O===k.budgetId?.7:.8},children:"Cancel"})]})]}):f.jsxs("form",{onSubmit:q,style:{display:"flex",gap:"0.75rem"},children:[f.jsx("input",{type:"text",value:I,onChange:Y=>V(Y.target.value),placeholder:"Enter Budget ID",style:{flex:1,padding:"0.6rem 0.8rem",borderRadius:"6px",border:"1px solid color-mix(in srgb, currentColor 20%, transparent)",background:"color-mix(in srgb, currentColor 5%, transparent)",fontSize:"0.95rem",color:"inherit"}}),f.jsx("button",{type:"submit",disabled:U||!I.trim(),style:{background:"#646cff",color:"white",border:"none",padding:"0.6rem 1.25rem",borderRadius:"6px",cursor:U||!I.trim()?"not-allowed":"pointer",fontWeight:500,opacity:U||!I.trim()?.7:1,whiteSpace:"nowrap"},children:U?"Checking...":"Check Invite"})]})]}),e&&f.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"color-mix(in srgb, currentColor 3%, transparent)",borderRadius:"6px",fontSize:"0.85rem",opacity:.7},children:[f.jsx("p",{style:{margin:"0 0 0.5rem 0"},children:" Share your User ID with budget owners so they can invite you:"}),f.jsx("code",{style:{display:"block",padding:"0.5rem 0.75rem",background:"color-mix(in srgb, currentColor 8%, transparent)",borderRadius:"4px",fontSize:"0.8rem",wordBreak:"break-all"},children:e})]})]})}function dE({budget:i,isCurrent:e,isAccepting:n,isSwitching:s,isEditing:o,editName:c,isRenaming:d,onAccept:g,onSwitch:p,onStartEdit:y,onCancelEdit:b,onEditNameChange:S,onSaveEdit:w}){const O=e&&i.isOwner;return f.jsx("div",{style:{background:e?"color-mix(in srgb, #646cff 15%, transparent)":"color-mix(in srgb, currentColor 8%, transparent)",border:e?"2px solid color-mix(in srgb, #646cff 50%, transparent)":"1px solid transparent",padding:"1rem",borderRadius:"8px"},children:o?f.jsxs("form",{onSubmit:w,children:[f.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:f.jsx("input",{type:"text",value:c,onChange:N=>S(N.target.value),placeholder:"Budget name",autoFocus:!0,style:{flex:1,padding:"0.5rem 0.75rem",borderRadius:"6px",border:"1px solid color-mix(in srgb, currentColor 30%, transparent)",background:"color-mix(in srgb, currentColor 5%, transparent)",fontSize:"1rem",fontWeight:600,color:"inherit"}})}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[f.jsx("button",{type:"submit",disabled:d||!c.trim(),style:{background:"#22c55e",color:"white",border:"none",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:d||!c.trim()?"not-allowed":"pointer",fontWeight:500,opacity:d||!c.trim()?.7:1,fontSize:"0.8rem"},children:d?"Saving...":"Save"}),f.jsx("button",{type:"button",onClick:b,disabled:d,style:{background:"transparent",color:"inherit",border:"1px solid color-mix(in srgb, currentColor 30%, transparent)",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:d?"not-allowed":"pointer",fontWeight:500,opacity:d?.7:.8,fontSize:"0.8rem"},children:"Cancel"})]})]}):f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[f.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap",marginBottom:"0.25rem"},children:[f.jsx("span",{style:{fontWeight:600},children:i.name}),i.isOwner&&f.jsx("span",{style:{background:"color-mix(in srgb, #646cff 20%, transparent)",color:"#a5b4fc",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.65rem",textTransform:"uppercase",fontWeight:600},children:"Owner"}),e&&f.jsx("span",{style:{background:"color-mix(in srgb, #22c55e 20%, transparent)",color:"#4ade80",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.65rem",textTransform:"uppercase",fontWeight:600},children:"Active"}),i.isPending&&f.jsx("span",{style:{background:"color-mix(in srgb, #f59e0b 20%, transparent)",color:"#fbbf24",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.65rem",textTransform:"uppercase",fontWeight:600},children:"Pending"}),O&&f.jsx("button",{onClick:y,style:{background:"transparent",border:"none",padding:"0.15rem",cursor:"pointer",opacity:.5,fontSize:"0.8rem",lineHeight:1},title:"Rename budget",children:""})]}),f.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.6},children:i.ownerEmail?`Owner: ${i.ownerEmail}`:`ID: ${i.id}`})]}),f.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:i.isPending?f.jsx("button",{onClick:g,disabled:n,style:{background:"#22c55e",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"6px",cursor:n?"not-allowed":"pointer",fontWeight:500,opacity:n?.7:1,fontSize:"0.85rem"},children:n?"Accepting...":"Accept"}):e?null:f.jsx("button",{onClick:p,disabled:s,style:{background:"#646cff",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"6px",cursor:s?"not-allowed":"pointer",fontWeight:500,opacity:s?.7:1,fontSize:"0.85rem"},children:s?"Switching...":"Switch"})})]})})}function Xk({children:i}){const e=C.useContext(qc),n=Hr();return e.is_auth_checked?e.is_logged_in?i?f.jsx(f.Fragment,{children:i}):f.jsx($g,{}):f.jsx(AE,{to:"/account",state:{from:n.pathname},replace:!0}):f.jsx("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:f.jsx("p",{children:"Loading..."})})}function Jk(){const{ensureBudgetLoaded:i,isInitialized:e,loading:n,error:s,isUsingCache:o,lastRefreshTime:c,forceRefreshFromFirebase:d,clearCache:g}=os(),[p,y]=C.useState(!1),[b,S]=C.useState(!1);C.useEffect(()=>{i()},[]);async function w(){y(!0);try{await d()}finally{y(!1)}}function O(N){if(!N)return"Never";const P=Math.floor((Date.now()-N)/1e3);if(P<60)return`${P}s ago`;const j=Math.floor(P/60);if(j<60)return`${j}m ago`;const W=Math.floor(j/60);return W<24?`${W}h ago`:`${Math.floor(W/24)}d ago`}return e?s?(console.error("[BudgetLayout] Error:",s),f.jsx("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:f.jsxs("p",{style:{color:"#ef4444"},children:["Error: ",s]})})):f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{position:"fixed",bottom:"1.5rem",right:"5.5rem",zIndex:1e3,display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"0.5rem"},children:[b&&f.jsxs("div",{style:{background:"rgba(30, 30, 35, 0.95)",backdropFilter:"blur(8px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"1rem",minWidth:"220px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)"},children:[f.jsxs("div",{style:{marginBottom:"0.75rem"},children:[f.jsx("p",{style:{margin:0,fontSize:"0.75rem",opacity:.6,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Data Source"}),f.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.9rem",fontWeight:500},children:o?f.jsx("span",{style:{color:Se.warning},children:" From Cache"}):f.jsx("span",{style:{color:Se.success},children:" From Firebase"})})]}),f.jsxs("div",{style:{marginBottom:"0.75rem"},children:[f.jsx("p",{style:{margin:0,fontSize:"0.75rem",opacity:.6,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Last Firebase Sync"}),f.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.9rem"},children:O(c)})]}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[f.jsx("button",{onClick:w,disabled:p||n,style:{flex:1,background:Se.primary,color:"white",border:"none",borderRadius:"6px",padding:"0.5rem 0.75rem",fontSize:"0.8rem",fontWeight:500,cursor:p||n?"not-allowed":"pointer",opacity:p||n?.6:1,transition:"opacity 0.15s"},children:p?" Syncing...":" Sync Now"}),f.jsx("button",{onClick:()=>{g(),S(!1)},style:{background:"rgba(255, 255, 255, 0.1)",color:"inherit",border:"none",borderRadius:"6px",padding:"0.5rem 0.75rem",fontSize:"0.8rem",cursor:"pointer",transition:"background 0.15s"},title:"Clear all cached data",children:""})]}),f.jsx("p",{style:{margin:"0.75rem 0 0 0",fontSize:"0.7rem",opacity:.5,lineHeight:1.4},children:'Data is cached locally to reduce Firebase reads. Click "Sync Now" to fetch fresh data.'})]}),f.jsxs("button",{onClick:()=>S(!b),style:{display:"flex",alignItems:"center",gap:"0.4rem",background:o?`color-mix(in srgb, ${Se.warning} 20%, rgba(30, 30, 35, 0.9))`:"rgba(30, 30, 35, 0.9)",backdropFilter:"blur(8px)",border:o?`1px solid ${Se.warning}`:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"20px",padding:"0.4rem 0.75rem",fontSize:"0.75rem",color:"inherit",cursor:"pointer",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)",transition:"all 0.15s"},title:o?"Data loaded from cache":"Data loaded from Firebase",children:[f.jsx("span",{children:o?"":""}),f.jsx("span",{style:{opacity:.8},children:o?"Cached":"Live"}),f.jsx("span",{style:{opacity:.5,fontSize:"0.65rem"},children:b?"":""})]})]}),f.jsx("div",{style:{paddingBottom:"5rem"},children:f.jsx($g,{})})]}):f.jsxs("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:[f.jsx("p",{children:"Loading budget..."}),n&&f.jsx("p",{style:{opacity:.6},children:"Fetching data from server..."})]})}const Zk={is_logged_in:!1,is_auth_checked:!1,username:"",set_user_context:()=>{}};function eM(){const[i,e]=C.useState(Zk),n=ru();return C.useEffect(function(){n.set_user_listener(s=>{e({is_logged_in:s!=null,is_auth_checked:!0,username:s?.email??"",set_user_context:e})})},[]),i.is_auth_checked?f.jsx(qc.Provider,{value:i,children:f.jsx(ek,{children:f.jsxs(bA,{children:[f.jsxs(KT,{children:[f.jsx(ar,{path:"/",element:f.jsx(tk,{})}),f.jsx(ar,{path:"/account",element:f.jsx(rk,{})}),f.jsx(ar,{path:"/sql-test",element:f.jsx(nk,{})}),f.jsx(ar,{path:"/budget",element:f.jsx(Xk,{}),children:f.jsxs(ar,{element:f.jsx(Jk,{}),children:[f.jsx(ar,{index:!0,element:f.jsx(Nk,{})}),f.jsxs(ar,{path:"admin",element:f.jsx(qk,{}),children:[f.jsx(ar,{path:"my-budgets",element:f.jsx(Kk,{})}),f.jsx(ar,{path:"accounts",element:f.jsx(zk,{})}),f.jsx(ar,{path:"categories",element:f.jsx(Fk,{})}),f.jsx(ar,{path:"users",element:f.jsx(Gk,{})}),f.jsx(ar,{path:"migration",element:f.jsx($k,{})}),f.jsx(ar,{path:"feedback",element:f.jsx(Wk,{})}),f.jsx(ar,{path:"tests",element:f.jsx(Qk,{})})]})]})})]}),f.jsx(Ok,{})]})})}):f.jsx("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:f.jsx("p",{children:"Loading..."})})}Xw.createRoot(document.getElementById("root")).render(f.jsx(C.StrictMode,{children:f.jsx(eM,{})}));
