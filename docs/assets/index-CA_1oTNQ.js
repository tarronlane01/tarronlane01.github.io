(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var Rm={exports:{}},Hl={};var tv;function Iw(){if(tv)return Hl;tv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:u}}return Hl.Fragment=e,Hl.jsx=n,Hl.jsxs=n,Hl}var nv;function Dw(){return nv||(nv=1,Rm.exports=Iw()),Rm.exports}var g=Dw(),Cm={exports:{}},Ge={};var rv;function Ow(){if(rv)return Ge;rv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),x=Symbol.iterator;function M(O){return O===null||typeof O!="object"?null:(O=x&&O[x]||O["@@iterator"],typeof O=="function"?O:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,C={};function ne(O,L,Q){this.props=O,this.context=L,this.refs=C,this.updater=Q||H}ne.prototype.isReactComponent={},ne.prototype.setState=function(O,L){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,L,"setState")},ne.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function B(){}B.prototype=ne.prototype;function ue(O,L,Q){this.props=O,this.context=L,this.refs=C,this.updater=Q||H}var Ee=ue.prototype=new B;Ee.constructor=ue,F(Ee,ne.prototype),Ee.isPureReactComponent=!0;var Te=Array.isArray;function Re(){}var D={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function R(O,L,Q){var Y=Q.ref;return{$$typeof:i,type:O,key:L,ref:Y!==void 0?Y:null,props:Q}}function k(O,L){return R(O.type,L,O.props)}function U(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function z(O){var L={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(Q){return L[Q]})}var I=/\/+/g;function Ye(O,L){return typeof O=="object"&&O!==null&&O.key!=null?z(""+O.key):L.toString(36)}function at(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(Re,Re):(O.status="pending",O.then(function(L){O.status==="pending"&&(O.status="fulfilled",O.value=L)},function(L){O.status==="pending"&&(O.status="rejected",O.reason=L)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function ee(O,L,Q,Y,fe){var we=typeof O;(we==="undefined"||we==="boolean")&&(O=null);var Ie=!1;if(O===null)Ie=!0;else switch(we){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(O.$$typeof){case i:case e:Ie=!0;break;case E:return Ie=O._init,ee(Ie(O._payload),L,Q,Y,fe)}}if(Ie)return fe=fe(O),Ie=Y===""?"."+Ye(O,0):Y,Te(fe)?(Q="",Ie!=null&&(Q=Ie.replace(I,"$&/")+"/"),ee(fe,L,Q,"",function(mt){return mt})):fe!=null&&(U(fe)&&(fe=k(fe,Q+(fe.key==null||O&&O.key===fe.key?"":(""+fe.key).replace(I,"$&/")+"/")+Ie)),L.push(fe)),1;Ie=0;var je=Y===""?".":Y+":";if(Te(O))for(var Be=0;Be<O.length;Be++)Y=O[Be],we=je+Ye(Y,Be),Ie+=ee(Y,L,Q,we,fe);else if(Be=M(O),typeof Be=="function")for(O=Be.call(O),Be=0;!(Y=O.next()).done;)Y=Y.value,we=je+Ye(Y,Be++),Ie+=ee(Y,L,Q,we,fe);else if(we==="object"){if(typeof O.then=="function")return ee(at(O),L,Q,Y,fe);throw L=String(O),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function ye(O,L,Q){if(O==null)return O;var Y=[],fe=0;return ee(O,Y,"","",function(we){return L.call(Q,we,fe++)}),Y}function he(O){if(O._status===-1){var L=O._result;L=L(),L.then(function(Q){(O._status===0||O._status===-1)&&(O._status=1,O._result=Q)},function(Q){(O._status===0||O._status===-1)&&(O._status=2,O._result=Q)}),O._status===-1&&(O._status=0,O._result=L)}if(O._status===1)return O._result.default;throw O._result}var ke=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Ue={map:ye,forEach:function(O,L,Q){ye(O,function(){L.apply(this,arguments)},Q)},count:function(O){var L=0;return ye(O,function(){L++}),L},toArray:function(O){return ye(O,function(L){return L})||[]},only:function(O){if(!U(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ge.Activity=T,Ge.Children=Ue,Ge.Component=ne,Ge.Fragment=n,Ge.Profiler=o,Ge.PureComponent=ue,Ge.StrictMode=s,Ge.Suspense=p,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(O){return D.H.useMemoCache(O)}},Ge.cache=function(O){return function(){return O.apply(null,arguments)}},Ge.cacheSignal=function(){return null},Ge.cloneElement=function(O,L,Q){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var Y=F({},O.props),fe=O.key;if(L!=null)for(we in L.key!==void 0&&(fe=""+L.key),L)!A.call(L,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&L.ref===void 0||(Y[we]=L[we]);var we=arguments.length-2;if(we===1)Y.children=Q;else if(1<we){for(var Ie=Array(we),je=0;je<we;je++)Ie[je]=arguments[je+2];Y.children=Ie}return R(O.type,fe,Y)},Ge.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},Ge.createElement=function(O,L,Q){var Y,fe={},we=null;if(L!=null)for(Y in L.key!==void 0&&(we=""+L.key),L)A.call(L,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(fe[Y]=L[Y]);var Ie=arguments.length-2;if(Ie===1)fe.children=Q;else if(1<Ie){for(var je=Array(Ie),Be=0;Be<Ie;Be++)je[Be]=arguments[Be+2];fe.children=je}if(O&&O.defaultProps)for(Y in Ie=O.defaultProps,Ie)fe[Y]===void 0&&(fe[Y]=Ie[Y]);return R(O,we,fe)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(O){return{$$typeof:m,render:O}},Ge.isValidElement=U,Ge.lazy=function(O){return{$$typeof:E,_payload:{_status:-1,_result:O},_init:he}},Ge.memo=function(O,L){return{$$typeof:y,type:O,compare:L===void 0?null:L}},Ge.startTransition=function(O){var L=D.T,Q={};D.T=Q;try{var Y=O(),fe=D.S;fe!==null&&fe(Q,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(Re,ke)}catch(we){ke(we)}finally{L!==null&&Q.types!==null&&(L.types=Q.types),D.T=L}},Ge.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ge.use=function(O){return D.H.use(O)},Ge.useActionState=function(O,L,Q){return D.H.useActionState(O,L,Q)},Ge.useCallback=function(O,L){return D.H.useCallback(O,L)},Ge.useContext=function(O){return D.H.useContext(O)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(O,L){return D.H.useDeferredValue(O,L)},Ge.useEffect=function(O,L){return D.H.useEffect(O,L)},Ge.useEffectEvent=function(O){return D.H.useEffectEvent(O)},Ge.useId=function(){return D.H.useId()},Ge.useImperativeHandle=function(O,L,Q){return D.H.useImperativeHandle(O,L,Q)},Ge.useInsertionEffect=function(O,L){return D.H.useInsertionEffect(O,L)},Ge.useLayoutEffect=function(O,L){return D.H.useLayoutEffect(O,L)},Ge.useMemo=function(O,L){return D.H.useMemo(O,L)},Ge.useOptimistic=function(O,L){return D.H.useOptimistic(O,L)},Ge.useReducer=function(O,L,Q){return D.H.useReducer(O,L,Q)},Ge.useRef=function(O){return D.H.useRef(O)},Ge.useState=function(O){return D.H.useState(O)},Ge.useSyncExternalStore=function(O,L,Q){return D.H.useSyncExternalStore(O,L,Q)},Ge.useTransition=function(){return D.H.useTransition()},Ge.version="19.2.3",Ge}var iv;function Ig(){return iv||(iv=1,Cm.exports=Ow()),Cm.exports}var j=Ig(),Im={exports:{}},Gl={},Dm={exports:{}},Om={};var sv;function Nw(){return sv||(sv=1,(function(i){function e(ee,ye){var he=ee.length;ee.push(ye);e:for(;0<he;){var ke=he-1>>>1,Ue=ee[ke];if(0<o(Ue,ye))ee[ke]=ye,ee[he]=Ue,he=ke;else break e}}function n(ee){return ee.length===0?null:ee[0]}function s(ee){if(ee.length===0)return null;var ye=ee[0],he=ee.pop();if(he!==ye){ee[0]=he;e:for(var ke=0,Ue=ee.length,O=Ue>>>1;ke<O;){var L=2*(ke+1)-1,Q=ee[L],Y=L+1,fe=ee[Y];if(0>o(Q,he))Y<Ue&&0>o(fe,Q)?(ee[ke]=fe,ee[Y]=he,ke=Y):(ee[ke]=Q,ee[L]=he,ke=L);else if(Y<Ue&&0>o(fe,he))ee[ke]=fe,ee[Y]=he,ke=Y;else break e}}return ye}function o(ee,ye){var he=ee.sortIndex-ye.sortIndex;return he!==0?he:ee.id-ye.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();i.unstable_now=function(){return d.now()-m}}var p=[],y=[],E=1,T=null,x=3,M=!1,H=!1,F=!1,C=!1,ne=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;function Ee(ee){for(var ye=n(y);ye!==null;){if(ye.callback===null)s(y);else if(ye.startTime<=ee)s(y),ye.sortIndex=ye.expirationTime,e(p,ye);else break;ye=n(y)}}function Te(ee){if(F=!1,Ee(ee),!H)if(n(p)!==null)H=!0,Re||(Re=!0,z());else{var ye=n(y);ye!==null&&at(Te,ye.startTime-ee)}}var Re=!1,D=-1,A=5,R=-1;function k(){return C?!0:!(i.unstable_now()-R<A)}function U(){if(C=!1,Re){var ee=i.unstable_now();R=ee;var ye=!0;try{e:{H=!1,F&&(F=!1,B(D),D=-1),M=!0;var he=x;try{t:{for(Ee(ee),T=n(p);T!==null&&!(T.expirationTime>ee&&k());){var ke=T.callback;if(typeof ke=="function"){T.callback=null,x=T.priorityLevel;var Ue=ke(T.expirationTime<=ee);if(ee=i.unstable_now(),typeof Ue=="function"){T.callback=Ue,Ee(ee),ye=!0;break t}T===n(p)&&s(p),Ee(ee)}else s(p);T=n(p)}if(T!==null)ye=!0;else{var O=n(y);O!==null&&at(Te,O.startTime-ee),ye=!1}}break e}finally{T=null,x=he,M=!1}ye=void 0}}finally{ye?z():Re=!1}}}var z;if(typeof ue=="function")z=function(){ue(U)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Ye=I.port2;I.port1.onmessage=U,z=function(){Ye.postMessage(null)}}else z=function(){ne(U,0)};function at(ee,ye){D=ne(function(){ee(i.unstable_now())},ye)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ee){ee.callback=null},i.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ee?Math.floor(1e3/ee):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_next=function(ee){switch(x){case 1:case 2:case 3:var ye=3;break;default:ye=x}var he=x;x=ye;try{return ee()}finally{x=he}},i.unstable_requestPaint=function(){C=!0},i.unstable_runWithPriority=function(ee,ye){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var he=x;x=ee;try{return ye()}finally{x=he}},i.unstable_scheduleCallback=function(ee,ye,he){var ke=i.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?ke+he:ke):he=ke,ee){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=he+Ue,ee={id:E++,callback:ye,priorityLevel:ee,startTime:he,expirationTime:Ue,sortIndex:-1},he>ke?(ee.sortIndex=he,e(y,ee),n(p)===null&&ee===n(y)&&(F?(B(D),D=-1):F=!0,at(Te,he-ke))):(ee.sortIndex=Ue,e(p,ee),H||M||(H=!0,Re||(Re=!0,z()))),ee},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(ee){var ye=x;return function(){var he=x;x=ye;try{return ee.apply(this,arguments)}finally{x=he}}}})(Om)),Om}var av;function Mw(){return av||(av=1,Dm.exports=Nw()),Dm.exports}var Nm={exports:{}},vn={};var ov;function kw(){if(ov)return vn;ov=1;var i=Ig();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)y+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,y,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:y,implementation:E}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,vn.createPortal=function(p,y){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(p,y,null,E)},vn.flushSync=function(p){var y=d.T,E=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=y,s.p=E,s.d.f()}},vn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},vn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},vn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var E=y.as,T=m(E,y.crossOrigin),x=typeof y.integrity=="string"?y.integrity:void 0,M=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;E==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:T,integrity:x,fetchPriority:M}):E==="script"&&s.d.X(p,{crossOrigin:T,integrity:x,fetchPriority:M,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},vn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var E=m(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},vn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var E=y.as,T=m(E,y.crossOrigin);s.d.L(p,E,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},vn.preloadModule=function(p,y){if(typeof p=="string")if(y){var E=m(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},vn.requestFormReset=function(p){s.d.r(p)},vn.unstable_batchedUpdates=function(p,y){return p(y)},vn.useFormState=function(p,y,E){return d.H.useFormState(p,y,E)},vn.useFormStatus=function(){return d.H.useHostTransitionStatus()},vn.version="19.2.3",vn}var lv;function jw(){if(lv)return Nm.exports;lv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Nm.exports=kw(),Nm.exports}var uv;function Vw(){if(uv)return Gl;uv=1;var i=Mw(),e=Ig(),n=jw();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(s(188))}function y(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return p(h),t;if(f===l)return p(h),r;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=f;else{for(var v=!1,S=h.child;S;){if(S===a){v=!0,a=h,l=f;break}if(S===l){v=!0,l=h,a=f;break}S=S.sibling}if(!v){for(S=f.child;S;){if(S===a){v=!0,a=f,l=h;break}if(S===l){v=!0,l=f,a=h;break}S=S.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function E(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=E(t),r!==null)return r;t=t.sibling}return null}var T=Object.assign,x=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),ue=Symbol.for("react.context"),Ee=Symbol.for("react.forward_ref"),Te=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function z(t){return t===null||typeof t!="object"?null:(t=U&&t[U]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function Ye(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case F:return"Fragment";case ne:return"Profiler";case C:return"StrictMode";case Te:return"Suspense";case Re:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case H:return"Portal";case ue:return t.displayName||"Context";case B:return(t._context.displayName||"Context")+".Consumer";case Ee:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return r=t.displayName||null,r!==null?r:Ye(t.type)||"Memo";case A:r=t._payload,t=t._init;try{return Ye(t(r))}catch{}}return null}var at=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},ke=[],Ue=-1;function O(t){return{current:t}}function L(t){0>Ue||(t.current=ke[Ue],ke[Ue]=null,Ue--)}function Q(t,r){Ue++,ke[Ue]=t.current,t.current=r}var Y=O(null),fe=O(null),we=O(null),Ie=O(null);function je(t,r){switch(Q(we,r),Q(fe,t),Q(Y,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?w0(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=w0(r),t=x0(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}L(Y),Q(Y,t)}function Be(){L(Y),L(fe),L(we)}function mt(t){t.memoizedState!==null&&Q(Ie,t);var r=Y.current,a=x0(r,t.type);r!==a&&(Q(fe,t),Q(Y,a))}function Vt(t){fe.current===t&&(L(Y),L(fe)),Ie.current===t&&(L(Ie),zl._currentValue=he)}var de,_e;function W(t){if(de===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);de=r&&r[1]||"",_e=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+de+t+_e}var le=!1;function N(t,r){if(!t||le)return"";le=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ie){var J=ie}Reflect.construct(t,[],me)}else{try{me.call()}catch(ie){J=ie}t.call(me.prototype)}}else{try{throw Error()}catch(ie){J=ie}(me=t())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ie){if(ie&&J&&typeof ie.stack=="string")return[ie.stack,J.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),v=f[0],S=f[1];if(v&&S){var V=v.split(`
`),X=S.split(`
`);for(h=l=0;l<V.length&&!V[l].includes("DetermineComponentFrameRoot");)l++;for(;h<X.length&&!X[h].includes("DetermineComponentFrameRoot");)h++;if(l===V.length||h===X.length)for(l=V.length-1,h=X.length-1;1<=l&&0<=h&&V[l]!==X[h];)h--;for(;1<=l&&0<=h;l--,h--)if(V[l]!==X[h]){if(l!==1||h!==1)do if(l--,h--,0>h||V[l]!==X[h]){var ae=`
`+V[l].replace(" at new "," at ");return t.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",t.displayName)),ae}while(1<=l&&0<=h);break}}}finally{le=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?W(a):""}function q(t,r){switch(t.tag){case 26:case 27:case 5:return W(t.type);case 16:return W("Lazy");case 13:return t.child!==r&&r!==null?W("Suspense Fallback"):W("Suspense");case 19:return W("SuspenseList");case 0:case 15:return N(t.type,!1);case 11:return N(t.type.render,!1);case 1:return N(t.type,!0);case 31:return W("Activity");default:return""}}function te(t){try{var r="",a=null;do r+=q(t,a),a=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Z=Object.prototype.hasOwnProperty,oe=i.unstable_scheduleCallback,se=i.unstable_cancelCallback,be=i.unstable_shouldYield,ve=i.unstable_requestPaint,Ve=i.unstable_now,Fe=i.unstable_getCurrentPriorityLevel,xt=i.unstable_ImmediatePriority,ni=i.unstable_UserBlockingPriority,Oe=i.unstable_NormalPriority,Ht=i.unstable_LowPriority,ku=i.unstable_IdlePriority,ju=i.log,Vu=i.unstable_setDisableYieldValue,ur=null,cn=null;function Yn(t){if(typeof ju=="function"&&Vu(t),cn&&typeof cn.setStrictMode=="function")try{cn.setStrictMode(ur,t)}catch{}}var Lt=Math.clz32?Math.clz32:Uu,Lu=Math.log,Ta=Math.LN2;function Uu(t){return t>>>=0,t===0?32:31-(Lu(t)/Ta|0)|0}var Ar=256,js=262144,Gt=4194304;function Rr(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Cr(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var S=l&134217727;return S!==0?(l=S&~f,l!==0?h=Rr(l):(v&=S,v!==0?h=Rr(v):a||(a=S&~t,a!==0&&(h=Rr(a))))):(S=l&~f,S!==0?h=Rr(S):v!==0?h=Rr(v):a||(a=l&~t,a!==0&&(h=Rr(a)))),h===0?0:r!==0&&r!==h&&(r&f)===0&&(f=h&-h,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:h}function cr(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Dh(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pu(){var t=Gt;return Gt<<=1,(Gt&62914560)===0&&(Gt=4194304),t}function Ir(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Vs(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Oh(t,r,a,l,h,f){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var S=t.entanglements,V=t.expirationTimes,X=t.hiddenUpdates;for(a=v&~a;0<a;){var ae=31-Lt(a),me=1<<ae;S[ae]=0,V[ae]=-1;var J=X[ae];if(J!==null)for(X[ae]=null,ae=0;ae<J.length;ae++){var ie=J[ae];ie!==null&&(ie.lane&=-536870913)}a&=~me}l!==0&&Ls(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(v&~r))}function Ls(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Lt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Go(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Lt(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function Qo(t,r){var a=r&-r;return a=(a&42)!==0?1:Us(a),(a&(t.suspendedLanes|r))!==0?0:a}function Us(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ri(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function zu(){var t=ye.p;return t!==0?t:(t=window.event,t===void 0?32:K0(t.type))}function dr(t,r){var a=ye.p;try{return ye.p=t,r()}finally{ye.p=a}}var hr=Math.random().toString(36).slice(2),Qt="__reactFiber$"+hr,sn="__reactProps$"+hr,Dr="__reactContainer$"+hr,Sa="__reactEvents$"+hr,Nh="__reactListeners$"+hr,Bu="__reactHandles$"+hr,Fu="__reactResources$"+hr,Or="__reactMarker$"+hr;function wa(t){delete t[Qt],delete t[sn],delete t[Sa],delete t[Nh],delete t[Bu]}function Nr(t){var r=t[Qt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Dr]||a[Qt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=N0(t);t!==null;){if(a=t[Qt])return a;t=N0(t)}return r}t=a,a=t.parentNode}return null}function Kn(t){if(t=t[Qt]||t[Dr]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function Vn(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function Mr(t){var r=t[Fu];return r||(r=t[Fu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Yt(t){t[Or]=!0}var Yo=new Set,Ko={};function kr(t,r){jr(t,r),jr(t+"Capture",r)}function jr(t,r){for(Ko[t]=r,t=0;t<r.length;t++)Yo.add(r[t])}var $o=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wo={},Xo={};function qu(t){return Z.call(Xo,t)?!0:Z.call(Wo,t)?!1:$o.test(t)?Xo[t]=!0:(Wo[t]=!0,!1)}function xa(t,r,a){if(qu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function Ln(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Kt(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function an(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ji(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Jo(t,r,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,f=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,f.call(this,v)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function pt(t){if(!t._valueTracker){var r=ji(t)?"checked":"value";t._valueTracker=Jo(t,r,""+t[r])}}function Ps(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=ji(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Vr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var zs=/[\n"\\]/g;function Rn(t){return t.replace(zs,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Aa(t,r,a,l,h,f,v,S){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),r!=null?v==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+an(r)):t.value!==""+an(r)&&(t.value=""+an(r)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),r!=null?Zo(t,v,an(r)):a!=null?Zo(t,v,an(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+an(S):t.removeAttribute("name")}function Hu(t,r,a,l,h,f,v,S){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null)){pt(t);return}a=a!=null?""+an(a):"",r=r!=null?""+an(r):a,S||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=S?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),pt(t)}function Zo(t,r,a){r==="number"&&Vr(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Vi(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+an(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function Gu(t,r,a){if(r!=null&&(r=""+an(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+an(a):""}function Li(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(at(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=an(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),pt(t)}function Cn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var Qu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function el(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||Qu.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function tl(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&el(t,h,l)}else for(var f in r)r.hasOwnProperty(f)&&el(t,f,r[f])}function Ra(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ui=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ca(t){return Ui.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function fr(){}var nl=null;function $n(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pi=null,Lr=null;function Bs(t){var r=Kn(t);if(r&&(t=r.stateNode)){var a=t[sn]||null;e:switch(t=r.stateNode,r.type){case"input":if(Aa(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Rn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[sn]||null;if(!h)throw Error(s(90));Aa(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Ps(l)}break e;case"textarea":Gu(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Vi(t,!!a.multiple,r,!1)}}}var Ia=!1;function zi(t,r,a){if(Ia)return t(r,a);Ia=!0;try{var l=t(r);return l}finally{if(Ia=!1,(Pi!==null||Lr!==null)&&(zc(),Pi&&(r=Pi,t=Lr,Lr=Pi=null,Bs(r),t)))for(r=0;r<t.length;r++)Bs(t[r])}}function mr(t,r){var a=t.stateNode;if(a===null)return null;var l=a[sn]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fs=!1;if(Wn)try{var vt={};Object.defineProperty(vt,"passive",{get:function(){Fs=!0}}),window.addEventListener("test",vt,vt),window.removeEventListener("test",vt,vt)}catch{Fs=!1}var Ur=null,rl=null,qs=null;function il(){if(qs)return qs;var t,r=rl,a=r.length,l,h="value"in Ur?Ur.value:Ur.textContent,f=h.length;for(t=0;t<a&&r[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&r[a-l]===h[f-l];l++);return qs=h.slice(t,1<l?1-l:void 0)}function Hs(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function ii(){return!0}function gr(){return!1}function dn(t){function r(a,l,h,f,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(a=t[S],this[S]=a?a(f):f[S]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ii:gr,this.isPropagationStopped=gr,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ii)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ii)},persist:function(){},isPersistent:ii}),r}var si={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pr=dn(si),Bi=T({},si,{view:0,detail:0}),sl=dn(Bi),Fi,Da,zr,Oa=T({},Bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zr&&(zr&&t.type==="mousemove"?(Fi=t.screenX-zr.screenX,Da=t.screenY-zr.screenY):Da=Fi=0,zr=t),Fi)},movementY:function(t){return"movementY"in t?t.movementY:Da}}),al=dn(Oa),Gs=T({},Oa,{dataTransfer:0}),Ku=dn(Gs),$u=T({},Bi,{relatedTarget:0}),Qs=dn($u),ol=T({},si,{animationName:0,elapsedTime:0,pseudoElement:0}),Wu=dn(ol),Na=T({},si,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Xu=dn(Na),Ju=T({},si,{data:0}),Br=dn(Ju),Zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ec={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nc(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=tc[t])?!!r[t]:!1}function qi(){return nc}var wn=T({},Bi,{key:function(t){if(t.key){var r=Zu[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Hs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ec[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qi,charCode:function(t){return t.type==="keypress"?Hs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rc=dn(wn),ic=T({},Oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ai=dn(ic),c=T({},Bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qi}),_=dn(c),b=T({},si,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=dn(b),K=T({},Oa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),re=dn(K),Se=T({},si,{newState:0,oldState:0}),Ke=dn(Se),Ut=[9,13,27,32],ht=Wn&&"CompositionEvent"in window,Dt=null;Wn&&"documentMode"in document&&(Dt=document.documentMode);var Xn=Wn&&"TextEvent"in window&&!Dt,Fr=Wn&&(!ht||Dt&&8<Dt&&11>=Dt),pr=" ",yr=!1;function Ys(t,r){switch(t){case"keyup":return Ut.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ma(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ka=!1;function ZS(t,r){switch(t){case"compositionend":return Ma(r);case"keypress":return r.which!==32?null:(yr=!0,pr);case"textInput":return t=r.data,t===pr&&yr?null:t;default:return null}}function e1(t,r){if(ka)return t==="compositionend"||!ht&&Ys(t,r)?(t=il(),qs=rl=Ur=null,ka=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Fr&&r.locale!=="ko"?null:r.data;default:return null}}var t1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jp(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!t1[t.type]:r==="textarea"}function Vp(t,r,a,l){Pi?Lr?Lr.push(l):Lr=[l]:Pi=l,r=Yc(r,"onChange"),0<r.length&&(a=new Pr("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var ll=null,ul=null;function n1(t){_0(t,0)}function sc(t){var r=Vn(t);if(Ps(r))return t}function Lp(t,r){if(t==="change")return r}var Up=!1;if(Wn){var Mh;if(Wn){var kh="oninput"in document;if(!kh){var Pp=document.createElement("div");Pp.setAttribute("oninput","return;"),kh=typeof Pp.oninput=="function"}Mh=kh}else Mh=!1;Up=Mh&&(!document.documentMode||9<document.documentMode)}function zp(){ll&&(ll.detachEvent("onpropertychange",Bp),ul=ll=null)}function Bp(t){if(t.propertyName==="value"&&sc(ul)){var r=[];Vp(r,ul,t,$n(t)),zi(n1,r)}}function r1(t,r,a){t==="focusin"?(zp(),ll=r,ul=a,ll.attachEvent("onpropertychange",Bp)):t==="focusout"&&zp()}function i1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sc(ul)}function s1(t,r){if(t==="click")return sc(r)}function a1(t,r){if(t==="input"||t==="change")return sc(r)}function o1(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Un=typeof Object.is=="function"?Object.is:o1;function cl(t,r){if(Un(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Z.call(r,h)||!Un(t[h],r[h]))return!1}return!0}function Fp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qp(t,r){var a=Fp(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Fp(a)}}function Hp(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Hp(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Gp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Vr(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Vr(t.document)}return r}function jh(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var l1=Wn&&"documentMode"in document&&11>=document.documentMode,ja=null,Vh=null,dl=null,Lh=!1;function Qp(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Lh||ja==null||ja!==Vr(l)||(l=ja,"selectionStart"in l&&jh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),dl&&cl(dl,l)||(dl=l,l=Yc(Vh,"onSelect"),0<l.length&&(r=new Pr("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=ja)))}function Ks(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Va={animationend:Ks("Animation","AnimationEnd"),animationiteration:Ks("Animation","AnimationIteration"),animationstart:Ks("Animation","AnimationStart"),transitionrun:Ks("Transition","TransitionRun"),transitionstart:Ks("Transition","TransitionStart"),transitioncancel:Ks("Transition","TransitionCancel"),transitionend:Ks("Transition","TransitionEnd")},Uh={},Yp={};Wn&&(Yp=document.createElement("div").style,"AnimationEvent"in window||(delete Va.animationend.animation,delete Va.animationiteration.animation,delete Va.animationstart.animation),"TransitionEvent"in window||delete Va.transitionend.transition);function $s(t){if(Uh[t])return Uh[t];if(!Va[t])return t;var r=Va[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Yp)return Uh[t]=r[a];return t}var Kp=$s("animationend"),$p=$s("animationiteration"),Wp=$s("animationstart"),u1=$s("transitionrun"),c1=$s("transitionstart"),d1=$s("transitioncancel"),Xp=$s("transitionend"),Jp=new Map,Ph="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ph.push("scrollEnd");function _r(t,r){Jp.set(t,r),kr(r,[t])}var ac=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Jn=[],La=0,zh=0;function oc(){for(var t=La,r=zh=La=0;r<t;){var a=Jn[r];Jn[r++]=null;var l=Jn[r];Jn[r++]=null;var h=Jn[r];Jn[r++]=null;var f=Jn[r];if(Jn[r++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}f!==0&&Zp(a,h,f)}}function lc(t,r,a,l){Jn[La++]=t,Jn[La++]=r,Jn[La++]=a,Jn[La++]=l,zh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Bh(t,r,a,l){return lc(t,r,a,l),uc(t)}function Ws(t,r){return lc(t,null,null,r),uc(t)}function Zp(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&r!==null&&(h=31-Lt(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),f):null}function uc(t){if(50<Ml)throw Ml=0,Xf=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ua={};function h1(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,r,a,l){return new h1(t,r,a,l)}function Fh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function oi(t,r){var a=t.alternate;return a===null?(a=Pn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function ey(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function cc(t,r,a,l,h,f){var v=0;if(l=t,typeof t=="function")Fh(t)&&(v=1);else if(typeof t=="string")v=yw(t,a,Y.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=Pn(31,a,r,h),t.elementType=R,t.lanes=f,t;case F:return Xs(a.children,h,f,r);case C:v=8,h|=24;break;case ne:return t=Pn(12,a,r,h|2),t.elementType=ne,t.lanes=f,t;case Te:return t=Pn(13,a,r,h),t.elementType=Te,t.lanes=f,t;case Re:return t=Pn(19,a,r,h),t.elementType=Re,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ue:v=10;break e;case B:v=9;break e;case Ee:v=11;break e;case D:v=14;break e;case A:v=16,l=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=Pn(v,a,r,h),r.elementType=t,r.type=l,r.lanes=f,r}function Xs(t,r,a,l){return t=Pn(7,t,l,r),t.lanes=a,t}function qh(t,r,a){return t=Pn(6,t,null,r),t.lanes=a,t}function ty(t){var r=Pn(18,null,null,0);return r.stateNode=t,r}function Hh(t,r,a){return r=Pn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var ny=new WeakMap;function Zn(t,r){if(typeof t=="object"&&t!==null){var a=ny.get(t);return a!==void 0?a:(r={value:t,source:r,stack:te(r)},ny.set(t,r),r)}return{value:t,source:r,stack:te(r)}}var Pa=[],za=0,dc=null,hl=0,er=[],tr=0,Hi=null,qr=1,Hr="";function li(t,r){Pa[za++]=hl,Pa[za++]=dc,dc=t,hl=r}function ry(t,r,a){er[tr++]=qr,er[tr++]=Hr,er[tr++]=Hi,Hi=t;var l=qr;t=Hr;var h=32-Lt(l)-1;l&=~(1<<h),a+=1;var f=32-Lt(r)+h;if(30<f){var v=h-h%5;f=(l&(1<<v)-1).toString(32),l>>=v,h-=v,qr=1<<32-Lt(r)+h|a<<h|l,Hr=f+t}else qr=1<<f|a<<h|l,Hr=t}function Gh(t){t.return!==null&&(li(t,1),ry(t,1,0))}function Qh(t){for(;t===dc;)dc=Pa[--za],Pa[za]=null,hl=Pa[--za],Pa[za]=null;for(;t===Hi;)Hi=er[--tr],er[tr]=null,Hr=er[--tr],er[tr]=null,qr=er[--tr],er[tr]=null}function iy(t,r){er[tr++]=qr,er[tr++]=Hr,er[tr++]=Hi,qr=r.id,Hr=r.overflow,Hi=t}var hn=null,Rt=null,ot=!1,Gi=null,nr=!1,Yh=Error(s(519));function Qi(t){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fl(Zn(r,t)),Yh}function sy(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[Qt]=t,r[sn]=l,a){case"dialog":et("cancel",r),et("close",r);break;case"iframe":case"object":case"embed":et("load",r);break;case"video":case"audio":for(a=0;a<jl.length;a++)et(jl[a],r);break;case"source":et("error",r);break;case"img":case"image":case"link":et("error",r),et("load",r);break;case"details":et("toggle",r);break;case"input":et("invalid",r),Hu(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":et("invalid",r);break;case"textarea":et("invalid",r),Li(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||T0(r.textContent,a)?(l.popover!=null&&(et("beforetoggle",r),et("toggle",r)),l.onScroll!=null&&et("scroll",r),l.onScrollEnd!=null&&et("scrollend",r),l.onClick!=null&&(r.onclick=fr),r=!0):r=!1,r||Qi(t,!0)}function ay(t){for(hn=t.return;hn;)switch(hn.tag){case 5:case 31:case 13:nr=!1;return;case 27:case 3:nr=!0;return;default:hn=hn.return}}function Ba(t){if(t!==hn)return!1;if(!ot)return ay(t),ot=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||hm(t.type,t.memoizedProps)),a=!a),a&&Rt&&Qi(t),ay(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Rt=O0(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Rt=O0(t)}else r===27?(r=Rt,as(t.type)?(t=ym,ym=null,Rt=t):Rt=r):Rt=hn?ir(t.stateNode.nextSibling):null;return!0}function Js(){Rt=hn=null,ot=!1}function Kh(){var t=Gi;return t!==null&&(Nn===null?Nn=t:Nn.push.apply(Nn,t),Gi=null),t}function fl(t){Gi===null?Gi=[t]:Gi.push(t)}var $h=O(null),Zs=null,ui=null;function Yi(t,r,a){Q($h,r._currentValue),r._currentValue=a}function ci(t){t._currentValue=$h.current,L($h)}function Wh(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Xh(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var v=h.child;f=f.firstContext;e:for(;f!==null;){var S=f;f=h;for(var V=0;V<r.length;V++)if(S.context===r[V]){f.lanes|=a,S=f.alternate,S!==null&&(S.lanes|=a),Wh(f.return,a,t),l||(v=null);break e}f=S.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),Wh(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Fa(t,r,a,l){t=null;for(var h=r,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var S=h.type;Un(h.pendingProps.value,v.value)||(t!==null?t.push(S):t=[S])}}else if(h===Ie.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(zl):t=[zl])}h=h.return}t!==null&&Xh(r,t,a,l),r.flags|=262144}function hc(t){for(t=t.firstContext;t!==null;){if(!Un(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ea(t){Zs=t,ui=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function fn(t){return oy(Zs,t)}function fc(t,r){return Zs===null&&ea(t),oy(t,r)}function oy(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},ui===null){if(t===null)throw Error(s(308));ui=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else ui=ui.next=r;return a}var f1=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},m1=i.unstable_scheduleCallback,g1=i.unstable_NormalPriority,$t={$$typeof:ue,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jh(){return{controller:new f1,data:new Map,refCount:0}}function ml(t){t.refCount--,t.refCount===0&&m1(g1,function(){t.controller.abort()})}var gl=null,Zh=0,qa=0,Ha=null;function p1(t,r){if(gl===null){var a=gl=[];Zh=0,qa=rm(),Ha={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Zh++,r.then(ly,ly),r}function ly(){if(--Zh===0&&gl!==null){Ha!==null&&(Ha.status="fulfilled");var t=gl;gl=null,qa=0,Ha=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function y1(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var uy=ee.S;ee.S=function(t,r){Q_=Ve(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&p1(t,r),uy!==null&&uy(t,r)};var ta=O(null);function ef(){var t=ta.current;return t!==null?t:wt.pooledCache}function mc(t,r){r===null?Q(ta,ta.current):Q(ta,r.pool)}function cy(){var t=ef();return t===null?null:{parent:$t._currentValue,pool:t}}var Ga=Error(s(460)),tf=Error(s(474)),gc=Error(s(542)),pc={then:function(){}};function dy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function hy(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(fr,fr),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,my(t),t;default:if(typeof r.status=="string")r.then(fr,fr);else{if(t=wt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,my(t),t}throw ra=r,Ga}}function na(t){try{var r=t._init;return r(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ra=a,Ga):a}}var ra=null;function fy(){if(ra===null)throw Error(s(459));var t=ra;return ra=null,t}function my(t){if(t===Ga||t===gc)throw Error(s(483))}var Qa=null,pl=0;function yc(t){var r=pl;return pl+=1,Qa===null&&(Qa=[]),hy(Qa,t,r)}function yl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function _c(t,r){throw r.$$typeof===x?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function gy(t){function r(G,P){if(t){var $=G.deletions;$===null?(G.deletions=[P],G.flags|=16):$.push(P)}}function a(G,P){if(!t)return null;for(;P!==null;)r(G,P),P=P.sibling;return null}function l(G){for(var P=new Map;G!==null;)G.key!==null?P.set(G.key,G):P.set(G.index,G),G=G.sibling;return P}function h(G,P){return G=oi(G,P),G.index=0,G.sibling=null,G}function f(G,P,$){return G.index=$,t?($=G.alternate,$!==null?($=$.index,$<P?(G.flags|=67108866,P):$):(G.flags|=67108866,P)):(G.flags|=1048576,P)}function v(G){return t&&G.alternate===null&&(G.flags|=67108866),G}function S(G,P,$,ce){return P===null||P.tag!==6?(P=qh($,G.mode,ce),P.return=G,P):(P=h(P,$),P.return=G,P)}function V(G,P,$,ce){var Ne=$.type;return Ne===F?ae(G,P,$.props.children,ce,$.key):P!==null&&(P.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===A&&na(Ne)===P.type)?(P=h(P,$.props),yl(P,$),P.return=G,P):(P=cc($.type,$.key,$.props,null,G.mode,ce),yl(P,$),P.return=G,P)}function X(G,P,$,ce){return P===null||P.tag!==4||P.stateNode.containerInfo!==$.containerInfo||P.stateNode.implementation!==$.implementation?(P=Hh($,G.mode,ce),P.return=G,P):(P=h(P,$.children||[]),P.return=G,P)}function ae(G,P,$,ce,Ne){return P===null||P.tag!==7?(P=Xs($,G.mode,ce,Ne),P.return=G,P):(P=h(P,$),P.return=G,P)}function me(G,P,$){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=qh(""+P,G.mode,$),P.return=G,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case M:return $=cc(P.type,P.key,P.props,null,G.mode,$),yl($,P),$.return=G,$;case H:return P=Hh(P,G.mode,$),P.return=G,P;case A:return P=na(P),me(G,P,$)}if(at(P)||z(P))return P=Xs(P,G.mode,$,null),P.return=G,P;if(typeof P.then=="function")return me(G,yc(P),$);if(P.$$typeof===ue)return me(G,fc(G,P),$);_c(G,P)}return null}function J(G,P,$,ce){var Ne=P!==null?P.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return Ne!==null?null:S(G,P,""+$,ce);if(typeof $=="object"&&$!==null){switch($.$$typeof){case M:return $.key===Ne?V(G,P,$,ce):null;case H:return $.key===Ne?X(G,P,$,ce):null;case A:return $=na($),J(G,P,$,ce)}if(at($)||z($))return Ne!==null?null:ae(G,P,$,ce,null);if(typeof $.then=="function")return J(G,P,yc($),ce);if($.$$typeof===ue)return J(G,P,fc(G,$),ce);_c(G,$)}return null}function ie(G,P,$,ce,Ne){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return G=G.get($)||null,S(P,G,""+ce,Ne);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case M:return G=G.get(ce.key===null?$:ce.key)||null,V(P,G,ce,Ne);case H:return G=G.get(ce.key===null?$:ce.key)||null,X(P,G,ce,Ne);case A:return ce=na(ce),ie(G,P,$,ce,Ne)}if(at(ce)||z(ce))return G=G.get($)||null,ae(P,G,ce,Ne,null);if(typeof ce.then=="function")return ie(G,P,$,yc(ce),Ne);if(ce.$$typeof===ue)return ie(G,P,$,fc(P,ce),Ne);_c(P,ce)}return null}function Ce(G,P,$,ce){for(var Ne=null,ut=null,De=P,We=P=0,nt=null;De!==null&&We<$.length;We++){De.index>We?(nt=De,De=null):nt=De.sibling;var ct=J(G,De,$[We],ce);if(ct===null){De===null&&(De=nt);break}t&&De&&ct.alternate===null&&r(G,De),P=f(ct,P,We),ut===null?Ne=ct:ut.sibling=ct,ut=ct,De=nt}if(We===$.length)return a(G,De),ot&&li(G,We),Ne;if(De===null){for(;We<$.length;We++)De=me(G,$[We],ce),De!==null&&(P=f(De,P,We),ut===null?Ne=De:ut.sibling=De,ut=De);return ot&&li(G,We),Ne}for(De=l(De);We<$.length;We++)nt=ie(De,G,We,$[We],ce),nt!==null&&(t&&nt.alternate!==null&&De.delete(nt.key===null?We:nt.key),P=f(nt,P,We),ut===null?Ne=nt:ut.sibling=nt,ut=nt);return t&&De.forEach(function(ds){return r(G,ds)}),ot&&li(G,We),Ne}function Le(G,P,$,ce){if($==null)throw Error(s(151));for(var Ne=null,ut=null,De=P,We=P=0,nt=null,ct=$.next();De!==null&&!ct.done;We++,ct=$.next()){De.index>We?(nt=De,De=null):nt=De.sibling;var ds=J(G,De,ct.value,ce);if(ds===null){De===null&&(De=nt);break}t&&De&&ds.alternate===null&&r(G,De),P=f(ds,P,We),ut===null?Ne=ds:ut.sibling=ds,ut=ds,De=nt}if(ct.done)return a(G,De),ot&&li(G,We),Ne;if(De===null){for(;!ct.done;We++,ct=$.next())ct=me(G,ct.value,ce),ct!==null&&(P=f(ct,P,We),ut===null?Ne=ct:ut.sibling=ct,ut=ct);return ot&&li(G,We),Ne}for(De=l(De);!ct.done;We++,ct=$.next())ct=ie(De,G,We,ct.value,ce),ct!==null&&(t&&ct.alternate!==null&&De.delete(ct.key===null?We:ct.key),P=f(ct,P,We),ut===null?Ne=ct:ut.sibling=ct,ut=ct);return t&&De.forEach(function(Cw){return r(G,Cw)}),ot&&li(G,We),Ne}function Tt(G,P,$,ce){if(typeof $=="object"&&$!==null&&$.type===F&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case M:e:{for(var Ne=$.key;P!==null;){if(P.key===Ne){if(Ne=$.type,Ne===F){if(P.tag===7){a(G,P.sibling),ce=h(P,$.props.children),ce.return=G,G=ce;break e}}else if(P.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===A&&na(Ne)===P.type){a(G,P.sibling),ce=h(P,$.props),yl(ce,$),ce.return=G,G=ce;break e}a(G,P);break}else r(G,P);P=P.sibling}$.type===F?(ce=Xs($.props.children,G.mode,ce,$.key),ce.return=G,G=ce):(ce=cc($.type,$.key,$.props,null,G.mode,ce),yl(ce,$),ce.return=G,G=ce)}return v(G);case H:e:{for(Ne=$.key;P!==null;){if(P.key===Ne)if(P.tag===4&&P.stateNode.containerInfo===$.containerInfo&&P.stateNode.implementation===$.implementation){a(G,P.sibling),ce=h(P,$.children||[]),ce.return=G,G=ce;break e}else{a(G,P);break}else r(G,P);P=P.sibling}ce=Hh($,G.mode,ce),ce.return=G,G=ce}return v(G);case A:return $=na($),Tt(G,P,$,ce)}if(at($))return Ce(G,P,$,ce);if(z($)){if(Ne=z($),typeof Ne!="function")throw Error(s(150));return $=Ne.call($),Le(G,P,$,ce)}if(typeof $.then=="function")return Tt(G,P,yc($),ce);if($.$$typeof===ue)return Tt(G,P,fc(G,$),ce);_c(G,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,P!==null&&P.tag===6?(a(G,P.sibling),ce=h(P,$),ce.return=G,G=ce):(a(G,P),ce=qh($,G.mode,ce),ce.return=G,G=ce),v(G)):a(G,P)}return function(G,P,$,ce){try{pl=0;var Ne=Tt(G,P,$,ce);return Qa=null,Ne}catch(De){if(De===Ga||De===gc)throw De;var ut=Pn(29,De,null,G.mode);return ut.lanes=ce,ut.return=G,ut}}}var ia=gy(!0),py=gy(!1),Ki=!1;function nf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function $i(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Wi(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(ft&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=uc(t),Zp(t,null,a),r}return lc(t,l,r,a),uc(t)}function _l(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Go(t,a)}}function sf(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?h=f=r:f=f.next=r}else h=f=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var af=!1;function vl(){if(af){var t=Ha;if(t!==null)throw t}}function bl(t,r,a,l){af=!1;var h=t.updateQueue;Ki=!1;var f=h.firstBaseUpdate,v=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var V=S,X=V.next;V.next=null,v===null?f=X:v.next=X,v=V;var ae=t.alternate;ae!==null&&(ae=ae.updateQueue,S=ae.lastBaseUpdate,S!==v&&(S===null?ae.firstBaseUpdate=X:S.next=X,ae.lastBaseUpdate=V))}if(f!==null){var me=h.baseState;v=0,ae=X=V=null,S=f;do{var J=S.lane&-536870913,ie=J!==S.lane;if(ie?(tt&J)===J:(l&J)===J){J!==0&&J===qa&&(af=!0),ae!==null&&(ae=ae.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Ce=t,Le=S;J=r;var Tt=a;switch(Le.tag){case 1:if(Ce=Le.payload,typeof Ce=="function"){me=Ce.call(Tt,me,J);break e}me=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Le.payload,J=typeof Ce=="function"?Ce.call(Tt,me,J):Ce,J==null)break e;me=T({},me,J);break e;case 2:Ki=!0}}J=S.callback,J!==null&&(t.flags|=64,ie&&(t.flags|=8192),ie=h.callbacks,ie===null?h.callbacks=[J]:ie.push(J))}else ie={lane:J,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ae===null?(X=ae=ie,V=me):ae=ae.next=ie,v|=J;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;ie=S,S=ie.next,ie.next=null,h.lastBaseUpdate=ie,h.shared.pending=null}}while(!0);ae===null&&(V=me),h.baseState=V,h.firstBaseUpdate=X,h.lastBaseUpdate=ae,f===null&&(h.shared.lanes=0),ts|=v,t.lanes=v,t.memoizedState=me}}function yy(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function _y(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)yy(a[t],r)}var Ya=O(null),vc=O(0);function vy(t,r){t=vi,Q(vc,t),Q(Ya,r),vi=t|r.baseLanes}function of(){Q(vc,vi),Q(Ya,Ya.current)}function lf(){vi=vc.current,L(Ya),L(vc)}var zn=O(null),rr=null;function Xi(t){var r=t.alternate;Q(Pt,Pt.current&1),Q(zn,t),rr===null&&(r===null||Ya.current!==null||r.memoizedState!==null)&&(rr=t)}function uf(t){Q(Pt,Pt.current),Q(zn,t),rr===null&&(rr=t)}function by(t){t.tag===22?(Q(Pt,Pt.current),Q(zn,t),rr===null&&(rr=t)):Ji()}function Ji(){Q(Pt,Pt.current),Q(zn,zn.current)}function Bn(t){L(zn),rr===t&&(rr=null),L(Pt)}var Pt=O(0);function bc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||gm(a)||pm(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var di=0,$e=null,bt=null,Wt=null,Ec=!1,Ka=!1,sa=!1,Tc=0,El=0,$a=null,_1=0;function kt(){throw Error(s(321))}function cf(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Un(t[a],r[a]))return!1;return!0}function df(t,r,a,l,h,f){return di=f,$e=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ee.H=t===null||t.memoizedState===null?r_:Af,sa=!1,f=a(l,h),sa=!1,Ka&&(f=Ty(r,a,l,h)),Ey(t),f}function Ey(t){ee.H=wl;var r=bt!==null&&bt.next!==null;if(di=0,Wt=bt=$e=null,Ec=!1,El=0,$a=null,r)throw Error(s(300));t===null||Xt||(t=t.dependencies,t!==null&&hc(t)&&(Xt=!0))}function Ty(t,r,a,l){$e=t;var h=0;do{if(Ka&&($a=null),El=0,Ka=!1,25<=h)throw Error(s(301));if(h+=1,Wt=bt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}ee.H=i_,f=r(a,l)}while(Ka);return f}function v1(){var t=ee.H,r=t.useState()[0];return r=typeof r.then=="function"?Tl(r):r,t=t.useState()[0],(bt!==null?bt.memoizedState:null)!==t&&($e.flags|=1024),r}function hf(){var t=Tc!==0;return Tc=0,t}function ff(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function mf(t){if(Ec){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Ec=!1}di=0,Wt=bt=$e=null,Ka=!1,El=Tc=0,$a=null}function xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?$e.memoizedState=Wt=t:Wt=Wt.next=t,Wt}function zt(){if(bt===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=bt.next;var r=Wt===null?$e.memoizedState:Wt.next;if(r!==null)Wt=r,bt=t;else{if(t===null)throw $e.alternate===null?Error(s(467)):Error(s(310));bt=t,t={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Wt===null?$e.memoizedState=Wt=t:Wt=Wt.next=t}return Wt}function Sc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(t){var r=El;return El+=1,$a===null&&($a=[]),t=hy($a,t,r),r=$e,(Wt===null?r.memoizedState:Wt.next)===null&&(r=r.alternate,ee.H=r===null||r.memoizedState===null?r_:Af),t}function wc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Tl(t);if(t.$$typeof===ue)return fn(t)}throw Error(s(438,String(t)))}function gf(t){var r=null,a=$e.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=$e.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Sc(),$e.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=k;return r.index++,a}function hi(t,r){return typeof r=="function"?r(t):r}function xc(t){var r=zt();return pf(r,bt,t)}function pf(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var v=h.next;h.next=f.next,f.next=v}r.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{r=h.next;var S=v=null,V=null,X=r,ae=!1;do{var me=X.lane&-536870913;if(me!==X.lane?(tt&me)===me:(di&me)===me){var J=X.revertLane;if(J===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),me===qa&&(ae=!0);else if((di&J)===J){X=X.next,J===qa&&(ae=!0);continue}else me={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},V===null?(S=V=me,v=f):V=V.next=me,$e.lanes|=J,ts|=J;me=X.action,sa&&a(f,me),f=X.hasEagerState?X.eagerState:a(f,me)}else J={lane:me,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},V===null?(S=V=J,v=f):V=V.next=J,$e.lanes|=me,ts|=me;X=X.next}while(X!==null&&X!==r);if(V===null?v=f:V.next=S,!Un(f,t.memoizedState)&&(Xt=!0,ae&&(a=Ha,a!==null)))throw a;t.memoizedState=f,t.baseState=v,t.baseQueue=V,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function yf(t){var r=zt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=r.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do f=t(f,v.action),v=v.next;while(v!==h);Un(f,r.memoizedState)||(Xt=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function Sy(t,r,a){var l=$e,h=zt(),f=ot;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=r();var v=!Un((bt||h).memoizedState,a);if(v&&(h.memoizedState=a,Xt=!0),h=h.queue,bf(Ay.bind(null,l,h,t),[t]),h.getSnapshot!==r||v||Wt!==null&&Wt.memoizedState.tag&1){if(l.flags|=2048,Wa(9,{destroy:void 0},xy.bind(null,l,h,a,r),null),wt===null)throw Error(s(349));f||(di&127)!==0||wy(l,r,a)}return a}function wy(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=$e.updateQueue,r===null?(r=Sc(),$e.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function xy(t,r,a,l){r.value=a,r.getSnapshot=l,Ry(r)&&Cy(t)}function Ay(t,r,a){return a(function(){Ry(r)&&Cy(t)})}function Ry(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Un(t,a)}catch{return!0}}function Cy(t){var r=Ws(t,2);r!==null&&Mn(r,t,2)}function _f(t){var r=xn();if(typeof t=="function"){var a=t;if(t=a(),sa){Yn(!0);try{a()}finally{Yn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:t},r}function Iy(t,r,a,l){return t.baseState=a,pf(t,bt,typeof l=="function"?l:hi)}function b1(t,r,a,l,h){if(Cc(t))throw Error(s(485));if(t=r.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};ee.T!==null?a(!0):f.isTransition=!1,l(f),a=r.pending,a===null?(f.next=r.pending=f,Dy(r,f)):(f.next=a.next,r.pending=a.next=f)}}function Dy(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var f=ee.T,v={};ee.T=v;try{var S=a(h,l),V=ee.S;V!==null&&V(v,S),Oy(t,r,S)}catch(X){vf(t,r,X)}finally{f!==null&&v.types!==null&&(f.types=v.types),ee.T=f}}else try{f=a(h,l),Oy(t,r,f)}catch(X){vf(t,r,X)}}function Oy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Ny(t,r,l)},function(l){return vf(t,r,l)}):Ny(t,r,a)}function Ny(t,r,a){r.status="fulfilled",r.value=a,My(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Dy(t,a)))}function vf(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,My(r),r=r.next;while(r!==l)}t.action=null}function My(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function ky(t,r){return r}function jy(t,r){if(ot){var a=wt.formState;if(a!==null){e:{var l=$e;if(ot){if(Rt){t:{for(var h=Rt,f=nr;h.nodeType!==8;){if(!f){h=null;break t}if(h=ir(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){Rt=ir(h.nextSibling),l=h.data==="F!";break e}}Qi(l)}l=!1}l&&(r=a[0])}}return a=xn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ky,lastRenderedState:r},a.queue=l,a=e_.bind(null,$e,l),l.dispatch=a,l=_f(!1),f=xf.bind(null,$e,!1,l.queue),l=xn(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=b1.bind(null,$e,h,f,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function Vy(t){var r=zt();return Ly(r,bt,t)}function Ly(t,r,a){if(r=pf(t,r,ky)[0],t=xc(hi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Tl(r)}catch(v){throw v===Ga?gc:v}else l=r;r=zt();var h=r.queue,f=h.dispatch;return a!==r.memoizedState&&($e.flags|=2048,Wa(9,{destroy:void 0},E1.bind(null,h,a),null)),[l,f,t]}function E1(t,r){t.action=r}function Uy(t){var r=zt(),a=bt;if(a!==null)return Ly(r,a,t);zt(),r=r.memoizedState,a=zt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Wa(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=$e.updateQueue,r===null&&(r=Sc(),$e.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function Py(){return zt().memoizedState}function Ac(t,r,a,l){var h=xn();$e.flags|=t,h.memoizedState=Wa(1|r,{destroy:void 0},a,l===void 0?null:l)}function Rc(t,r,a,l){var h=zt();l=l===void 0?null:l;var f=h.memoizedState.inst;bt!==null&&l!==null&&cf(l,bt.memoizedState.deps)?h.memoizedState=Wa(r,f,a,l):($e.flags|=t,h.memoizedState=Wa(1|r,f,a,l))}function zy(t,r){Ac(8390656,8,t,r)}function bf(t,r){Rc(2048,8,t,r)}function T1(t){$e.flags|=4;var r=$e.updateQueue;if(r===null)r=Sc(),$e.updateQueue=r,r.events=[t];else{var a=r.events;a===null?r.events=[t]:a.push(t)}}function By(t){var r=zt().memoizedState;return T1({ref:r,nextImpl:t}),function(){if((ft&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function Fy(t,r){return Rc(4,2,t,r)}function qy(t,r){return Rc(4,4,t,r)}function Hy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Gy(t,r,a){a=a!=null?a.concat([t]):null,Rc(4,4,Hy.bind(null,r,t),a)}function Ef(){}function Qy(t,r){var a=zt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&cf(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Yy(t,r){var a=zt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&cf(r,l[1]))return l[0];if(l=t(),sa){Yn(!0);try{t()}finally{Yn(!1)}}return a.memoizedState=[l,r],l}function Tf(t,r,a){return a===void 0||(di&1073741824)!==0&&(tt&261930)===0?t.memoizedState=r:(t.memoizedState=a,t=K_(),$e.lanes|=t,ts|=t,a)}function Ky(t,r,a,l){return Un(a,r)?a:Ya.current!==null?(t=Tf(t,a,l),Un(t,r)||(Xt=!0),t):(di&42)===0||(di&1073741824)!==0&&(tt&261930)===0?(Xt=!0,t.memoizedState=a):(t=K_(),$e.lanes|=t,ts|=t,r)}function $y(t,r,a,l,h){var f=ye.p;ye.p=f!==0&&8>f?f:8;var v=ee.T,S={};ee.T=S,xf(t,!1,r,a);try{var V=h(),X=ee.S;if(X!==null&&X(S,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ae=y1(V,l);Sl(t,r,ae,Hn(t))}else Sl(t,r,l,Hn(t))}catch(me){Sl(t,r,{then:function(){},status:"rejected",reason:me},Hn())}finally{ye.p=f,v!==null&&S.types!==null&&(v.types=S.types),ee.T=v}}function S1(){}function Sf(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=Wy(t).queue;$y(t,h,r,he,a===null?S1:function(){return Xy(t),a(l)})}function Wy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:he},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Xy(t){var r=Wy(t);r.next===null&&(r=t.alternate.memoizedState),Sl(t,r.next.queue,{},Hn())}function wf(){return fn(zl)}function Jy(){return zt().memoizedState}function Zy(){return zt().memoizedState}function w1(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Hn();t=$i(a);var l=Wi(r,t,a);l!==null&&(Mn(l,r,a),_l(l,r,a)),r={cache:Jh()},t.payload=r;return}r=r.return}}function x1(t,r,a){var l=Hn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Cc(t)?t_(r,a):(a=Bh(t,r,a,l),a!==null&&(Mn(a,t,l),n_(a,r,l)))}function e_(t,r,a){var l=Hn();Sl(t,r,a,l)}function Sl(t,r,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Cc(t))t_(r,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var v=r.lastRenderedState,S=f(v,a);if(h.hasEagerState=!0,h.eagerState=S,Un(S,v))return lc(t,r,h,0),wt===null&&oc(),!1}catch{}if(a=Bh(t,r,h,l),a!==null)return Mn(a,t,l),n_(a,r,l),!0}return!1}function xf(t,r,a,l){if(l={lane:2,revertLane:rm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Cc(t)){if(r)throw Error(s(479))}else r=Bh(t,a,l,2),r!==null&&Mn(r,t,2)}function Cc(t){var r=t.alternate;return t===$e||r!==null&&r===$e}function t_(t,r){Ka=Ec=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function n_(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Go(t,a)}}var wl={readContext:fn,use:wc,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt};wl.useEffectEvent=kt;var r_={readContext:fn,use:wc,useCallback:function(t,r){return xn().memoizedState=[t,r===void 0?null:r],t},useContext:fn,useEffect:zy,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Ac(4194308,4,Hy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Ac(4194308,4,t,r)},useInsertionEffect:function(t,r){Ac(4,2,t,r)},useMemo:function(t,r){var a=xn();r=r===void 0?null:r;var l=t();if(sa){Yn(!0);try{t()}finally{Yn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=xn();if(a!==void 0){var h=a(r);if(sa){Yn(!0);try{a(r)}finally{Yn(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=x1.bind(null,$e,t),[l.memoizedState,t]},useRef:function(t){var r=xn();return t={current:t},r.memoizedState=t},useState:function(t){t=_f(t);var r=t.queue,a=e_.bind(null,$e,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:Ef,useDeferredValue:function(t,r){var a=xn();return Tf(a,t,r)},useTransition:function(){var t=_f(!1);return t=$y.bind(null,$e,t.queue,!0,!1),xn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=$e,h=xn();if(ot){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),wt===null)throw Error(s(349));(tt&127)!==0||wy(l,r,a)}h.memoizedState=a;var f={value:a,getSnapshot:r};return h.queue=f,zy(Ay.bind(null,l,f,t),[t]),l.flags|=2048,Wa(9,{destroy:void 0},xy.bind(null,l,f,a,r),null),a},useId:function(){var t=xn(),r=wt.identifierPrefix;if(ot){var a=Hr,l=qr;a=(l&~(1<<32-Lt(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Tc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=_1++,r="_"+r+"r_"+a.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:wf,useFormState:jy,useActionState:jy,useOptimistic:function(t){var r=xn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=xf.bind(null,$e,!0,a),a.dispatch=r,[t,r]},useMemoCache:gf,useCacheRefresh:function(){return xn().memoizedState=w1.bind(null,$e)},useEffectEvent:function(t){var r=xn(),a={impl:t};return r.memoizedState=a,function(){if((ft&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Af={readContext:fn,use:wc,useCallback:Qy,useContext:fn,useEffect:bf,useImperativeHandle:Gy,useInsertionEffect:Fy,useLayoutEffect:qy,useMemo:Yy,useReducer:xc,useRef:Py,useState:function(){return xc(hi)},useDebugValue:Ef,useDeferredValue:function(t,r){var a=zt();return Ky(a,bt.memoizedState,t,r)},useTransition:function(){var t=xc(hi)[0],r=zt().memoizedState;return[typeof t=="boolean"?t:Tl(t),r]},useSyncExternalStore:Sy,useId:Jy,useHostTransitionStatus:wf,useFormState:Vy,useActionState:Vy,useOptimistic:function(t,r){var a=zt();return Iy(a,bt,t,r)},useMemoCache:gf,useCacheRefresh:Zy};Af.useEffectEvent=By;var i_={readContext:fn,use:wc,useCallback:Qy,useContext:fn,useEffect:bf,useImperativeHandle:Gy,useInsertionEffect:Fy,useLayoutEffect:qy,useMemo:Yy,useReducer:yf,useRef:Py,useState:function(){return yf(hi)},useDebugValue:Ef,useDeferredValue:function(t,r){var a=zt();return bt===null?Tf(a,t,r):Ky(a,bt.memoizedState,t,r)},useTransition:function(){var t=yf(hi)[0],r=zt().memoizedState;return[typeof t=="boolean"?t:Tl(t),r]},useSyncExternalStore:Sy,useId:Jy,useHostTransitionStatus:wf,useFormState:Uy,useActionState:Uy,useOptimistic:function(t,r){var a=zt();return bt!==null?Iy(a,bt,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:gf,useCacheRefresh:Zy};i_.useEffectEvent=By;function Rf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:T({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Cf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=Hn(),h=$i(l);h.payload=r,a!=null&&(h.callback=a),r=Wi(t,h,l),r!==null&&(Mn(r,t,l),_l(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=Hn(),h=$i(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=Wi(t,h,l),r!==null&&(Mn(r,t,l),_l(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Hn(),l=$i(a);l.tag=2,r!=null&&(l.callback=r),r=Wi(t,l,a),r!==null&&(Mn(r,t,a),_l(r,t,a))}};function s_(t,r,a,l,h,f,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,v):r.prototype&&r.prototype.isPureReactComponent?!cl(a,l)||!cl(h,f):!0}function a_(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&Cf.enqueueReplaceState(r,r.state,null)}function aa(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function o_(t){ac(t)}function l_(t){console.error(t)}function u_(t){ac(t)}function Ic(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function c_(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function If(t,r,a){return a=$i(a),a.tag=3,a.payload={element:null},a.callback=function(){Ic(t,r)},a}function d_(t){return t=$i(t),t.tag=3,t}function h_(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){c_(r,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){c_(r,a,l),typeof h!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function A1(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&Fa(r,a,h,!0),a=zn.current,a!==null){switch(a.tag){case 31:case 13:return rr===null?Bc():a.alternate===null&&jt===0&&(jt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===pc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),em(t,l,h)),!1;case 22:return a.flags|=65536,l===pc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),em(t,l,h)),!1}throw Error(s(435,a.tag))}return em(t,l,h),Bc(),!1}if(ot)return r=zn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==Yh&&(t=Error(s(422),{cause:l}),fl(Zn(t,a)))):(l!==Yh&&(r=Error(s(423),{cause:l}),fl(Zn(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Zn(l,a),h=If(t.stateNode,l,h),sf(t,h),jt!==4&&(jt=2)),!1;var f=Error(s(520),{cause:l});if(f=Zn(f,a),Nl===null?Nl=[f]:Nl.push(f),jt!==4&&(jt=2),r===null)return!0;l=Zn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=If(a.stateNode,l,t),sf(a,t),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(ns===null||!ns.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=d_(h),h_(h,t,a,l),sf(a,h),!1}a=a.return}while(a!==null);return!1}var Df=Error(s(461)),Xt=!1;function mn(t,r,a,l){r.child=t===null?py(r,null,a,l):ia(r,t.child,a,l)}function f_(t,r,a,l,h){a=a.render;var f=r.ref;if("ref"in l){var v={};for(var S in l)S!=="ref"&&(v[S]=l[S])}else v=l;return ea(r),l=df(t,r,a,v,f,h),S=hf(),t!==null&&!Xt?(ff(t,r,h),fi(t,r,h)):(ot&&S&&Gh(r),r.flags|=1,mn(t,r,l,h),r.child)}function m_(t,r,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!Fh(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,g_(t,r,f,l,h)):(t=cc(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,!Uf(t,h)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:cl,a(v,l)&&t.ref===r.ref)return fi(t,r,h)}return r.flags|=1,t=oi(f,l),t.ref=r.ref,t.return=r,r.child=t}function g_(t,r,a,l,h){if(t!==null){var f=t.memoizedProps;if(cl(f,l)&&t.ref===r.ref)if(Xt=!1,r.pendingProps=l=f,Uf(t,h))(t.flags&131072)!==0&&(Xt=!0);else return r.lanes=t.lanes,fi(t,r,h)}return Of(t,r,a,l,h)}function p_(t,r,a,l){var h=l.children,f=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,t!==null){for(l=r.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~f}else l=0,r.child=null;return y_(t,r,f,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&mc(r,f!==null?f.cachePool:null),f!==null?vy(r,f):of(),by(r);else return l=r.lanes=536870912,y_(t,r,f!==null?f.baseLanes|a:a,a,l)}else f!==null?(mc(r,f.cachePool),vy(r,f),Ji(),r.memoizedState=null):(t!==null&&mc(r,null),of(),Ji());return mn(t,r,h,a),r.child}function xl(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function y_(t,r,a,l,h){var f=ef();return f=f===null?null:{parent:$t._currentValue,pool:f},r.memoizedState={baseLanes:a,cachePool:f},t!==null&&mc(r,null),of(),by(r),t!==null&&Fa(t,r,l,!0),r.childLanes=h,null}function Dc(t,r){return r=Nc({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function __(t,r,a){return ia(r,t.child,null,a),t=Dc(r,r.pendingProps),t.flags|=2,Bn(r),r.memoizedState=null,t}function R1(t,r,a){var l=r.pendingProps,h=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(ot){if(l.mode==="hidden")return t=Dc(r,l),r.lanes=536870912,xl(null,t);if(uf(r),(t=Rt)?(t=D0(t,nr),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Hi!==null?{id:qr,overflow:Hr}:null,retryLane:536870912,hydrationErrors:null},a=ty(t),a.return=r,r.child=a,hn=r,Rt=null)):t=null,t===null)throw Qi(r);return r.lanes=536870912,null}return Dc(r,l)}var f=t.memoizedState;if(f!==null){var v=f.dehydrated;if(uf(r),h)if(r.flags&256)r.flags&=-257,r=__(t,r,a);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(s(558));else if(Xt||Fa(t,r,a,!1),h=(a&t.childLanes)!==0,Xt||h){if(l=wt,l!==null&&(v=Qo(l,a),v!==0&&v!==f.retryLane))throw f.retryLane=v,Ws(t,v),Mn(l,t,v),Df;Bc(),r=__(t,r,a)}else t=f.treeContext,Rt=ir(v.nextSibling),hn=r,ot=!0,Gi=null,nr=!1,t!==null&&iy(r,t),r=Dc(r,l),r.flags|=4096;return r}return t=oi(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function Oc(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Of(t,r,a,l,h){return ea(r),a=df(t,r,a,l,void 0,h),l=hf(),t!==null&&!Xt?(ff(t,r,h),fi(t,r,h)):(ot&&l&&Gh(r),r.flags|=1,mn(t,r,a,h),r.child)}function v_(t,r,a,l,h,f){return ea(r),r.updateQueue=null,a=Ty(r,l,a,h),Ey(t),l=hf(),t!==null&&!Xt?(ff(t,r,f),fi(t,r,f)):(ot&&l&&Gh(r),r.flags|=1,mn(t,r,a,f),r.child)}function b_(t,r,a,l,h){if(ea(r),r.stateNode===null){var f=Ua,v=a.contextType;typeof v=="object"&&v!==null&&(f=fn(v)),f=new a(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Cf,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},nf(r),v=a.contextType,f.context=typeof v=="object"&&v!==null?fn(v):Ua,f.state=r.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Rf(r,a,v,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&Cf.enqueueReplaceState(f,f.state,null),bl(r,l,f,h),vl(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){f=r.stateNode;var S=r.memoizedProps,V=aa(a,S);f.props=V;var X=f.context,ae=a.contextType;v=Ua,typeof ae=="object"&&ae!==null&&(v=fn(ae));var me=a.getDerivedStateFromProps;ae=typeof me=="function"||typeof f.getSnapshotBeforeUpdate=="function",S=r.pendingProps!==S,ae||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(S||X!==v)&&a_(r,f,l,v),Ki=!1;var J=r.memoizedState;f.state=J,bl(r,l,f,h),vl(),X=r.memoizedState,S||J!==X||Ki?(typeof me=="function"&&(Rf(r,a,me,l),X=r.memoizedState),(V=Ki||s_(r,a,V,l,J,X,v))?(ae||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=X),f.props=l,f.state=X,f.context=v,l=V):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,rf(t,r),v=r.memoizedProps,ae=aa(a,v),f.props=ae,me=r.pendingProps,J=f.context,X=a.contextType,V=Ua,typeof X=="object"&&X!==null&&(V=fn(X)),S=a.getDerivedStateFromProps,(X=typeof S=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==me||J!==V)&&a_(r,f,l,V),Ki=!1,J=r.memoizedState,f.state=J,bl(r,l,f,h),vl();var ie=r.memoizedState;v!==me||J!==ie||Ki||t!==null&&t.dependencies!==null&&hc(t.dependencies)?(typeof S=="function"&&(Rf(r,a,S,l),ie=r.memoizedState),(ae=Ki||s_(r,a,ae,l,J,ie,V)||t!==null&&t.dependencies!==null&&hc(t.dependencies))?(X||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,ie,V),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,ie,V)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&J===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&J===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=ie),f.props=l,f.state=ie,f.context=V,l=ae):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&J===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&J===t.memoizedState||(r.flags|=1024),l=!1)}return f=l,Oc(t,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,t!==null&&l?(r.child=ia(r,t.child,null,h),r.child=ia(r,null,a,h)):mn(t,r,a,h),r.memoizedState=f.state,t=r.child):t=fi(t,r,h),t}function E_(t,r,a,l){return Js(),r.flags|=256,mn(t,r,a,l),r.child}var Nf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mf(t){return{baseLanes:t,cachePool:cy()}}function kf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=qn),t}function T_(t,r,a){var l=r.pendingProps,h=!1,f=(r.flags&128)!==0,v;if((v=f)||(v=t!==null&&t.memoizedState===null?!1:(Pt.current&2)!==0),v&&(h=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,t===null){if(ot){if(h?Xi(r):Ji(),(t=Rt)?(t=D0(t,nr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Hi!==null?{id:qr,overflow:Hr}:null,retryLane:536870912,hydrationErrors:null},a=ty(t),a.return=r,r.child=a,hn=r,Rt=null)):t=null,t===null)throw Qi(r);return pm(t)?r.lanes=32:r.lanes=536870912,null}var S=l.children;return l=l.fallback,h?(Ji(),h=r.mode,S=Nc({mode:"hidden",children:S},h),l=Xs(l,h,a,null),S.return=r,l.return=r,S.sibling=l,r.child=S,l=r.child,l.memoizedState=Mf(a),l.childLanes=kf(t,v,a),r.memoizedState=Nf,xl(null,l)):(Xi(r),jf(r,S))}var V=t.memoizedState;if(V!==null&&(S=V.dehydrated,S!==null)){if(f)r.flags&256?(Xi(r),r.flags&=-257,r=Vf(t,r,a)):r.memoizedState!==null?(Ji(),r.child=t.child,r.flags|=128,r=null):(Ji(),S=l.fallback,h=r.mode,l=Nc({mode:"visible",children:l.children},h),S=Xs(S,h,a,null),S.flags|=2,l.return=r,S.return=r,l.sibling=S,r.child=l,ia(r,t.child,null,a),l=r.child,l.memoizedState=Mf(a),l.childLanes=kf(t,v,a),r.memoizedState=Nf,r=xl(null,l));else if(Xi(r),pm(S)){if(v=S.nextSibling&&S.nextSibling.dataset,v)var X=v.dgst;v=X,l=Error(s(419)),l.stack="",l.digest=v,fl({value:l,source:null,stack:null}),r=Vf(t,r,a)}else if(Xt||Fa(t,r,a,!1),v=(a&t.childLanes)!==0,Xt||v){if(v=wt,v!==null&&(l=Qo(v,a),l!==0&&l!==V.retryLane))throw V.retryLane=l,Ws(t,l),Mn(v,t,l),Df;gm(S)||Bc(),r=Vf(t,r,a)}else gm(S)?(r.flags|=192,r.child=t.child,r=null):(t=V.treeContext,Rt=ir(S.nextSibling),hn=r,ot=!0,Gi=null,nr=!1,t!==null&&iy(r,t),r=jf(r,l.children),r.flags|=4096);return r}return h?(Ji(),S=l.fallback,h=r.mode,V=t.child,X=V.sibling,l=oi(V,{mode:"hidden",children:l.children}),l.subtreeFlags=V.subtreeFlags&65011712,X!==null?S=oi(X,S):(S=Xs(S,h,a,null),S.flags|=2),S.return=r,l.return=r,l.sibling=S,r.child=l,xl(null,l),l=r.child,S=t.child.memoizedState,S===null?S=Mf(a):(h=S.cachePool,h!==null?(V=$t._currentValue,h=h.parent!==V?{parent:V,pool:V}:h):h=cy(),S={baseLanes:S.baseLanes|a,cachePool:h}),l.memoizedState=S,l.childLanes=kf(t,v,a),r.memoizedState=Nf,xl(t.child,l)):(Xi(r),a=t.child,t=a.sibling,a=oi(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(v=r.deletions,v===null?(r.deletions=[t],r.flags|=16):v.push(t)),r.child=a,r.memoizedState=null,a)}function jf(t,r){return r=Nc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Nc(t,r){return t=Pn(22,t,null,r),t.lanes=0,t}function Vf(t,r,a){return ia(r,t.child,null,a),t=jf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function S_(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Wh(t.return,r,a)}function Lf(t,r,a,l,h,f){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:f}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=h,v.treeForkCount=f)}function w_(t,r,a){var l=r.pendingProps,h=l.revealOrder,f=l.tail;l=l.children;var v=Pt.current,S=(v&2)!==0;if(S?(v=v&1|2,r.flags|=128):v&=1,Q(Pt,v),mn(t,r,l,a),l=ot?hl:0,!S&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&S_(t,a,r);else if(t.tag===19)S_(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&bc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),Lf(r,!1,h,a,f,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&bc(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Lf(r,!0,a,null,f,l);break;case"together":Lf(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function fi(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),ts|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(Fa(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=oi(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=oi(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Uf(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&hc(t)))}function C1(t,r,a){switch(r.tag){case 3:je(r,r.stateNode.containerInfo),Yi(r,$t,t.memoizedState.cache),Js();break;case 27:case 5:mt(r);break;case 4:je(r,r.stateNode.containerInfo);break;case 10:Yi(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,uf(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Xi(r),r.flags|=128,null):(a&r.child.childLanes)!==0?T_(t,r,a):(Xi(r),t=fi(t,r,a),t!==null?t.sibling:null);Xi(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(Fa(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return w_(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Q(Pt,Pt.current),l)break;return null;case 22:return r.lanes=0,p_(t,r,a,r.pendingProps);case 24:Yi(r,$t,t.memoizedState.cache)}return fi(t,r,a)}function x_(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Xt=!0;else{if(!Uf(t,a)&&(r.flags&128)===0)return Xt=!1,C1(t,r,a);Xt=(t.flags&131072)!==0}else Xt=!1,ot&&(r.flags&1048576)!==0&&ry(r,hl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=na(r.elementType),r.type=t,typeof t=="function")Fh(t)?(l=aa(t,l),r.tag=1,r=b_(null,r,t,l,a)):(r.tag=0,r=Of(null,r,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===Ee){r.tag=11,r=f_(null,r,t,l,a);break e}else if(h===D){r.tag=14,r=m_(null,r,t,l,a);break e}}throw r=Ye(t)||t,Error(s(306,r,""))}}return r;case 0:return Of(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=aa(l,r.pendingProps),b_(t,r,l,h,a);case 3:e:{if(je(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var f=r.memoizedState;h=f.element,rf(t,r),bl(r,l,null,a);var v=r.memoizedState;if(l=v.cache,Yi(r,$t,l),l!==f.cache&&Xh(r,[$t],a,!0),vl(),l=v.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=E_(t,r,l,a);break e}else if(l!==h){h=Zn(Error(s(424)),r),fl(h),r=E_(t,r,l,a);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Rt=ir(t.firstChild),hn=r,ot=!0,Gi=null,nr=!0,a=py(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Js(),l===h){r=fi(t,r,a);break e}mn(t,r,l,a)}r=r.child}return r;case 26:return Oc(t,r),t===null?(a=V0(r.type,null,r.pendingProps,null))?r.memoizedState=a:ot||(a=r.type,t=r.pendingProps,l=Kc(we.current).createElement(a),l[Qt]=r,l[sn]=t,gn(l,a,t),Yt(l),r.stateNode=l):r.memoizedState=V0(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return mt(r),t===null&&ot&&(l=r.stateNode=M0(r.type,r.pendingProps,we.current),hn=r,nr=!0,h=Rt,as(r.type)?(ym=h,Rt=ir(l.firstChild)):Rt=h),mn(t,r,r.pendingProps.children,a),Oc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&ot&&((h=l=Rt)&&(l=iw(l,r.type,r.pendingProps,nr),l!==null?(r.stateNode=l,hn=r,Rt=ir(l.firstChild),nr=!1,h=!0):h=!1),h||Qi(r)),mt(r),h=r.type,f=r.pendingProps,v=t!==null?t.memoizedProps:null,l=f.children,hm(h,f)?l=null:v!==null&&hm(h,v)&&(r.flags|=32),r.memoizedState!==null&&(h=df(t,r,v1,null,null,a),zl._currentValue=h),Oc(t,r),mn(t,r,l,a),r.child;case 6:return t===null&&ot&&((t=a=Rt)&&(a=sw(a,r.pendingProps,nr),a!==null?(r.stateNode=a,hn=r,Rt=null,t=!0):t=!1),t||Qi(r)),null;case 13:return T_(t,r,a);case 4:return je(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=ia(r,null,l,a):mn(t,r,l,a),r.child;case 11:return f_(t,r,r.type,r.pendingProps,a);case 7:return mn(t,r,r.pendingProps,a),r.child;case 8:return mn(t,r,r.pendingProps.children,a),r.child;case 12:return mn(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Yi(r,r.type,l.value),mn(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,ea(r),h=fn(h),l=l(h),r.flags|=1,mn(t,r,l,a),r.child;case 14:return m_(t,r,r.type,r.pendingProps,a);case 15:return g_(t,r,r.type,r.pendingProps,a);case 19:return w_(t,r,a);case 31:return R1(t,r,a);case 22:return p_(t,r,a,r.pendingProps);case 24:return ea(r),l=fn($t),t===null?(h=ef(),h===null&&(h=wt,f=Jh(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),r.memoizedState={parent:l,cache:h},nf(r),Yi(r,$t,h)):((t.lanes&a)!==0&&(rf(t,r),bl(r,null,null,a),vl()),h=t.memoizedState,f=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Yi(r,$t,l)):(l=f.cache,Yi(r,$t,l),l!==h.cache&&Xh(r,[$t],a,!0))),mn(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function mi(t){t.flags|=4}function Pf(t,r,a,l,h){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(J_())t.flags|=8192;else throw ra=pc,tf}else t.flags&=-16777217}function A_(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!B0(r))if(J_())t.flags|=8192;else throw ra=pc,tf}function Mc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Pu():536870912,t.lanes|=r,eo|=r)}function Al(t,r){if(!ot)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Ct(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function I1(t,r,a){var l=r.pendingProps;switch(Qh(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(r),null;case 1:return Ct(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ci($t),Be(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ba(r)?mi(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Kh())),Ct(r),null;case 26:var h=r.type,f=r.memoizedState;return t===null?(mi(r),f!==null?(Ct(r),A_(r,f)):(Ct(r),Pf(r,h,null,l,a))):f?f!==t.memoizedState?(mi(r),Ct(r),A_(r,f)):(Ct(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&mi(r),Ct(r),Pf(r,h,t,l,a)),null;case 27:if(Vt(r),a=we.current,h=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&mi(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return Ct(r),null}t=Y.current,Ba(r)?sy(r):(t=M0(h,l,a),r.stateNode=t,mi(r))}return Ct(r),null;case 5:if(Vt(r),h=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&mi(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return Ct(r),null}if(f=Y.current,Ba(r))sy(r);else{var v=Kc(we.current);switch(f){case 1:f=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:f=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":f=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":f=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":f=v.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?v.createElement(h,{is:l.is}):v.createElement(h)}}f[Qt]=r,f[sn]=l;e:for(v=r.child;v!==null;){if(v.tag===5||v.tag===6)f.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break e;for(;v.sibling===null;){if(v.return===null||v.return===r)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}r.stateNode=f;e:switch(gn(f,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&mi(r)}}return Ct(r),Pf(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,a),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&mi(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=we.current,Ba(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=hn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Qt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||T0(t.nodeValue,a)),t||Qi(r,!0)}else t=Kc(t).createTextNode(l),t[Qt]=r,r.stateNode=t}return Ct(r),null;case 31:if(a=r.memoizedState,t===null||t.memoizedState!==null){if(l=Ba(r),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Qt]=r}else Js(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ct(r),t=!1}else a=Kh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return r.flags&256?(Bn(r),r):(Bn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return Ct(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Ba(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Qt]=r}else Js(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ct(r),h=!1}else h=Kh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(Bn(r),r):(Bn(r),null)}return Bn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)),a!==t&&a&&(r.child.flags|=8192),Mc(r,r.updateQueue),Ct(r),null);case 4:return Be(),t===null&&om(r.stateNode.containerInfo),Ct(r),null;case 10:return ci(r.type),Ct(r),null;case 19:if(L(Pt),l=r.memoizedState,l===null)return Ct(r),null;if(h=(r.flags&128)!==0,f=l.rendering,f===null)if(h)Al(l,!1);else{if(jt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(f=bc(t),f!==null){for(r.flags|=128,Al(l,!1),t=f.updateQueue,r.updateQueue=t,Mc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)ey(a,t),a=a.sibling;return Q(Pt,Pt.current&1|2),ot&&li(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&Ve()>Uc&&(r.flags|=128,h=!0,Al(l,!1),r.lanes=4194304)}else{if(!h)if(t=bc(f),t!==null){if(r.flags|=128,h=!0,t=t.updateQueue,r.updateQueue=t,Mc(r,t),Al(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!ot)return Ct(r),null}else 2*Ve()-l.renderingStartTime>Uc&&a!==536870912&&(r.flags|=128,h=!0,Al(l,!1),r.lanes=4194304);l.isBackwards?(f.sibling=r.child,r.child=f):(t=l.last,t!==null?t.sibling=f:r.child=f,l.last=f)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ve(),t.sibling=null,a=Pt.current,Q(Pt,h?a&1|2:a&1),ot&&li(r,l.treeForkCount),t):(Ct(r),null);case 22:case 23:return Bn(r),lf(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(Ct(r),r.subtreeFlags&6&&(r.flags|=8192)):Ct(r),a=r.updateQueue,a!==null&&Mc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&L(ta),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ci($t),Ct(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function D1(t,r){switch(Qh(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ci($t),Be(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Vt(r),null;case 31:if(r.memoizedState!==null){if(Bn(r),r.alternate===null)throw Error(s(340));Js()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Bn(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Js()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return L(Pt),null;case 4:return Be(),null;case 10:return ci(r.type),null;case 22:case 23:return Bn(r),lf(),t!==null&&L(ta),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return ci($t),null;case 25:return null;default:return null}}function R_(t,r){switch(Qh(r),r.tag){case 3:ci($t),Be();break;case 26:case 27:case 5:Vt(r);break;case 4:Be();break;case 31:r.memoizedState!==null&&Bn(r);break;case 13:Bn(r);break;case 19:L(Pt);break;case 10:ci(r.type);break;case 22:case 23:Bn(r),lf(),t!==null&&L(ta);break;case 24:ci($t)}}function Rl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,v=a.inst;l=f(),v.destroy=l}a=a.next}while(a!==h)}}catch(S){_t(r,r.return,S)}}function Zi(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var v=l.inst,S=v.destroy;if(S!==void 0){v.destroy=void 0,h=r;var V=a,X=S;try{X()}catch(ae){_t(h,V,ae)}}}l=l.next}while(l!==f)}}catch(ae){_t(r,r.return,ae)}}function C_(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{_y(r,a)}catch(l){_t(t,t.return,l)}}}function I_(t,r,a){a.props=aa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){_t(t,r,l)}}function Cl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){_t(t,r,h)}}function Gr(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){_t(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){_t(t,r,h)}else a.current=null}function D_(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){_t(t,t.return,h)}}function zf(t,r,a){try{var l=t.stateNode;J1(l,t.type,a,r),l[sn]=r}catch(h){_t(t,t.return,h)}}function O_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&as(t.type)||t.tag===4}function Bf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||O_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&as(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ff(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=fr));else if(l!==4&&(l===27&&as(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Ff(t,r,a),t=t.sibling;t!==null;)Ff(t,r,a),t=t.sibling}function kc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&as(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(kc(t,r,a),t=t.sibling;t!==null;)kc(t,r,a),t=t.sibling}function N_(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);gn(r,l,a),r[Qt]=t,r[sn]=a}catch(f){_t(t,t.return,f)}}var gi=!1,Jt=!1,qf=!1,M_=typeof WeakSet=="function"?WeakSet:Set,on=null;function O1(t,r){if(t=t.containerInfo,cm=td,t=Gp(t),jh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var v=0,S=-1,V=-1,X=0,ae=0,me=t,J=null;t:for(;;){for(var ie;me!==a||h!==0&&me.nodeType!==3||(S=v+h),me!==f||l!==0&&me.nodeType!==3||(V=v+l),me.nodeType===3&&(v+=me.nodeValue.length),(ie=me.firstChild)!==null;)J=me,me=ie;for(;;){if(me===t)break t;if(J===a&&++X===h&&(S=v),J===f&&++ae===l&&(V=v),(ie=me.nextSibling)!==null)break;me=J,J=me.parentNode}me=ie}a=S===-1||V===-1?null:{start:S,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(dm={focusedElem:t,selectionRange:a},td=!1,on=r;on!==null;)if(r=on,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,on=t;else for(;on!==null;){switch(r=on,f=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=r,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Ce=aa(a.type,h);t=l.getSnapshotBeforeUpdate(Ce,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(Le){_t(a,a.return,Le)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)mm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":mm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,on=t;break}on=r.return}}function k_(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:yi(t,a),l&4&&Rl(5,a);break;case 1:if(yi(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(v){_t(a,a.return,v)}else{var h=aa(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(v){_t(a,a.return,v)}}l&64&&C_(a),l&512&&Cl(a,a.return);break;case 3:if(yi(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{_y(t,r)}catch(v){_t(a,a.return,v)}}break;case 27:r===null&&l&4&&N_(a);case 26:case 5:yi(t,a),r===null&&l&4&&D_(a),l&512&&Cl(a,a.return);break;case 12:yi(t,a);break;case 31:yi(t,a),l&4&&L_(t,a);break;case 13:yi(t,a),l&4&&U_(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=z1.bind(null,a),aw(t,a))));break;case 22:if(l=a.memoizedState!==null||gi,!l){r=r!==null&&r.memoizedState!==null||Jt,h=gi;var f=Jt;gi=l,(Jt=r)&&!f?_i(t,a,(a.subtreeFlags&8772)!==0):yi(t,a),gi=h,Jt=f}break;case 30:break;default:yi(t,a)}}function j_(t){var r=t.alternate;r!==null&&(t.alternate=null,j_(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&wa(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ot=null,In=!1;function pi(t,r,a){for(a=a.child;a!==null;)V_(t,r,a),a=a.sibling}function V_(t,r,a){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(ur,a)}catch{}switch(a.tag){case 26:Jt||Gr(a,r),pi(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Jt||Gr(a,r);var l=Ot,h=In;as(a.type)&&(Ot=a.stateNode,In=!1),pi(t,r,a),Ll(a.stateNode),Ot=l,In=h;break;case 5:Jt||Gr(a,r);case 6:if(l=Ot,h=In,Ot=null,pi(t,r,a),Ot=l,In=h,Ot!==null)if(In)try{(Ot.nodeType===9?Ot.body:Ot.nodeName==="HTML"?Ot.ownerDocument.body:Ot).removeChild(a.stateNode)}catch(f){_t(a,r,f)}else try{Ot.removeChild(a.stateNode)}catch(f){_t(a,r,f)}break;case 18:Ot!==null&&(In?(t=Ot,C0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),lo(t)):C0(Ot,a.stateNode));break;case 4:l=Ot,h=In,Ot=a.stateNode.containerInfo,In=!0,pi(t,r,a),Ot=l,In=h;break;case 0:case 11:case 14:case 15:Zi(2,a,r),Jt||Zi(4,a,r),pi(t,r,a);break;case 1:Jt||(Gr(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&I_(a,r,l)),pi(t,r,a);break;case 21:pi(t,r,a);break;case 22:Jt=(l=Jt)||a.memoizedState!==null,pi(t,r,a),Jt=l;break;default:pi(t,r,a)}}function L_(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{lo(t)}catch(a){_t(r,r.return,a)}}}function U_(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{lo(t)}catch(a){_t(r,r.return,a)}}function N1(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new M_),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new M_),r;default:throw Error(s(435,t.tag))}}function jc(t,r){var a=N1(t);r.forEach(function(l){if(!a.has(l)){a.add(l);var h=B1.bind(null,t,l);l.then(h,h)}})}function Dn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,v=r,S=v;e:for(;S!==null;){switch(S.tag){case 27:if(as(S.type)){Ot=S.stateNode,In=!1;break e}break;case 5:Ot=S.stateNode,In=!1;break e;case 3:case 4:Ot=S.stateNode.containerInfo,In=!0;break e}S=S.return}if(Ot===null)throw Error(s(160));V_(f,v,h),Ot=null,In=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)P_(r,t),r=r.sibling}var vr=null;function P_(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Dn(r,t),On(t),l&4&&(Zi(3,t,t.return),Rl(3,t),Zi(5,t,t.return));break;case 1:Dn(r,t),On(t),l&512&&(Jt||a===null||Gr(a,a.return)),l&64&&gi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=vr;if(Dn(r,t),On(t),l&512&&(Jt||a===null||Gr(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Or]||f[Qt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),gn(f,l,a),f[Qt]=t,Yt(f),l=f;break e;case"link":var v=P0("link","href",h).get(l+(a.href||""));if(v){for(var S=0;S<v.length;S++)if(f=v[S],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(S,1);break t}}f=h.createElement(l),gn(f,l,a),h.head.appendChild(f);break;case"meta":if(v=P0("meta","content",h).get(l+(a.content||""))){for(S=0;S<v.length;S++)if(f=v[S],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(S,1);break t}}f=h.createElement(l),gn(f,l,a),h.head.appendChild(f);break;default:throw Error(s(468,l))}f[Qt]=t,Yt(f),l=f}t.stateNode=l}else z0(h,t.type,t.stateNode);else t.stateNode=U0(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?z0(h,t.type,t.stateNode):U0(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&zf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Dn(r,t),On(t),l&512&&(Jt||a===null||Gr(a,a.return)),a!==null&&l&4&&zf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Dn(r,t),On(t),l&512&&(Jt||a===null||Gr(a,a.return)),t.flags&32){h=t.stateNode;try{Cn(h,"")}catch(Ce){_t(t,t.return,Ce)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,zf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(qf=!0);break;case 6:if(Dn(r,t),On(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Ce){_t(t,t.return,Ce)}}break;case 3:if(Xc=null,h=vr,vr=$c(r.containerInfo),Dn(r,t),vr=h,On(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{lo(r.containerInfo)}catch(Ce){_t(t,t.return,Ce)}qf&&(qf=!1,z_(t));break;case 4:l=vr,vr=$c(t.stateNode.containerInfo),Dn(r,t),On(t),vr=l;break;case 12:Dn(r,t),On(t);break;case 31:Dn(r,t),On(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,jc(t,l)));break;case 13:Dn(r,t),On(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Lc=Ve()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,jc(t,l)));break;case 22:h=t.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,X=gi,ae=Jt;if(gi=X||h,Jt=ae||V,Dn(r,t),Jt=ae,gi=X,On(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||V||gi||Jt||oa(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){V=a=r;try{if(f=V.stateNode,h)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{S=V.stateNode;var me=V.memoizedProps.style,J=me!=null&&me.hasOwnProperty("display")?me.display:null;S.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(Ce){_t(V,V.return,Ce)}}}else if(r.tag===6){if(a===null){V=r;try{V.stateNode.nodeValue=h?"":V.memoizedProps}catch(Ce){_t(V,V.return,Ce)}}}else if(r.tag===18){if(a===null){V=r;try{var ie=V.stateNode;h?I0(ie,!0):I0(V.stateNode,!1)}catch(Ce){_t(V,V.return,Ce)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,jc(t,a))));break;case 19:Dn(r,t),On(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,jc(t,l)));break;case 30:break;case 21:break;default:Dn(r,t),On(t)}}function On(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(O_(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=Bf(t);kc(t,f,h);break;case 5:var v=a.stateNode;a.flags&32&&(Cn(v,""),a.flags&=-33);var S=Bf(t);kc(t,S,v);break;case 3:case 4:var V=a.stateNode.containerInfo,X=Bf(t);Ff(t,X,V);break;default:throw Error(s(161))}}catch(ae){_t(t,t.return,ae)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function z_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;z_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function yi(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)k_(t,r.alternate,r),r=r.sibling}function oa(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Zi(4,r,r.return),oa(r);break;case 1:Gr(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&I_(r,r.return,a),oa(r);break;case 27:Ll(r.stateNode);case 26:case 5:Gr(r,r.return),oa(r);break;case 22:r.memoizedState===null&&oa(r);break;case 30:oa(r);break;default:oa(r)}t=t.sibling}}function _i(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,f=r,v=f.flags;switch(f.tag){case 0:case 11:case 15:_i(h,f,a),Rl(4,f);break;case 1:if(_i(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(X){_t(l,l.return,X)}if(l=f,h=l.updateQueue,h!==null){var S=l.stateNode;try{var V=h.shared.hiddenCallbacks;if(V!==null)for(h.shared.hiddenCallbacks=null,h=0;h<V.length;h++)yy(V[h],S)}catch(X){_t(l,l.return,X)}}a&&v&64&&C_(f),Cl(f,f.return);break;case 27:N_(f);case 26:case 5:_i(h,f,a),a&&l===null&&v&4&&D_(f),Cl(f,f.return);break;case 12:_i(h,f,a);break;case 31:_i(h,f,a),a&&v&4&&L_(h,f);break;case 13:_i(h,f,a),a&&v&4&&U_(h,f);break;case 22:f.memoizedState===null&&_i(h,f,a),Cl(f,f.return);break;case 30:break;default:_i(h,f,a)}r=r.sibling}}function Hf(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&ml(a))}function Gf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ml(t))}function br(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)B_(t,r,a,l),r=r.sibling}function B_(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:br(t,r,a,l),h&2048&&Rl(9,r);break;case 1:br(t,r,a,l);break;case 3:br(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ml(t)));break;case 12:if(h&2048){br(t,r,a,l),t=r.stateNode;try{var f=r.memoizedProps,v=f.id,S=f.onPostCommit;typeof S=="function"&&S(v,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(V){_t(r,r.return,V)}}else br(t,r,a,l);break;case 31:br(t,r,a,l);break;case 13:br(t,r,a,l);break;case 23:break;case 22:f=r.stateNode,v=r.alternate,r.memoizedState!==null?f._visibility&2?br(t,r,a,l):Il(t,r):f._visibility&2?br(t,r,a,l):(f._visibility|=2,Xa(t,r,a,l,(r.subtreeFlags&10256)!==0||!1)),h&2048&&Hf(v,r);break;case 24:br(t,r,a,l),h&2048&&Gf(r.alternate,r);break;default:br(t,r,a,l)}}function Xa(t,r,a,l,h){for(h=h&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var f=t,v=r,S=a,V=l,X=v.flags;switch(v.tag){case 0:case 11:case 15:Xa(f,v,S,V,h),Rl(8,v);break;case 23:break;case 22:var ae=v.stateNode;v.memoizedState!==null?ae._visibility&2?Xa(f,v,S,V,h):Il(f,v):(ae._visibility|=2,Xa(f,v,S,V,h)),h&&X&2048&&Hf(v.alternate,v);break;case 24:Xa(f,v,S,V,h),h&&X&2048&&Gf(v.alternate,v);break;default:Xa(f,v,S,V,h)}r=r.sibling}}function Il(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:Il(a,l),h&2048&&Hf(l.alternate,l);break;case 24:Il(a,l),h&2048&&Gf(l.alternate,l);break;default:Il(a,l)}r=r.sibling}}var Dl=8192;function Ja(t,r,a){if(t.subtreeFlags&Dl)for(t=t.child;t!==null;)F_(t,r,a),t=t.sibling}function F_(t,r,a){switch(t.tag){case 26:Ja(t,r,a),t.flags&Dl&&t.memoizedState!==null&&_w(a,vr,t.memoizedState,t.memoizedProps);break;case 5:Ja(t,r,a);break;case 3:case 4:var l=vr;vr=$c(t.stateNode.containerInfo),Ja(t,r,a),vr=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Dl,Dl=16777216,Ja(t,r,a),Dl=l):Ja(t,r,a));break;default:Ja(t,r,a)}}function q_(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Ol(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];on=l,G_(l,t)}q_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)H_(t),t=t.sibling}function H_(t){switch(t.tag){case 0:case 11:case 15:Ol(t),t.flags&2048&&Zi(9,t,t.return);break;case 3:Ol(t);break;case 12:Ol(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Vc(t)):Ol(t);break;default:Ol(t)}}function Vc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];on=l,G_(l,t)}q_(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Zi(8,r,r.return),Vc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Vc(r));break;default:Vc(r)}t=t.sibling}}function G_(t,r){for(;on!==null;){var a=on;switch(a.tag){case 0:case 11:case 15:Zi(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ml(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,on=l;else e:for(a=t;on!==null;){l=on;var h=l.sibling,f=l.return;if(j_(l),l===a){on=null;break e}if(h!==null){h.return=f,on=h;break e}on=f}}}var M1={getCacheForType:function(t){var r=fn($t),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a},cacheSignal:function(){return fn($t).controller.signal}},k1=typeof WeakMap=="function"?WeakMap:Map,ft=0,wt=null,Ze=null,tt=0,yt=0,Fn=null,es=!1,Za=!1,Qf=!1,vi=0,jt=0,ts=0,la=0,Yf=0,qn=0,eo=0,Nl=null,Nn=null,Kf=!1,Lc=0,Q_=0,Uc=1/0,Pc=null,ns=null,nn=0,rs=null,to=null,bi=0,$f=0,Wf=null,Y_=null,Ml=0,Xf=null;function Hn(){return(ft&2)!==0&&tt!==0?tt&-tt:ee.T!==null?rm():zu()}function K_(){if(qn===0)if((tt&536870912)===0||ot){var t=js;js<<=1,(js&3932160)===0&&(js=262144),qn=t}else qn=536870912;return t=zn.current,t!==null&&(t.flags|=32),qn}function Mn(t,r,a){(t===wt&&(yt===2||yt===9)||t.cancelPendingCommit!==null)&&(no(t,0),is(t,tt,qn,!1)),Vs(t,a),((ft&2)===0||t!==wt)&&(t===wt&&((ft&2)===0&&(la|=a),jt===4&&is(t,tt,qn,!1)),Qr(t))}function $_(t,r,a){if((ft&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&t.expiredLanes)===0||cr(t,r),h=l?L1(t,r):Zf(t,r,!0),f=l;do{if(h===0){Za&&!l&&is(t,r,0,!1);break}else{if(a=t.current.alternate,f&&!j1(a)){h=Zf(t,r,!1),f=!1;continue}if(h===2){if(f=r,t.errorRecoveryDisabledLanes&f)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;e:{var S=t;h=Nl;var V=S.current.memoizedState.isDehydrated;if(V&&(no(S,v).flags|=256),v=Zf(S,v,!1),v!==2){if(Qf&&!V){S.errorRecoveryDisabledLanes|=f,la|=f,h=4;break e}f=Nn,Nn=h,f!==null&&(Nn===null?Nn=f:Nn.push.apply(Nn,f))}h=v}if(f=!1,h!==2)continue}}if(h===1){no(t,0),is(t,r,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:is(l,r,qn,!es);break e;case 2:Nn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=Lc+300-Ve(),10<h)){if(is(l,r,qn,!es),Cr(l,0,!0)!==0)break e;bi=r,l.timeoutHandle=A0(W_.bind(null,l,a,Nn,Pc,Kf,r,qn,la,eo,es,f,"Throttled",-0,0),h);break e}W_(l,a,Nn,Pc,Kf,r,qn,la,eo,es,f,null,-0,0)}}break}while(!0);Qr(t)}function W_(t,r,a,l,h,f,v,S,V,X,ae,me,J,ie){if(t.timeoutHandle=-1,me=r.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:fr},F_(r,f,me);var Ce=(f&62914560)===f?Lc-Ve():(f&4194048)===f?Q_-Ve():0;if(Ce=vw(me,Ce),Ce!==null){bi=f,t.cancelPendingCommit=Ce(i0.bind(null,t,r,f,a,l,h,v,S,V,ae,me,null,J,ie)),is(t,f,v,!X);return}}i0(t,r,f,a,l,h,v,S,V)}function j1(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!Un(f(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function is(t,r,a,l){r&=~Yf,r&=~la,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var f=31-Lt(h),v=1<<f;l[f]=-1,h&=~v}a!==0&&Ls(t,a,r)}function zc(){return(ft&6)===0?(kl(0),!1):!0}function Jf(){if(Ze!==null){if(yt===0)var t=Ze.return;else t=Ze,ui=Zs=null,mf(t),Qa=null,pl=0,t=Ze;for(;t!==null;)R_(t.alternate,t),t=t.return;Ze=null}}function no(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,tw(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),bi=0,Jf(),wt=t,Ze=a=oi(t.current,null),tt=r,yt=0,Fn=null,es=!1,Za=cr(t,r),Qf=!1,eo=qn=Yf=la=ts=jt=0,Nn=Nl=null,Kf=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-Lt(l),f=1<<h;r|=t[h],l&=~f}return vi=r,oc(),a}function X_(t,r){$e=null,ee.H=wl,r===Ga||r===gc?(r=fy(),yt=3):r===tf?(r=fy(),yt=4):yt=r===Df?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Fn=r,Ze===null&&(jt=1,Ic(t,Zn(r,t.current)))}function J_(){var t=zn.current;return t===null?!0:(tt&4194048)===tt?rr===null:(tt&62914560)===tt||(tt&536870912)!==0?t===rr:!1}function Z_(){var t=ee.H;return ee.H=wl,t===null?wl:t}function e0(){var t=ee.A;return ee.A=M1,t}function Bc(){jt=4,es||(tt&4194048)!==tt&&zn.current!==null||(Za=!0),(ts&134217727)===0&&(la&134217727)===0||wt===null||is(wt,tt,qn,!1)}function Zf(t,r,a){var l=ft;ft|=2;var h=Z_(),f=e0();(wt!==t||tt!==r)&&(Pc=null,no(t,r)),r=!1;var v=jt;e:do try{if(yt!==0&&Ze!==null){var S=Ze,V=Fn;switch(yt){case 8:Jf(),v=6;break e;case 3:case 2:case 9:case 6:zn.current===null&&(r=!0);var X=yt;if(yt=0,Fn=null,ro(t,S,V,X),a&&Za){v=0;break e}break;default:X=yt,yt=0,Fn=null,ro(t,S,V,X)}}V1(),v=jt;break}catch(ae){X_(t,ae)}while(!0);return r&&t.shellSuspendCounter++,ui=Zs=null,ft=l,ee.H=h,ee.A=f,Ze===null&&(wt=null,tt=0,oc()),v}function V1(){for(;Ze!==null;)t0(Ze)}function L1(t,r){var a=ft;ft|=2;var l=Z_(),h=e0();wt!==t||tt!==r?(Pc=null,Uc=Ve()+500,no(t,r)):Za=cr(t,r);e:do try{if(yt!==0&&Ze!==null){r=Ze;var f=Fn;t:switch(yt){case 1:yt=0,Fn=null,ro(t,r,f,1);break;case 2:case 9:if(dy(f)){yt=0,Fn=null,n0(r);break}r=function(){yt!==2&&yt!==9||wt!==t||(yt=7),Qr(t)},f.then(r,r);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:dy(f)?(yt=0,Fn=null,n0(r)):(yt=0,Fn=null,ro(t,r,f,7));break;case 5:var v=null;switch(Ze.tag){case 26:v=Ze.memoizedState;case 5:case 27:var S=Ze;if(v?B0(v):S.stateNode.complete){yt=0,Fn=null;var V=S.sibling;if(V!==null)Ze=V;else{var X=S.return;X!==null?(Ze=X,Fc(X)):Ze=null}break t}}yt=0,Fn=null,ro(t,r,f,5);break;case 6:yt=0,Fn=null,ro(t,r,f,6);break;case 8:Jf(),jt=6;break e;default:throw Error(s(462))}}U1();break}catch(ae){X_(t,ae)}while(!0);return ui=Zs=null,ee.H=l,ee.A=h,ft=a,Ze!==null?0:(wt=null,tt=0,oc(),jt)}function U1(){for(;Ze!==null&&!be();)t0(Ze)}function t0(t){var r=x_(t.alternate,t,vi);t.memoizedProps=t.pendingProps,r===null?Fc(t):Ze=r}function n0(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=v_(a,r,r.pendingProps,r.type,void 0,tt);break;case 11:r=v_(a,r,r.pendingProps,r.type.render,r.ref,tt);break;case 5:mf(r);default:R_(a,r),r=Ze=ey(r,vi),r=x_(a,r,vi)}t.memoizedProps=t.pendingProps,r===null?Fc(t):Ze=r}function ro(t,r,a,l){ui=Zs=null,mf(r),Qa=null,pl=0;var h=r.return;try{if(A1(t,h,r,a,tt)){jt=1,Ic(t,Zn(a,t.current)),Ze=null;return}}catch(f){if(h!==null)throw Ze=h,f;jt=1,Ic(t,Zn(a,t.current)),Ze=null;return}r.flags&32768?(ot||l===1?t=!0:Za||(tt&536870912)!==0?t=!1:(es=t=!0,(l===2||l===9||l===3||l===6)&&(l=zn.current,l!==null&&l.tag===13&&(l.flags|=16384))),r0(r,t)):Fc(r)}function Fc(t){var r=t;do{if((r.flags&32768)!==0){r0(r,es);return}t=r.return;var a=I1(r.alternate,r,vi);if(a!==null){Ze=a;return}if(r=r.sibling,r!==null){Ze=r;return}Ze=r=t}while(r!==null);jt===0&&(jt=5)}function r0(t,r){do{var a=D1(t.alternate,t);if(a!==null){a.flags&=32767,Ze=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Ze=t;return}Ze=t=a}while(t!==null);jt=6,Ze=null}function i0(t,r,a,l,h,f,v,S,V){t.cancelPendingCommit=null;do qc();while(nn!==0);if((ft&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(f=r.lanes|r.childLanes,f|=zh,Oh(t,a,f,v,S,V),t===wt&&(Ze=wt=null,tt=0),to=r,rs=t,bi=a,$f=f,Wf=h,Y_=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,F1(Oe,function(){return u0(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=ee.T,ee.T=null,h=ye.p,ye.p=2,v=ft,ft|=4;try{O1(t,r,a)}finally{ft=v,ye.p=h,ee.T=l}}nn=1,s0(),a0(),o0()}}function s0(){if(nn===1){nn=0;var t=rs,r=to,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=ee.T,ee.T=null;var l=ye.p;ye.p=2;var h=ft;ft|=4;try{P_(r,t);var f=dm,v=Gp(t.containerInfo),S=f.focusedElem,V=f.selectionRange;if(v!==S&&S&&S.ownerDocument&&Hp(S.ownerDocument.documentElement,S)){if(V!==null&&jh(S)){var X=V.start,ae=V.end;if(ae===void 0&&(ae=X),"selectionStart"in S)S.selectionStart=X,S.selectionEnd=Math.min(ae,S.value.length);else{var me=S.ownerDocument||document,J=me&&me.defaultView||window;if(J.getSelection){var ie=J.getSelection(),Ce=S.textContent.length,Le=Math.min(V.start,Ce),Tt=V.end===void 0?Le:Math.min(V.end,Ce);!ie.extend&&Le>Tt&&(v=Tt,Tt=Le,Le=v);var G=qp(S,Le),P=qp(S,Tt);if(G&&P&&(ie.rangeCount!==1||ie.anchorNode!==G.node||ie.anchorOffset!==G.offset||ie.focusNode!==P.node||ie.focusOffset!==P.offset)){var $=me.createRange();$.setStart(G.node,G.offset),ie.removeAllRanges(),Le>Tt?(ie.addRange($),ie.extend(P.node,P.offset)):($.setEnd(P.node,P.offset),ie.addRange($))}}}}for(me=[],ie=S;ie=ie.parentNode;)ie.nodeType===1&&me.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<me.length;S++){var ce=me[S];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}td=!!cm,dm=cm=null}finally{ft=h,ye.p=l,ee.T=a}}t.current=r,nn=2}}function a0(){if(nn===2){nn=0;var t=rs,r=to,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=ee.T,ee.T=null;var l=ye.p;ye.p=2;var h=ft;ft|=4;try{k_(t,r.alternate,r)}finally{ft=h,ye.p=l,ee.T=a}}nn=3}}function o0(){if(nn===4||nn===3){nn=0,ve();var t=rs,r=to,a=bi,l=Y_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?nn=5:(nn=0,to=rs=null,l0(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ns=null),ri(a),r=r.stateNode,cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(ur,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=ee.T,h=ye.p,ye.p=2,ee.T=null;try{for(var f=t.onRecoverableError,v=0;v<l.length;v++){var S=l[v];f(S.value,{componentStack:S.stack})}}finally{ee.T=r,ye.p=h}}(bi&3)!==0&&qc(),Qr(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Xf?Ml++:(Ml=0,Xf=t):Ml=0,kl(0)}}function l0(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,ml(r)))}function qc(){return s0(),a0(),o0(),u0()}function u0(){if(nn!==5)return!1;var t=rs,r=$f;$f=0;var a=ri(bi),l=ee.T,h=ye.p;try{ye.p=32>a?32:a,ee.T=null,a=Wf,Wf=null;var f=rs,v=bi;if(nn=0,to=rs=null,bi=0,(ft&6)!==0)throw Error(s(331));var S=ft;if(ft|=4,H_(f.current),B_(f,f.current,v,a),ft=S,kl(0,!1),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(ur,f)}catch{}return!0}finally{ye.p=h,ee.T=l,l0(t,r)}}function c0(t,r,a){r=Zn(a,r),r=If(t.stateNode,r,2),t=Wi(t,r,2),t!==null&&(Vs(t,2),Qr(t))}function _t(t,r,a){if(t.tag===3)c0(t,t,a);else for(;r!==null;){if(r.tag===3){c0(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ns===null||!ns.has(l))){t=Zn(a,t),a=d_(2),l=Wi(r,a,2),l!==null&&(h_(a,l,r,t),Vs(l,2),Qr(l));break}}r=r.return}}function em(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new k1;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(Qf=!0,h.add(a),t=P1.bind(null,t,r,a),r.then(t,t))}function P1(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,wt===t&&(tt&a)===a&&(jt===4||jt===3&&(tt&62914560)===tt&&300>Ve()-Lc?(ft&2)===0&&no(t,0):Yf|=a,eo===tt&&(eo=0)),Qr(t)}function d0(t,r){r===0&&(r=Pu()),t=Ws(t,r),t!==null&&(Vs(t,r),Qr(t))}function z1(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),d0(t,a)}function B1(t,r){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),d0(t,a)}function F1(t,r){return oe(t,r)}var Hc=null,io=null,tm=!1,Gc=!1,nm=!1,ss=0;function Qr(t){t!==io&&t.next===null&&(io===null?Hc=io=t:io=io.next=t),Gc=!0,tm||(tm=!0,H1())}function kl(t,r){if(!nm&&Gc){nm=!0;do for(var a=!1,l=Hc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var v=l.suspendedLanes,S=l.pingedLanes;f=(1<<31-Lt(42|t)+1)-1,f&=h&~(v&~S),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,g0(l,f))}else f=tt,f=Cr(l,l===wt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||cr(l,f)||(a=!0,g0(l,f));l=l.next}while(a);nm=!1}}function q1(){h0()}function h0(){Gc=tm=!1;var t=0;ss!==0&&ew()&&(t=ss);for(var r=Ve(),a=null,l=Hc;l!==null;){var h=l.next,f=f0(l,r);f===0?(l.next=null,a===null?Hc=h:a.next=h,h===null&&(io=a)):(a=l,(t!==0||(f&3)!==0)&&(Gc=!0)),l=h}nn!==0&&nn!==5||kl(t),ss!==0&&(ss=0)}function f0(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var v=31-Lt(f),S=1<<v,V=h[v];V===-1?((S&a)===0||(S&l)!==0)&&(h[v]=Dh(S,r)):V<=r&&(t.expiredLanes|=S),f&=~S}if(r=wt,a=tt,a=Cr(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(yt===2||yt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&se(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||cr(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&se(l),ri(a)){case 2:case 8:a=ni;break;case 32:a=Oe;break;case 268435456:a=ku;break;default:a=Oe}return l=m0.bind(null,t),a=oe(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&se(l),t.callbackPriority=2,t.callbackNode=null,2}function m0(t,r){if(nn!==0&&nn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(qc()&&t.callbackNode!==a)return null;var l=tt;return l=Cr(t,t===wt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:($_(t,l,r),f0(t,Ve()),t.callbackNode!=null&&t.callbackNode===a?m0.bind(null,t):null)}function g0(t,r){if(qc())return null;$_(t,r,!0)}function H1(){nw(function(){(ft&6)!==0?oe(xt,q1):h0()})}function rm(){if(ss===0){var t=qa;t===0&&(t=Ar,Ar<<=1,(Ar&261888)===0&&(Ar=256)),ss=t}return ss}function p0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ca(""+t)}function y0(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function G1(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var f=p0((h[sn]||null).action),v=l.submitter;v&&(r=(r=v[sn]||null)?p0(r.formAction):v.getAttribute("formAction"),r!==null&&(f=r,v=null));var S=new Pr("action","action",null,l,h);t.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ss!==0){var V=v?y0(h,v):new FormData(h);Sf(a,{pending:!0,data:V,method:h.method,action:f},null,V)}}else typeof f=="function"&&(S.preventDefault(),V=v?y0(h,v):new FormData(h),Sf(a,{pending:!0,data:V,method:h.method,action:f},f,V))},currentTarget:h}]})}}for(var im=0;im<Ph.length;im++){var sm=Ph[im],Q1=sm.toLowerCase(),Y1=sm[0].toUpperCase()+sm.slice(1);_r(Q1,"on"+Y1)}_r(Kp,"onAnimationEnd"),_r($p,"onAnimationIteration"),_r(Wp,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(u1,"onTransitionRun"),_r(c1,"onTransitionStart"),_r(d1,"onTransitionCancel"),_r(Xp,"onTransitionEnd"),jr("onMouseEnter",["mouseout","mouseover"]),jr("onMouseLeave",["mouseout","mouseover"]),jr("onPointerEnter",["pointerout","pointerover"]),jr("onPointerLeave",["pointerout","pointerover"]),kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),kr("onBeforeInput",["compositionend","keypress","textInput","paste"]),kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),K1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jl));function _0(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var v=l.length-1;0<=v;v--){var S=l[v],V=S.instance,X=S.currentTarget;if(S=S.listener,V!==f&&h.isPropagationStopped())break e;f=S,h.currentTarget=X;try{f(h)}catch(ae){ac(ae)}h.currentTarget=null,f=V}else for(v=0;v<l.length;v++){if(S=l[v],V=S.instance,X=S.currentTarget,S=S.listener,V!==f&&h.isPropagationStopped())break e;f=S,h.currentTarget=X;try{f(h)}catch(ae){ac(ae)}h.currentTarget=null,f=V}}}}function et(t,r){var a=r[Sa];a===void 0&&(a=r[Sa]=new Set);var l=t+"__bubble";a.has(l)||(v0(r,t,2,!1),a.add(l))}function am(t,r,a){var l=0;r&&(l|=4),v0(a,t,l,r)}var Qc="_reactListening"+Math.random().toString(36).slice(2);function om(t){if(!t[Qc]){t[Qc]=!0,Yo.forEach(function(a){a!=="selectionchange"&&(K1.has(a)||am(a,!1,t),am(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Qc]||(r[Qc]=!0,am("selectionchange",!1,r))}}function v0(t,r,a,l){switch(K0(r)){case 2:var h=Tw;break;case 8:h=Sw;break;default:h=Tm}a=h.bind(null,r,a,t),h=void 0,!Fs||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function lm(t,r,a,l,h){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var S=l.stateNode.containerInfo;if(S===h)break;if(v===4)for(v=l.return;v!==null;){var V=v.tag;if((V===3||V===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;S!==null;){if(v=Nr(S),v===null)return;if(V=v.tag,V===5||V===6||V===26||V===27){l=f=v;continue e}S=S.parentNode}}l=l.return}zi(function(){var X=f,ae=$n(a),me=[];e:{var J=Jp.get(t);if(J!==void 0){var ie=Pr,Ce=t;switch(t){case"keypress":if(Hs(a)===0)break e;case"keydown":case"keyup":ie=rc;break;case"focusin":Ce="focus",ie=Qs;break;case"focusout":Ce="blur",ie=Qs;break;case"beforeblur":case"afterblur":ie=Qs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=al;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Ku;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=_;break;case Kp:case $p:case Wp:ie=Wu;break;case Xp:ie=w;break;case"scroll":case"scrollend":ie=sl;break;case"wheel":ie=re;break;case"copy":case"cut":case"paste":ie=Xu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=ai;break;case"toggle":case"beforetoggle":ie=Ke}var Le=(r&4)!==0,Tt=!Le&&(t==="scroll"||t==="scrollend"),G=Le?J!==null?J+"Capture":null:J;Le=[];for(var P=X,$;P!==null;){var ce=P;if($=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||$===null||G===null||(ce=mr(P,G),ce!=null&&Le.push(Vl(P,ce,$))),Tt)break;P=P.return}0<Le.length&&(J=new ie(J,Ce,null,a,ae),me.push({event:J,listeners:Le}))}}if((r&7)===0){e:{if(J=t==="mouseover"||t==="pointerover",ie=t==="mouseout"||t==="pointerout",J&&a!==nl&&(Ce=a.relatedTarget||a.fromElement)&&(Nr(Ce)||Ce[Dr]))break e;if((ie||J)&&(J=ae.window===ae?ae:(J=ae.ownerDocument)?J.defaultView||J.parentWindow:window,ie?(Ce=a.relatedTarget||a.toElement,ie=X,Ce=Ce?Nr(Ce):null,Ce!==null&&(Tt=u(Ce),Le=Ce.tag,Ce!==Tt||Le!==5&&Le!==27&&Le!==6)&&(Ce=null)):(ie=null,Ce=X),ie!==Ce)){if(Le=al,ce="onMouseLeave",G="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(Le=ai,ce="onPointerLeave",G="onPointerEnter",P="pointer"),Tt=ie==null?J:Vn(ie),$=Ce==null?J:Vn(Ce),J=new Le(ce,P+"leave",ie,a,ae),J.target=Tt,J.relatedTarget=$,ce=null,Nr(ae)===X&&(Le=new Le(G,P+"enter",Ce,a,ae),Le.target=$,Le.relatedTarget=Tt,ce=Le),Tt=ce,ie&&Ce)t:{for(Le=$1,G=ie,P=Ce,$=0,ce=G;ce;ce=Le(ce))$++;ce=0;for(var Ne=P;Ne;Ne=Le(Ne))ce++;for(;0<$-ce;)G=Le(G),$--;for(;0<ce-$;)P=Le(P),ce--;for(;$--;){if(G===P||P!==null&&G===P.alternate){Le=G;break t}G=Le(G),P=Le(P)}Le=null}else Le=null;ie!==null&&b0(me,J,ie,Le,!1),Ce!==null&&Tt!==null&&b0(me,Tt,Ce,Le,!0)}}e:{if(J=X?Vn(X):window,ie=J.nodeName&&J.nodeName.toLowerCase(),ie==="select"||ie==="input"&&J.type==="file")var ut=Lp;else if(jp(J))if(Up)ut=a1;else{ut=i1;var De=r1}else ie=J.nodeName,!ie||ie.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?X&&Ra(X.elementType)&&(ut=Lp):ut=s1;if(ut&&(ut=ut(t,X))){Vp(me,ut,a,ae);break e}De&&De(t,J,X),t==="focusout"&&X&&J.type==="number"&&X.memoizedProps.value!=null&&Zo(J,"number",J.value)}switch(De=X?Vn(X):window,t){case"focusin":(jp(De)||De.contentEditable==="true")&&(ja=De,Vh=X,dl=null);break;case"focusout":dl=Vh=ja=null;break;case"mousedown":Lh=!0;break;case"contextmenu":case"mouseup":case"dragend":Lh=!1,Qp(me,a,ae);break;case"selectionchange":if(l1)break;case"keydown":case"keyup":Qp(me,a,ae)}var We;if(ht)e:{switch(t){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else ka?Ys(t,a)&&(nt="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(nt="onCompositionStart");nt&&(Fr&&a.locale!=="ko"&&(ka||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&ka&&(We=il()):(Ur=ae,rl="value"in Ur?Ur.value:Ur.textContent,ka=!0)),De=Yc(X,nt),0<De.length&&(nt=new Br(nt,t,null,a,ae),me.push({event:nt,listeners:De}),We?nt.data=We:(We=Ma(a),We!==null&&(nt.data=We)))),(We=Xn?ZS(t,a):e1(t,a))&&(nt=Yc(X,"onBeforeInput"),0<nt.length&&(De=new Br("onBeforeInput","beforeinput",null,a,ae),me.push({event:De,listeners:nt}),De.data=We)),G1(me,t,X,a,ae)}_0(me,r)})}function Vl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Yc(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=mr(t,a),h!=null&&l.unshift(Vl(t,h,f)),h=mr(t,r),h!=null&&l.push(Vl(t,h,f))),t.tag===3)return l;t=t.return}return[]}function $1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function b0(t,r,a,l,h){for(var f=r._reactName,v=[];a!==null&&a!==l;){var S=a,V=S.alternate,X=S.stateNode;if(S=S.tag,V!==null&&V===l)break;S!==5&&S!==26&&S!==27||X===null||(V=X,h?(X=mr(a,f),X!=null&&v.unshift(Vl(a,X,V))):h||(X=mr(a,f),X!=null&&v.push(Vl(a,X,V)))),a=a.return}v.length!==0&&t.push({event:r,listeners:v})}var W1=/\r\n?/g,X1=/\u0000|\uFFFD/g;function E0(t){return(typeof t=="string"?t:""+t).replace(W1,`
`).replace(X1,"")}function T0(t,r){return r=E0(r),E0(t)===r}function Et(t,r,a,l,h,f){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Cn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Cn(t,""+l);break;case"className":Ln(t,"class",l);break;case"tabIndex":Ln(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ln(t,a,l);break;case"style":tl(t,l,f);break;case"data":if(r!=="object"){Ln(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ca(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&Et(t,r,"name",h.name,h,null),Et(t,r,"formEncType",h.formEncType,h,null),Et(t,r,"formMethod",h.formMethod,h,null),Et(t,r,"formTarget",h.formTarget,h,null)):(Et(t,r,"encType",h.encType,h,null),Et(t,r,"method",h.method,h,null),Et(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ca(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=fr);break;case"onScroll":l!=null&&et("scroll",t);break;case"onScrollEnd":l!=null&&et("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ca(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":et("beforetoggle",t),et("toggle",t),xa(t,"popover",l);break;case"xlinkActuate":Kt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Kt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Kt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Kt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Kt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Kt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Kt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Kt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Kt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":xa(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Yu.get(a)||a,xa(t,a,l))}}function um(t,r,a,l,h,f){switch(a){case"style":tl(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Cn(t,l):(typeof l=="number"||typeof l=="bigint")&&Cn(t,""+l);break;case"onScroll":l!=null&&et("scroll",t);break;case"onScrollEnd":l!=null&&et("scrollend",t);break;case"onClick":l!=null&&(t.onclick=fr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ko.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),f=t[sn]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(r,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):xa(t,a,l)}}}function gn(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",t),et("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Et(t,r,f,v,a,null)}}h&&Et(t,r,"srcSet",a.srcSet,a,null),l&&Et(t,r,"src",a.src,a,null);return;case"input":et("invalid",t);var S=f=v=h=null,V=null,X=null;for(l in a)if(a.hasOwnProperty(l)){var ae=a[l];if(ae!=null)switch(l){case"name":h=ae;break;case"type":v=ae;break;case"checked":V=ae;break;case"defaultChecked":X=ae;break;case"value":f=ae;break;case"defaultValue":S=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,r));break;default:Et(t,r,l,ae,a,null)}}Hu(t,f,S,V,X,v,h,!1);return;case"select":et("invalid",t),l=v=f=null;for(h in a)if(a.hasOwnProperty(h)&&(S=a[h],S!=null))switch(h){case"value":f=S;break;case"defaultValue":v=S;break;case"multiple":l=S;default:Et(t,r,h,S,a,null)}r=f,a=v,t.multiple=!!l,r!=null?Vi(t,!!l,r,!1):a!=null&&Vi(t,!!l,a,!0);return;case"textarea":et("invalid",t),f=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(S=a[v],S!=null))switch(v){case"value":l=S;break;case"defaultValue":h=S;break;case"children":f=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:Et(t,r,v,S,a,null)}Li(t,l,h,f);return;case"option":for(V in a)a.hasOwnProperty(V)&&(l=a[V],l!=null)&&(V==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":Et(t,r,V,l,a,null));return;case"dialog":et("beforetoggle",t),et("toggle",t),et("cancel",t),et("close",t);break;case"iframe":case"object":et("load",t);break;case"video":case"audio":for(l=0;l<jl.length;l++)et(jl[l],t);break;case"image":et("error",t),et("load",t);break;case"details":et("toggle",t);break;case"embed":case"source":case"link":et("error",t),et("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in a)if(a.hasOwnProperty(X)&&(l=a[X],l!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Et(t,r,X,l,a,null)}return;default:if(Ra(r)){for(ae in a)a.hasOwnProperty(ae)&&(l=a[ae],l!==void 0&&um(t,r,ae,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&Et(t,r,S,l,a,null))}function J1(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,v=null,S=null,V=null,X=null,ae=null;for(ie in a){var me=a[ie];if(a.hasOwnProperty(ie)&&me!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":V=me;default:l.hasOwnProperty(ie)||Et(t,r,ie,null,l,me)}}for(var J in l){var ie=l[J];if(me=a[J],l.hasOwnProperty(J)&&(ie!=null||me!=null))switch(J){case"type":f=ie;break;case"name":h=ie;break;case"checked":X=ie;break;case"defaultChecked":ae=ie;break;case"value":v=ie;break;case"defaultValue":S=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,r));break;default:ie!==me&&Et(t,r,J,ie,l,me)}}Aa(t,v,S,V,X,ae,f,h);return;case"select":ie=v=S=J=null;for(f in a)if(V=a[f],a.hasOwnProperty(f)&&V!=null)switch(f){case"value":break;case"multiple":ie=V;default:l.hasOwnProperty(f)||Et(t,r,f,null,l,V)}for(h in l)if(f=l[h],V=a[h],l.hasOwnProperty(h)&&(f!=null||V!=null))switch(h){case"value":J=f;break;case"defaultValue":S=f;break;case"multiple":v=f;default:f!==V&&Et(t,r,h,f,l,V)}r=S,a=v,l=ie,J!=null?Vi(t,!!a,J,!1):!!l!=!!a&&(r!=null?Vi(t,!!a,r,!0):Vi(t,!!a,a?[]:"",!1));return;case"textarea":ie=J=null;for(S in a)if(h=a[S],a.hasOwnProperty(S)&&h!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Et(t,r,S,null,l,h)}for(v in l)if(h=l[v],f=a[v],l.hasOwnProperty(v)&&(h!=null||f!=null))switch(v){case"value":J=h;break;case"defaultValue":ie=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&Et(t,r,v,h,l,f)}Gu(t,J,ie);return;case"option":for(var Ce in a)J=a[Ce],a.hasOwnProperty(Ce)&&J!=null&&!l.hasOwnProperty(Ce)&&(Ce==="selected"?t.selected=!1:Et(t,r,Ce,null,l,J));for(V in l)J=l[V],ie=a[V],l.hasOwnProperty(V)&&J!==ie&&(J!=null||ie!=null)&&(V==="selected"?t.selected=J&&typeof J!="function"&&typeof J!="symbol":Et(t,r,V,J,l,ie));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in a)J=a[Le],a.hasOwnProperty(Le)&&J!=null&&!l.hasOwnProperty(Le)&&Et(t,r,Le,null,l,J);for(X in l)if(J=l[X],ie=a[X],l.hasOwnProperty(X)&&J!==ie&&(J!=null||ie!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,r));break;default:Et(t,r,X,J,l,ie)}return;default:if(Ra(r)){for(var Tt in a)J=a[Tt],a.hasOwnProperty(Tt)&&J!==void 0&&!l.hasOwnProperty(Tt)&&um(t,r,Tt,void 0,l,J);for(ae in l)J=l[ae],ie=a[ae],!l.hasOwnProperty(ae)||J===ie||J===void 0&&ie===void 0||um(t,r,ae,J,l,ie);return}}for(var G in a)J=a[G],a.hasOwnProperty(G)&&J!=null&&!l.hasOwnProperty(G)&&Et(t,r,G,null,l,J);for(me in l)J=l[me],ie=a[me],!l.hasOwnProperty(me)||J===ie||J==null&&ie==null||Et(t,r,me,J,l,ie)}function S0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Z1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],f=h.transferSize,v=h.initiatorType,S=h.duration;if(f&&S&&S0(v)){for(v=0,S=h.responseEnd,l+=1;l<a.length;l++){var V=a[l],X=V.startTime;if(X>S)break;var ae=V.transferSize,me=V.initiatorType;ae&&S0(me)&&(V=V.responseEnd,v+=ae*(V<S?1:(S-X)/(V-X)))}if(--l,r+=8*(f+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var cm=null,dm=null;function Kc(t){return t.nodeType===9?t:t.ownerDocument}function w0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function x0(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function hm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var fm=null;function ew(){var t=window.event;return t&&t.type==="popstate"?t===fm?!1:(fm=t,!0):(fm=null,!1)}var A0=typeof setTimeout=="function"?setTimeout:void 0,tw=typeof clearTimeout=="function"?clearTimeout:void 0,R0=typeof Promise=="function"?Promise:void 0,nw=typeof queueMicrotask=="function"?queueMicrotask:typeof R0<"u"?function(t){return R0.resolve(null).then(t).catch(rw)}:A0;function rw(t){setTimeout(function(){throw t})}function as(t){return t==="head"}function C0(t,r){var a=r,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),lo(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Ll(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Ll(a);for(var f=a.firstChild;f;){var v=f.nextSibling,S=f.nodeName;f[Or]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=v}}else a==="body"&&Ll(t.ownerDocument.body);a=h}while(a);lo(r)}function I0(t,r){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function mm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":mm(a),wa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function iw(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Or])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=ir(t.nextSibling),t===null)break}return null}function sw(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ir(t.nextSibling),t===null))return null;return t}function D0(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=ir(t.nextSibling),t===null))return null;return t}function gm(t){return t.data==="$?"||t.data==="$~"}function pm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function aw(t,r){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ir(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var ym=null;function O0(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(r===0)return ir(t.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}t=t.nextSibling}return null}function N0(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return t;r--}else a!=="/$"&&a!=="/&"||r++}t=t.previousSibling}return null}function M0(t,r,a){switch(r=Kc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Ll(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);wa(t)}var sr=new Map,k0=new Set;function $c(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ei=ye.d;ye.d={f:ow,r:lw,D:uw,C:cw,L:dw,m:hw,X:mw,S:fw,M:gw};function ow(){var t=Ei.f(),r=zc();return t||r}function lw(t){var r=Kn(t);r!==null&&r.tag===5&&r.type==="form"?Xy(r):Ei.r(t)}var so=typeof document>"u"?null:document;function j0(t,r,a){var l=so;if(l&&typeof r=="string"&&r){var h=Rn(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),k0.has(h)||(k0.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),gn(r,"link",t),Yt(r),l.head.appendChild(r)))}}function uw(t){Ei.D(t),j0("dns-prefetch",t,null)}function cw(t,r){Ei.C(t,r),j0("preconnect",t,r)}function dw(t,r,a){Ei.L(t,r,a);var l=so;if(l&&t&&r){var h='link[rel="preload"][as="'+Rn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Rn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Rn(a.imageSizes)+'"]')):h+='[href="'+Rn(t)+'"]';var f=h;switch(r){case"style":f=ao(t);break;case"script":f=oo(t)}sr.has(f)||(t=T({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),sr.set(f,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(Ul(f))||r==="script"&&l.querySelector(Pl(f))||(r=l.createElement("link"),gn(r,"link",t),Yt(r),l.head.appendChild(r)))}}function hw(t,r){Ei.m(t,r);var a=so;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+Rn(l)+'"][href="'+Rn(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=oo(t)}if(!sr.has(f)&&(t=T({rel:"modulepreload",href:t},r),sr.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Pl(f)))return}l=a.createElement("link"),gn(l,"link",t),Yt(l),a.head.appendChild(l)}}}function fw(t,r,a){Ei.S(t,r,a);var l=so;if(l&&t){var h=Mr(l).hoistableStyles,f=ao(t);r=r||"default";var v=h.get(f);if(!v){var S={loading:0,preload:null};if(v=l.querySelector(Ul(f)))S.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":r},a),(a=sr.get(f))&&_m(t,a);var V=v=l.createElement("link");Yt(V),gn(V,"link",t),V._p=new Promise(function(X,ae){V.onload=X,V.onerror=ae}),V.addEventListener("load",function(){S.loading|=1}),V.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Wc(v,r,l)}v={type:"stylesheet",instance:v,count:1,state:S},h.set(f,v)}}}function mw(t,r){Ei.X(t,r);var a=so;if(a&&t){var l=Mr(a).hoistableScripts,h=oo(t),f=l.get(h);f||(f=a.querySelector(Pl(h)),f||(t=T({src:t,async:!0},r),(r=sr.get(h))&&vm(t,r),f=a.createElement("script"),Yt(f),gn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function gw(t,r){Ei.M(t,r);var a=so;if(a&&t){var l=Mr(a).hoistableScripts,h=oo(t),f=l.get(h);f||(f=a.querySelector(Pl(h)),f||(t=T({src:t,async:!0,type:"module"},r),(r=sr.get(h))&&vm(t,r),f=a.createElement("script"),Yt(f),gn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function V0(t,r,a,l){var h=(h=we.current)?$c(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=ao(a.href),a=Mr(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ao(a.href);var f=Mr(h).hoistableStyles,v=f.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,v),(f=h.querySelector(Ul(t)))&&!f._p&&(v.instance=f,v.state.loading=5),sr.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},sr.set(t,a),f||pw(h,t,a,v.state))),r&&l===null)throw Error(s(528,""));return v}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=oo(a),a=Mr(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function ao(t){return'href="'+Rn(t)+'"'}function Ul(t){return'link[rel="stylesheet"]['+t+"]"}function L0(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function pw(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),gn(r,"link",a),Yt(r),t.head.appendChild(r))}function oo(t){return'[src="'+Rn(t)+'"]'}function Pl(t){return"script[async]"+t}function U0(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Rn(a.href)+'"]');if(l)return r.instance=l,Yt(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Yt(l),gn(l,"style",h),Wc(l,a.precedence,t),r.instance=l;case"stylesheet":h=ao(a.href);var f=t.querySelector(Ul(h));if(f)return r.state.loading|=4,r.instance=f,Yt(f),f;l=L0(a),(h=sr.get(h))&&_m(l,h),f=(t.ownerDocument||t).createElement("link"),Yt(f);var v=f;return v._p=new Promise(function(S,V){v.onload=S,v.onerror=V}),gn(f,"link",l),r.state.loading|=4,Wc(f,a.precedence,t),r.instance=f;case"script":return f=oo(a.src),(h=t.querySelector(Pl(f)))?(r.instance=h,Yt(h),h):(l=a,(h=sr.get(f))&&(l=T({},a),vm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Yt(h),gn(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Wc(l,a.precedence,t));return r.instance}function Wc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,v=0;v<l.length;v++){var S=l[v];if(S.dataset.precedence===r)f=S;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function _m(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function vm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Xc=null;function P0(t,r,a){if(Xc===null){var l=new Map,h=Xc=new Map;h.set(a,l)}else h=Xc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[Or]||f[Qt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(r)||"";v=t+v;var S=l.get(v);S?S.push(f):l.set(v,[f])}}return l}function z0(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function yw(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function B0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function _w(t,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=ao(l.href),f=r.querySelector(Ul(h));if(f){r=f._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Jc.bind(t),r.then(t,t)),a.state.loading|=4,a.instance=f,Yt(f);return}f=r.ownerDocument||r,l=L0(l),(h=sr.get(h))&&_m(l,h),f=f.createElement("link"),Yt(f);var v=f;v._p=new Promise(function(S,V){v.onload=S,v.onerror=V}),gn(f,"link",l),a.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Jc.bind(t),r.addEventListener("load",a),r.addEventListener("error",a))}}var bm=0;function vw(t,r){return t.stylesheets&&t.count===0&&ed(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&ed(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+r);0<t.imgBytes&&bm===0&&(bm=62500*Z1());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&ed(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>bm?50:800)+r);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Jc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ed(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Zc=null;function ed(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Zc=new Map,r.forEach(bw,t),Zc=null,Jc.call(t))}function bw(t,r){if(!(r.state.loading&4)){var a=Zc.get(t);if(a)var l=a.get(null);else{a=new Map,Zc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var v=h[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=r.instance,v=h.getAttribute("data-precedence"),f=a.get(v)||l,f===l&&a.set(null,h),a.set(v,h),this.count++,l=Jc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var zl={$$typeof:ue,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function Ew(t,r,a,l,h,f,v,S,V){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ir(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ir(0),this.hiddenUpdates=Ir(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function F0(t,r,a,l,h,f,v,S,V,X,ae,me){return t=new Ew(t,r,a,v,V,X,ae,me,S),r=1,f===!0&&(r|=24),f=Pn(3,null,null,r),t.current=f,f.stateNode=t,r=Jh(),r.refCount++,t.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:r},nf(f),t}function q0(t){return t?(t=Ua,t):Ua}function H0(t,r,a,l,h,f){h=q0(h),l.context===null?l.context=h:l.pendingContext=h,l=$i(r),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Wi(t,l,r),a!==null&&(Mn(a,t,r),_l(a,t,r))}function G0(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Em(t,r){G0(t,r),(t=t.alternate)&&G0(t,r)}function Q0(t){if(t.tag===13||t.tag===31){var r=Ws(t,67108864);r!==null&&Mn(r,t,67108864),Em(t,67108864)}}function Y0(t){if(t.tag===13||t.tag===31){var r=Hn();r=Us(r);var a=Ws(t,r);a!==null&&Mn(a,t,r),Em(t,r)}}var td=!0;function Tw(t,r,a,l){var h=ee.T;ee.T=null;var f=ye.p;try{ye.p=2,Tm(t,r,a,l)}finally{ye.p=f,ee.T=h}}function Sw(t,r,a,l){var h=ee.T;ee.T=null;var f=ye.p;try{ye.p=8,Tm(t,r,a,l)}finally{ye.p=f,ee.T=h}}function Tm(t,r,a,l){if(td){var h=Sm(l);if(h===null)lm(t,r,l,nd,a),$0(t,l);else if(xw(h,t,r,a,l))l.stopPropagation();else if($0(t,l),r&4&&-1<ww.indexOf(t)){for(;h!==null;){var f=Kn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=Rr(f.pendingLanes);if(v!==0){var S=f;for(S.pendingLanes|=2,S.entangledLanes|=2;v;){var V=1<<31-Lt(v);S.entanglements[1]|=V,v&=~V}Qr(f),(ft&6)===0&&(Uc=Ve()+500,kl(0))}}break;case 31:case 13:S=Ws(f,2),S!==null&&Mn(S,f,2),zc(),Em(f,2)}if(f=Sm(l),f===null&&lm(t,r,l,nd,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else lm(t,r,l,null,a)}}function Sm(t){return t=$n(t),wm(t)}var nd=null;function wm(t){if(nd=null,t=Nr(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===31){if(t=m(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return nd=t,null}function K0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fe()){case xt:return 2;case ni:return 8;case Oe:case Ht:return 32;case ku:return 268435456;default:return 32}default:return 32}}var xm=!1,os=null,ls=null,us=null,Bl=new Map,Fl=new Map,cs=[],ww="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $0(t,r){switch(t){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":ls=null;break;case"mouseover":case"mouseout":us=null;break;case"pointerover":case"pointerout":Bl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(r.pointerId)}}function ql(t,r,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},r!==null&&(r=Kn(r),r!==null&&Q0(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function xw(t,r,a,l,h){switch(r){case"focusin":return os=ql(os,t,r,a,l,h),!0;case"dragenter":return ls=ql(ls,t,r,a,l,h),!0;case"mouseover":return us=ql(us,t,r,a,l,h),!0;case"pointerover":var f=h.pointerId;return Bl.set(f,ql(Bl.get(f)||null,t,r,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,Fl.set(f,ql(Fl.get(f)||null,t,r,a,l,h)),!0}return!1}function W0(t){var r=Nr(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,dr(t.priority,function(){Y0(a)});return}}else if(r===31){if(r=m(a),r!==null){t.blockedOn=r,dr(t.priority,function(){Y0(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rd(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=Sm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);nl=l,a.target.dispatchEvent(l),nl=null}else return r=Kn(a),r!==null&&Q0(r),t.blockedOn=a,!1;r.shift()}return!0}function X0(t,r,a){rd(t)&&a.delete(r)}function Aw(){xm=!1,os!==null&&rd(os)&&(os=null),ls!==null&&rd(ls)&&(ls=null),us!==null&&rd(us)&&(us=null),Bl.forEach(X0),Fl.forEach(X0)}function id(t,r){t.blockedOn===r&&(t.blockedOn=null,xm||(xm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Aw)))}var sd=null;function J0(t){sd!==t&&(sd=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){sd===t&&(sd=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(wm(l||a)===null)continue;break}var f=Kn(a);f!==null&&(t.splice(r,3),r-=3,Sf(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function lo(t){function r(V){return id(V,t)}os!==null&&id(os,t),ls!==null&&id(ls,t),us!==null&&id(us,t),Bl.forEach(r),Fl.forEach(r);for(var a=0;a<cs.length;a++){var l=cs[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<cs.length&&(a=cs[0],a.blockedOn===null);)W0(a),a.blockedOn===null&&cs.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],v=h[sn]||null;if(typeof f=="function")v||J0(a);else if(v){var S=null;if(f&&f.hasAttribute("formAction")){if(h=f,v=f[sn]||null)S=v.formAction;else if(wm(h)!==null)continue}else S=v.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),J0(a)}}}function Z0(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function r(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),h!==null&&(h(),h=null)}}}function Am(t){this._internalRoot=t}ad.prototype.render=Am.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=Hn();H0(a,l,t,r,null,null)},ad.prototype.unmount=Am.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;H0(t.current,2,null,t,null,null),zc(),r[Dr]=null}};function ad(t){this._internalRoot=t}ad.prototype.unstable_scheduleHydration=function(t){if(t){var r=zu();t={blockedOn:null,target:t,priority:r};for(var a=0;a<cs.length&&r!==0&&r<cs[a].priority;a++);cs.splice(a,0,t),a===0&&W0(t)}};var ev=e.version;if(ev!=="19.2.3")throw Error(s(527,ev,"19.2.3"));ye.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=y(r),t=t!==null?E(t):null,t=t===null?null:t.stateNode,t};var Rw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!od.isDisabled&&od.supportsFiber)try{ur=od.inject(Rw),cn=od}catch{}}return Gl.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=o_,f=l_,v=u_;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError)),r=F0(t,1,!1,null,null,a,l,null,h,f,v,Z0),t[Dr]=r.current,om(t),new Am(r)},Gl.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",f=o_,v=l_,S=u_,V=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.formState!==void 0&&(V=a.formState)),r=F0(t,1,!0,r,a??null,l,h,V,f,v,S,Z0),r.context=q0(null),a=r.current,l=Hn(),l=Us(l),h=$i(l),h.callback=null,Wi(a,h,l),a=l,r.current.lanes=a,Vs(r,a),Qr(r),t[Dr]=r.current,om(t),new ad(r)},Gl.version="19.2.3",Gl}var cv;function Lw(){if(cv)return Im.exports;cv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Im.exports=Vw(),Im.exports}var Uw=Lw();var dv="popstate";function Pw(i={}){function e(s,o){let{pathname:u,search:d,hash:m}=s.location;return Jm("",{pathname:u,search:d,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:ou(o)}return Bw(e,n,null,i)}function Nt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function or(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zw(){return Math.random().toString(36).substring(2,10)}function hv(i,e){return{usr:i.state,key:i.key,idx:e}}function Jm(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Oo(e):e,state:n,key:e&&e.key||s||zw()}}function ou({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Oo(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function Bw(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,d=o.history,m="POP",p=null,y=E();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function E(){return(d.state||{idx:null}).idx}function T(){m="POP";let C=E(),ne=C==null?null:C-y;y=C,p&&p({action:m,location:F.location,delta:ne})}function x(C,ne){m="PUSH";let B=Jm(F.location,C,ne);y=E()+1;let ue=hv(B,y),Ee=F.createHref(B);try{d.pushState(ue,"",Ee)}catch(Te){if(Te instanceof DOMException&&Te.name==="DataCloneError")throw Te;o.location.assign(Ee)}u&&p&&p({action:m,location:F.location,delta:1})}function M(C,ne){m="REPLACE";let B=Jm(F.location,C,ne);y=E();let ue=hv(B,y),Ee=F.createHref(B);d.replaceState(ue,"",Ee),u&&p&&p({action:m,location:F.location,delta:0})}function H(C){return Fw(C)}let F={get action(){return m},get location(){return i(o,d)},listen(C){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(dv,T),p=C,()=>{o.removeEventListener(dv,T),p=null}},createHref(C){return e(o,C)},createURL:H,encodeLocation(C){let ne=H(C);return{pathname:ne.pathname,search:ne.search,hash:ne.hash}},push:x,replace:M,go(C){return d.go(C)}};return F}function Fw(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Nt(n,"No window.location.(origin|href) available to create URL");let s=typeof i=="string"?i:ou(i);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function Zb(i,e,n="/"){return qw(i,e,n,!1)}function qw(i,e,n,s){let o=typeof e=="string"?Oo(e):e,u=Ri(o.pathname||"/",n);if(u==null)return null;let d=eE(i);Hw(d);let m=null;for(let p=0;m==null&&p<d.length;++p){let y=tx(u);m=Zw(d[p],y,s)}return m}function eE(i,e=[],n=[],s="",o=!1){let u=(d,m,p=o,y)=>{let E={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(s)&&p)return;Nt(E.relativePath.startsWith(s),`Absolute route path "${E.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(s.length)}let T=xi([s,E.relativePath]),x=n.concat(E);d.children&&d.children.length>0&&(Nt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),eE(d.children,e,x,T,p)),!(d.path==null&&!d.index)&&e.push({path:T,score:Xw(T,d.index),routesMeta:x})};return i.forEach((d,m)=>{if(d.path===""||!d.path?.includes("?"))u(d,m);else for(let p of tE(d.path))u(d,m,!0,p)}),e}function tE(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let d=tE(s.join("/")),m=[];return m.push(...d.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...d),m.map(p=>i.startsWith("/")&&p===""?"/":p)}function Hw(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:Jw(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var Gw=/^:[\w-]+$/,Qw=3,Yw=2,Kw=1,$w=10,Ww=-2,fv=i=>i==="*";function Xw(i,e){let n=i.split("/"),s=n.length;return n.some(fv)&&(s+=Ww),e&&(s+=Yw),n.filter(o=>!fv(o)).reduce((o,u)=>o+(Gw.test(u)?Qw:u===""?Kw:$w),s)}function Jw(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function Zw(i,e,n=!1){let{routesMeta:s}=i,o={},u="/",d=[];for(let m=0;m<s.length;++m){let p=s[m],y=m===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",T=Nd({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},E),x=p.route;if(!T&&y&&n&&!s[s.length-1].route.index&&(T=Nd({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!T)return null;Object.assign(o,T.params),d.push({params:o,pathname:xi([u,T.pathname]),pathnameBase:sx(xi([u,T.pathnameBase])),route:x}),T.pathnameBase!=="/"&&(u=xi([u,T.pathnameBase]))}return d}function Nd(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=ex(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((y,{paramName:E,isOptional:T},x)=>{if(E==="*"){let H=m[x]||"";d=u.slice(0,u.length-H.length).replace(/(.)\/+$/,"$1")}const M=m[x];return T&&!M?y[E]=void 0:y[E]=(M||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:d,pattern:i}}function ex(i,e=!1,n=!0){or(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function tx(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return or(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Ri(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}var nE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nx=i=>nE.test(i);function rx(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?Oo(i):i,u;if(n)if(nx(n))u=n;else{if(n.includes("//")){let d=n;n=n.replace(/\/\/+/g,"/"),or(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${n}`)}n.startsWith("/")?u=mv(n.substring(1),"/"):u=mv(n,e)}else u=e;return{pathname:u,search:ax(s),hash:ox(o)}}function mv(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Mm(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ix(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Dg(i){let e=ix(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Og(i,e,n,s=!1){let o;typeof i=="string"?o=Oo(i):(o={...i},Nt(!o.pathname||!o.pathname.includes("?"),Mm("?","pathname","search",o)),Nt(!o.pathname||!o.pathname.includes("#"),Mm("#","pathname","hash",o)),Nt(!o.search||!o.search.includes("#"),Mm("#","search","hash",o)));let u=i===""||o.pathname==="",d=u?"/":o.pathname,m;if(d==null)m=n;else{let T=e.length-1;if(!s&&d.startsWith("..")){let x=d.split("/");for(;x[0]==="..";)x.shift(),T-=1;o.pathname=x.join("/")}m=T>=0?e[T]:"/"}let p=rx(o,m),y=d&&d!=="/"&&d.endsWith("/"),E=(u||d===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(y||E)&&(p.pathname+="/"),p}var xi=i=>i.join("/").replace(/\/\/+/g,"/"),sx=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),ax=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,ox=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,lx=class{constructor(i,e,n,s=!1){this.status=i,this.statusText=e||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function ux(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function cx(i){return i.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var rE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function iE(i,e){let n=i;if(typeof n!="string"||!nE.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,o=!1;if(rE)try{let u=new URL(window.location.href),d=n.startsWith("//")?new URL(u.protocol+n):new URL(n),m=Ri(d.pathname,e);d.origin===u.origin&&m!=null?n=m+d.search+d.hash:o=!0}catch{or(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var sE=["POST","PUT","PATCH","DELETE"];new Set(sE);var dx=["GET",...sE];new Set(dx);var No=j.createContext(null);No.displayName="DataRouter";var nh=j.createContext(null);nh.displayName="DataRouterState";var hx=j.createContext(!1),aE=j.createContext({isTransitioning:!1});aE.displayName="ViewTransition";var fx=j.createContext(new Map);fx.displayName="Fetchers";var mx=j.createContext(null);mx.displayName="Await";var Qn=j.createContext(null);Qn.displayName="Navigation";var pu=j.createContext(null);pu.displayName="Location";var xr=j.createContext({outlet:null,matches:[],isDataRoute:!1});xr.displayName="Route";var Ng=j.createContext(null);Ng.displayName="RouteError";var oE="REACT_ROUTER_ERROR",gx="REDIRECT",px="ROUTE_ERROR_RESPONSE";function yx(i){if(i.startsWith(`${oE}:${gx}:{`))try{let e=JSON.parse(i.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function _x(i){if(i.startsWith(`${oE}:${px}:{`))try{let e=JSON.parse(i.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new lx(e.status,e.statusText,e.data)}catch{}}function vx(i,{relative:e}={}){Nt(Mo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=j.useContext(Qn),{hash:o,pathname:u,search:d}=yu(i,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:xi([n,u])),s.createHref({pathname:m,search:d,hash:o})}function Mo(){return j.useContext(pu)!=null}function lr(){return Nt(Mo(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(pu).location}var lE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uE(i){j.useContext(Qn).static||j.useLayoutEffect(i)}function Mg(){let{isDataRoute:i}=j.useContext(xr);return i?kx():bx()}function bx(){Nt(Mo(),"useNavigate() may be used only in the context of a <Router> component.");let i=j.useContext(No),{basename:e,navigator:n}=j.useContext(Qn),{matches:s}=j.useContext(xr),{pathname:o}=lr(),u=JSON.stringify(Dg(s)),d=j.useRef(!1);return uE(()=>{d.current=!0}),j.useCallback((p,y={})=>{if(or(d.current,lE),!d.current)return;if(typeof p=="number"){n.go(p);return}let E=Og(p,JSON.parse(u),o,y.relative==="path");i==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:xi([e,E.pathname])),(y.replace?n.replace:n.push)(E,y.state,y)},[e,n,u,o,i])}var Ex=j.createContext(null);function Tx(i){let e=j.useContext(xr).outlet;return j.useMemo(()=>e&&j.createElement(Ex.Provider,{value:i},e),[e,i])}function yu(i,{relative:e}={}){let{matches:n}=j.useContext(xr),{pathname:s}=lr(),o=JSON.stringify(Dg(n));return j.useMemo(()=>Og(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function Sx(i,e){return cE(i,e)}function cE(i,e,n,s,o){Nt(Mo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=j.useContext(Qn),{matches:d}=j.useContext(xr),m=d[d.length-1],p=m?m.params:{},y=m?m.pathname:"/",E=m?m.pathnameBase:"/",T=m&&m.route;{let B=T&&T.path||"";hE(y,!T||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let x=lr(),M;if(e){let B=typeof e=="string"?Oo(e):e;Nt(E==="/"||B.pathname?.startsWith(E),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${B.pathname}" was given in the \`location\` prop.`),M=B}else M=x;let H=M.pathname||"/",F=H;if(E!=="/"){let B=E.replace(/^\//,"").split("/");F="/"+H.replace(/^\//,"").split("/").slice(B.length).join("/")}let C=Zb(i,{pathname:F});or(T||C!=null,`No routes matched location "${M.pathname}${M.search}${M.hash}" `),or(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${M.pathname}${M.search}${M.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ne=Cx(C&&C.map(B=>Object.assign({},B,{params:Object.assign({},p,B.params),pathname:xi([E,u.encodeLocation?u.encodeLocation(B.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?E:xi([E,u.encodeLocation?u.encodeLocation(B.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathnameBase])})),d,n,s,o);return e&&ne?j.createElement(pu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...M},navigationType:"POP"}},ne):ne}function wx(){let i=Mx(),e=ux(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",i),d=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:u},"ErrorBoundary")," or"," ",j.createElement("code",{style:u},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:o},n):null,d)}var xx=j.createElement(wx,null),dE=class extends j.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const n=_x(i.digest);n&&(i=n)}let e=i!==void 0?j.createElement(xr.Provider,{value:this.props.routeContext},j.createElement(Ng.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?j.createElement(Ax,{error:i},e):e}};dE.contextType=hx;var km=new WeakMap;function Ax({children:i,error:e}){let{basename:n}=j.useContext(Qn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=yx(e.digest);if(s){let o=km.get(e);if(o)throw o;let u=iE(s.location,n);if(rE&&!km.get(e))if(u.isExternal||s.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:s.replace}));throw km.set(e,d),d}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return i}function Rx({routeContext:i,match:e,children:n}){let s=j.useContext(No);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(xr.Provider,{value:i},n)}function Cx(i,e=[],n=null,s=null,o=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let u=i,d=n?.errors;if(d!=null){let E=u.findIndex(T=>T.route.id&&d?.[T.route.id]!==void 0);Nt(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,E+1))}let m=!1,p=-1;if(n)for(let E=0;E<u.length;E++){let T=u[E];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(p=E),T.route.id){let{loaderData:x,errors:M}=n,H=T.route.loader&&!x.hasOwnProperty(T.route.id)&&(!M||M[T.route.id]===void 0);if(T.route.lazy||H){m=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}let y=n&&s?(E,T)=>{s(E,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:cx(n.matches),errorInfo:T})}:void 0;return u.reduceRight((E,T,x)=>{let M,H=!1,F=null,C=null;n&&(M=d&&T.route.id?d[T.route.id]:void 0,F=T.route.errorElement||xx,m&&(p<0&&x===0?(hE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),H=!0,C=null):p===x&&(H=!0,C=T.route.hydrateFallbackElement||null)));let ne=e.concat(u.slice(0,x+1)),B=()=>{let ue;return M?ue=F:H?ue=C:T.route.Component?ue=j.createElement(T.route.Component,null):T.route.element?ue=T.route.element:ue=E,j.createElement(Rx,{match:T,routeContext:{outlet:E,matches:ne,isDataRoute:n!=null},children:ue})};return n&&(T.route.ErrorBoundary||T.route.errorElement||x===0)?j.createElement(dE,{location:n.location,revalidation:n.revalidation,component:F,error:M,children:B(),routeContext:{outlet:null,matches:ne,isDataRoute:!0},onError:y}):B()},null)}function kg(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ix(i){let e=j.useContext(No);return Nt(e,kg(i)),e}function Dx(i){let e=j.useContext(nh);return Nt(e,kg(i)),e}function Ox(i){let e=j.useContext(xr);return Nt(e,kg(i)),e}function jg(i){let e=Ox(i),n=e.matches[e.matches.length-1];return Nt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function Nx(){return jg("useRouteId")}function Mx(){let i=j.useContext(Ng),e=Dx("useRouteError"),n=jg("useRouteError");return i!==void 0?i:e.errors?.[n]}function kx(){let{router:i}=Ix("useNavigate"),e=jg("useNavigate"),n=j.useRef(!1);return uE(()=>{n.current=!0}),j.useCallback(async(o,u={})=>{or(n.current,lE),n.current&&(typeof o=="number"?await i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var gv={};function hE(i,e,n){!e&&!gv[i]&&(gv[i]=!0,or(!1,n))}j.memo(jx);function jx({routes:i,future:e,state:n,onError:s}){return cE(i,void 0,n,s,e)}function fE({to:i,replace:e,state:n,relative:s}){Nt(Mo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=j.useContext(Qn);or(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=j.useContext(xr),{pathname:d}=lr(),m=Mg(),p=Og(i,Dg(u),d,s==="path"),y=JSON.stringify(p);return j.useEffect(()=>{m(JSON.parse(y),{replace:e,state:n,relative:s})},[m,y,s,e,n]),null}function Vg(i){return Tx(i.context)}function An(i){Nt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Vx({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1,unstable_useTransitions:d}){Nt(!Mo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=i.replace(/^\/*/,"/"),p=j.useMemo(()=>({basename:m,navigator:o,static:u,unstable_useTransitions:d,future:{}}),[m,o,u,d]);typeof n=="string"&&(n=Oo(n));let{pathname:y="/",search:E="",hash:T="",state:x=null,key:M="default"}=n,H=j.useMemo(()=>{let F=Ri(y,m);return F==null?null:{location:{pathname:F,search:E,hash:T,state:x,key:M},navigationType:s}},[m,y,E,T,x,M,s]);return or(H!=null,`<Router basename="${m}"> is not able to match the URL "${y}${E}${T}" because it does not start with the basename, so the <Router> won't render anything.`),H==null?null:j.createElement(Qn.Provider,{value:p},j.createElement(pu.Provider,{children:e,value:H}))}function Lx({children:i,location:e}){return Sx(Zm(i),e)}function Zm(i,e=[]){let n=[];return j.Children.forEach(i,(s,o)=>{if(!j.isValidElement(s))return;let u=[...e,o];if(s.type===j.Fragment){n.push.apply(n,Zm(s.props.children,u));return}Nt(s.type===An,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Nt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=Zm(s.props.children,u)),n.push(d)}),n}var _d="get",vd="application/x-www-form-urlencoded";function rh(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function Ux(i){return rh(i)&&i.tagName.toLowerCase()==="button"}function Px(i){return rh(i)&&i.tagName.toLowerCase()==="form"}function zx(i){return rh(i)&&i.tagName.toLowerCase()==="input"}function Bx(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function Fx(i,e){return i.button===0&&(!e||e==="_self")&&!Bx(i)}var ld=null;function qx(){if(ld===null)try{new FormData(document.createElement("form"),0),ld=!1}catch{ld=!0}return ld}var Hx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jm(i){return i!=null&&!Hx.has(i)?(or(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vd}"`),null):i}function Gx(i,e){let n,s,o,u,d;if(Px(i)){let m=i.getAttribute("action");s=m?Ri(m,e):null,n=i.getAttribute("method")||_d,o=jm(i.getAttribute("enctype"))||vd,u=new FormData(i)}else if(Ux(i)||zx(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||m.getAttribute("action");if(s=p?Ri(p,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||_d,o=jm(i.getAttribute("formenctype"))||jm(m.getAttribute("enctype"))||vd,u=new FormData(m,i),!qx()){let{name:y,type:E,value:T}=i;if(E==="image"){let x=y?`${y}.`:"";u.append(`${x}x`,"0"),u.append(`${x}y`,"0")}else y&&u.append(y,T)}}else{if(rh(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=_d,s=null,o=vd,d=i}return u&&o==="text/plain"&&(d=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Lg(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Qx(i,e,n){let s=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&Ri(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function Yx(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Kx(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function $x(i,e,n){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await Yx(u,n);return d.links?d.links():[]}return[]}));return Zx(s.flat(1).filter(Kx).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function pv(i,e,n,s,o,u){let d=(p,y)=>n[y]?p.route.id!==n[y].route.id:!0,m=(p,y)=>n[y].pathname!==p.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==p.params["*"];return u==="assets"?e.filter((p,y)=>d(p,y)||m(p,y)):u==="data"?e.filter((p,y)=>{let E=s.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(d(p,y)||m(p,y))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function Wx(i,e,{includeHydrateFallback:n}={}){return Xx(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function Xx(i){return[...new Set(i)]}function Jx(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function Zx(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(Jx(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}function mE(){let i=j.useContext(No);return Lg(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function eA(){let i=j.useContext(nh);return Lg(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Ug=j.createContext(void 0);Ug.displayName="FrameworkContext";function gE(){let i=j.useContext(Ug);return Lg(i,"You must render this element inside a <HydratedRouter> element"),i}function tA(i,e){let n=j.useContext(Ug),[s,o]=j.useState(!1),[u,d]=j.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:y,onMouseLeave:E,onTouchStart:T}=e,x=j.useRef(null);j.useEffect(()=>{if(i==="render"&&d(!0),i==="viewport"){let F=ne=>{ne.forEach(B=>{d(B.isIntersecting)})},C=new IntersectionObserver(F,{threshold:.5});return x.current&&C.observe(x.current),()=>{C.disconnect()}}},[i]),j.useEffect(()=>{if(s){let F=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(F)}}},[s]);let M=()=>{o(!0)},H=()=>{o(!1),d(!1)};return n?i!=="intent"?[u,x,{}]:[u,x,{onFocus:Ql(m,M),onBlur:Ql(p,H),onMouseEnter:Ql(y,M),onMouseLeave:Ql(E,H),onTouchStart:Ql(T,M)}]:[!1,x,{}]}function Ql(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function nA({page:i,...e}){let{router:n}=mE(),s=j.useMemo(()=>Zb(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?j.createElement(iA,{page:i,matches:s,...e}):null}function rA(i){let{manifest:e,routeModules:n}=gE(),[s,o]=j.useState([]);return j.useEffect(()=>{let u=!1;return $x(i,e,n).then(d=>{u||o(d)}),()=>{u=!0}},[i,e,n]),s}function iA({page:i,matches:e,...n}){let s=lr(),{manifest:o,routeModules:u}=gE(),{basename:d}=mE(),{loaderData:m,matches:p}=eA(),y=j.useMemo(()=>pv(i,e,p,o,s,"data"),[i,e,p,o,s]),E=j.useMemo(()=>pv(i,e,p,o,s,"assets"),[i,e,p,o,s]),T=j.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let H=new Set,F=!1;if(e.forEach(ne=>{let B=o.routes[ne.route.id];!B||!B.hasLoader||(!y.some(ue=>ue.route.id===ne.route.id)&&ne.route.id in m&&u[ne.route.id]?.shouldRevalidate||B.hasClientLoader?F=!0:H.add(ne.route.id))}),H.size===0)return[];let C=Qx(i,d,"data");return F&&H.size>0&&C.searchParams.set("_routes",e.filter(ne=>H.has(ne.route.id)).map(ne=>ne.route.id).join(",")),[C.pathname+C.search]},[d,m,s,o,y,e,i,u]),x=j.useMemo(()=>Wx(E,o),[E,o]),M=rA(E);return j.createElement(j.Fragment,null,T.map(H=>j.createElement("link",{key:H,rel:"prefetch",as:"fetch",href:H,...n})),x.map(H=>j.createElement("link",{key:H,rel:"modulepreload",href:H,...n})),M.map(({key:H,link:F})=>j.createElement("link",{key:H,nonce:n.nonce,...F})))}function sA(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var aA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{aA&&(window.__reactRouterVersion="7.11.0")}catch{}function oA({basename:i,children:e,unstable_useTransitions:n,window:s}){let o=j.useRef();o.current==null&&(o.current=Pw({window:s,v5Compat:!0}));let u=o.current,[d,m]=j.useState({action:u.action,location:u.location}),p=j.useCallback(y=>{n===!1?m(y):j.startTransition(()=>m(y))},[n]);return j.useLayoutEffect(()=>u.listen(p),[u,p]),j.createElement(Vx,{basename:i,children:e,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:n})}var pE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bt=j.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:d,state:m,target:p,to:y,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:x,...M},H){let{basename:F,unstable_useTransitions:C}=j.useContext(Qn),ne=typeof y=="string"&&pE.test(y),B=iE(y,F);y=B.to;let ue=vx(y,{relative:o}),[Ee,Te,Re]=tA(s,M),D=dA(y,{replace:d,state:m,target:p,preventScrollReset:E,relative:o,viewTransition:T,unstable_defaultShouldRevalidate:x,unstable_useTransitions:C});function A(k){e&&e(k),k.defaultPrevented||D(k)}let R=j.createElement("a",{...M,...Re,href:B.absoluteURL||ue,onClick:B.isExternal||u?e:A,ref:sA(H,Te),target:p,"data-discover":!ne&&n==="render"?"true":void 0});return Ee&&!ne?j.createElement(j.Fragment,null,R,j.createElement(nA,{page:ue})):R});Bt.displayName="Link";var lA=j.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:d,viewTransition:m,children:p,...y},E){let T=yu(d,{relative:y.relative}),x=lr(),M=j.useContext(nh),{navigator:H,basename:F}=j.useContext(Qn),C=M!=null&&pA(T)&&m===!0,ne=H.encodeLocation?H.encodeLocation(T).pathname:T.pathname,B=x.pathname,ue=M&&M.navigation&&M.navigation.location?M.navigation.location.pathname:null;n||(B=B.toLowerCase(),ue=ue?ue.toLowerCase():null,ne=ne.toLowerCase()),ue&&F&&(ue=Ri(ue,F)||ue);const Ee=ne!=="/"&&ne.endsWith("/")?ne.length-1:ne.length;let Te=B===ne||!o&&B.startsWith(ne)&&B.charAt(Ee)==="/",Re=ue!=null&&(ue===ne||!o&&ue.startsWith(ne)&&ue.charAt(ne.length)==="/"),D={isActive:Te,isPending:Re,isTransitioning:C},A=Te?e:void 0,R;typeof s=="function"?R=s(D):R=[s,Te?"active":null,Re?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let k=typeof u=="function"?u(D):u;return j.createElement(Bt,{...y,"aria-current":A,className:R,ref:E,style:k,to:d,viewTransition:m},typeof p=="function"?p(D):p)});lA.displayName="NavLink";var uA=j.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:d=_d,action:m,onSubmit:p,relative:y,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:x,...M},H)=>{let{unstable_useTransitions:F}=j.useContext(Qn),C=mA(),ne=gA(m,{relative:y}),B=d.toLowerCase()==="get"?"get":"post",ue=typeof m=="string"&&pE.test(m),Ee=Te=>{if(p&&p(Te),Te.defaultPrevented)return;Te.preventDefault();let Re=Te.nativeEvent.submitter,D=Re?.getAttribute("formmethod")||d,A=()=>C(Re||Te.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:o,state:u,relative:y,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:x});F&&n!==!1?j.startTransition(()=>A()):A()};return j.createElement("form",{ref:H,method:B,action:ne,onSubmit:s?p:Ee,...M,"data-discover":!ue&&i==="render"?"true":void 0})});uA.displayName="Form";function cA(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yE(i){let e=j.useContext(No);return Nt(e,cA(i)),e}function dA(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:m,unstable_useTransitions:p}={}){let y=Mg(),E=lr(),T=yu(i,{relative:u});return j.useCallback(x=>{if(Fx(x,e)){x.preventDefault();let M=n!==void 0?n:ou(E)===ou(T),H=()=>y(i,{replace:M,state:s,preventScrollReset:o,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:m});p?j.startTransition(()=>H()):H()}},[E,y,T,n,s,e,i,o,u,d,m,p])}var hA=0,fA=()=>`__${String(++hA)}__`;function mA(){let{router:i}=yE("useSubmit"),{basename:e}=j.useContext(Qn),n=Nx(),s=i.fetch,o=i.navigate;return j.useCallback(async(u,d={})=>{let{action:m,method:p,encType:y,formData:E,body:T}=Gx(u,e);if(d.navigate===!1){let x=d.fetcherKey||fA();await s(x,n,d.action||m,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:E,body:T,formMethod:d.method||p,formEncType:d.encType||y,flushSync:d.flushSync})}else await o(d.action||m,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:E,body:T,formMethod:d.method||p,formEncType:d.encType||y,replace:d.replace,state:d.state,fromRouteId:n,flushSync:d.flushSync,viewTransition:d.viewTransition})},[s,o,e,n])}function gA(i,{relative:e}={}){let{basename:n}=j.useContext(Qn),s=j.useContext(xr);Nt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...yu(i||".",{relative:e})},d=lr();if(i==null){u.search=d.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(E=>E==="")){m.delete("index"),p.filter(T=>T).forEach(T=>m.append("index",T));let E=m.toString();u.search=E?`?${E}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:xi([n,u.pathname])),ou(u)}function pA(i,{relative:e}={}){let n=j.useContext(aE);Nt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=yE("useViewTransitionState"),o=yu(i,{relative:e});if(!n.isTransitioning)return!1;let u=Ri(n.currentLocation.pathname,s)||n.currentLocation.pathname,d=Ri(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Nd(o.pathname,d)!=null||Nd(o.pathname,u)!=null}const yA=function(){},_A={is_logged_in:!1,is_auth_checked:!1,username:"",set_user_context:yA},_u=j.createContext(_A),vA=()=>{};var yv={};const _E=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},bA=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],d=i[n++],m=i[n++],p=((o&7)<<18|(u&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],d=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},vE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],d=o+1<i.length,m=d?i[o+1]:0,p=o+2<i.length,y=p?i[o+2]:0,E=u>>2,T=(u&3)<<4|m>>4;let x=(m&15)<<2|y>>6,M=y&63;p||(M=64,d||(x=64)),s.push(n[E],n[T],n[x],n[M])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(_E(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):bA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const y=o<i.length?n[i.charAt(o)]:64;++o;const T=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||y==null||T==null)throw new EA;const x=u<<2|m>>4;if(s.push(x),y!==64){const M=m<<4&240|y>>2;if(s.push(M),T!==64){const H=y<<6&192|T;s.push(H)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class EA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TA=function(i){const e=_E(i);return vE.encodeByteArray(e,!0)},Md=function(i){return TA(i).replace(/\./g,"")},bE=function(i){try{return vE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function SA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const wA=()=>SA().__FIREBASE_DEFAULTS__,xA=()=>{if(typeof process>"u"||typeof yv>"u")return;const i=yv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},AA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&bE(i[1]);return e&&JSON.parse(e)},ih=()=>{try{return vA()||wA()||xA()||AA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},EE=i=>ih()?.emulatorHosts?.[i],RA=i=>{const e=EE(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},TE=()=>ih()?.config,SE=i=>ih()?.[`_${i}`];class CA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function ko(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wE(i){return(await fetch(i,{credentials:"include"})).ok}function IA(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Md(JSON.stringify(n)),Md(JSON.stringify(d)),""].join(".")}const tu={};function DA(){const i={prod:[],emulator:[]};for(const e of Object.keys(tu))tu[e]?i.emulator.push(e):i.prod.push(e);return i}function OA(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let _v=!1;function xE(i,e){if(typeof window>"u"||typeof document>"u"||!ko(window.location.host)||tu[i]===e||tu[i]||_v)return;tu[i]=e;function n(x){return`__firebase__banner__${x}`}const s="__firebase__banner",u=DA().prod.length>0;function d(){const x=document.getElementById(s);x&&x.remove()}function m(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function p(x,M){x.setAttribute("width","24"),x.setAttribute("id",M),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function y(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{_v=!0,d()},x}function E(x,M){x.setAttribute("id",M),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function T(){const x=OA(s),M=n("text"),H=document.getElementById(M)||document.createElement("span"),F=n("learnmore"),C=document.getElementById(F)||document.createElement("a"),ne=n("preprendIcon"),B=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const ue=x.element;m(ue),E(C,F);const Ee=y();p(B,ne),ue.append(B,H,C,Ee),document.body.appendChild(ue)}u?(H.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function Sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())}function MA(){const i=ih()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jA(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function VA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LA(){const i=Sn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function UA(){return!MA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PA(){try{return typeof indexedDB=="object"}catch{return!1}}function zA(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const BA="FirebaseError";class Mi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=BA,Object.setPrototypeOf(this,Mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vu.prototype.create)}}class vu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?FA(u,s):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Mi(o,m,s)}}function FA(i,e){return i.replace(qA,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const qA=/\{\$([^}]+)}/g;function HA(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ws(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],d=e[o];if(vv(u)&&vv(d)){if(!ws(u,d))return!1}else if(u!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function vv(i){return i!==null&&typeof i=="object"}function bu(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function $l(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Wl(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function GA(i,e){const n=new QA(i,e);return n.subscribe.bind(n)}class QA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");YA(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Vm),o.error===void 0&&(o.error=Vm),o.complete===void 0&&(o.complete=Vm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YA(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Vm(){}function un(i){return i&&i._delegate?i._delegate:i}class fa{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ca="[DEFAULT]";class KA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new CA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WA(e))try{this.getOrInitializeService({instanceIdentifier:ca})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ca){return this.instances.has(e)}getOptions(e=ca){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:$A(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ca){return this.component?this.component.multipleInstances?e:ca:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $A(i){return i===ca?void 0:i}function WA(i){return i.instantiationMode==="EAGER"}class XA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new KA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var rt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(rt||(rt={}));const JA={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},ZA=rt.INFO,eR={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},tR=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=eR[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pg{constructor(e){this.name=e,this._logLevel=ZA,this._logHandler=tR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}}const nR=(i,e)=>e.some(n=>i instanceof n);let bv,Ev;function rR(){return bv||(bv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iR(){return Ev||(Ev=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AE=new WeakMap,eg=new WeakMap,RE=new WeakMap,Lm=new WeakMap,zg=new WeakMap;function sR(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",d)},u=()=>{n(_s(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&AE.set(n,i)}).catch(()=>{}),zg.set(e,i),e}function aR(i){if(eg.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",d),i.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",d),i.addEventListener("abort",d)});eg.set(i,e)}let tg={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return eg.get(i);if(e==="objectStoreNames")return i.objectStoreNames||RE.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _s(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function oR(i){tg=i(tg)}function lR(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Um(this),e,...n);return RE.set(s,e.sort?e.sort():[e]),_s(s)}:iR().includes(i)?function(...e){return i.apply(Um(this),e),_s(AE.get(this))}:function(...e){return _s(i.apply(Um(this),e))}}function uR(i){return typeof i=="function"?lR(i):(i instanceof IDBTransaction&&aR(i),nR(i,rR())?new Proxy(i,tg):i)}function _s(i){if(i instanceof IDBRequest)return sR(i);if(Lm.has(i))return Lm.get(i);const e=uR(i);return e!==i&&(Lm.set(i,e),zg.set(e,i)),e}const Um=i=>zg.get(i);function cR(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const d=indexedDB.open(i,e),m=_s(d);return s&&d.addEventListener("upgradeneeded",p=>{s(_s(d.result),p.oldVersion,p.newVersion,_s(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const dR=["get","getKey","getAll","getAllKeys","count"],hR=["put","add","delete","clear"],Pm=new Map;function Tv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Pm.get(e))return Pm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=hR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||dR.includes(n)))return;const u=async function(d,...m){const p=this.transaction(d,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&p.done]))[0]};return Pm.set(e,u),u}oR(i=>({...i,get:(e,n,s)=>Tv(e,n)||i.get(e,n,s),has:(e,n)=>!!Tv(e,n)||i.has(e,n)}));class fR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function mR(i){return i.getComponent()?.type==="VERSION"}const ng="@firebase/app",Sv="0.14.6";const Ci=new Pg("@firebase/app"),gR="@firebase/app-compat",pR="@firebase/analytics-compat",yR="@firebase/analytics",_R="@firebase/app-check-compat",vR="@firebase/app-check",bR="@firebase/auth",ER="@firebase/auth-compat",TR="@firebase/database",SR="@firebase/data-connect",wR="@firebase/database-compat",xR="@firebase/functions",AR="@firebase/functions-compat",RR="@firebase/installations",CR="@firebase/installations-compat",IR="@firebase/messaging",DR="@firebase/messaging-compat",OR="@firebase/performance",NR="@firebase/performance-compat",MR="@firebase/remote-config",kR="@firebase/remote-config-compat",jR="@firebase/storage",VR="@firebase/storage-compat",LR="@firebase/firestore",UR="@firebase/ai",PR="@firebase/firestore-compat",zR="firebase",BR="12.6.0";const rg="[DEFAULT]",FR={[ng]:"fire-core",[gR]:"fire-core-compat",[yR]:"fire-analytics",[pR]:"fire-analytics-compat",[vR]:"fire-app-check",[_R]:"fire-app-check-compat",[bR]:"fire-auth",[ER]:"fire-auth-compat",[TR]:"fire-rtdb",[SR]:"fire-data-connect",[wR]:"fire-rtdb-compat",[xR]:"fire-fn",[AR]:"fire-fn-compat",[RR]:"fire-iid",[CR]:"fire-iid-compat",[IR]:"fire-fcm",[DR]:"fire-fcm-compat",[OR]:"fire-perf",[NR]:"fire-perf-compat",[MR]:"fire-rc",[kR]:"fire-rc-compat",[jR]:"fire-gcs",[VR]:"fire-gcs-compat",[LR]:"fire-fst",[PR]:"fire-fst-compat",[UR]:"fire-vertex","fire-js":"fire-js",[zR]:"fire-js-all"};const kd=new Map,qR=new Map,ig=new Map;function wv(i,e){try{i.container.addComponent(e)}catch(n){Ci.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function bo(i){const e=i.name;if(ig.has(e))return Ci.debug(`There were multiple attempts to register component ${e}.`),!1;ig.set(e,i);for(const n of kd.values())wv(n,i);for(const n of qR.values())wv(n,i);return!0}function Bg(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Er(i){return i==null?!1:i.settings!==void 0}const HR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vs=new vu("app","Firebase",HR);class GR{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new fa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vs.create("app-deleted",{appName:this._name})}}const jo=BR;function CE(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:rg,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw vs.create("bad-app-name",{appName:String(o)});if(n||(n=TE()),!n)throw vs.create("no-options");const u=kd.get(o);if(u){if(ws(n,u.options)&&ws(s,u.config))return u;throw vs.create("duplicate-app",{appName:o})}const d=new XA(o);for(const p of ig.values())d.addComponent(p);const m=new GR(n,s,d);return kd.set(o,m),m}function IE(i=rg){const e=kd.get(i);if(!e&&i===rg&&TE())return CE();if(!e)throw vs.create("no-app",{appName:i});return e}function bs(i,e,n){let s=FR[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ci.warn(d.join(" "));return}bo(new fa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const QR="firebase-heartbeat-database",YR=1,lu="firebase-heartbeat-store";let zm=null;function DE(){return zm||(zm=cR(QR,YR,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(lu)}catch(n){console.warn(n)}}}}).catch(i=>{throw vs.create("idb-open",{originalErrorMessage:i.message})})),zm}async function KR(i){try{const n=(await DE()).transaction(lu),s=await n.objectStore(lu).get(OE(i));return await n.done,s}catch(e){if(e instanceof Mi)Ci.warn(e.message);else{const n=vs.create("idb-get",{originalErrorMessage:e?.message});Ci.warn(n.message)}}}async function xv(i,e){try{const s=(await DE()).transaction(lu,"readwrite");await s.objectStore(lu).put(e,OE(i)),await s.done}catch(n){if(n instanceof Mi)Ci.warn(n.message);else{const s=vs.create("idb-set",{originalErrorMessage:n?.message});Ci.warn(s.message)}}}function OE(i){return`${i.name}!${i.options.appId}`}const $R=1024,WR=30;class XR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ZR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Av();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>WR){const o=eC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ci.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Av(),{heartbeatsToSend:n,unsentEntries:s}=JR(this._heartbeatsCache.heartbeats),o=Md(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ci.warn(e),""}}}function Av(){return new Date().toISOString().substring(0,10)}function JR(i,e=$R){const n=[];let s=i.slice();for(const o of i){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),Rv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Rv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class ZR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PA()?zA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await KR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return xv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return xv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Rv(i){return Md(JSON.stringify({version:2,heartbeats:i})).length}function eC(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}function tC(i){bo(new fa("platform-logger",e=>new fR(e),"PRIVATE")),bo(new fa("heartbeat",e=>new XR(e),"PRIVATE")),bs(ng,Sv,i),bs(ng,Sv,"esm2020"),bs("fire-js","")}tC("");var Cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Es,NE;(function(){var i;function e(D,A){function R(){}R.prototype=A.prototype,D.F=A.prototype,D.prototype=new R,D.prototype.constructor=D,D.D=function(k,U,z){for(var I=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)I[Ye-2]=arguments[Ye];return A.prototype[U].apply(k,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,A,R){R||(R=0);const k=Array(16);if(typeof A=="string")for(var U=0;U<16;++U)k[U]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(U=0;U<16;++U)k[U]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=D.g[0],R=D.g[1],U=D.g[2];let z=D.g[3],I;I=A+(z^R&(U^z))+k[0]+3614090360&4294967295,A=R+(I<<7&4294967295|I>>>25),I=z+(U^A&(R^U))+k[1]+3905402710&4294967295,z=A+(I<<12&4294967295|I>>>20),I=U+(R^z&(A^R))+k[2]+606105819&4294967295,U=z+(I<<17&4294967295|I>>>15),I=R+(A^U&(z^A))+k[3]+3250441966&4294967295,R=U+(I<<22&4294967295|I>>>10),I=A+(z^R&(U^z))+k[4]+4118548399&4294967295,A=R+(I<<7&4294967295|I>>>25),I=z+(U^A&(R^U))+k[5]+1200080426&4294967295,z=A+(I<<12&4294967295|I>>>20),I=U+(R^z&(A^R))+k[6]+2821735955&4294967295,U=z+(I<<17&4294967295|I>>>15),I=R+(A^U&(z^A))+k[7]+4249261313&4294967295,R=U+(I<<22&4294967295|I>>>10),I=A+(z^R&(U^z))+k[8]+1770035416&4294967295,A=R+(I<<7&4294967295|I>>>25),I=z+(U^A&(R^U))+k[9]+2336552879&4294967295,z=A+(I<<12&4294967295|I>>>20),I=U+(R^z&(A^R))+k[10]+4294925233&4294967295,U=z+(I<<17&4294967295|I>>>15),I=R+(A^U&(z^A))+k[11]+2304563134&4294967295,R=U+(I<<22&4294967295|I>>>10),I=A+(z^R&(U^z))+k[12]+1804603682&4294967295,A=R+(I<<7&4294967295|I>>>25),I=z+(U^A&(R^U))+k[13]+4254626195&4294967295,z=A+(I<<12&4294967295|I>>>20),I=U+(R^z&(A^R))+k[14]+2792965006&4294967295,U=z+(I<<17&4294967295|I>>>15),I=R+(A^U&(z^A))+k[15]+1236535329&4294967295,R=U+(I<<22&4294967295|I>>>10),I=A+(U^z&(R^U))+k[1]+4129170786&4294967295,A=R+(I<<5&4294967295|I>>>27),I=z+(R^U&(A^R))+k[6]+3225465664&4294967295,z=A+(I<<9&4294967295|I>>>23),I=U+(A^R&(z^A))+k[11]+643717713&4294967295,U=z+(I<<14&4294967295|I>>>18),I=R+(z^A&(U^z))+k[0]+3921069994&4294967295,R=U+(I<<20&4294967295|I>>>12),I=A+(U^z&(R^U))+k[5]+3593408605&4294967295,A=R+(I<<5&4294967295|I>>>27),I=z+(R^U&(A^R))+k[10]+38016083&4294967295,z=A+(I<<9&4294967295|I>>>23),I=U+(A^R&(z^A))+k[15]+3634488961&4294967295,U=z+(I<<14&4294967295|I>>>18),I=R+(z^A&(U^z))+k[4]+3889429448&4294967295,R=U+(I<<20&4294967295|I>>>12),I=A+(U^z&(R^U))+k[9]+568446438&4294967295,A=R+(I<<5&4294967295|I>>>27),I=z+(R^U&(A^R))+k[14]+3275163606&4294967295,z=A+(I<<9&4294967295|I>>>23),I=U+(A^R&(z^A))+k[3]+4107603335&4294967295,U=z+(I<<14&4294967295|I>>>18),I=R+(z^A&(U^z))+k[8]+1163531501&4294967295,R=U+(I<<20&4294967295|I>>>12),I=A+(U^z&(R^U))+k[13]+2850285829&4294967295,A=R+(I<<5&4294967295|I>>>27),I=z+(R^U&(A^R))+k[2]+4243563512&4294967295,z=A+(I<<9&4294967295|I>>>23),I=U+(A^R&(z^A))+k[7]+1735328473&4294967295,U=z+(I<<14&4294967295|I>>>18),I=R+(z^A&(U^z))+k[12]+2368359562&4294967295,R=U+(I<<20&4294967295|I>>>12),I=A+(R^U^z)+k[5]+4294588738&4294967295,A=R+(I<<4&4294967295|I>>>28),I=z+(A^R^U)+k[8]+2272392833&4294967295,z=A+(I<<11&4294967295|I>>>21),I=U+(z^A^R)+k[11]+1839030562&4294967295,U=z+(I<<16&4294967295|I>>>16),I=R+(U^z^A)+k[14]+4259657740&4294967295,R=U+(I<<23&4294967295|I>>>9),I=A+(R^U^z)+k[1]+2763975236&4294967295,A=R+(I<<4&4294967295|I>>>28),I=z+(A^R^U)+k[4]+1272893353&4294967295,z=A+(I<<11&4294967295|I>>>21),I=U+(z^A^R)+k[7]+4139469664&4294967295,U=z+(I<<16&4294967295|I>>>16),I=R+(U^z^A)+k[10]+3200236656&4294967295,R=U+(I<<23&4294967295|I>>>9),I=A+(R^U^z)+k[13]+681279174&4294967295,A=R+(I<<4&4294967295|I>>>28),I=z+(A^R^U)+k[0]+3936430074&4294967295,z=A+(I<<11&4294967295|I>>>21),I=U+(z^A^R)+k[3]+3572445317&4294967295,U=z+(I<<16&4294967295|I>>>16),I=R+(U^z^A)+k[6]+76029189&4294967295,R=U+(I<<23&4294967295|I>>>9),I=A+(R^U^z)+k[9]+3654602809&4294967295,A=R+(I<<4&4294967295|I>>>28),I=z+(A^R^U)+k[12]+3873151461&4294967295,z=A+(I<<11&4294967295|I>>>21),I=U+(z^A^R)+k[15]+530742520&4294967295,U=z+(I<<16&4294967295|I>>>16),I=R+(U^z^A)+k[2]+3299628645&4294967295,R=U+(I<<23&4294967295|I>>>9),I=A+(U^(R|~z))+k[0]+4096336452&4294967295,A=R+(I<<6&4294967295|I>>>26),I=z+(R^(A|~U))+k[7]+1126891415&4294967295,z=A+(I<<10&4294967295|I>>>22),I=U+(A^(z|~R))+k[14]+2878612391&4294967295,U=z+(I<<15&4294967295|I>>>17),I=R+(z^(U|~A))+k[5]+4237533241&4294967295,R=U+(I<<21&4294967295|I>>>11),I=A+(U^(R|~z))+k[12]+1700485571&4294967295,A=R+(I<<6&4294967295|I>>>26),I=z+(R^(A|~U))+k[3]+2399980690&4294967295,z=A+(I<<10&4294967295|I>>>22),I=U+(A^(z|~R))+k[10]+4293915773&4294967295,U=z+(I<<15&4294967295|I>>>17),I=R+(z^(U|~A))+k[1]+2240044497&4294967295,R=U+(I<<21&4294967295|I>>>11),I=A+(U^(R|~z))+k[8]+1873313359&4294967295,A=R+(I<<6&4294967295|I>>>26),I=z+(R^(A|~U))+k[15]+4264355552&4294967295,z=A+(I<<10&4294967295|I>>>22),I=U+(A^(z|~R))+k[6]+2734768916&4294967295,U=z+(I<<15&4294967295|I>>>17),I=R+(z^(U|~A))+k[13]+1309151649&4294967295,R=U+(I<<21&4294967295|I>>>11),I=A+(U^(R|~z))+k[4]+4149444226&4294967295,A=R+(I<<6&4294967295|I>>>26),I=z+(R^(A|~U))+k[11]+3174756917&4294967295,z=A+(I<<10&4294967295|I>>>22),I=U+(A^(z|~R))+k[2]+718787259&4294967295,U=z+(I<<15&4294967295|I>>>17),I=R+(z^(U|~A))+k[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(U+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+U&4294967295,D.g[3]=D.g[3]+z&4294967295}s.prototype.v=function(D,A){A===void 0&&(A=D.length);const R=A-this.blockSize,k=this.C;let U=this.h,z=0;for(;z<A;){if(U==0)for(;z<=R;)o(this,D,z),z+=this.blockSize;if(typeof D=="string"){for(;z<A;)if(k[U++]=D.charCodeAt(z++),U==this.blockSize){o(this,k),U=0;break}}else for(;z<A;)if(k[U++]=D[z++],U==this.blockSize){o(this,k),U=0;break}}this.h=U,this.o+=A},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;A=this.o*8;for(var R=D.length-8;R<D.length;++R)D[R]=A&255,A/=256;for(this.v(D),D=Array(16),A=0,R=0;R<4;++R)for(let k=0;k<32;k+=8)D[A++]=this.g[R]>>>k&255;return D};function u(D,A){var R=m;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=A(D)}function d(D,A){this.h=A;const R=[];let k=!0;for(let U=D.length-1;U>=0;U--){const z=D[U]|0;k&&z==A||(R[U]=z,k=!1)}this.g=R}var m={};function p(D){return-128<=D&&D<128?u(D,function(A){return new d([A|0],A<0?-1:0)}):new d([D|0],D<0?-1:0)}function y(D){if(isNaN(D)||!isFinite(D))return T;if(D<0)return C(y(-D));const A=[];let R=1;for(let k=0;D>=R;k++)A[k]=D/R|0,R*=4294967296;return new d(A,0)}function E(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return C(E(D.substring(1),A));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(A,8));let k=T;for(let z=0;z<D.length;z+=8){var U=Math.min(8,D.length-z);const I=parseInt(D.substring(z,z+U),A);U<8?(U=y(Math.pow(A,U)),k=k.j(U).add(y(I))):(k=k.j(R),k=k.add(y(I)))}return k}var T=p(0),x=p(1),M=p(16777216);i=d.prototype,i.m=function(){if(F(this))return-C(this).m();let D=0,A=1;for(let R=0;R<this.g.length;R++){const k=this.i(R);D+=(k>=0?k:4294967296+k)*A,A*=4294967296}return D},i.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(H(this))return"0";if(F(this))return"-"+C(this).toString(D);const A=y(Math.pow(D,6));var R=this;let k="";for(;;){const U=Ee(R,A).g;R=ne(R,U.j(A));let z=((R.g.length>0?R.g[0]:R.h)>>>0).toString(D);if(R=U,H(R))return z+k;for(;z.length<6;)z="0"+z;k=z+k}},i.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function H(D){if(D.h!=0)return!1;for(let A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function F(D){return D.h==-1}i.l=function(D){return D=ne(this,D),F(D)?-1:H(D)?0:1};function C(D){const A=D.g.length,R=[];for(let k=0;k<A;k++)R[k]=~D.g[k];return new d(R,~D.h).add(x)}i.abs=function(){return F(this)?C(this):this},i.add=function(D){const A=Math.max(this.g.length,D.g.length),R=[];let k=0;for(let U=0;U<=A;U++){let z=k+(this.i(U)&65535)+(D.i(U)&65535),I=(z>>>16)+(this.i(U)>>>16)+(D.i(U)>>>16);k=I>>>16,z&=65535,I&=65535,R[U]=I<<16|z}return new d(R,R[R.length-1]&-2147483648?-1:0)};function ne(D,A){return D.add(C(A))}i.j=function(D){if(H(this)||H(D))return T;if(F(this))return F(D)?C(this).j(C(D)):C(C(this).j(D));if(F(D))return C(this.j(C(D)));if(this.l(M)<0&&D.l(M)<0)return y(this.m()*D.m());const A=this.g.length+D.g.length,R=[];for(var k=0;k<2*A;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(let U=0;U<D.g.length;U++){const z=this.i(k)>>>16,I=this.i(k)&65535,Ye=D.i(U)>>>16,at=D.i(U)&65535;R[2*k+2*U]+=I*at,B(R,2*k+2*U),R[2*k+2*U+1]+=z*at,B(R,2*k+2*U+1),R[2*k+2*U+1]+=I*Ye,B(R,2*k+2*U+1),R[2*k+2*U+2]+=z*Ye,B(R,2*k+2*U+2)}for(D=0;D<A;D++)R[D]=R[2*D+1]<<16|R[2*D];for(D=A;D<2*A;D++)R[D]=0;return new d(R,0)};function B(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function ue(D,A){this.g=D,this.h=A}function Ee(D,A){if(H(A))throw Error("division by zero");if(H(D))return new ue(T,T);if(F(D))return A=Ee(C(D),A),new ue(C(A.g),C(A.h));if(F(A))return A=Ee(D,C(A)),new ue(C(A.g),A.h);if(D.g.length>30){if(F(D)||F(A))throw Error("slowDivide_ only works with positive integers.");for(var R=x,k=A;k.l(D)<=0;)R=Te(R),k=Te(k);var U=Re(R,1),z=Re(k,1);for(k=Re(k,2),R=Re(R,2);!H(k);){var I=z.add(k);I.l(D)<=0&&(U=U.add(R),z=I),k=Re(k,1),R=Re(R,1)}return A=ne(D,U.j(A)),new ue(U,A)}for(U=T;D.l(A)>=0;){for(R=Math.max(1,Math.floor(D.m()/A.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),z=y(R),I=z.j(A);F(I)||I.l(D)>0;)R-=k,z=y(R),I=z.j(A);H(z)&&(z=x),U=U.add(z),D=ne(D,I)}return new ue(U,D)}i.B=function(D){return Ee(this,D).h},i.and=function(D){const A=Math.max(this.g.length,D.g.length),R=[];for(let k=0;k<A;k++)R[k]=this.i(k)&D.i(k);return new d(R,this.h&D.h)},i.or=function(D){const A=Math.max(this.g.length,D.g.length),R=[];for(let k=0;k<A;k++)R[k]=this.i(k)|D.i(k);return new d(R,this.h|D.h)},i.xor=function(D){const A=Math.max(this.g.length,D.g.length),R=[];for(let k=0;k<A;k++)R[k]=this.i(k)^D.i(k);return new d(R,this.h^D.h)};function Te(D){const A=D.g.length+1,R=[];for(let k=0;k<A;k++)R[k]=D.i(k)<<1|D.i(k-1)>>>31;return new d(R,D.h)}function Re(D,A){const R=A>>5;A%=32;const k=D.g.length-R,U=[];for(let z=0;z<k;z++)U[z]=A>0?D.i(z+R)>>>A|D.i(z+R+1)<<32-A:D.i(z+R);return new d(U,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,NE=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=E,Es=d}).apply(typeof Cv<"u"?Cv:typeof self<"u"?self:typeof window<"u"?window:{});var ud=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ME,Xl,kE,bd,sg,jE,VE,LE;(function(){var i,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ud=="object"&&ud];for(var _=0;_<c.length;++_){var b=c[_];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var s=n(this);function o(c,_){if(_)e:{var b=s;c=c.split(".");for(var w=0;w<c.length-1;w++){var K=c[w];if(!(K in b))break e;b=b[K]}c=c[c.length-1],w=b[c],_=_(w),_!=w&&_!=null&&e(b,c,{configurable:!0,writable:!0,value:_})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(_){var b=[],w;for(w in _)Object.prototype.hasOwnProperty.call(_,w)&&b.push([w,_[w]]);return b}});var u=u||{},d=this||self;function m(c){var _=typeof c;return _=="object"&&c!=null||_=="function"}function p(c,_,b){return c.call.apply(c.bind,arguments)}function y(c,_,b){return y=p,y.apply(null,arguments)}function E(c,_){var b=Array.prototype.slice.call(arguments,1);return function(){var w=b.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function T(c,_){function b(){}b.prototype=_.prototype,c.Z=_.prototype,c.prototype=new b,c.prototype.constructor=c,c.Ob=function(w,K,re){for(var Se=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)Se[Ke-2]=arguments[Ke];return _.prototype[K].apply(w,Se)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function M(c){const _=c.length;if(_>0){const b=Array(_);for(let w=0;w<_;w++)b[w]=c[w];return b}return[]}function H(c,_){for(let w=1;w<arguments.length;w++){const K=arguments[w];var b=typeof K;if(b=b!="object"?b:K?Array.isArray(K)?"array":b:"null",b=="array"||b=="object"&&typeof K.length=="number"){b=c.length||0;const re=K.length||0;c.length=b+re;for(let Se=0;Se<re;Se++)c[b+Se]=K[Se]}else c.push(K)}}class F{constructor(_,b){this.i=_,this.j=b,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function C(c){d.setTimeout(()=>{throw c},0)}function ne(){var c=D;let _=null;return c.g&&(_=c.g,c.g=c.g.next,c.g||(c.h=null),_.next=null),_}class B{constructor(){this.h=this.g=null}add(_,b){const w=ue.get();w.set(_,b),this.h?this.h.next=w:this.g=w,this.h=w}}var ue=new F(()=>new Ee,c=>c.reset());class Ee{constructor(){this.next=this.g=this.h=null}set(_,b){this.h=_,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,Re=!1,D=new B,A=()=>{const c=Promise.resolve(void 0);Te=()=>{c.then(R)}};function R(){for(var c;c=ne();){try{c.h.call(c.g)}catch(b){C(b)}var _=ue;_.j(c),_.h<100&&(_.h++,c.next=_.g,_.g=c)}Re=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(c,_){this.type=c,this.g=this.target=_,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,_=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const b=()=>{};d.addEventListener("test",b,_),d.removeEventListener("test",b,_)}catch{}return c})();function I(c){return/^[\s\xa0]*$/.test(c)}function Ye(c,_){U.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,_)}T(Ye,U),Ye.prototype.init=function(c,_){const b=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=_,_=c.relatedTarget,_||(b=="mouseover"?_=c.fromElement:b=="mouseout"&&(_=c.toElement)),this.relatedTarget=_,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Ye.Z.h.call(this)},Ye.prototype.h=function(){Ye.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var at="closure_listenable_"+(Math.random()*1e6|0),ee=0;function ye(c,_,b,w,K){this.listener=c,this.proxy=null,this.src=_,this.type=b,this.capture=!!w,this.ha=K,this.key=++ee,this.da=this.fa=!1}function he(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ke(c,_,b){for(const w in c)_.call(b,c[w],w,c)}function Ue(c,_){for(const b in c)_.call(void 0,c[b],b,c)}function O(c){const _={};for(const b in c)_[b]=c[b];return _}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(c,_){let b,w;for(let K=1;K<arguments.length;K++){w=arguments[K];for(b in w)c[b]=w[b];for(let re=0;re<L.length;re++)b=L[re],Object.prototype.hasOwnProperty.call(w,b)&&(c[b]=w[b])}}function Y(c){this.src=c,this.g={},this.h=0}Y.prototype.add=function(c,_,b,w,K){const re=c.toString();c=this.g[re],c||(c=this.g[re]=[],this.h++);const Se=we(c,_,w,K);return Se>-1?(_=c[Se],b||(_.fa=!1)):(_=new ye(_,this.src,re,!!w,K),_.fa=b,c.push(_)),_};function fe(c,_){const b=_.type;if(b in c.g){var w=c.g[b],K=Array.prototype.indexOf.call(w,_,void 0),re;(re=K>=0)&&Array.prototype.splice.call(w,K,1),re&&(he(_),c.g[b].length==0&&(delete c.g[b],c.h--))}}function we(c,_,b,w){for(let K=0;K<c.length;++K){const re=c[K];if(!re.da&&re.listener==_&&re.capture==!!b&&re.ha==w)return K}return-1}var Ie="closure_lm_"+(Math.random()*1e6|0),je={};function Be(c,_,b,w,K){if(Array.isArray(_)){for(let re=0;re<_.length;re++)Be(c,_[re],b,w,K);return null}return b=te(b),c&&c[at]?c.J(_,b,m(w)?!!w.capture:!1,K):mt(c,_,b,!1,w,K)}function mt(c,_,b,w,K,re){if(!_)throw Error("Invalid event type");const Se=m(K)?!!K.capture:!!K;let Ke=N(c);if(Ke||(c[Ie]=Ke=new Y(c)),b=Ke.add(_,b,w,Se,re),b.proxy)return b;if(w=Vt(),b.proxy=w,w.src=c,w.listener=b,c.addEventListener)z||(K=Se),K===void 0&&(K=!1),c.addEventListener(_.toString(),w,K);else if(c.attachEvent)c.attachEvent(W(_.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Vt(){function c(b){return _.call(c.src,c.listener,b)}const _=le;return c}function de(c,_,b,w,K){if(Array.isArray(_))for(var re=0;re<_.length;re++)de(c,_[re],b,w,K);else w=m(w)?!!w.capture:!!w,b=te(b),c&&c[at]?(c=c.i,re=String(_).toString(),re in c.g&&(_=c.g[re],b=we(_,b,w,K),b>-1&&(he(_[b]),Array.prototype.splice.call(_,b,1),_.length==0&&(delete c.g[re],c.h--)))):c&&(c=N(c))&&(_=c.g[_.toString()],c=-1,_&&(c=we(_,b,w,K)),(b=c>-1?_[c]:null)&&_e(b))}function _e(c){if(typeof c!="number"&&c&&!c.da){var _=c.src;if(_&&_[at])fe(_.i,c);else{var b=c.type,w=c.proxy;_.removeEventListener?_.removeEventListener(b,w,c.capture):_.detachEvent?_.detachEvent(W(b),w):_.addListener&&_.removeListener&&_.removeListener(w),(b=N(_))?(fe(b,c),b.h==0&&(b.src=null,_[Ie]=null)):he(c)}}}function W(c){return c in je?je[c]:je[c]="on"+c}function le(c,_){if(c.da)c=!0;else{_=new Ye(_,this);const b=c.listener,w=c.ha||c.src;c.fa&&_e(c),c=b.call(w,_)}return c}function N(c){return c=c[Ie],c instanceof Y?c:null}var q="__closure_events_fn_"+(Math.random()*1e9>>>0);function te(c){return typeof c=="function"?c:(c[q]||(c[q]=function(_){return c.handleEvent(_)}),c[q])}function Z(){k.call(this),this.i=new Y(this),this.M=this,this.G=null}T(Z,k),Z.prototype[at]=!0,Z.prototype.removeEventListener=function(c,_,b,w){de(this,c,_,b,w)};function oe(c,_){var b,w=c.G;if(w)for(b=[];w;w=w.G)b.push(w);if(c=c.M,w=_.type||_,typeof _=="string")_=new U(_,c);else if(_ instanceof U)_.target=_.target||c;else{var K=_;_=new U(w,c),Q(_,K)}K=!0;let re,Se;if(b)for(Se=b.length-1;Se>=0;Se--)re=_.g=b[Se],K=se(re,w,!0,_)&&K;if(re=_.g=c,K=se(re,w,!0,_)&&K,K=se(re,w,!1,_)&&K,b)for(Se=0;Se<b.length;Se++)re=_.g=b[Se],K=se(re,w,!1,_)&&K}Z.prototype.N=function(){if(Z.Z.N.call(this),this.i){var c=this.i;for(const _ in c.g){const b=c.g[_];for(let w=0;w<b.length;w++)he(b[w]);delete c.g[_],c.h--}}this.G=null},Z.prototype.J=function(c,_,b,w){return this.i.add(String(c),_,!1,b,w)},Z.prototype.K=function(c,_,b,w){return this.i.add(String(c),_,!0,b,w)};function se(c,_,b,w){if(_=c.i.g[String(_)],!_)return!0;_=_.concat();let K=!0;for(let re=0;re<_.length;++re){const Se=_[re];if(Se&&!Se.da&&Se.capture==b){const Ke=Se.listener,Ut=Se.ha||Se.src;Se.fa&&fe(c.i,Se),K=Ke.call(Ut,w)!==!1&&K}}return K&&!w.defaultPrevented}function be(c,_){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:d.setTimeout(c,_||0)}function ve(c){c.g=be(()=>{c.g=null,c.i&&(c.i=!1,ve(c))},c.l);const _=c.h;c.h=null,c.m.apply(null,_)}class Ve extends k{constructor(_,b){super(),this.m=_,this.l=b,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:ve(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fe(c){k.call(this),this.h=c,this.g={}}T(Fe,k);var xt=[];function ni(c){ke(c.g,function(_,b){this.g.hasOwnProperty(b)&&_e(_)},c),c.g={}}Fe.prototype.N=function(){Fe.Z.N.call(this),ni(this)},Fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oe=d.JSON.stringify,Ht=d.JSON.parse,ku=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function ju(){}function Vu(){}var ur={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function cn(){U.call(this,"d")}T(cn,U);function Yn(){U.call(this,"c")}T(Yn,U);var Lt={},Lu=null;function Ta(){return Lu=Lu||new Z}Lt.Ia="serverreachability";function Uu(c){U.call(this,Lt.Ia,c)}T(Uu,U);function Ar(c){const _=Ta();oe(_,new Uu(_))}Lt.STAT_EVENT="statevent";function js(c,_){U.call(this,Lt.STAT_EVENT,c),this.stat=_}T(js,U);function Gt(c){const _=Ta();oe(_,new js(_,c))}Lt.Ja="timingevent";function Rr(c,_){U.call(this,Lt.Ja,c),this.size=_}T(Rr,U);function Cr(c,_){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},_)}function cr(){this.g=!0}cr.prototype.ua=function(){this.g=!1};function Dh(c,_,b,w,K,re){c.info(function(){if(c.g)if(re){var Se="",Ke=re.split("&");for(let ht=0;ht<Ke.length;ht++){var Ut=Ke[ht].split("=");if(Ut.length>1){const Dt=Ut[0];Ut=Ut[1];const Xn=Dt.split("_");Se=Xn.length>=2&&Xn[1]=="type"?Se+(Dt+"="+Ut+"&"):Se+(Dt+"=redacted&")}}}else Se=null;else Se=re;return"XMLHTTP REQ ("+w+") [attempt "+K+"]: "+_+`
`+b+`
`+Se})}function Pu(c,_,b,w,K,re,Se){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+K+"]: "+_+`
`+b+`
`+re+" "+Se})}function Ir(c,_,b,w){c.info(function(){return"XMLHTTP TEXT ("+_+"): "+Oh(c,b)+(w?" "+w:"")})}function Vs(c,_){c.info(function(){return"TIMEOUT: "+_})}cr.prototype.info=function(){};function Oh(c,_){if(!c.g)return _;if(!_)return null;try{const re=JSON.parse(_);if(re){for(c=0;c<re.length;c++)if(Array.isArray(re[c])){var b=re[c];if(!(b.length<2)){var w=b[1];if(Array.isArray(w)&&!(w.length<1)){var K=w[0];if(K!="noop"&&K!="stop"&&K!="close")for(let Se=1;Se<w.length;Se++)w[Se]=""}}}}return Oe(re)}catch{return _}}var Ls={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Go={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Qo;function Us(){}T(Us,ju),Us.prototype.g=function(){return new XMLHttpRequest},Qo=new Us;function ri(c){return encodeURIComponent(String(c))}function zu(c){var _=1;c=c.split(":");const b=[];for(;_>0&&c.length;)b.push(c.shift()),_--;return c.length&&b.push(c.join(":")),b}function dr(c,_,b,w){this.j=c,this.i=_,this.l=b,this.S=w||1,this.V=new Fe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new hr}function hr(){this.i=null,this.g="",this.h=!1}var Qt={},sn={};function Dr(c,_,b){c.M=1,c.A=Ps(Kt(_)),c.u=b,c.R=!0,Sa(c,null)}function Sa(c,_){c.F=Date.now(),Or(c),c.B=Kt(c.A);var b=c.B,w=c.S;Array.isArray(w)||(w=[String(w)]),Ra(b.i,"t",w),c.C=0,b=c.j.L,c.h=new hr,c.g=tc(c.j,b?_:null,!c.u),c.P>0&&(c.O=new Ve(y(c.Y,c,c.g),c.P)),_=c.V,b=c.g,w=c.ba;var K="readystatechange";Array.isArray(K)||(K&&(xt[0]=K.toString()),K=xt);for(let re=0;re<K.length;re++){const Se=Be(b,K[re],w||_.handleEvent,!1,_.h||_);if(!Se)break;_.g[Se.key]=Se}_=c.J?O(c.J):{},c.u?(c.v||(c.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,_)):(c.v="GET",c.g.ea(c.B,c.v,null,_)),Ar(),Dh(c.i,c.v,c.B,c.l,c.S,c.u)}dr.prototype.ba=function(c){c=c.target;const _=this.O;_&&gr(c)==3?_.j():this.Y(c)},dr.prototype.Y=function(c){try{if(c==this.g)e:{const Ke=gr(this.g),Ut=this.g.ya(),ht=this.g.ca();if(!(Ke<3)&&(Ke!=3||this.g&&(this.h.h||this.g.la()||dn(this.g)))){this.K||Ke!=4||Ut==7||(Ut==8||ht<=0?Ar(3):Ar(2)),Nr(this);var _=this.g.ca();this.X=_;var b=Nh(this);if(this.o=_==200,Pu(this.i,this.v,this.B,this.l,this.S,Ke,_),this.o){if(this.U&&!this.L){t:{if(this.g){var w,K=this.g;if((w=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(w)){var re=w;break t}}re=null}if(c=re)Ir(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Mr(this,c);else{this.o=!1,this.m=3,Gt(12),Vn(this),Kn(this);break e}}if(this.R){c=!0;let Dt;for(;!this.K&&this.C<b.length;)if(Dt=Fu(this,b),Dt==sn){Ke==4&&(this.m=4,Gt(14),c=!1),Ir(this.i,this.l,null,"[Incomplete Response]");break}else if(Dt==Qt){this.m=4,Gt(15),Ir(this.i,this.l,b,"[Invalid Chunk]"),c=!1;break}else Ir(this.i,this.l,Dt,null),Mr(this,Dt);if(Bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ke!=4||b.length!=0||this.h.h||(this.m=1,Gt(16),c=!1),this.o=this.o&&c,!c)Ir(this.i,this.l,b,"[Invalid Chunked Response]"),Vn(this),Kn(this);else if(b.length>0&&!this.W){this.W=!0;var Se=this.j;Se.g==this&&Se.aa&&!Se.P&&(Se.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),ol(Se),Se.P=!0,Gt(11))}}else Ir(this.i,this.l,b,null),Mr(this,b);Ke==4&&Vn(this),this.o&&!this.K&&(Ke==4?Xu(this.j,this):(this.o=!1,Or(this)))}else si(this.g),_==400&&b.indexOf("Unknown SID")>0?(this.m=3,Gt(12)):(this.m=0,Gt(13)),Vn(this),Kn(this)}}}catch{}};function Nh(c){if(!Bu(c))return c.g.la();const _=dn(c.g);if(_==="")return"";let b="";const w=_.length,K=gr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Vn(c),Kn(c),"";c.h.i=new d.TextDecoder}for(let re=0;re<w;re++)c.h.h=!0,b+=c.h.i.decode(_[re],{stream:!(K&&re==w-1)});return _.length=0,c.h.g+=b,c.C=0,c.h.g}function Bu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Fu(c,_){var b=c.C,w=_.indexOf(`
`,b);return w==-1?sn:(b=Number(_.substring(b,w)),isNaN(b)?Qt:(w+=1,w+b>_.length?sn:(_=_.slice(w,w+b),c.C=w+b,_)))}dr.prototype.cancel=function(){this.K=!0,Vn(this)};function Or(c){c.T=Date.now()+c.H,wa(c,c.H)}function wa(c,_){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Cr(y(c.aa,c),_)}function Nr(c){c.D&&(d.clearTimeout(c.D),c.D=null)}dr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Vs(this.i,this.B),this.M!=2&&(Ar(),Gt(17)),Vn(this),this.m=2,Kn(this)):wa(this,this.T-c)};function Kn(c){c.j.I==0||c.K||Xu(c.j,c)}function Vn(c){Nr(c);var _=c.O;_&&typeof _.dispose=="function"&&_.dispose(),c.O=null,ni(c.V),c.g&&(_=c.g,c.g=null,_.abort(),_.dispose())}function Mr(c,_){try{var b=c.j;if(b.I!=0&&(b.g==c||jr(b.h,c))){if(!c.L&&jr(b.h,c)&&b.I==3){try{var w=b.Ba.g.parse(_)}catch{w=null}if(Array.isArray(w)&&w.length==3){var K=w;if(K[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<c.F)Na(b),Fi(b);else break e;Qs(b),Gt(18)}}else b.xa=K[1],0<b.xa-b.K&&K[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Cr(y(b.Va,b),6e3));kr(b.h)<=1&&b.ta&&(b.ta=void 0)}else Br(b,11)}else if((c.L||b.g==c)&&Na(b),!I(_))for(K=b.Ba.g.parse(_),_=0;_<K.length;_++){let ht=K[_];const Dt=ht[0];if(!(Dt<=b.K))if(b.K=Dt,ht=ht[1],b.I==2)if(ht[0]=="c"){b.M=ht[1],b.ba=ht[2];const Xn=ht[3];Xn!=null&&(b.ka=Xn,b.j.info("VER="+b.ka));const Fr=ht[4];Fr!=null&&(b.za=Fr,b.j.info("SVER="+b.za));const pr=ht[5];pr!=null&&typeof pr=="number"&&pr>0&&(w=1.5*pr,b.O=w,b.j.info("backChannelRequestTimeoutMs_="+w)),w=b;const yr=c.g;if(yr){const Ys=yr.g?yr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ys){var re=w.h;re.g||Ys.indexOf("spdy")==-1&&Ys.indexOf("quic")==-1&&Ys.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&($o(re,re.h),re.h=null))}if(w.G){const Ma=yr.g?yr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ma&&(w.wa=Ma,pt(w.J,w.G,Ma))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-c.F,b.j.info("Handshake RTT: "+b.T+"ms")),w=b;var Se=c;if(w.na=ec(w,w.L?w.ba:null,w.W),Se.L){Wo(w.h,Se);var Ke=Se,Ut=w.O;Ut&&(Ke.H=Ut),Ke.D&&(Nr(Ke),Or(Ke)),w.g=Se}else $u(w);b.i.length>0&&zr(b)}else ht[0]!="stop"&&ht[0]!="close"||Br(b,7);else b.I==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?Br(b,7):sl(b):ht[0]!="noop"&&b.l&&b.l.qa(ht),b.A=0)}}Ar(4)}catch{}}var Yt=class{constructor(c,_){this.g=c,this.map=_}};function Yo(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ko(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function kr(c){return c.h?1:c.g?c.g.size:0}function jr(c,_){return c.h?c.h==_:c.g?c.g.has(_):!1}function $o(c,_){c.g?c.g.add(_):c.h=_}function Wo(c,_){c.h&&c.h==_?c.h=null:c.g&&c.g.has(_)&&c.g.delete(_)}Yo.prototype.cancel=function(){if(this.i=Xo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Xo(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let _=c.i;for(const b of c.g.values())_=_.concat(b.G);return _}return M(c.i)}var qu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xa(c,_){if(c){c=c.split("&");for(let b=0;b<c.length;b++){const w=c[b].indexOf("=");let K,re=null;w>=0?(K=c[b].substring(0,w),re=c[b].substring(w+1)):K=c[b],_(K,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function Ln(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;c instanceof Ln?(this.l=c.l,an(this,c.j),this.o=c.o,this.g=c.g,ji(this,c.u),this.h=c.h,Jo(this,Yu(c.i)),this.m=c.m):c&&(_=String(c).match(qu))?(this.l=!1,an(this,_[1]||"",!0),this.o=Vr(_[2]||""),this.g=Vr(_[3]||"",!0),ji(this,_[4]),this.h=Vr(_[5]||"",!0),Jo(this,_[6]||"",!0),this.m=Vr(_[7]||"")):(this.l=!1,this.i=new Li(null,this.l))}Ln.prototype.toString=function(){const c=[];var _=this.j;_&&c.push(zs(_,Aa,!0),":");var b=this.g;return(b||_=="file")&&(c.push("//"),(_=this.o)&&c.push(zs(_,Aa,!0),"@"),c.push(ri(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&c.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&c.push("/"),c.push(zs(b,b.charAt(0)=="/"?Zo:Hu,!0))),(b=this.i.toString())&&c.push("?",b),(b=this.m)&&c.push("#",zs(b,Gu)),c.join("")},Ln.prototype.resolve=function(c){const _=Kt(this);let b=!!c.j;b?an(_,c.j):b=!!c.o,b?_.o=c.o:b=!!c.g,b?_.g=c.g:b=c.u!=null;var w=c.h;if(b)ji(_,c.u);else if(b=!!c.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var K=_.h.lastIndexOf("/");K!=-1&&(w=_.h.slice(0,K+1)+w)}if(K=w,K==".."||K==".")w="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){w=K.lastIndexOf("/",0)==0,K=K.split("/");const re=[];for(let Se=0;Se<K.length;){const Ke=K[Se++];Ke=="."?w&&Se==K.length&&re.push(""):Ke==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),w&&Se==K.length&&re.push("")):(re.push(Ke),w=!0)}w=re.join("/")}else w=K}return b?_.h=w:b=c.i.toString()!=="",b?Jo(_,Yu(c.i)):b=!!c.m,b&&(_.m=c.m),_};function Kt(c){return new Ln(c)}function an(c,_,b){c.j=b?Vr(_,!0):_,c.j&&(c.j=c.j.replace(/:$/,""))}function ji(c,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);c.u=_}else c.u=null}function Jo(c,_,b){_ instanceof Li?(c.i=_,Ca(c.i,c.l)):(b||(_=zs(_,Vi)),c.i=new Li(_,c.l))}function pt(c,_,b){c.i.set(_,b)}function Ps(c){return pt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Vr(c,_){return c?_?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function zs(c,_,b){return typeof c=="string"?(c=encodeURI(c).replace(_,Rn),b&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Rn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Aa=/[#\/\?@]/g,Hu=/[#\?:]/g,Zo=/[#\?]/g,Vi=/[#\?@]/g,Gu=/#/g;function Li(c,_){this.h=this.g=null,this.i=c||null,this.j=!!_}function Cn(c){c.g||(c.g=new Map,c.h=0,c.i&&xa(c.i,function(_,b){c.add(decodeURIComponent(_.replace(/\+/g," ")),b)}))}i=Li.prototype,i.add=function(c,_){Cn(this),this.i=null,c=Ui(this,c);let b=this.g.get(c);return b||this.g.set(c,b=[]),b.push(_),this.h+=1,this};function Qu(c,_){Cn(c),_=Ui(c,_),c.g.has(_)&&(c.i=null,c.h-=c.g.get(_).length,c.g.delete(_))}function el(c,_){return Cn(c),_=Ui(c,_),c.g.has(_)}i.forEach=function(c,_){Cn(this),this.g.forEach(function(b,w){b.forEach(function(K){c.call(_,K,w,this)},this)},this)};function tl(c,_){Cn(c);let b=[];if(typeof _=="string")el(c,_)&&(b=b.concat(c.g.get(Ui(c,_))));else for(c=Array.from(c.g.values()),_=0;_<c.length;_++)b=b.concat(c[_]);return b}i.set=function(c,_){return Cn(this),this.i=null,c=Ui(this,c),el(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[_]),this.h+=1,this},i.get=function(c,_){return c?(c=tl(this,c),c.length>0?String(c[0]):_):_};function Ra(c,_,b){Qu(c,_),b.length>0&&(c.i=null,c.g.set(Ui(c,_),M(b)),c.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],_=Array.from(this.g.keys());for(let w=0;w<_.length;w++){var b=_[w];const K=ri(b);b=tl(this,b);for(let re=0;re<b.length;re++){let Se=K;b[re]!==""&&(Se+="="+ri(b[re])),c.push(Se)}}return this.i=c.join("&")};function Yu(c){const _=new Li;return _.i=c.i,c.g&&(_.g=new Map(c.g),_.h=c.h),_}function Ui(c,_){return _=String(_),c.j&&(_=_.toLowerCase()),_}function Ca(c,_){_&&!c.j&&(Cn(c),c.i=null,c.g.forEach(function(b,w){const K=w.toLowerCase();w!=K&&(Qu(this,w),Ra(this,K,b))},c)),c.j=_}function fr(c,_){const b=new cr;if(d.Image){const w=new Image;w.onload=E($n,b,"TestLoadImage: loaded",!0,_,w),w.onerror=E($n,b,"TestLoadImage: error",!1,_,w),w.onabort=E($n,b,"TestLoadImage: abort",!1,_,w),w.ontimeout=E($n,b,"TestLoadImage: timeout",!1,_,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else _(!1)}function nl(c,_){const b=new cr,w=new AbortController,K=setTimeout(()=>{w.abort(),$n(b,"TestPingServer: timeout",!1,_)},1e4);fetch(c,{signal:w.signal}).then(re=>{clearTimeout(K),re.ok?$n(b,"TestPingServer: ok",!0,_):$n(b,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(K),$n(b,"TestPingServer: error",!1,_)})}function $n(c,_,b,w,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),w(b)}catch{}}function Pi(){this.g=new ku}function Lr(c){this.i=c.Sb||null,this.h=c.ab||!1}T(Lr,ju),Lr.prototype.g=function(){return new Bs(this.i,this.h)};function Bs(c,_){Z.call(this),this.H=c,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Bs,Z),i=Bs.prototype,i.open=function(c,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=_,this.readyState=1,mr(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(_.body=c),(this.H||d).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,zi(this)),this.readyState=0},i.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,mr(this)),this.g&&(this.readyState=3,mr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ia(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ia(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}i.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var _=c.value?c.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!c.done}))&&(this.response=this.responseText+=_)}c.done?zi(this):mr(this),this.readyState==3&&Ia(this)}},i.Oa=function(c){this.g&&(this.response=this.responseText=c,zi(this))},i.Na=function(c){this.g&&(this.response=c,zi(this))},i.ga=function(){this.g&&zi(this)};function zi(c){c.readyState=4,c.l=null,c.j=null,c.B=null,mr(c)}i.setRequestHeader=function(c,_){this.A.append(c,_)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],_=this.h.entries();for(var b=_.next();!b.done;)b=b.value,c.push(b[0]+": "+b[1]),b=_.next();return c.join(`\r
`)};function mr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Bs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Wn(c){let _="";return ke(c,function(b,w){_+=w,_+=":",_+=b,_+=`\r
`}),_}function Fs(c,_,b){e:{for(w in b){var w=!1;break e}w=!0}w||(b=Wn(b),typeof c=="string"?b!=null&&ri(b):pt(c,_,b))}function vt(c){Z.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(vt,Z);var Ur=/^https?$/i,rl=["POST","PUT"];i=vt.prototype,i.Fa=function(c){this.H=c},i.ea=function(c,_,b,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);_=_?_.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Qo.g(),this.g.onreadystatechange=x(y(this.Ca,this));try{this.B=!0,this.g.open(_,String(c),!0),this.B=!1}catch(re){qs(this,re);return}if(c=b||"",b=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var K in w)b.set(K,w[K]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const re of w.keys())b.set(re,w.get(re));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(b.keys()).find(re=>re.toLowerCase()=="content-type"),K=d.FormData&&c instanceof d.FormData,!(Array.prototype.indexOf.call(rl,_,void 0)>=0)||w||K||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,Se]of b)this.g.setRequestHeader(re,Se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(re){qs(this,re)}};function qs(c,_){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=_,c.o=5,il(c),ii(c)}function il(c){c.A||(c.A=!0,oe(c,"complete"),oe(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,oe(this,"complete"),oe(this,"abort"),ii(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ii(this,!0)),vt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Hs(this):this.Xa())},i.Xa=function(){Hs(this)};function Hs(c){if(c.h&&typeof u<"u"){if(c.v&&gr(c)==4)setTimeout(c.Ca.bind(c),0);else if(oe(c,"readystatechange"),gr(c)==4){c.h=!1;try{const re=c.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var b;if(!(b=_)){var w;if(w=re===0){let Se=String(c.D).match(qu)[1]||null;!Se&&d.self&&d.self.location&&(Se=d.self.location.protocol.slice(0,-1)),w=!Ur.test(Se?Se.toLowerCase():"")}b=w}if(b)oe(c,"complete"),oe(c,"success");else{c.o=6;try{var K=gr(c)>2?c.g.statusText:""}catch{K=""}c.l=K+" ["+c.ca()+"]",il(c)}}finally{ii(c)}}}}function ii(c,_){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const b=c.g;c.g=null,_||oe(c,"ready");try{b.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function gr(c){return c.g?c.g.readyState:0}i.ca=function(){try{return gr(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(c){if(this.g){var _=this.g.responseText;return c&&_.indexOf(c)==0&&(_=_.substring(c.length)),Ht(_)}};function dn(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function si(c){const _={};c=(c.g&&gr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(I(c[w]))continue;var b=zu(c[w]);const K=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const re=_[K]||[];_[K]=re,re.push(b)}Ue(_,function(w){return w.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pr(c,_,b){return b&&b.internalChannelParams&&b.internalChannelParams[c]||_}function Bi(c){this.za=0,this.i=[],this.j=new cr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Pr("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Pr("baseRetryDelayMs",5e3,c),this.Za=Pr("retryDelaySeedMs",1e4,c),this.Ta=Pr("forwardChannelMaxRetries",2,c),this.va=Pr("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Yo(c&&c.concurrentRequestLimit),this.Ba=new Pi,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Bi.prototype,i.ka=8,i.I=1,i.connect=function(c,_,b,w){Gt(0),this.W=c,this.H=_||{},b&&w!==void 0&&(this.H.OSID=b,this.H.OAID=w),this.F=this.X,this.J=ec(this,null,this.W),zr(this)};function sl(c){if(Da(c),c.I==3){var _=c.V++,b=Kt(c.J);if(pt(b,"SID",c.M),pt(b,"RID",_),pt(b,"TYPE","terminate"),Gs(c,b),_=new dr(c,c.j,_),_.M=2,_.A=Ps(Kt(b)),b=!1,d.navigator&&d.navigator.sendBeacon)try{b=d.navigator.sendBeacon(_.A.toString(),"")}catch{}!b&&d.Image&&(new Image().src=_.A,b=!0),b||(_.g=tc(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Or(_)}Zu(c)}function Fi(c){c.g&&(ol(c),c.g.cancel(),c.g=null)}function Da(c){Fi(c),c.v&&(d.clearTimeout(c.v),c.v=null),Na(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&d.clearTimeout(c.m),c.m=null)}function zr(c){if(!Ko(c.h)&&!c.m){c.m=!0;var _=c.Ea;Te||A(),Re||(Te(),Re=!0),D.add(_,c),c.D=0}}function Oa(c,_){return kr(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=_.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Cr(y(c.Ea,c,_),Ju(c,c.D)),c.D++,!0)}i.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const K=new dr(this,this.j,c);let re=this.o;if(this.U&&(re?(re=O(re),Q(re,this.U)):re=this.U),this.u!==null||this.R||(K.J=re,re=null),this.S)e:{for(var _=0,b=0;b<this.i.length;b++){t:{var w=this.i[b];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(_+=w,_>4096){_=b;break e}if(_===4096||b===this.i.length-1){_=b+1;break e}}_=1e3}else _=1e3;_=Ku(this,K,_),b=Kt(this.J),pt(b,"RID",c),pt(b,"CVER",22),this.G&&pt(b,"X-HTTP-Session-Id",this.G),Gs(this,b),re&&(this.R?_="headers="+ri(Wn(re))+"&"+_:this.u&&Fs(b,this.u,re)),$o(this.h,K),this.Ra&&pt(b,"TYPE","init"),this.S?(pt(b,"$req",_),pt(b,"SID","null"),K.U=!0,Dr(K,b,null)):Dr(K,b,_),this.I=2}}else this.I==3&&(c?al(this,c):this.i.length==0||Ko(this.h)||al(this))};function al(c,_){var b;_?b=_.l:b=c.V++;const w=Kt(c.J);pt(w,"SID",c.M),pt(w,"RID",b),pt(w,"AID",c.K),Gs(c,w),c.u&&c.o&&Fs(w,c.u,c.o),b=new dr(c,c.j,b,c.D+1),c.u===null&&(b.J=c.o),_&&(c.i=_.G.concat(c.i)),_=Ku(c,b,1e3),b.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),$o(c.h,b),Dr(b,w,_)}function Gs(c,_){c.H&&ke(c.H,function(b,w){pt(_,w,b)}),c.l&&ke({},function(b,w){pt(_,w,b)})}function Ku(c,_,b){b=Math.min(c.i.length,b);const w=c.l?y(c.l.Ka,c.l,c):null;e:{var K=c.i;let Ke=-1;for(;;){const Ut=["count="+b];Ke==-1?b>0?(Ke=K[0].g,Ut.push("ofs="+Ke)):Ke=0:Ut.push("ofs="+Ke);let ht=!0;for(let Dt=0;Dt<b;Dt++){var re=K[Dt].g;const Xn=K[Dt].map;if(re-=Ke,re<0)Ke=Math.max(0,K[Dt].g-100),ht=!1;else try{re="req"+re+"_"||"";try{var Se=Xn instanceof Map?Xn:Object.entries(Xn);for(const[Fr,pr]of Se){let yr=pr;m(pr)&&(yr=Oe(pr)),Ut.push(re+Fr+"="+encodeURIComponent(yr))}}catch(Fr){throw Ut.push(re+"type="+encodeURIComponent("_badmap")),Fr}}catch{w&&w(Xn)}}if(ht){Se=Ut.join("&");break e}}Se=void 0}return c=c.i.splice(0,b),_.G=c,Se}function $u(c){if(!c.g&&!c.v){c.Y=1;var _=c.Da;Te||A(),Re||(Te(),Re=!0),D.add(_,c),c.A=0}}function Qs(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Cr(y(c.Da,c),Ju(c,c.A)),c.A++,!0)}i.Da=function(){if(this.v=null,Wu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Cr(y(this.Wa,this),c)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Gt(10),Fi(this),Wu(this))};function ol(c){c.B!=null&&(d.clearTimeout(c.B),c.B=null)}function Wu(c){c.g=new dr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var _=Kt(c.na);pt(_,"RID","rpc"),pt(_,"SID",c.M),pt(_,"AID",c.K),pt(_,"CI",c.F?"0":"1"),!c.F&&c.ia&&pt(_,"TO",c.ia),pt(_,"TYPE","xmlhttp"),Gs(c,_),c.u&&c.o&&Fs(_,c.u,c.o),c.O&&(c.g.H=c.O);var b=c.g;c=c.ba,b.M=1,b.A=Ps(Kt(_)),b.u=null,b.R=!0,Sa(b,c)}i.Va=function(){this.C!=null&&(this.C=null,Fi(this),Qs(this),Gt(19))};function Na(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Xu(c,_){var b=null;if(c.g==_){Na(c),ol(c),c.g=null;var w=2}else if(jr(c.h,_))b=_.G,Wo(c.h,_),w=1;else return;if(c.I!=0){if(_.o)if(w==1){b=_.u?_.u.length:0,_=Date.now()-_.F;var K=c.D;w=Ta(),oe(w,new Rr(w,b)),zr(c)}else $u(c);else if(K=_.m,K==3||K==0&&_.X>0||!(w==1&&Oa(c,_)||w==2&&Qs(c)))switch(b&&b.length>0&&(_=c.h,_.i=_.i.concat(b)),K){case 1:Br(c,5);break;case 4:Br(c,10);break;case 3:Br(c,6);break;default:Br(c,2)}}}function Ju(c,_){let b=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(b*=2),b*_}function Br(c,_){if(c.j.info("Error code "+_),_==2){var b=y(c.bb,c),w=c.Ua;const K=!w;w=new Ln(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||an(w,"https"),Ps(w),K?fr(w.toString(),b):nl(w.toString(),b)}else Gt(2);c.I=0,c.l&&c.l.pa(_),Zu(c),Da(c)}i.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Gt(2)):(this.j.info("Failed to ping google.com"),Gt(1))};function Zu(c){if(c.I=0,c.ja=[],c.l){const _=Xo(c.h);(_.length!=0||c.i.length!=0)&&(H(c.ja,_),H(c.ja,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.oa()}}function ec(c,_,b){var w=b instanceof Ln?Kt(b):new Ln(b);if(w.g!="")_&&(w.g=_+"."+w.g),ji(w,w.u);else{var K=d.location;w=K.protocol,_=_?_+"."+K.hostname:K.hostname,K=+K.port;const re=new Ln(null);w&&an(re,w),_&&(re.g=_),K&&ji(re,K),b&&(re.h=b),w=re}return b=c.G,_=c.wa,b&&_&&pt(w,b,_),pt(w,"VER",c.ka),Gs(c,w),w}function tc(c,_,b){if(_&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=c.Aa&&!c.ma?new vt(new Lr({ab:b})):new vt(c.ma),_.Fa(c.L),_}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function nc(){}i=nc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function qi(){}qi.prototype.g=function(c,_){return new wn(c,_)};function wn(c,_){Z.call(this),this.g=new Bi(_),this.l=c,this.h=_&&_.messageUrlParams||null,c=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(c?c["X-WebChannel-Content-Type"]=_.messageContentType:c={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(c?c["X-WebChannel-Client-Profile"]=_.sa:c={"X-WebChannel-Client-Profile":_.sa}),this.g.U=c,(c=_&&_.Qb)&&!I(c)&&(this.g.u=c),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!I(_)&&(this.g.G=_,c=this.h,c!==null&&_ in c&&(c=this.h,_ in c&&delete c[_])),this.j=new ai(this)}T(wn,Z),wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){sl(this.g)},wn.prototype.o=function(c){var _=this.g;if(typeof c=="string"){var b={};b.__data__=c,c=b}else this.v&&(b={},b.__data__=Oe(c),c=b);_.i.push(new Yt(_.Ya++,c)),_.I==3&&zr(_)},wn.prototype.N=function(){this.g.l=null,delete this.j,sl(this.g),delete this.g,wn.Z.N.call(this)};function rc(c){cn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var _=c.__sm__;if(_){e:{for(const b in _){c=b;break e}c=void 0}(this.i=c)&&(c=this.i,_=_!==null&&c in _?_[c]:void 0),this.data=_}else this.data=c}T(rc,cn);function ic(){Yn.call(this),this.status=1}T(ic,Yn);function ai(c){this.g=c}T(ai,nc),ai.prototype.ra=function(){oe(this.g,"a")},ai.prototype.qa=function(c){oe(this.g,new rc(c))},ai.prototype.pa=function(c){oe(this.g,new ic)},ai.prototype.oa=function(){oe(this.g,"b")},qi.prototype.createWebChannel=qi.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,LE=function(){return new qi},VE=function(){return Ta()},jE=Lt,sg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ls.NO_ERROR=0,Ls.TIMEOUT=8,Ls.HTTP_ERROR=6,bd=Ls,Go.COMPLETE="complete",kE=Go,Vu.EventType=ur,ur.OPEN="a",ur.CLOSE="b",ur.ERROR="c",ur.MESSAGE="d",Z.prototype.listen=Z.prototype.J,Xl=Vu,vt.prototype.listenOnce=vt.prototype.K,vt.prototype.getLastError=vt.prototype.Ha,vt.prototype.getLastErrorCode=vt.prototype.ya,vt.prototype.getStatus=vt.prototype.ca,vt.prototype.getResponseJson=vt.prototype.La,vt.prototype.getResponseText=vt.prototype.la,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Fa,ME=vt}).apply(typeof ud<"u"?ud:typeof self<"u"?self:typeof window<"u"?window:{});const Iv="@firebase/firestore",Dv="4.9.3";class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");let Vo="12.7.0";const ma=new Pg("@firebase/firestore");function uo(){return ma.logLevel}function Ae(i,...e){if(ma.logLevel<=rt.DEBUG){const n=e.map(Fg);ma.debug(`Firestore (${Vo}): ${i}`,...n)}}function Ii(i,...e){if(ma.logLevel<=rt.ERROR){const n=e.map(Fg);ma.error(`Firestore (${Vo}): ${i}`,...n)}}function Eo(i,...e){if(ma.logLevel<=rt.WARN){const n=e.map(Fg);ma.warn(`Firestore (${Vo}): ${i}`,...n)}}function Fg(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function ze(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,UE(i,s,n)}function UE(i,e,n){let s=`FIRESTORE (${Vo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ii(s),new Error(s)}function gt(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||UE(e,o,s)}function Qe(i,e){return i}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Mi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ai{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class PE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(En.UNAUTHENTICATED)))}shutdown(){}}class rC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class iC{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){gt(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new Ai;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ai,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ai)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(gt(typeof s.accessToken=="string",31837,{l:s}),new PE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gt(e===null||typeof e=="string",2055,{h:e}),new En(e)}}class sC{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class aC{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new sC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(En.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ov{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Er(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){gt(this.o===void 0,3512);const s=u=>{u.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Ae("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ov(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(gt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ov(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function lC(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class qg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=lC(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function it(i,e){return i<e?-1:i>e?1:0}function ag(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return Bm(o)===Bm(u)?it(o,u):Bm(o)?1:-1}return it(i.length,e.length)}const uC=55296,cC=57343;function Bm(i){const e=i.charCodeAt(0);return e>=uC&&e<=cC}function To(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}const Nv="__name__";class Yr{constructor(e,n,s){n===void 0?n=0:n>e.length&&ze(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ze(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Yr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Yr?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Yr.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return it(e.length,n.length)}static compareSegments(e,n){const s=Yr.isNumericId(e),o=Yr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Yr.extractNumericId(e).compare(Yr.extractNumericId(n)):ag(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Es.fromString(e.substring(4,e.length-2))}}class At extends Yr{construct(e,n,s){return new At(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new xe(ge.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new At(n)}static emptyPath(){return new At([])}}const dC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yn extends Yr{construct(e,n,s){return new yn(e,n,s)}static isValidIdentifier(e){return dC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Nv}static keyField(){return new yn([Nv])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new xe(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new xe(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new xe(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(s+=m,o++):(u(),o++)}if(u(),d)throw new xe(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yn(n)}static emptyPath(){return new yn([])}}class Me{constructor(e){this.path=e}static fromPath(e){return new Me(At.fromString(e))}static fromName(e){return new Me(At.fromString(e).popFirst(5))}static empty(){return new Me(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&At.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return At.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new At(e.slice()))}}function zE(i,e,n){if(!n)throw new xe(ge.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function hC(i,e,n,s){if(e===!0&&s===!0)throw new xe(ge.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Mv(i){if(!Me.isDocumentKey(i))throw new xe(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function kv(i){if(Me.isDocumentKey(i))throw new xe(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function BE(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function sh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ze(12329,{type:typeof i})}function Di(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new xe(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sh(i);throw new xe(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function tn(i,e){const n={typeString:i};return e&&(n.value=e),n}function Eu(i,e){if(!BE(i))throw new xe(ge.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const d=i[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new xe(ge.INVALID_ARGUMENT,n);return!0}const jv=-62135596800,Vv=1e6;class It{static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Vv);return new It(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<jv)throw new xe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vv}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:It._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eu(e,It._jsonSchema))return new It(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-jv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}It._jsonSchemaVersion="firestore/timestamp/1.0",It._jsonSchema={type:tn("string",It._jsonSchemaVersion),seconds:tn("number"),nanoseconds:tn("number")};class qe{static fromTimestamp(e){return new qe(e)}static min(){return new qe(new It(0,0))}static max(){return new qe(new It(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const uu=-1;function fC(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=qe.fromTimestamp(s===1e9?new It(n+1,0):new It(n,s));return new xs(o,Me.empty(),e)}function mC(i){return new xs(i.readTime,i.key,uu)}class xs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new xs(qe.min(),Me.empty(),uu)}static max(){return new xs(qe.max(),Me.empty(),uu)}}function gC(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Me.comparator(i.documentKey,e.documentKey),n!==0?n:it(i.largestBatchId,e.largestBatchId))}const pC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Lo(i){if(i.code!==ge.FAILED_PRECONDITION||i.message!==pC)throw i;Ae("LocalStore","Unexpectedly lost primary lease")}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new pe(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof pe?n:pe.resolve(n)}catch(n){return pe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):pe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):pe.reject(n)}static resolve(e){return new pe(((n,s)=>{n(e)}))}static reject(e){return new pe(((n,s)=>{s(e)}))}static waitFor(e){return new pe(((n,s)=>{let o=0,u=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++u,d&&u===o&&n()}),(p=>s(p)))})),d=!0,u===o&&n()}))}static or(e){let n=pe.resolve(!1);for(const s of e)n=n.next((o=>o?pe.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new pe(((s,o)=>{const u=e.length,d=new Array(u);let m=0;for(let p=0;p<u;p++){const y=p;n(e[y]).next((E=>{d[y]=E,++m,m===u&&s(d)}),(E=>o(E)))}}))}static doWhile(e,n){return new pe(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function _C(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Uo(i){return i.name==="IndexedDbTransactionError"}class ah{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ah.ce=-1;const Hg=-1;function oh(i){return i==null}function jd(i){return i===0&&1/i==-1/0}function vC(i){return typeof i=="number"&&Number.isInteger(i)&&!jd(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const FE="";function bC(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Lv(e)),e=EC(i.get(n),e);return Lv(e)}function EC(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case FE:n+="";break;default:n+=u}}return n}function Lv(i){return i+FE+""}function Uv(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Os(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function qE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Mt{constructor(e,n){this.comparator=e,this.root=n||pn.EMPTY}insert(e,n){return new Mt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cd(this.root,e,this.comparator,!1)}getReverseIterator(){return new cd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cd(this.root,e,this.comparator,!0)}}class cd{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??pn.RED,this.left=o??pn.EMPTY,this.right=u??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new pn(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return pn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ze(27949);return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw ze(57766)}get value(){throw ze(16141)}get color(){throw ze(16727)}get left(){throw ze(29726)}get right(){throw ze(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new pn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class rn{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Pv(this.data.getIterator())}getIteratorFrom(e){return new Pv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof rn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new rn(this.comparator);return n.data=e,n}}class Pv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Gn{constructor(e){this.fields=e,e.sort(yn.comparator)}static empty(){return new Gn([])}unionWith(e){let n=new rn(yn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return To(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class HE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class _n{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new HE("Invalid base64 string: "+u):u}})(e);return new _n(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new _n(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_n.EMPTY_BYTE_STRING=new _n("");const TC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(i){if(gt(!!i,39018),typeof i=="string"){let e=0;const n=TC.exec(i);if(gt(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ft(i.seconds),nanos:Ft(i.nanos)}}function Ft(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Rs(i){return typeof i=="string"?_n.fromBase64String(i):_n.fromUint8Array(i)}const GE="server_timestamp",QE="__type__",YE="__previous_value__",KE="__local_write_time__";function Gg(i){return(i?.mapValue?.fields||{})[QE]?.stringValue===GE}function lh(i){const e=i.mapValue.fields[YE];return Gg(e)?lh(e):e}function cu(i){const e=As(i.mapValue.fields[KE].timestampValue);return new It(e.seconds,e.nanos)}class SC{constructor(e,n,s,o,u,d,m,p,y,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=E}}const Vd="(default)";class du{constructor(e,n){this.projectId=e,this.database=n||Vd}static empty(){return new du("","")}get isDefaultDatabase(){return this.database===Vd}isEqual(e){return e instanceof du&&e.projectId===this.projectId&&e.database===this.database}}const $E="__type__",wC="__max__",dd={mapValue:{}},WE="__vector__",Ld="value";function Cs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Gg(i)?4:AC(i)?9007199254740991:xC(i)?10:11:ze(28295,{value:i})}function ti(i,e){if(i===e)return!0;const n=Cs(i);if(n!==Cs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return cu(i).isEqual(cu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=As(o.timestampValue),m=As(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return Rs(o.bytesValue).isEqual(Rs(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return Ft(o.geoPointValue.latitude)===Ft(u.geoPointValue.latitude)&&Ft(o.geoPointValue.longitude)===Ft(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Ft(o.integerValue)===Ft(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Ft(o.doubleValue),m=Ft(u.doubleValue);return d===m?jd(d)===jd(m):isNaN(d)&&isNaN(m)}return!1})(i,e);case 9:return To(i.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Uv(d)!==Uv(m))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(m[p]===void 0||!ti(d[p],m[p])))return!1;return!0})(i,e);default:return ze(52216,{left:i})}}function hu(i,e){return(i.values||[]).find((n=>ti(n,e)))!==void 0}function So(i,e){if(i===e)return 0;const n=Cs(i),s=Cs(e);if(n!==s)return it(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return it(i.booleanValue,e.booleanValue);case 2:return(function(u,d){const m=Ft(u.integerValue||u.doubleValue),p=Ft(d.integerValue||d.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(i,e);case 3:return zv(i.timestampValue,e.timestampValue);case 4:return zv(cu(i),cu(e));case 5:return ag(i.stringValue,e.stringValue);case 6:return(function(u,d){const m=Rs(u),p=Rs(d);return m.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(u,d){const m=u.split("/"),p=d.split("/");for(let y=0;y<m.length&&y<p.length;y++){const E=it(m[y],p[y]);if(E!==0)return E}return it(m.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,d){const m=it(Ft(u.latitude),Ft(d.latitude));return m!==0?m:it(Ft(u.longitude),Ft(d.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Bv(i.arrayValue,e.arrayValue);case 10:return(function(u,d){const m=u.fields||{},p=d.fields||{},y=m[Ld]?.arrayValue,E=p[Ld]?.arrayValue,T=it(y?.values?.length||0,E?.values?.length||0);return T!==0?T:Bv(y,E)})(i.mapValue,e.mapValue);case 11:return(function(u,d){if(u===dd.mapValue&&d===dd.mapValue)return 0;if(u===dd.mapValue)return 1;if(d===dd.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),y=d.fields||{},E=Object.keys(y);p.sort(),E.sort();for(let T=0;T<p.length&&T<E.length;++T){const x=ag(p[T],E[T]);if(x!==0)return x;const M=So(m[p[T]],y[E[T]]);if(M!==0)return M}return it(p.length,E.length)})(i.mapValue,e.mapValue);default:throw ze(23264,{he:n})}}function zv(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return it(i,e);const n=As(i),s=As(e),o=it(n.seconds,s.seconds);return o!==0?o:it(n.nanos,s.nanos)}function Bv(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=So(n[o],s[o]);if(u)return u}return it(n.length,s.length)}function wo(i){return og(i)}function og(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=As(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Rs(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Me.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=og(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of s)u?u=!1:o+=",",o+=`${d}:${og(n.fields[d])}`;return o+"}"})(i.mapValue):ze(61005,{value:i})}function Ed(i){switch(Cs(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lh(i);return e?16+Ed(e):16;case 5:return 2*i.stringValue.length;case 6:return Rs(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Ed(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return Os(s.fields,((u,d)=>{o+=u.length+Ed(d)})),o})(i.mapValue);default:throw ze(13486,{value:i})}}function Fv(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function lg(i){return!!i&&"integerValue"in i}function Qg(i){return!!i&&"arrayValue"in i}function qv(i){return!!i&&"nullValue"in i}function Hv(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Td(i){return!!i&&"mapValue"in i}function xC(i){return(i?.mapValue?.fields||{})[$E]?.stringValue===WE}function nu(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Os(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=nu(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nu(i.arrayValue.values[n]);return e}return{...i}}function AC(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===wC}class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Td(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nu(n)}setAll(e){let n=yn.emptyPath(),s={},o=[];e.forEach(((d,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}d?s[m.lastSegment()]=nu(d):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());Td(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Td(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Os(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new jn(nu(this.value))}}function XE(i){const e=[];return Os(i.fields,((n,s)=>{const o=new yn([n]);if(Td(s)){const u=XE(s.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new Gn(e)}class Tn{constructor(e,n,s,o,u,d,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Tn(e,0,qe.min(),qe.min(),qe.min(),jn.empty(),0)}static newFoundDocument(e,n,s,o){return new Tn(e,1,n,qe.min(),s,o,0)}static newNoDocument(e,n){return new Tn(e,2,n,qe.min(),qe.min(),jn.empty(),0)}static newUnknownDocument(e,n){return new Tn(e,3,n,qe.min(),qe.min(),jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ud{constructor(e,n){this.position=e,this.inclusive=n}}function Gv(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],d=i.position[o];if(u.field.isKeyField()?s=Me.comparator(Me.fromName(d.referenceValue),n.key):s=So(d,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function Qv(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!ti(i.position[n],e.position[n]))return!1;return!0}class Pd{constructor(e,n="asc"){this.field=e,this.dir=n}}function RC(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class JE{}class en extends JE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new IC(e,n,s):n==="array-contains"?new NC(e,s):n==="in"?new MC(e,s):n==="not-in"?new kC(e,s):n==="array-contains-any"?new jC(e,s):new en(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new DC(e,s):new OC(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(So(n,this.value)):n!==null&&Cs(this.value)===Cs(n)&&this.matchesComparison(So(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sr extends JE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Sr(e,n)}matches(e){return ZE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ZE(i){return i.op==="and"}function eT(i){return CC(i)&&ZE(i)}function CC(i){for(const e of i.filters)if(e instanceof Sr)return!1;return!0}function ug(i){if(i instanceof en)return i.field.canonicalString()+i.op.toString()+wo(i.value);if(eT(i))return i.filters.map((e=>ug(e))).join(",");{const e=i.filters.map((n=>ug(n))).join(",");return`${i.op}(${e})`}}function tT(i,e){return i instanceof en?(function(s,o){return o instanceof en&&s.op===o.op&&s.field.isEqual(o.field)&&ti(s.value,o.value)})(i,e):i instanceof Sr?(function(s,o){return o instanceof Sr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,d,m)=>u&&tT(d,o.filters[m])),!0):!1})(i,e):void ze(19439)}function nT(i){return i instanceof en?(function(n){return`${n.field.canonicalString()} ${n.op} ${wo(n.value)}`})(i):i instanceof Sr?(function(n){return n.op.toString()+" {"+n.getFilters().map(nT).join(" ,")+"}"})(i):"Filter"}class IC extends en{constructor(e,n,s){super(e,n,s),this.key=Me.fromName(s.referenceValue)}matches(e){const n=Me.comparator(e.key,this.key);return this.matchesComparison(n)}}class DC extends en{constructor(e,n){super(e,"in",n),this.keys=rT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class OC extends en{constructor(e,n){super(e,"not-in",n),this.keys=rT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function rT(i,e){return(e.arrayValue?.values||[]).map((n=>Me.fromName(n.referenceValue)))}class NC extends en{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Qg(n)&&hu(n.arrayValue,this.value)}}class MC extends en{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&hu(this.value.arrayValue,n)}}class kC extends en{constructor(e,n){super(e,"not-in",n)}matches(e){if(hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!hu(this.value.arrayValue,n)}}class jC extends en{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Qg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>hu(this.value.arrayValue,s)))}}class VC{constructor(e,n=null,s=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.Te=null}}function Yv(i,e=null,n=[],s=[],o=null,u=null,d=null){return new VC(i,e,n,s,o,u,d)}function Yg(i){const e=Qe(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>ug(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),oh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>wo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>wo(s))).join(",")),e.Te=n}return e.Te}function Kg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!RC(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!tT(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Qv(i.startAt,e.startAt)&&Qv(i.endAt,e.endAt)}function cg(i){return Me.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class Tu{constructor(e,n=null,s=[],o=[],u=null,d="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function LC(i,e,n,s,o,u,d,m){return new Tu(i,e,n,s,o,u,d,m)}function $g(i){return new Tu(i)}function Kv(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function iT(i){return i.collectionGroup!==null}function ru(i){const e=Qe(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new rn(yn.comparator);return d.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Pd(u,s))})),n.has(yn.keyField().canonicalString())||e.Ie.push(new Pd(yn.keyField(),s))}return e.Ie}function Kr(i){const e=Qe(i);return e.Ee||(e.Ee=UC(e,ru(i))),e.Ee}function UC(i,e){if(i.limitType==="F")return Yv(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Pd(o.field,u)}));const n=i.endAt?new Ud(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Ud(i.startAt.position,i.startAt.inclusive):null;return Yv(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function dg(i,e){const n=i.filters.concat([e]);return new Tu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function hg(i,e,n){return new Tu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function uh(i,e){return Kg(Kr(i),Kr(e))&&i.limitType===e.limitType}function sT(i){return`${Yg(Kr(i))}|lt:${i.limitType}`}function co(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>nT(o))).join(", ")}]`),oh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>wo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>wo(o))).join(",")),`Target(${s})`})(Kr(i))}; limitType=${i.limitType})`}function ch(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Me.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of ru(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(d,m,p){const y=Gv(d,m,p);return d.inclusive?y<=0:y<0})(s.startAt,ru(s),o)||s.endAt&&!(function(d,m,p){const y=Gv(d,m,p);return d.inclusive?y>=0:y>0})(s.endAt,ru(s),o))})(i,e)}function PC(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function aT(i){return(e,n)=>{let s=!1;for(const o of ru(i)){const u=zC(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function zC(i,e,n){const s=i.field.isKeyField()?Me.comparator(e.key,n.key):(function(u,d,m){const p=d.data.field(u),y=m.data.field(u);return p!==null&&y!==null?So(p,y):ze(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return ze(19790,{direction:i.dir})}}class _a{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Os(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return qE(this.inner)}size(){return this.innerSize}}const BC=new Mt(Me.comparator);function Oi(){return BC}const oT=new Mt(Me.comparator);function Jl(...i){let e=oT;for(const n of i)e=e.insert(n.key,n);return e}function lT(i){let e=oT;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function da(){return iu()}function uT(){return iu()}function iu(){return new _a((i=>i.toString()),((i,e)=>i.isEqual(e)))}const FC=new Mt(Me.comparator),qC=new rn(Me.comparator);function st(...i){let e=qC;for(const n of i)e=e.add(n);return e}const HC=new rn(it);function GC(){return HC}function Wg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jd(e)?"-0":e}}function cT(i){return{integerValue:""+i}}function QC(i,e){return vC(e)?cT(e):Wg(i,e)}class dh{constructor(){this._=void 0}}function YC(i,e,n){return i instanceof zd?(function(o,u){const d={fields:{[QE]:{stringValue:GE},[KE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Gg(u)&&(u=lh(u)),u&&(d.fields[YE]=u),{mapValue:d}})(n,e):i instanceof xo?hT(i,e):i instanceof fu?fT(i,e):(function(o,u){const d=dT(o,u),m=$v(d)+$v(o.Ae);return lg(d)&&lg(o.Ae)?cT(m):Wg(o.serializer,m)})(i,e)}function KC(i,e,n){return i instanceof xo?hT(i,e):i instanceof fu?fT(i,e):n}function dT(i,e){return i instanceof Bd?(function(s){return lg(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class zd extends dh{}class xo extends dh{constructor(e){super(),this.elements=e}}function hT(i,e){const n=mT(e);for(const s of i.elements)n.some((o=>ti(o,s)))||n.push(s);return{arrayValue:{values:n}}}class fu extends dh{constructor(e){super(),this.elements=e}}function fT(i,e){let n=mT(e);for(const s of i.elements)n=n.filter((o=>!ti(o,s)));return{arrayValue:{values:n}}}class Bd extends dh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function $v(i){return Ft(i.integerValue||i.doubleValue)}function mT(i){return Qg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class $C{constructor(e,n){this.field=e,this.transform=n}}function WC(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof xo&&o instanceof xo||s instanceof fu&&o instanceof fu?To(s.elements,o.elements,ti):s instanceof Bd&&o instanceof Bd?ti(s.Ae,o.Ae):s instanceof zd&&o instanceof zd})(i.transform,e.transform)}class XC{constructor(e,n){this.version=e,this.transformResults=n}}class $r{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $r}static exists(e){return new $r(void 0,e)}static updateTime(e){return new $r(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class hh{}function gT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new yT(i.key,$r.none()):new Su(i.key,i.data,$r.none());{const n=i.data,s=jn.empty();let o=new rn(yn.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?s.delete(u):s.set(u,d),o=o.add(u)}return new Ns(i.key,s,new Gn(o.toArray()),$r.none())}}function JC(i,e,n){i instanceof Su?(function(o,u,d){const m=o.value.clone(),p=Xv(o.fieldTransforms,u,d.transformResults);m.setAll(p),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(i,e,n):i instanceof Ns?(function(o,u,d){if(!Sd(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=Xv(o.fieldTransforms,u,d.transformResults),p=u.data;p.setAll(pT(o)),p.setAll(m),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(i,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function su(i,e,n,s){return i instanceof Su?(function(u,d,m,p){if(!Sd(u.precondition,d))return m;const y=u.value.clone(),E=Jv(u.fieldTransforms,p,d);return y.setAll(E),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(i,e,n,s):i instanceof Ns?(function(u,d,m,p){if(!Sd(u.precondition,d))return m;const y=Jv(u.fieldTransforms,p,d),E=d.data;return E.setAll(pT(u)),E.setAll(y),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(i,e,n,s):(function(u,d,m){return Sd(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(i,e,n)}function ZC(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=dT(s.transform,o||null);u!=null&&(n===null&&(n=jn.empty()),n.set(s.field,u))}return n||null}function Wv(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&To(s,o,((u,d)=>WC(u,d)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Su extends hh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ns extends hh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function pT(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function Xv(i,e,n){const s=new Map;gt(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const u=i[o],d=u.transform,m=e.data.field(u.field);s.set(u.field,KC(d,m,n[o]))}return s}function Jv(i,e,n){const s=new Map;for(const o of i){const u=o.transform,d=n.data.field(o.field);s.set(o.field,YC(u,d,e))}return s}class yT extends hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eI extends hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class tI{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&JC(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=su(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=su(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=uT();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=n.has(o.key)?null:m;const p=gT(d,m);p!==null&&s.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(qe.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),st())}isEqual(e){return this.batchId===e.batchId&&To(this.mutations,e.mutations,((n,s)=>Wv(n,s)))&&To(this.baseMutations,e.baseMutations,((n,s)=>Wv(n,s)))}}class Xg{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){gt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return FC})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,s[d].version);return new Xg(e,n,s,o)}}class nI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class rI{constructor(e,n){this.count=e,this.unchangedNames=n}}var Zt,lt;function iI(i){switch(i){case ge.OK:return ze(64938);case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0;default:return ze(15467,{code:i})}}function _T(i){if(i===void 0)return Ii("GRPC error has no .code"),ge.UNKNOWN;switch(i){case Zt.OK:return ge.OK;case Zt.CANCELLED:return ge.CANCELLED;case Zt.UNKNOWN:return ge.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return ge.INTERNAL;case Zt.UNAVAILABLE:return ge.UNAVAILABLE;case Zt.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Zt.NOT_FOUND:return ge.NOT_FOUND;case Zt.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Zt.ABORTED:return ge.ABORTED;case Zt.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Zt.DATA_LOSS:return ge.DATA_LOSS;default:return ze(39323,{code:i})}}(lt=Zt||(Zt={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";function sI(){return new TextEncoder}const aI=new Es([4294967295,4294967295],0);function Zv(i){const e=sI().encode(i),n=new NE;return n.update(e),new Uint8Array(n.digest())}function eb(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Es([n,s],0),new Es([o,u],0)]}class Jg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Zl(`Invalid padding: ${n}`);if(s<0)throw new Zl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Zl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Zl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Es.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(Es.fromNumber(s)));return o.compare(aI)===1&&(o=new Es([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Zv(e),[s,o]=eb(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Jg(u,o,n);return s.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const n=Zv(e),[s,o]=eb(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class fh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new fh(qe.min(),o,new Mt(it),Oi(),st())}}class wu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new wu(s,n,st(),st(),st())}}class wd{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class vT{constructor(e,n){this.targetId=e,this.Ce=n}}class bT{constructor(e,n,s=_n.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class tb{constructor(){this.ve=0,this.Fe=nb(),this.Me=_n.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=st(),n=st(),s=st();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:ze(38017,{changeType:u})}})),new wu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=nb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,gt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class oI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Oi(),this.Je=hd(),this.He=hd(),this.Ye=new Mt(it)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:ze(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(cg(u))if(s===0){const d=new Me(u.path);this.et(n,d,Tn.newNoDocument(d,qe.min()))}else gt(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const m=this.ut(e),p=m?this.ct(m,e,d):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let d,m;try{d=Rs(s).toUint8Array()}catch(p){if(p instanceof HE)return Eo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Jg(d,o,u)}catch(p){return Eo(p instanceof Zl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const m=this.ot(d);if(m){if(u.current&&cg(m.target)){const p=new Me(m.target.path);this.It(p).has(d)||this.Et(d,p)||this.et(d,p,Tn.newNoDocument(p,e))}u.Be&&(n.set(d,u.ke()),u.qe())}}));let s=st();this.He.forEach(((u,d)=>{let m=!0;d.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new fh(e,n,this.Ye,this.je,s);return this.je=Oi(),this.Je=hd(),this.He=hd(),this.Ye=new Mt(it),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new tb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new rn(it),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new rn(it),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ae("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new tb),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function hd(){return new Mt(Me.comparator)}function nb(){return new Mt(Me.comparator)}const lI={asc:"ASCENDING",desc:"DESCENDING"},uI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cI={and:"AND",or:"OR"};class dI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function fg(i,e){return i.useProto3Json||oh(e)?e:{value:e}}function Fd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ET(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function hI(i,e){return Fd(i,e.toTimestamp())}function Wr(i){return gt(!!i,49232),qe.fromTimestamp((function(n){const s=As(n);return new It(s.seconds,s.nanos)})(i))}function Zg(i,e){return mg(i,e).canonicalString()}function mg(i,e){const n=(function(o){return new At(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function TT(i){const e=At.fromString(i);return gt(RT(e),10190,{key:e.toString()}),e}function gg(i,e){return Zg(i.databaseId,e.path)}function Fm(i,e){const n=TT(e);if(n.get(1)!==i.databaseId.projectId)throw new xe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new xe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Me(wT(n))}function ST(i,e){return Zg(i.databaseId,e)}function fI(i){const e=TT(i);return e.length===4?At.emptyPath():wT(e)}function pg(i){return new At(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function wT(i){return gt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function rb(i,e,n){return{name:gg(i,e),fields:n.value.mapValue.fields}}function mI(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ze(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,E){return y.useProto3Json?(gt(E===void 0||typeof E=="string",58123),_n.fromBase64String(E||"")):(gt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),_n.fromUint8Array(E||new Uint8Array))})(i,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(y){const E=y.code===void 0?ge.UNKNOWN:_T(y.code);return new xe(E,y.message||"")})(d);n=new bT(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Fm(i,s.document.name),u=Wr(s.document.updateTime),d=s.document.createTime?Wr(s.document.createTime):qe.min(),m=new jn({mapValue:{fields:s.document.fields}}),p=Tn.newFoundDocument(o,u,d,m),y=s.targetIds||[],E=s.removedTargetIds||[];n=new wd(y,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Fm(i,s.document),u=s.readTime?Wr(s.readTime):qe.min(),d=Tn.newNoDocument(o,u),m=s.removedTargetIds||[];n=new wd([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Fm(i,s.document),u=s.removedTargetIds||[];n=new wd([],u,o,null)}else{if(!("filter"in e))return ze(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,d=new rI(o,u),m=s.targetId;n=new vT(m,d)}}return n}function gI(i,e){let n;if(e instanceof Su)n={update:rb(i,e.key,e.value)};else if(e instanceof yT)n={delete:gg(i,e.key)};else if(e instanceof Ns)n={update:rb(i,e.key,e.data),updateMask:wI(e.fieldMask)};else{if(!(e instanceof eI))return ze(16599,{Vt:e.type});n={verify:gg(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,d){const m=d.transform;if(m instanceof zd)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof xo)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof fu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Bd)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw ze(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:hI(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ze(27497)})(i,e.precondition)),n}function pI(i,e){return i&&i.length>0?(gt(e!==void 0,14353),i.map((n=>(function(o,u){let d=o.updateTime?Wr(o.updateTime):Wr(u);return d.isEqual(qe.min())&&(d=Wr(u)),new XC(d,o.transformResults||[])})(n,e)))):[]}function yI(i,e){return{documents:[ST(i,e.path)]}}function _I(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=ST(i,o);const u=(function(y){if(y.length!==0)return AT(Sr.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(y){if(y.length!==0)return y.map((E=>(function(x){return{field:ho(x.field),direction:EI(x.dir)}})(E)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=fg(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function vI(i){let e=fI(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){gt(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=(function(T){const x=xT(T);return x instanceof Sr&&eT(x)?x.getFilters():[x]})(n.where));let d=[];n.orderBy&&(d=(function(T){return T.map((x=>(function(H){return new Pd(fo(H.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(x)))})(n.orderBy));let m=null;n.limit&&(m=(function(T){let x;return x=typeof T=="object"?T.value:T,oh(x)?null:x})(n.limit));let p=null;n.startAt&&(p=(function(T){const x=!!T.before,M=T.values||[];return new Ud(M,x)})(n.startAt));let y=null;return n.endAt&&(y=(function(T){const x=!T.before,M=T.values||[];return new Ud(M,x)})(n.endAt)),LC(e,o,d,u,m,"F",p,y)}function bI(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ze(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xT(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=fo(n.unaryFilter.field);return en.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=fo(n.unaryFilter.field);return en.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=fo(n.unaryFilter.field);return en.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=fo(n.unaryFilter.field);return en.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ze(61313);default:return ze(60726)}})(i):i.fieldFilter!==void 0?(function(n){return en.create(fo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ze(58110);default:return ze(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Sr.create(n.compositeFilter.filters.map((s=>xT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ze(1026)}})(n.compositeFilter.op))})(i):ze(30097,{filter:i})}function EI(i){return lI[i]}function TI(i){return uI[i]}function SI(i){return cI[i]}function ho(i){return{fieldPath:i.canonicalString()}}function fo(i){return yn.fromServerFormat(i.fieldPath)}function AT(i){return i instanceof en?(function(n){if(n.op==="=="){if(Hv(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NAN"}};if(qv(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Hv(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NOT_NAN"}};if(qv(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ho(n.field),op:TI(n.op),value:n.value}}})(i):i instanceof Sr?(function(n){const s=n.getFilters().map((o=>AT(o)));return s.length===1?s[0]:{compositeFilter:{op:SI(n.op),filters:s}}})(i):ze(54877,{filter:i})}function wI(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function RT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class ys{constructor(e,n,s,o,u=qe.min(),d=qe.min(),m=_n.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class xI{constructor(e){this.yt=e}}function AI(i){const e=vI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?hg(e,e.limit,"L"):e}class RI{constructor(){this.Cn=new CI}addToCollectionParentIndex(e,n){return this.Cn.add(n),pe.resolve()}getCollectionParents(e,n){return pe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return pe.resolve()}deleteFieldIndex(e,n){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,n){return pe.resolve()}getDocumentsMatchingTarget(e,n){return pe.resolve(null)}getIndexType(e,n){return pe.resolve(0)}getFieldIndexes(e,n){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,n){return pe.resolve(xs.min())}getMinOffsetFromCollectionGroup(e,n){return pe.resolve(xs.min())}updateCollectionGroup(e,n,s){return pe.resolve()}updateIndexEntries(e,n){return pe.resolve()}}class CI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new rn(At.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new rn(At.comparator)).toArray()}}const ib={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},CT=41943040;class kn{static withCacheSize(e){return new kn(e,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(CT,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);class Ao{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ao(0)}static cr(){return new Ao(-1)}}const sb="LruGarbageCollector",II=1048576;function ab([i,e],[n,s]){const o=it(i,n);return o===0?it(e,s):o}class DI{constructor(e){this.Ir=e,this.buffer=new rn(ab),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();ab(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class OI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ae(sb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Uo(n)?Ae(sb,"Ignoring IndexedDB error during garbage collection: ",n):await Lo(n)}await this.Vr(3e5)}))}}class NI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return pe.resolve(ah.ce);const s=new DI(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(ib)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ib):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,d,m,p,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,d=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,m=Date.now(),this.removeTargets(e,s,n)))).next((T=>(u=T,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(y=Date.now(),uo()<=rt.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-E}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-E}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function MI(i,e){return new NI(i,e)}class kI{constructor(){this.changes=new _a((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?pe.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class VI{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&su(s.mutation,o,Gn.empty(),It.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,st()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=st()){const o=da();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let d=Jl();return u.forEach(((m,p)=>{d=d.insert(m,p.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=da();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,st())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,m)=>{n.set(d,m)}))}))}computeViews(e,n,s,o){let u=Oi();const d=iu(),m=(function(){return iu()})();return n.forEach(((p,y)=>{const E=s.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof Ns)?u=u.insert(y.key,y):E!==void 0?(d.set(y.key,E.mutation.getFieldMask()),su(E.mutation,y,E.mutation.getFieldMask(),It.now())):d.set(y.key,Gn.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((y,E)=>d.set(y,E))),n.forEach(((y,E)=>m.set(y,new jI(E,d.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=iu();let o=new Mt(((d,m)=>d-m)),u=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const m of d)m.keys().forEach((p=>{const y=n.get(p);if(y===null)return;let E=s.get(p)||Gn.empty();E=m.applyToLocalView(y,E),s.set(p,E);const T=(o.get(m.batchId)||st()).add(p);o=o.insert(m.batchId,T)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),y=p.key,E=p.value,T=uT();E.forEach((x=>{if(!u.has(x)){const M=gT(n.get(x),s.get(x));M!==null&&T.set(x,M),u=u.add(x)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,T))}return pe.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(d){return Me.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):iT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):pe.resolve(da());let m=uu,p=u;return d.next((y=>pe.forEach(y,((E,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(E)?pe.resolve():this.remoteDocumentCache.getEntry(e,E).next((x=>{p=p.insert(E,x)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,p,y,st()))).next((E=>({batchId:m,changes:lT(E)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Me(n)).next((s=>{let o=Jl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let d=Jl();return this.indexManager.getCollectionParents(e,u).next((m=>pe.forEach(m,(p=>{const y=(function(T,x){return new Tu(x,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((E=>{E.forEach(((T,x)=>{d=d.insert(T,x)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((d=>{u.forEach(((p,y)=>{const E=y.getKey();d.get(E)===null&&(d=d.insert(E,Tn.newInvalidDocument(E)))}));let m=Jl();return d.forEach(((p,y)=>{const E=u.get(p);E!==void 0&&su(E.mutation,y,Gn.empty(),It.now()),ch(n,y)&&(m=m.insert(p,y))})),m}))}}class LI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return pe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Wr(o.createTime)}})(n)),pe.resolve()}getNamedQuery(e,n){return pe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:AI(o.bundledQuery),readTime:Wr(o.readTime)}})(n)),pe.resolve()}}class UI{constructor(){this.overlays=new Mt(Me.comparator),this.qr=new Map}getOverlay(e,n){return pe.resolve(this.overlays.get(n))}getOverlays(e,n){const s=da();return pe.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),pe.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),pe.resolve()}getOverlaysForCollection(e,n,s){const o=da(),u=n.length+1,d=new Me(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const p=m.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return pe.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new Mt(((y,E)=>y-E));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let E=u.get(y.largestBatchId);E===null&&(E=da(),u=u.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const m=da(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,E)=>m.set(y,E))),!(m.size()>=o)););return pe.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new nI(n,s));let u=this.qr.get(n);u===void 0&&(u=st(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}class PI{constructor(){this.sessionToken=_n.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,pe.resolve()}}class ep{constructor(){this.Qr=new rn(ln.$r),this.Ur=new rn(ln.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new ln(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new ln(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Me(new At([])),s=new ln(n,e),o=new ln(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),u.push(d.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Me(new At([])),s=new ln(n,e),o=new ln(n,e+1);let u=st();return this.Ur.forEachInRange([s,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new ln(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class ln{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Me.comparator(e.key,n.key)||it(e.Yr,n.Yr)}static Kr(e,n){return it(e.Yr,n.Yr)||Me.comparator(e.key,n.key)}}class zI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new rn(ln.$r)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new tI(u,n,s,o);this.mutationQueue.push(d);for(const m of o)this.Zr=this.Zr.add(new ln(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return pe.resolve(d)}lookupMutationBatch(e,n){return pe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return pe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?Hg:this.tr-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new ln(n,0),o=new ln(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(d=>{const m=this.Xr(d.Yr);u.push(m)})),pe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new rn(it);return n.forEach((o=>{const u=new ln(o,0),d=new ln(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],(m=>{s=s.add(m.Yr)}))})),pe.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Me.isDocumentKey(u)||(u=u.child(""));const d=new ln(new Me(u),0);let m=new rn(it);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(p.Yr)),!0)}),d),pe.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){gt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return pe.forEach(n.mutations,(o=>{const u=new ln(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new ln(n,0),o=this.Zr.firstAfterOrEqual(s);return pe.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class BI{constructor(e){this.ri=e,this.docs=(function(){return new Mt(Me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return pe.resolve(s?s.document.mutableCopy():Tn.newInvalidDocument(n))}getEntries(e,n){let s=Oi();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Tn.newInvalidDocument(o))})),pe.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=Oi();const d=n.path,m=new Me(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:y,value:{document:E}}=p.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||gC(mC(E),s)<=0||(o.has(E.key)||ch(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return pe.resolve(u)}getAllFromCollectionGroup(e,n,s,o){ze(9500)}ii(e,n){return pe.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new FI(this)}getSize(e){return pe.resolve(this.size)}}class FI extends kI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),pe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class qI{constructor(e){this.persistence=e,this.si=new _a((n=>Yg(n)),Kg),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.oi=0,this._i=new ep,this.targetCount=0,this.ai=Ao.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),pe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ao(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,pe.resolve()}updateTargetData(e,n){return this.Pr(n),pe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((d,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),pe.waitFor(u).next((()=>o))}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return pe.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),pe.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),pe.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),pe.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return pe.resolve(s)}containsKey(e,n){return pe.resolve(this._i.containsKey(n))}}class IT{constructor(e,n){this.ui={},this.overlays={},this.ci=new ah(0),this.li=!1,this.li=!0,this.hi=new PI,this.referenceDelegate=e(this),this.Pi=new qI(this),this.indexManager=new RI,this.remoteDocumentCache=(function(o){return new BI(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new xI(n),this.Ii=new LI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new zI(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Ae("MemoryPersistence","Starting transaction:",e);const o=new HI(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return pe.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class HI extends yC{constructor(e){super(),this.currentSequenceNumber=e}}class tp{constructor(e){this.persistence=e,this.Ri=new ep,this.Vi=null}static mi(e){return new tp(e)}get fi(){if(this.Vi)return this.Vi;throw ze(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),pe.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),pe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),pe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.fi,(s=>{const o=Me.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,qe.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return pe.or([()=>pe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class qd{constructor(e,n){this.persistence=e,this.pi=new _a((s=>bC(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=MI(this,n)}static mi(e,n){return new qd(e,n)}Ei(){}di(e){return pe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return pe.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?pe.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((m=>{m||(s++,u.removeEntry(d,qe.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),pe.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),pe.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),pe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ed(e.data.value)),n}br(e,n,s){return pe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return pe.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class np{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=st(),o=st();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new np(e,n.fromCache,s,o)}}class GI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class QI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return UA()?8:_C(Sn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new GI;return this.Ss(e,n,d).next((m=>{if(u.result=m,this.Vs)return this.bs(e,n,d,m.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(uo()<=rt.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",co(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),pe.resolve()):(uo()<=rt.DEBUG&&Ae("QueryEngine","Query:",co(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(uo()<=rt.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",co(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kr(n))):pe.resolve())}ys(e,n){if(Kv(n))return pe.resolve(null);let s=Kr(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=hg(n,null,"F"),s=Kr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const d=st(...u);return this.ps.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,s).next((p=>{const y=this.Ds(n,m);return this.Cs(n,y,d,p.readTime)?this.ys(e,hg(n,null,"F")):this.vs(e,y,n,p)}))))})))))}ws(e,n,s,o){return Kv(n)||o.isEqual(qe.min())?pe.resolve(null):this.ps.getDocuments(e,s).next((u=>{const d=this.Ds(n,u);return this.Cs(n,d,s,o)?pe.resolve(null):(uo()<=rt.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),co(n)),this.vs(e,d,n,fC(o,uu)).next((m=>m)))}))}Ds(e,n){let s=new rn(aT(e));return n.forEach(((o,u)=>{ch(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return uo()<=rt.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",co(n)),this.ps.getDocumentsMatchingQuery(e,n,xs.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const rp="LocalStore",YI=3e8;class KI{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new Mt(it),this.xs=new _a((u=>Yg(u)),Kg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function $I(i,e,n,s){return new KI(i,e,n,s)}async function DT(i,e){const n=Qe(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const d=[],m=[];let p=st();for(const y of o){d.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of u){m.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return n.localDocuments.getDocuments(s,p).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:m})))}))}))}function WI(i,e){const n=Qe(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,y,E){const T=y.batch,x=T.keys();let M=pe.resolve();return x.forEach((H=>{M=M.next((()=>E.getEntry(p,H))).next((F=>{const C=y.docVersions.get(H);gt(C!==null,48541),F.version.compareTo(C)<0&&(T.applyToRemoteDocument(F,y),F.isValidDocument()&&(F.setReadTime(y.commitVersion),E.addEntry(F)))}))})),M.next((()=>m.mutationQueue.removeMutationBatch(p,T)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let p=st();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(p=p.add(m.batch.mutations[y].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function OT(i){const e=Qe(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function XI(i,e){const n=Qe(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((E,T)=>{const x=o.get(T);if(!x)return;m.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,E.addedDocuments,T))));let M=x.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?M=M.withResumeToken(_n.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):E.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(E.resumeToken,s)),o=o.insert(T,M),(function(F,C,ne){return F.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=YI?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(x,M,E)&&m.push(n.Pi.updateTargetData(u,M))}));let p=Oi(),y=st();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(JI(u,d,e.documentUpdates).next((E=>{p=E.ks,y=E.qs}))),!s.isEqual(qe.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(E)}return pe.waitFor(m).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,y))).next((()=>p))})).then((u=>(n.Ms=o,u)))}function JI(i,e,n){let s=st(),o=st();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let d=Oi();return n.forEach(((m,p)=>{const y=u.get(m);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(qe.min())?(e.removeEntry(m,p.readTime),d=d.insert(m,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),d=d.insert(m,p)):Ae(rp,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",p.version)})),{ks:d,qs:o}}))}function ZI(i,e){const n=Qe(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Hg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function e2(i,e){const n=Qe(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,pe.resolve(o)):n.Pi.allocateTargetId(s).next((d=>(o=new ys(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function yg(i,e,n){const s=Qe(i),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Uo(d))throw d;Ae(rp,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function ob(i,e,n){const s=Qe(i);let o=qe.min(),u=st();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(p,y,E){const T=Qe(p),x=T.xs.get(E);return x!==void 0?pe.resolve(T.Ms.get(x)):T.Pi.getTargetData(y,E)})(s,d,Kr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,m.targetId).next((p=>{u=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?o:qe.min(),n?u:st()))).next((m=>(t2(s,PC(e),m),{documents:m,Qs:u})))))}function t2(i,e,n){let s=i.Os.get(e)||qe.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(e,s)}class lb{constructor(){this.activeTargetIds=GC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class n2{constructor(){this.Mo=new lb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new lb,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class r2{Oo(e){}shutdown(){}}const ub="ConnectivityMonitor";class cb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ae(ub,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ae(ub,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let fd=null;function _g(){return fd===null?fd=(function(){return 268435456+Math.round(2147483648*Math.random())})():fd++,"0x"+fd.toString(16)}const qm="RestConnection",i2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class s2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Vd?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const d=_g(),m=this.zo(e,n.toUriEncodedString());Ae(qm,`Sending RPC '${e}' ${d}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:y}=new URL(m),E=ko(y);return this.Jo(e,m,p,s,E).then((T=>(Ae(qm,`Received RPC '${e}' ${d}: `,T),T)),(T=>{throw Eo(qm,`RPC '${e}' ${d} failed with error: `,T,"url: ",m,"request:",s),T}))}Ho(e,n,s,o,u,d){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Vo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=i2[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class a2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const bn="WebChannelConnection";class o2 extends s2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const d=_g();return new Promise(((m,p)=>{const y=new ME;y.setWithCredentials(!0),y.listenOnce(kE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case bd.NO_ERROR:const T=y.getResponseJson();Ae(bn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(T)),m(T);break;case bd.TIMEOUT:Ae(bn,`RPC '${e}' ${d} timed out`),p(new xe(ge.DEADLINE_EXCEEDED,"Request time out"));break;case bd.HTTP_ERROR:const x=y.getStatus();if(Ae(bn,`RPC '${e}' ${d} failed with status:`,x,"response text:",y.getResponseText()),x>0){let M=y.getResponseJson();Array.isArray(M)&&(M=M[0]);const H=M?.error;if(H&&H.status&&H.message){const F=(function(ne){const B=ne.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(B)>=0?B:ge.UNKNOWN})(H.status);p(new xe(F,H.message))}else p(new xe(ge.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new xe(ge.UNAVAILABLE,"Connection failed."));break;default:ze(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{Ae(bn,`RPC '${e}' ${d} completed.`)}}));const E=JSON.stringify(o);Ae(bn,`RPC '${e}' ${d} sending request:`,o),y.send(n,"POST",E,s,15)}))}T_(e,n,s){const o=_g(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=LE(),m=VE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const E=u.join("");Ae(bn,`Creating RPC '${e}' stream ${o}: ${E}`,p);const T=d.createWebChannel(E,p);this.I_(T);let x=!1,M=!1;const H=new a2({Yo:C=>{M?Ae(bn,`Not sending because RPC '${e}' stream ${o} is closed:`,C):(x||(Ae(bn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),x=!0),Ae(bn,`RPC '${e}' stream ${o} sending:`,C),T.send(C))},Zo:()=>T.close()}),F=(C,ne,B)=>{C.listen(ne,(ue=>{try{B(ue)}catch(Ee){setTimeout((()=>{throw Ee}),0)}}))};return F(T,Xl.EventType.OPEN,(()=>{M||(Ae(bn,`RPC '${e}' stream ${o} transport opened.`),H.o_())})),F(T,Xl.EventType.CLOSE,(()=>{M||(M=!0,Ae(bn,`RPC '${e}' stream ${o} transport closed`),H.a_(),this.E_(T))})),F(T,Xl.EventType.ERROR,(C=>{M||(M=!0,Eo(bn,`RPC '${e}' stream ${o} transport errored. Name:`,C.name,"Message:",C.message),H.a_(new xe(ge.UNAVAILABLE,"The operation could not be completed")))})),F(T,Xl.EventType.MESSAGE,(C=>{if(!M){const ne=C.data[0];gt(!!ne,16349);const B=ne,ue=B?.error||B[0]?.error;if(ue){Ae(bn,`RPC '${e}' stream ${o} received error:`,ue);const Ee=ue.status;let Te=(function(A){const R=Zt[A];if(R!==void 0)return _T(R)})(Ee),Re=ue.message;Te===void 0&&(Te=ge.INTERNAL,Re="Unknown error status: "+Ee+" with message "+ue.message),M=!0,H.a_(new xe(Te,Re)),T.close()}else Ae(bn,`RPC '${e}' stream ${o} received:`,ne),H.u_(ne)}})),F(m,jE.STAT_EVENT,(C=>{C.stat===sg.PROXY?Ae(bn,`RPC '${e}' stream ${o} detected buffering proxy`):C.stat===sg.NOPROXY&&Ae(bn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{H.__()}),0),H}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Hm(){return typeof document<"u"?document:null}function mh(i){return new dI(i,!0)}class NT{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&Ae("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const db="PersistentStream";class MT{constructor(e,n,s,o,u,d,m,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new NT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ge.RESOURCE_EXHAUSTED?(Ii(n.toString()),Ii("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new xe(ge.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ae(db,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ae(db,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class l2 extends MT{constructor(e,n,s,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=mI(this.serializer,e),s=(function(u){if(!("targetChange"in u))return qe.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?qe.min():d.readTime?Wr(d.readTime):qe.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=pg(this.serializer),n.addTarget=(function(u,d){let m;const p=d.target;if(m=cg(p)?{documents:yI(u,p)}:{query:_I(u,p).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=ET(u,d.resumeToken);const y=fg(u,d.expectedCount);y!==null&&(m.expectedCount=y)}else if(d.snapshotVersion.compareTo(qe.min())>0){m.readTime=Fd(u,d.snapshotVersion.toTimestamp());const y=fg(u,d.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const s=bI(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=pg(this.serializer),n.removeTarget=e,this.q_(n)}}class u2 extends MT{constructor(e,n,s,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return gt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,gt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){gt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=pI(e.writeResults,e.commitTime),s=Wr(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=pg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>gI(this.serializer,s)))};this.q_(n)}}class c2{}class d2 extends c2{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new xe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Go(e,mg(n,s),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(ge.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Ho(e,mg(n,s),o,d,m,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new xe(ge.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class h2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ii(n),this.aa=!1):Ae("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ga="RemoteStore";class f2{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{va(this)&&(Ae(ga,"Restarting streams for network reachability change."),await(async function(p){const y=Qe(p);y.Ea.add(4),await xu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await gh(y)})(this))}))})),this.Ra=new h2(s,o)}}async function gh(i){if(va(i))for(const e of i.da)await e(!0)}async function xu(i){for(const e of i.da)await e(!1)}function kT(i,e){const n=Qe(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),op(n)?ap(n):Po(n).O_()&&sp(n,e))}function ip(i,e){const n=Qe(i),s=Po(n);n.Ia.delete(e),s.O_()&&jT(n,e),n.Ia.size===0&&(s.O_()?s.L_():va(n)&&n.Ra.set("Unknown"))}function sp(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Po(i).Y_(e)}function jT(i,e){i.Va.Ue(e),Po(i).Z_(e)}function ap(i){i.Va=new oI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Po(i).start(),i.Ra.ua()}function op(i){return va(i)&&!Po(i).x_()&&i.Ia.size>0}function va(i){return Qe(i).Ea.size===0}function VT(i){i.Va=void 0}async function m2(i){i.Ra.set("Online")}async function g2(i){i.Ia.forEach(((e,n)=>{sp(i,e)}))}async function p2(i,e){VT(i),op(i)?(i.Ra.ha(e),ap(i)):i.Ra.set("Unknown")}async function y2(i,e,n){if(i.Ra.set("Online"),e instanceof bT&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ia.delete(m),o.Va.removeTarget(m))})(i,e)}catch(s){Ae(ga,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Hd(i,s)}else if(e instanceof wd?i.Va.Ze(e):e instanceof vT?i.Va.st(e):i.Va.tt(e),!n.isEqual(qe.min()))try{const s=await OT(i.localStore);n.compareTo(s)>=0&&await(function(u,d){const m=u.Va.Tt(d);return m.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.Ia.get(y);E&&u.Ia.set(y,E.withResumeToken(p.resumeToken,d))}})),m.targetMismatches.forEach(((p,y)=>{const E=u.Ia.get(p);if(!E)return;u.Ia.set(p,E.withResumeToken(_n.EMPTY_BYTE_STRING,E.snapshotVersion)),jT(u,p);const T=new ys(E.target,p,y,E.sequenceNumber);sp(u,T)})),u.remoteSyncer.applyRemoteEvent(m)})(i,n)}catch(s){Ae(ga,"Failed to raise snapshot:",s),await Hd(i,s)}}async function Hd(i,e,n){if(!Uo(e))throw e;i.Ea.add(1),await xu(i),i.Ra.set("Offline"),n||(n=()=>OT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Ae(ga,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await gh(i)}))}function LT(i,e){return e().catch((n=>Hd(i,n,e)))}async function ph(i){const e=Qe(i),n=Is(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Hg;for(;_2(e);)try{const o=await ZI(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,v2(e,o)}catch(o){await Hd(e,o)}UT(e)&&PT(e)}function _2(i){return va(i)&&i.Ta.length<10}function v2(i,e){i.Ta.push(e);const n=Is(i);n.O_()&&n.X_&&n.ea(e.mutations)}function UT(i){return va(i)&&!Is(i).x_()&&i.Ta.length>0}function PT(i){Is(i).start()}async function b2(i){Is(i).ra()}async function E2(i){const e=Is(i);for(const n of i.Ta)e.ea(n.mutations)}async function T2(i,e,n){const s=i.Ta.shift(),o=Xg.from(s,e,n);await LT(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await ph(i)}async function S2(i,e){e&&Is(i).X_&&await(async function(s,o){if((function(d){return iI(d)&&d!==ge.ABORTED})(o.code)){const u=s.Ta.shift();Is(s).B_(),await LT(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await ph(s)}})(i,e),UT(i)&&PT(i)}async function hb(i,e){const n=Qe(i);n.asyncQueue.verifyOperationInProgress(),Ae(ga,"RemoteStore received new credentials");const s=va(n);n.Ea.add(3),await xu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await gh(n)}async function w2(i,e){const n=Qe(i);e?(n.Ea.delete(2),await gh(n)):e||(n.Ea.add(2),await xu(n),n.Ra.set("Unknown"))}function Po(i){return i.ma||(i.ma=(function(n,s,o){const u=Qe(n);return u.sa(),new l2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:m2.bind(null,i),t_:g2.bind(null,i),r_:p2.bind(null,i),H_:y2.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),op(i)?ap(i):i.Ra.set("Unknown")):(await i.ma.stop(),VT(i))}))),i.ma}function Is(i){return i.fa||(i.fa=(function(n,s,o){const u=Qe(n);return u.sa(),new u2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:b2.bind(null,i),r_:S2.bind(null,i),ta:E2.bind(null,i),na:T2.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await ph(i)):(await i.fa.stop(),i.Ta.length>0&&(Ae(ga,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class lp{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const d=Date.now()+s,m=new lp(e,n,d,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function up(i,e){if(Ii("AsyncQueue",`${e}: ${i}`),Uo(i))return new xe(ge.UNAVAILABLE,`${e}: ${i}`);throw i}class go{static emptySet(e){return new go(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Me.comparator(n.key,s.key):(n,s)=>Me.comparator(n.key,s.key),this.keyedMap=Jl(),this.sortedSet=new Mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof go)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new go;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class fb{constructor(){this.ga=new Mt(Me.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ze(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Ro{constructor(e,n,s,o,u,d,m,p,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,u){const d=[];return n.forEach((m=>{d.push({type:0,doc:m})})),new Ro(e,n,go.emptySet(n),d,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class x2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class A2{constructor(){this.queries=mb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Qe(n),u=o.queries;o.queries=mb(),u.forEach(((d,m)=>{for(const p of m.Sa)p.onError(s)}))})(this,new xe(ge.ABORTED,"Firestore shutting down"))}}function mb(){return new _a((i=>sT(i)),uh)}async function zT(i,e){const n=Qe(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new x2,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const m=up(d,`Initialization of query '${co(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&cp(n)}async function BT(i,e){const n=Qe(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function R2(i,e){const n=Qe(i);let s=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const m of d.Sa)m.Fa(o)&&(s=!0);d.wa=o}}s&&cp(n)}function C2(i,e,n){const s=Qe(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function cp(i){i.Ca.forEach((e=>{e.next()}))}var vg,gb;(gb=vg||(vg={})).Ma="default",gb.Cache="cache";class FT{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Ro(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ro.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vg.Cache}}class qT{constructor(e){this.key=e}}class HT{constructor(e){this.key=e}}class I2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=st(),this.mutatedKeys=st(),this.eu=aT(e),this.tu=new go(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new fb,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,T)=>{const x=o.get(E),M=ch(this.query,T)?T:null,H=!!x&&this.mutatedKeys.has(x.key),F=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let C=!1;x&&M?x.data.isEqual(M.data)?H!==F&&(s.track({type:3,doc:M}),C=!0):this.su(x,M)||(s.track({type:2,doc:M}),C=!0,(p&&this.eu(M,p)>0||y&&this.eu(M,y)<0)&&(m=!0)):!x&&M?(s.track({type:0,doc:M}),C=!0):x&&!M&&(s.track({type:1,doc:x}),C=!0,(p||y)&&(m=!0)),C&&(M?(d=d.add(M),u=F?u.add(E):u.delete(E)):(d=d.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const E=this.query.limitType==="F"?d.last():d.first();d=d.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{tu:d,iu:s,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((E,T)=>(function(M,H){const F=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ze(20277,{Rt:C})}};return F(M)-F(H)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,d.length!==0||y?{snapshot:new Ro(this.query,e.tu,u,d,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new fb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=st(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new HT(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new qT(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=st();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ro.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const dp="SyncEngine";class D2{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class O2{constructor(e){this.key=e,this.hu=!1}}class N2{constructor(e,n,s,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new _a((m=>sT(m)),uh),this.Iu=new Map,this.Eu=new Set,this.du=new Mt(Me.comparator),this.Au=new Map,this.Ru=new ep,this.Vu={},this.mu=new Map,this.fu=Ao.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function M2(i,e,n=!0){const s=WT(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await GT(s,e,n,!0),o}async function k2(i,e){const n=WT(i);await GT(n,e,!0,!1)}async function GT(i,e,n,s){const o=await e2(i.localStore,Kr(e)),u=o.targetId,d=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await j2(i,e,u,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&kT(i.remoteStore,o),m}async function j2(i,e,n,s,o){i.pu=(T,x,M)=>(async function(F,C,ne,B){let ue=C.view.ru(ne);ue.Cs&&(ue=await ob(F.localStore,C.query,!1).then((({documents:D})=>C.view.ru(D,ue))));const Ee=B&&B.targetChanges.get(C.targetId),Te=B&&B.targetMismatches.get(C.targetId)!=null,Re=C.view.applyChanges(ue,F.isPrimaryClient,Ee,Te);return yb(F,C.targetId,Re.au),Re.snapshot})(i,T,x,M);const u=await ob(i.localStore,e,!0),d=new I2(e,u.Qs),m=d.ru(u.documents),p=wu.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),y=d.applyChanges(m,i.isPrimaryClient,p);yb(i,n,y.au);const E=new D2(e,n,d);return i.Tu.set(e,E),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),y.snapshot}async function V2(i,e,n){const s=Qe(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((d=>!uh(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await yg(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&ip(s.remoteStore,o.targetId),bg(s,o.targetId)})).catch(Lo)):(bg(s,o.targetId),await yg(s.localStore,o.targetId,!0))}async function L2(i,e){const n=Qe(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),ip(n.remoteStore,s.targetId))}async function U2(i,e,n){const s=G2(i);try{const o=await(function(d,m){const p=Qe(d),y=It.now(),E=m.reduce(((M,H)=>M.add(H.key)),st());let T,x;return p.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let H=Oi(),F=st();return p.Ns.getEntries(M,E).next((C=>{H=C,H.forEach(((ne,B)=>{B.isValidDocument()||(F=F.add(ne))}))})).next((()=>p.localDocuments.getOverlayedDocuments(M,H))).next((C=>{T=C;const ne=[];for(const B of m){const ue=ZC(B,T.get(B.key).overlayedDocument);ue!=null&&ne.push(new Ns(B.key,ue,XE(ue.value.mapValue),$r.exists(!0)))}return p.mutationQueue.addMutationBatch(M,y,ne,m)})).next((C=>{x=C;const ne=C.applyToLocalDocumentSet(T,F);return p.documentOverlayCache.saveOverlays(M,C.batchId,ne)}))})).then((()=>({batchId:x.batchId,changes:lT(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,m,p){let y=d.Vu[d.currentUser.toKey()];y||(y=new Mt(it)),y=y.insert(m,p),d.Vu[d.currentUser.toKey()]=y})(s,o.batchId,n),await Au(s,o.changes),await ph(s.remoteStore)}catch(o){const u=up(o,"Failed to persist write");n.reject(u)}}async function QT(i,e){const n=Qe(i);try{const s=await XI(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&(gt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?gt(d.hu,14607):o.removedDocuments.size>0&&(gt(d.hu,42227),d.hu=!1))})),await Au(n,s,e)}catch(s){await Lo(s)}}function pb(i,e,n){const s=Qe(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,d)=>{const m=d.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const p=Qe(d);p.onlineState=m;let y=!1;p.queries.forEach(((E,T)=>{for(const x of T.Sa)x.va(m)&&(y=!0)})),y&&cp(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function P2(i,e,n){const s=Qe(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let d=new Mt(Me.comparator);d=d.insert(u,Tn.newNoDocument(u,qe.min()));const m=st().add(u),p=new fh(qe.min(),new Map,new Mt(it),d,m);await QT(s,p),s.du=s.du.remove(u),s.Au.delete(e),hp(s)}else await yg(s.localStore,e,!1).then((()=>bg(s,e,n))).catch(Lo)}async function z2(i,e){const n=Qe(i),s=e.batch.batchId;try{const o=await WI(n.localStore,e);KT(n,s,null),YT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Au(n,o)}catch(o){await Lo(o)}}async function B2(i,e,n){const s=Qe(i);try{const o=await(function(d,m){const p=Qe(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let E;return p.mutationQueue.lookupMutationBatch(y,m).next((T=>(gt(T!==null,37113),E=T.keys(),p.mutationQueue.removeMutationBatch(y,T)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,E,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E))).next((()=>p.localDocuments.getDocuments(y,E)))}))})(s.localStore,e);KT(s,e,n),YT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Au(s,o)}catch(o){await Lo(o)}}function YT(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function KT(i,e,n){const s=Qe(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function bg(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||$T(i,s)}))}function $T(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(ip(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),hp(i))}function yb(i,e,n){for(const s of n)s instanceof qT?(i.Ru.addReference(s.key,e),F2(i,s)):s instanceof HT?(Ae(dp,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||$T(i,s.key)):ze(19791,{wu:s})}function F2(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(Ae(dp,"New document in limbo: "+n),i.Eu.add(s),hp(i))}function hp(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Me(At.fromString(e)),s=i.fu.next();i.Au.set(s,new O2(n)),i.du=i.du.insert(n,s),kT(i.remoteStore,new ys(Kr($g(n.path)),s,"TargetPurposeLimboResolution",ah.ce))}}async function Au(i,e,n){const s=Qe(i),o=[],u=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,p)=>{d.push(s.pu(p,e,n).then((y=>{if((y||n)&&s.isPrimaryClient){const E=y?!y.fromCache:n?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(y){o.push(y);const E=np.As(p.targetId,y);u.push(E)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(p,y){const E=Qe(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>pe.forEach(y,(x=>pe.forEach(x.Es,(M=>E.persistence.referenceDelegate.addReference(T,x.targetId,M))).next((()=>pe.forEach(x.ds,(M=>E.persistence.referenceDelegate.removeReference(T,x.targetId,M)))))))))}catch(T){if(!Uo(T))throw T;Ae(rp,"Failed to update sequence numbers: "+T)}for(const T of y){const x=T.targetId;if(!T.fromCache){const M=E.Ms.get(x),H=M.snapshotVersion,F=M.withLastLimboFreeSnapshotVersion(H);E.Ms=E.Ms.insert(x,F)}}})(s.localStore,u))}async function q2(i,e){const n=Qe(i);if(!n.currentUser.isEqual(e)){Ae(dp,"User change. New user:",e.toKey());const s=await DT(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((m=>{m.forEach((p=>{p.reject(new xe(ge.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Au(n,s.Ls)}}function H2(i,e){const n=Qe(i),s=n.Au.get(e);if(s&&s.hu)return st().add(s.key);{let o=st();const u=n.Iu.get(e);if(!u)return o;for(const d of u){const m=n.Tu.get(d);o=o.unionWith(m.view.nu)}return o}}function WT(i){const e=Qe(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=QT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=H2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=P2.bind(null,e),e.Pu.H_=R2.bind(null,e.eventManager),e.Pu.yu=C2.bind(null,e.eventManager),e}function G2(i){const e=Qe(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=z2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=B2.bind(null,e),e}class Gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return $I(this.persistence,new QI,e.initialUser,this.serializer)}Cu(e){return new IT(tp.mi,this.serializer)}Du(e){return new n2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gd.provider={build:()=>new Gd};class Q2 extends Gd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){gt(this.persistence.referenceDelegate instanceof qd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new OI(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new IT((s=>qd.mi(s,n)),this.serializer)}}class Eg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>pb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=q2.bind(null,this.syncEngine),await w2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new A2})()}createDatastore(e){const n=mh(e.databaseInfo.databaseId),s=(function(u){return new o2(u)})(e.databaseInfo);return(function(u,d,m,p){return new d2(u,d,m,p)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,d,m){return new f2(s,o,u,d,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>pb(this.syncEngine,n,0)),(function(){return cb.v()?new cb:new r2})())}createSyncEngine(e,n){return(function(o,u,d,m,p,y,E){const T=new N2(o,u,d,m,p,y);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Qe(n);Ae(ga,"RemoteStore shutting down."),s.Ea.add(5),await xu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Eg.provider={build:()=>new Eg};class XT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ii("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Ds="FirestoreClient";class Y2{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=En.UNAUTHENTICATED,this.clientId=qg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async d=>{Ae(Ds,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(Ae(Ds,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=up(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Gm(i,e){i.asyncQueue.verifyOperationInProgress(),Ae(Ds,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await DT(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function _b(i,e){i.asyncQueue.verifyOperationInProgress();const n=await K2(i);Ae(Ds,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>hb(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>hb(e.remoteStore,o))),i._onlineComponents=e}async function K2(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ae(Ds,"Using user provided OfflineComponentProvider");try{await Gm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ge.FAILED_PRECONDITION||o.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Eo("Error using user provided cache. Falling back to memory cache: "+n),await Gm(i,new Gd)}}else Ae(Ds,"Using default OfflineComponentProvider"),await Gm(i,new Q2(void 0));return i._offlineComponents}async function JT(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ae(Ds,"Using user provided OnlineComponentProvider"),await _b(i,i._uninitializedComponentsProvider._online)):(Ae(Ds,"Using default OnlineComponentProvider"),await _b(i,new Eg))),i._onlineComponents}function $2(i){return JT(i).then((e=>e.syncEngine))}async function ZT(i){const e=await JT(i),n=e.eventManager;return n.onListen=M2.bind(null,e.syncEngine),n.onUnlisten=V2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=k2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=L2.bind(null,e.syncEngine),n}function W2(i,e,n={}){const s=new Ai;return i.asyncQueue.enqueueAndForget((async()=>(function(u,d,m,p,y){const E=new XT({next:x=>{E.Nu(),d.enqueueAndForget((()=>BT(u,T)));const M=x.docs.has(m);!M&&x.fromCache?y.reject(new xe(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&x.fromCache&&p&&p.source==="server"?y.reject(new xe(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(x)},error:x=>y.reject(x)}),T=new FT($g(m.path),E,{includeMetadataChanges:!0,qa:!0});return zT(u,T)})(await ZT(i),i.asyncQueue,e,n,s))),s.promise}function X2(i,e,n={}){const s=new Ai;return i.asyncQueue.enqueueAndForget((async()=>(function(u,d,m,p,y){const E=new XT({next:x=>{E.Nu(),d.enqueueAndForget((()=>BT(u,T))),x.fromCache&&p.source==="server"?y.reject(new xe(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(x)},error:x=>y.reject(x)}),T=new FT(m,E,{includeMetadataChanges:!0,qa:!0});return zT(u,T)})(await ZT(i),i.asyncQueue,e,n,s))),s.promise}function eS(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const vb=new Map;const tS="firestore.googleapis.com",bb=!0;class Eb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new xe(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tS,this.ssl=bb}else this.host=e.host,this.ssl=e.ssl??bb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=CT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<II)throw new xe(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eS(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new xe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new xe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new xe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Eb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Eb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new nC;switch(s.type){case"firstParty":return new aC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new xe(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=vb.get(n);s&&(Ae("ComponentProvider","Removing Datastore"),vb.delete(n),s.terminate())})(this),Promise.resolve()}}function J2(i,e,n,s={}){i=Di(i,yh);const o=ko(e),u=i._getSettings(),d={...u,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${n}`;o&&(wE(`https://${m}`),xE("Firestore",!0)),u.host!==tS&&u.host!==m&&Eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:s};if(!ws(p,d)&&(i._setSettings(p),s.mockUserToken)){let y,E;if(typeof s.mockUserToken=="string")y=s.mockUserToken,E=En.MOCK_USER;else{y=IA(s.mockUserToken,i._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new xe(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new En(T)}i._authCredentials=new rC(new PE(y,E))}}class zo{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new zo(this.firestore,e,this._query)}}class qt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Eu(n,qt._jsonSchema))return new qt(e,s||null,new Me(At.fromString(n.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:tn("string",qt._jsonSchemaVersion),referencePath:tn("string")};class Ts extends zo{constructor(e,n,s){super(e,n,$g(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new Me(e))}withConverter(e){return new Ts(this.firestore,e,this._path)}}function xd(i,e,...n){if(i=un(i),zE("collection","path",e),i instanceof yh){const s=At.fromString(e,...n);return kv(s),new Ts(i,null,s)}{if(!(i instanceof qt||i instanceof Ts))throw new xe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(At.fromString(e,...n));return kv(s),new Ts(i.firestore,null,s)}}function Xe(i,e,...n){if(i=un(i),arguments.length===1&&(e=qg.newId()),zE("doc","path",e),i instanceof yh){const s=At.fromString(e,...n);return Mv(s),new qt(i,null,new Me(s))}{if(!(i instanceof qt||i instanceof Ts))throw new xe(ge.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(At.fromString(e,...n));return Mv(s),new qt(i.firestore,i instanceof Ts?i.converter:null,new Me(s))}}const Tb="AsyncQueue";class Sb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new NT(this,"async_queue_retry"),this._c=()=>{const s=Hm();s&&Ae(Tb,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Hm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Hm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ai;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Uo(e))throw e;Ae(Tb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Ii("INTERNAL UNHANDLED ERROR: ",wb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=lp.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&ze(47125,{Pc:wb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function wb(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Ru extends yh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new Sb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Sb(e),this._firestoreClient=void 0,await e}}}function ba(i,e){const n=typeof i=="object"?i:IE(),s=typeof i=="string"?i:Vd,o=Bg(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=RA("firestore");u&&J2(o,...u)}return o}function fp(i){if(i._terminated)throw new xe(ge.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||Z2(i),i._firestoreClient}function Z2(i){const e=i._freezeSettings(),n=(function(o,u,d,m){return new SC(o,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,eS(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new Y2(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class ar{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ar(_n.fromBase64String(e))}catch(n){throw new xe(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ar(_n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ar._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eu(e,ar._jsonSchema))return ar.fromBase64String(e.bytes)}}ar._jsonSchemaVersion="firestore/bytes/1.0",ar._jsonSchema={type:tn("string",ar._jsonSchemaVersion),bytes:tn("string")};class _h{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xe(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vh{constructor(e){this._methodName=e}}class Xr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xe(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xe(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xr._jsonSchemaVersion}}static fromJSON(e){if(Eu(e,Xr._jsonSchema))return new Xr(e.latitude,e.longitude)}}Xr._jsonSchemaVersion="firestore/geoPoint/1.0",Xr._jsonSchema={type:tn("string",Xr._jsonSchemaVersion),latitude:tn("number"),longitude:tn("number")};class Jr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Jr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eu(e,Jr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Jr(e.vectorValues);throw new xe(ge.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Jr._jsonSchemaVersion="firestore/vectorValue/1.0",Jr._jsonSchema={type:tn("string",Jr._jsonSchemaVersion),vectorValues:tn("object")};const eD=/^__.*__$/;class tD{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new Su(e,this.data,n,this.fieldTransforms)}}class nS{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function rS(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ze(40011,{Ac:i})}}class bh{constructor(e,n,s,o,u,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Qd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(rS(this.Ac)&&eD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class nD{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||mh(e)}Cc(e,n,s,o=!1){return new bh({Ac:e,methodName:n,Dc:s,path:yn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mp(i){const e=i._freezeSettings(),n=mh(i._databaseId);return new nD(i._databaseId,!!e.ignoreUndefinedProperties,n)}function rD(i,e,n,s,o,u={}){const d=i.Cc(u.merge||u.mergeFields?2:0,e,n,o);pp("Data must be an object, but it was:",d,s);const m=iS(s,d);let p,y;if(u.merge)p=new Gn(d.fieldMask),y=d.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const x=Tg(e,T,n);if(!d.contains(x))throw new xe(ge.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);aS(E,x)||E.push(x)}p=new Gn(E),y=d.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,y=d.fieldTransforms;return new tD(new jn(m),p,y)}class Eh extends vh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Eh}}function iD(i,e,n){return new bh({Ac:3,Dc:e.settings.Dc,methodName:i._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class gp extends vh{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=iD(this,e,!0),s=this.vc.map((u=>Bo(u,n))),o=new xo(s);return new $C(e.path,o)}isEqual(e){return e instanceof gp&&ws(this.vc,e.vc)}}function sD(i,e,n,s){const o=i.Cc(1,e,n);pp("Data must be an object, but it was:",o,s);const u=[],d=jn.empty();Os(s,((p,y)=>{const E=yp(e,p,n);y=un(y);const T=o.yc(E);if(y instanceof Eh)u.push(E);else{const x=Bo(y,T);x!=null&&(u.push(E),d.set(E,x))}}));const m=new Gn(u);return new nS(d,m,o.fieldTransforms)}function aD(i,e,n,s,o,u){const d=i.Cc(1,e,n),m=[Tg(e,s,n)],p=[o];if(u.length%2!=0)throw new xe(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<u.length;x+=2)m.push(Tg(e,u[x])),p.push(u[x+1]);const y=[],E=jn.empty();for(let x=m.length-1;x>=0;--x)if(!aS(y,m[x])){const M=m[x];let H=p[x];H=un(H);const F=d.yc(M);if(H instanceof Eh)y.push(M);else{const C=Bo(H,F);C!=null&&(y.push(M),E.set(M,C))}}const T=new Gn(y);return new nS(E,T,d.fieldTransforms)}function oD(i,e,n,s=!1){return Bo(n,i.Cc(s?4:3,e))}function Bo(i,e){if(sS(i=un(i)))return pp("Unsupported field value:",e,i),iS(i,e);if(i instanceof vh)return(function(s,o){if(!rS(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let d=0;for(const m of s){let p=Bo(m,o.wc(d));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),d++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=un(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return QC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=It.fromDate(s);return{timestampValue:Fd(o.serializer,u)}}if(s instanceof It){const u=new It(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Fd(o.serializer,u)}}if(s instanceof Xr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ar)return{bytesValue:ET(o.serializer,s._byteString)};if(s instanceof qt){const u=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Zg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Jr)return(function(d,m){return{mapValue:{fields:{[$E]:{stringValue:WE},[Ld]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return Wg(m.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${sh(s)}`)})(i,e)}function iS(i,e){const n={};return qE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Os(i,((s,o)=>{const u=Bo(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function sS(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof It||i instanceof Xr||i instanceof ar||i instanceof qt||i instanceof vh||i instanceof Jr)}function pp(i,e,n){if(!sS(n)||!BE(n)){const s=sh(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function Tg(i,e,n){if((e=un(e))instanceof _h)return e._internalPath;if(typeof e=="string")return yp(i,e);throw Qd("Field path arguments must be of type string or ",i,!1,void 0,n)}const lD=new RegExp("[~\\*/\\[\\]]");function yp(i,e,n){if(e.search(lD)>=0)throw Qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new _h(...e.split("."))._internalPath}catch{throw Qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Qd(i,e,n,s,o){const u=s&&!s.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||d)&&(p+=" (found",u&&(p+=` in field ${s}`),d&&(p+=` in document ${o}`),p+=")"),new xe(ge.INVALID_ARGUMENT,m+i+p)}function aS(i,e){return i.some((n=>n.isEqual(e)))}class oS{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_p("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class uD extends oS{data(){return super.data()}}function _p(i,e){return typeof e=="string"?yp(i,e):e instanceof _h?e._internalPath:e._delegate._internalPath}function cD(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new xe(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vp{}class dD extends vp{}function Qm(i,e,...n){let s=[];e instanceof vp&&s.push(e),s=s.concat(n),(function(u){const d=u.filter((p=>p instanceof bp)).length,m=u.filter((p=>p instanceof Th)).length;if(d>1||d>0&&m>0)throw new xe(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class Th extends dD{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Th(e,n,s)}_apply(e){const n=this._parse(e);return lS(e._query,n),new zo(e.firestore,e.converter,dg(e._query,n))}_parse(e){const n=mp(e.firestore);return(function(u,d,m,p,y,E,T){let x;if(y.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new xe(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Ab(T,E);const H=[];for(const F of T)H.push(xb(p,u,F));x={arrayValue:{values:H}}}else x=xb(p,u,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Ab(T,E),x=oD(m,d,T,E==="in"||E==="not-in");return en.create(y,E,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ym(i,e,n){const s=e,o=_p("where",i);return Th._create(o,s,n)}class bp extends vp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bp(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Sr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let d=o;const m=u.getFlattenedFilters();for(const p of m)lS(d,p),d=dg(d,p)})(e._query,n),new zo(e.firestore,e.converter,dg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function xb(i,e,n){if(typeof(n=un(n))=="string"){if(n==="")throw new xe(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iT(e)&&n.indexOf("/")!==-1)throw new xe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(At.fromString(n));if(!Me.isDocumentKey(s))throw new xe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Fv(i,new Me(s))}if(n instanceof qt)return Fv(i,n._key);throw new xe(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sh(n)}.`)}function Ab(i,e){if(!Array.isArray(i)||i.length===0)throw new xe(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lS(i,e){const n=(function(o,u){for(const d of o)for(const m of d.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new xe(ge.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(ge.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class hD{convertValue(e,n="none"){switch(Cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ze(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Os(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[Ld].arrayValue?.values?.map((s=>Ft(s.doubleValue)));return new Jr(n)}convertGeoPoint(e){return new Xr(Ft(e.latitude),Ft(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=lh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(cu(e));default:return null}}convertTimestamp(e){const n=As(e);return new It(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=At.fromString(e);gt(RT(s),9688,{name:e});const o=new du(s.get(1),s.get(3)),u=new Me(s.popFirst(5));return o.isEqual(n)||Ii(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function fD(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class eu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ha extends oS{constructor(e,n,s,o,u,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ad(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(_p("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(ge.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ha._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ha._jsonSchemaVersion="firestore/documentSnapshot/1.0",ha._jsonSchema={type:tn("string",ha._jsonSchemaVersion),bundleSource:tn("string","DocumentSnapshot"),bundleName:tn("string"),bundle:tn("string")};class Ad extends ha{data(e={}){return super.data(e)}}class po{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new eu(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Ad(this._firestore,this._userDataWriter,s.key,s,new eu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xe(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const p=new Ad(o._firestore,o._userDataWriter,m.doc.key,m.doc,new eu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new Ad(o._firestore,o._userDataWriter,m.doc.key,m.doc,new eu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return m.type!==0&&(y=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),E=d.indexOf(m.doc.key)),{type:mD(m.type),doc:p,oldIndex:y,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(ge.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=po._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function mD(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ze(61501,{type:i})}}function Je(i){i=Di(i,qt);const e=Di(i.firestore,Ru);return W2(fp(e),i._key).then((n=>gD(e,i,n)))}po._jsonSchemaVersion="firestore/querySnapshot/1.0",po._jsonSchema={type:tn("string",po._jsonSchemaVersion),bundleSource:tn("string","QuerySnapshot"),bundleName:tn("string"),bundle:tn("string")};class uS extends hD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ar(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,n)}}function Rd(i){i=Di(i,zo);const e=Di(i.firestore,Ru),n=fp(e),s=new uS(e);return cD(i._query),X2(n,i._query).then((o=>new po(e,s,i,o)))}function St(i,e,n){i=Di(i,qt);const s=Di(i.firestore,Ru),o=fD(i.converter,e,n);return cS(s,[rD(mp(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,$r.none())])}function md(i,e,n,...s){i=Di(i,qt);const o=Di(i.firestore,Ru),u=mp(o);let d;return d=typeof(e=un(e))=="string"||e instanceof _h?aD(u,"updateDoc",i._key,e,n,s):sD(u,"updateDoc",i._key,e),cS(o,[d.toMutation(i._key,$r.exists(!0))])}function cS(i,e){return(function(s,o){const u=new Ai;return s.asyncQueue.enqueueAndForget((async()=>U2(await $2(s),o,u))),u.promise})(fp(i),e)}function gD(i,e,n){const s=n.docs.get(e._key),o=new uS(i);return new ha(i,o,e._key,s,new eu(n.hasPendingWrites,n.fromCache),e.converter)}function dS(...i){return new gp("arrayUnion",i)}(function(e,n=!0){(function(o){Vo=o})(jo),bo(new fa("firestore",((s,{instanceIdentifier:o,options:u})=>{const d=s.getProvider("app").getImmediate(),m=new Ru(new iC(s.getProvider("auth-internal")),new oC(d,s.getProvider("app-check-internal")),(function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new xe(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new du(y.options.projectId,E)})(d,o),d);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),bs(Iv,Dv,e),bs(Iv,Dv,"esm2020")})();var pD="firebase",yD="12.7.0";bs(pD,yD,"app");const _D={apiKey:"AIzaSyCfvR8bEeW2CXdD31Ec34doRNThnbryXJo",authDomain:"budget-tkl.firebaseapp.com",projectId:"budget-tkl",storageBucket:"budget-tkl.firebasestorage.app",messagingSenderId:"631248313026",appId:"1:631248313026:web:36574d789a42b2d102f95b"},Ms=CE(_D);function hS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vD=hS,fS=new vu("auth","Firebase",hS());const Yd=new Pg("@firebase/auth");function bD(i,...e){Yd.logLevel<=rt.WARN&&Yd.warn(`Auth (${jo}): ${i}`,...e)}function Cd(i,...e){Yd.logLevel<=rt.ERROR&&Yd.error(`Auth (${jo}): ${i}`,...e)}function wr(i,...e){throw Ep(i,...e)}function Zr(i,...e){return Ep(i,...e)}function mS(i,e,n){const s={...vD(),[e]:n};return new vu("auth","Firebase",s).create(e,{appName:i.name})}function Ss(i){return mS(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ep(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return fS.create(i,...e)}function Pe(i,e,...n){if(!i)throw Ep(e,...n)}function Si(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Cd(e),new Error(e)}function Ni(i,e){i||Si(e)}function Sg(){return typeof self<"u"&&self.location?.href||""}function ED(){return Rb()==="http:"||Rb()==="https:"}function Rb(){return typeof self<"u"&&self.location?.protocol||null}function TD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ED()||jA()||"connection"in navigator)?navigator.onLine:!0}function SD(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Cu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ni(n>e,"Short delay should be less than long delay!"),this.isMobile=NA()||VA()}get(){return TD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Tp(i,e){Ni(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class gS{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Si("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Si("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Si("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const wD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const xD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],AD=new Cu(3e4,6e4);function Ea(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function ks(i,e,n,s,o={}){return pS(i,o,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const m=bu({key:i.config.apiKey,...d}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:p,...u};return kA()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&ko(i.emulatorConfig.host)&&(y.credentials="include"),gS.fetch()(await yS(i,i.config.apiHost,n,m),y)})}async function pS(i,e,n){i._canInitEmulator=!1;const s={...wD,...e};try{const o=new CD(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw gd(i,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const m=u.ok?d.errorMessage:d.error.message,[p,y]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw gd(i,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw gd(i,"email-already-in-use",d);if(p==="USER_DISABLED")throw gd(i,"user-disabled",d);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw mS(i,E,y);wr(i,E)}}catch(o){if(o instanceof Mi)throw o;wr(i,"network-request-failed",{message:String(o)})}}async function Sh(i,e,n,s,o={}){const u=await ks(i,e,n,s,o);return"mfaPendingCredential"in u&&wr(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function yS(i,e,n,s){const o=`${e}${n}?${s}`,u=i,d=u.config.emulator?Tp(i.config,o):`${i.config.apiScheme}://${o}`;return xD.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function RD(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Zr(this.auth,"network-request-failed")),AD.get())})}}function gd(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Zr(i,e,s);return o.customData._tokenResponse=n,o}function Cb(i){return i!==void 0&&i.enterprise!==void 0}class ID{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return RD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function DD(i,e){return ks(i,"GET","/v2/recaptchaConfig",Ea(i,e))}async function OD(i,e){return ks(i,"POST","/v1/accounts:delete",e)}async function Kd(i,e){return ks(i,"POST","/v1/accounts:lookup",e)}function au(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ND(i,e=!1){const n=un(i),s=await n.getIdToken(e),o=Sp(s);Pe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:s,authTime:au(Km(o.auth_time)),issuedAtTime:au(Km(o.iat)),expirationTime:au(Km(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Km(i){return Number(i)*1e3}function Sp(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return Cd("JWT malformed, contained fewer than 3 sections"),null;try{const o=bE(n);return o?JSON.parse(o):(Cd("Failed to decode base64 JWT payload"),null)}catch(o){return Cd("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Ib(i){const e=Sp(i);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function mu(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Mi&&MD(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function MD({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class kD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class wg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function $d(i){const e=i.auth,n=await i.getIdToken(),s=await mu(i,Kd(e,{idToken:n}));Pe(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?_S(o.providerUserInfo):[],d=VD(i.providerData,u),m=i.isAnonymous,p=!(i.email&&o.passwordHash)&&!d?.length,y=m?p:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new wg(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(i,E)}async function jD(i){const e=un(i);await $d(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VD(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function _S(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function LD(i,e){const n=await pS(i,{},async()=>{const s=bu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,d=await yS(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return i.emulatorConfig&&ko(i.emulatorConfig.host)&&(p.credentials="include"),gS.fetch()(d,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function UD(i,e){return ks(i,"POST","/v2/accounts:revokeToken",Ea(i,e))}class yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ib(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const n=Ib(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await LD(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,d=new yo;return s&&(Pe(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(Pe(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(Pe(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yo,this.toJSON())}_performRefresh(){return Si("not implemented")}}function hs(i,e){Pe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Tr{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new kD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new wg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await mu(this,this.stsTokenManager.getToken(this.auth,e));return Pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ND(this,e)}reload(){return jD(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Tr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await $d(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Er(this.auth.app))return Promise.reject(Ss(this.auth));const e=await this.getIdToken();return await mu(this,OD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:T,emailVerified:x,isAnonymous:M,providerData:H,stsTokenManager:F}=n;Pe(T&&F,e,"internal-error");const C=yo.fromJSON(this.name,F);Pe(typeof T=="string",e,"internal-error"),hs(s,e.name),hs(o,e.name),Pe(typeof x=="boolean",e,"internal-error"),Pe(typeof M=="boolean",e,"internal-error"),hs(u,e.name),hs(d,e.name),hs(m,e.name),hs(p,e.name),hs(y,e.name),hs(E,e.name);const ne=new Tr({uid:T,auth:e,email:o,emailVerified:x,displayName:s,isAnonymous:M,photoURL:d,phoneNumber:u,tenantId:m,stsTokenManager:C,createdAt:y,lastLoginAt:E});return H&&Array.isArray(H)&&(ne.providerData=H.map(B=>({...B}))),p&&(ne._redirectEventId=p),ne}static async _fromIdTokenResponse(e,n,s=!1){const o=new yo;o.updateFromServerResponse(n);const u=new Tr({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await $d(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Pe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?_S(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,m=new yo;m.updateFromIdToken(s);const p=new Tr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new wg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,y),p}}const Db=new Map;function wi(i){Ni(i instanceof Function,"Expected a class definition");let e=Db.get(i);return e?(Ni(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Db.set(i,e),e)}class vS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}vS.type="NONE";const Ob=vS;function Id(i,e,n){return`firebase:${i}:${e}:${n}`}class _o{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Id(this.userKey,o.apiKey,u),this.fullPersistenceKey=Id("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Kd(this.auth,{idToken:e}).catch(()=>{});return n?Tr._fromGetAccountInfoResponse(this.auth,n,e):null}return Tr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new _o(wi(Ob),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||wi(Ob);const d=Id(s,e.config.apiKey,e.name);let m=null;for(const y of n)try{const E=await y._get(d);if(E){let T;if(typeof E=="string"){const x=await Kd(e,{idToken:E}).catch(()=>{});if(!x)break;T=await Tr._fromGetAccountInfoResponse(e,x,E)}else T=Tr._fromJSON(e,E);y!==u&&(m=T),u=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new _o(u,e,s):(u=p[0],m&&await u._set(d,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(d)}catch{}})),new _o(u,e,s))}}function Nb(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xS(e))return"Blackberry";if(AS(e))return"Webos";if(ES(e))return"Safari";if((e.includes("chrome/")||TS(e))&&!e.includes("edge/"))return"Chrome";if(wS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function bS(i=Sn()){return/firefox\//i.test(i)}function ES(i=Sn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TS(i=Sn()){return/crios\//i.test(i)}function SS(i=Sn()){return/iemobile/i.test(i)}function wS(i=Sn()){return/android/i.test(i)}function xS(i=Sn()){return/blackberry/i.test(i)}function AS(i=Sn()){return/webos/i.test(i)}function wp(i=Sn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function PD(i=Sn()){return wp(i)&&!!window.navigator?.standalone}function zD(){return LA()&&document.documentMode===10}function RS(i=Sn()){return wp(i)||wS(i)||AS(i)||xS(i)||/windows phone/i.test(i)||SS(i)}function CS(i,e=[]){let n;switch(i){case"Browser":n=Nb(Sn());break;case"Worker":n=`${Nb(Sn())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jo}/${s}`}class BD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((d,m)=>{try{const p=e(u);d(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function FD(i,e={}){return ks(i,"GET","/v2/passwordPolicy",Ea(i,e))}const qD=6;class HD{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??qD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class GD{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mb(this),this.idTokenSubscription=new Mb(this),this.beforeStateQueue=new BD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=wi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await _o.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Kd(this,{idToken:e}),s=await Tr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Er(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===d)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await $d(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Er(this.app))return Promise.reject(Ss(this));const n=e?un(e):null;return n&&Pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Er(this.app)?Promise.reject(Ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Er(this.app)?Promise.reject(Ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FD(this),n=new HD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await UD(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&wi(e)||this._popupRedirectResolver;Pe(n,this,"argument-error"),this.redirectPersistenceManager=await _o.create(this,[wi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(m,this,"internal-error"),m.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Er(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&bD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Fo(i){return un(i)}class Mb{constructor(e){this.auth=e,this.observer=null,this.addObserver=GA(n=>this.observer=n)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let wh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QD(i){wh=i}function IS(i){return wh.loadJS(i)}function YD(){return wh.recaptchaEnterpriseScript}function KD(){return wh.gapiScript}function $D(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class WD{constructor(){this.enterprise=new XD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class XD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const JD="recaptcha-enterprise",DS="NO_RECAPTCHA";class ZD{constructor(e){this.type=JD,this.auth=Fo(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,m)=>{DD(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new ID(p);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,d(y.siteKey)}}).catch(p=>{m(p)})})}function o(u,d,m){const p=window.grecaptcha;Cb(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(y=>{d(y)}).catch(()=>{d(DS)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new WD().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{s(this.auth).then(m=>{if(!n&&Cb(window.grecaptcha))o(m,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=YD();p.length!==0&&(p+=m),IS(p).then(()=>{o(m,u,d)}).catch(y=>{d(y)})}}).catch(m=>{d(m)})})}}async function kb(i,e,n,s=!1,o=!1){const u=new ZD(i);let d;if(o)d=DS;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function jb(i,e,n,s,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await kb(i,e,n,n==="getOobCode");return s(i,u)}else return s(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await kb(i,e,n,n==="getOobCode");return s(i,d)}else return Promise.reject(u)})}function e5(i,e){const n=Bg(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ws(u,e??{}))return o;wr(o,"already-initialized")}return n.initialize({options:e})}function t5(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(wi);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function n5(i,e,n){const s=Fo(i);Pe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=OS(e),{host:d,port:m}=r5(e),p=m===null?"":`:${m}`,y={url:`${u}//${d}${p}/`},E=Object.freeze({host:d,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Pe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Pe(ws(y,s.config.emulator)&&ws(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,ko(d)?(wE(`${u}//${d}${p}`),xE("Auth",!0)):i5()}function OS(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function r5(i){const e=OS(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:Vb(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:Vb(d)}}}function Vb(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function i5(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class xp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Si("not implemented")}_getIdTokenResponse(e){return Si("not implemented")}_linkToIdToken(e,n){return Si("not implemented")}_getReauthenticationResolver(e){return Si("not implemented")}}async function s5(i,e){return ks(i,"POST","/v1/accounts:signUp",e)}async function a5(i,e){return Sh(i,"POST","/v1/accounts:signInWithPassword",Ea(i,e))}async function o5(i,e){return Sh(i,"POST","/v1/accounts:signInWithEmailLink",Ea(i,e))}async function l5(i,e){return Sh(i,"POST","/v1/accounts:signInWithEmailLink",Ea(i,e))}class gu extends xp{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new gu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new gu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jb(e,n,"signInWithPassword",a5);case"emailLink":return o5(e,{email:this._email,oobCode:this._password});default:wr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jb(e,s,"signUpPassword",s5);case"emailLink":return l5(e,{idToken:n,email:this._email,oobCode:this._password});default:wr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function vo(i,e){return Sh(i,"POST","/v1/accounts:signInWithIdp",Ea(i,e))}const u5="http://localhost";class pa extends xp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new pa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const d=new pa(s,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return vo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,vo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,vo(e,n)}buildRequest(){const e={requestUri:u5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bu(n)}return e}}function c5(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function d5(i){const e=$l(Wl(i)).link,n=e?$l(Wl(e)).deep_link_id:null,s=$l(Wl(i)).deep_link_id;return(s?$l(Wl(s)).link:null)||s||n||e||i}class Ap{constructor(e){const n=$l(Wl(e)),s=n.apiKey??null,o=n.oobCode??null,u=c5(n.mode??null);Pe(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=d5(e);try{return new Ap(n)}catch{return null}}}class qo{constructor(){this.providerId=qo.PROVIDER_ID}static credential(e,n){return gu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Ap.parseLink(n);return Pe(s,"argument-error"),gu._fromEmailAndCode(e,s.code,s.tenantId)}}qo.PROVIDER_ID="password";qo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class NS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Iu extends NS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fs extends Iu{constructor(){super("facebook.com")}static credential(e){return pa._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.FACEBOOK_SIGN_IN_METHOD="facebook.com";fs.PROVIDER_ID="facebook.com";class ms extends Iu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return pa._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ms.credential(n,s)}catch{return null}}}ms.GOOGLE_SIGN_IN_METHOD="google.com";ms.PROVIDER_ID="google.com";class gs extends Iu{constructor(){super("github.com")}static credential(e){return pa._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gs.credential(e.oauthAccessToken)}catch{return null}}}gs.GITHUB_SIGN_IN_METHOD="github.com";gs.PROVIDER_ID="github.com";class ps extends Iu{constructor(){super("twitter.com")}static credential(e,n){return pa._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ps.credential(n,s)}catch{return null}}}ps.TWITTER_SIGN_IN_METHOD="twitter.com";ps.PROVIDER_ID="twitter.com";class Co{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await Tr._fromIdTokenResponse(e,s,o),d=Lb(s);return new Co({user:u,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=Lb(s);return new Co({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function Lb(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class Wd extends Mi{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Wd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Wd(e,n,s,o)}}function MS(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Wd._fromErrorAndOperation(i,u,e,s):u})}async function h5(i,e,n=!1){const s=await mu(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Co._forOperation(i,"link",s)}async function f5(i,e,n=!1){const{auth:s}=i;if(Er(s.app))return Promise.reject(Ss(s));const o="reauthenticate";try{const u=await mu(i,MS(s,o,e,i),n);Pe(u.idToken,s,"internal-error");const d=Sp(u.idToken);Pe(d,s,"internal-error");const{sub:m}=d;return Pe(i.uid===m,s,"user-mismatch"),Co._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&wr(s,"user-mismatch"),u}}async function kS(i,e,n=!1){if(Er(i.app))return Promise.reject(Ss(i));const s="signIn",o=await MS(i,s,e),u=await Co._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function m5(i,e){return kS(Fo(i),e)}async function g5(i){const e=Fo(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function p5(i,e,n){return Er(i.app)?Promise.reject(Ss(i)):m5(un(i),qo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&g5(i),s})}function y5(i,e,n,s){return un(i).onIdTokenChanged(e,n,s)}function _5(i,e,n){return un(i).beforeAuthStateChanged(e,n)}function v5(i,e,n,s){return un(i).onAuthStateChanged(e,n,s)}function b5(i){return un(i).signOut()}const Xd="__sak";class jS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xd,"1"),this.storage.removeItem(Xd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const E5=1e3,T5=10;class VS extends jS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,m,p)=>{this.notifyListeners(d,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);zD()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,T5):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},E5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}VS.type="LOCAL";const S5=VS;class LS extends jS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}LS.type="SESSION";const US=LS;function w5(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class xh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new xh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(d).map(async y=>y(n.origin,u)),p=await w5(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xh.receivers=[];function Rp(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}class x5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((m,p)=>{const y=Rp("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(T){const x=T;if(x.data.eventId===y)switch(x.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(x.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function ei(){return window}function A5(i){ei().location.href=i}function PS(){return typeof ei().WorkerGlobalScope<"u"&&typeof ei().importScripts=="function"}async function R5(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function C5(){return navigator?.serviceWorker?.controller||null}function I5(){return PS()?self:null}const zS="firebaseLocalStorageDb",D5=1,Jd="firebaseLocalStorage",BS="fbase_key";class Du{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ah(i,e){return i.transaction([Jd],e?"readwrite":"readonly").objectStore(Jd)}function O5(){const i=indexedDB.deleteDatabase(zS);return new Du(i).toPromise()}function xg(){const i=indexedDB.open(zS,D5);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Jd,{keyPath:BS})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Jd)?e(s):(s.close(),await O5(),e(await xg()))})})}async function Ub(i,e,n){const s=Ah(i,!0).put({[BS]:e,value:n});return new Du(s).toPromise()}async function N5(i,e){const n=Ah(i,!1).get(e),s=await new Du(n).toPromise();return s===void 0?null:s.value}function Pb(i,e){const n=Ah(i,!0).delete(e);return new Du(n).toPromise()}const M5=800,k5=3;class FS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>k5)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return PS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xh._getInstance(I5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await R5(),!this.activeServiceWorker)return;this.sender=new x5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||C5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xg();return await Ub(e,Xd,"1"),await Pb(e,Xd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Ub(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>N5(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Pb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Ah(o,!1).getAll();return new Du(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),M5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}FS.type="LOCAL";const j5=FS;new Cu(3e4,6e4);function V5(i,e){return e?wi(e):(Pe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Cp extends xp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return vo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function L5(i){return kS(i.auth,new Cp(i),i.bypassAuthState)}function U5(i){const{auth:e,user:n}=i;return Pe(n,e,"internal-error"),f5(n,new Cp(i),i.bypassAuthState)}async function P5(i){const{auth:e,user:n}=i;return Pe(n,e,"internal-error"),h5(n,new Cp(i),i.bypassAuthState)}class qS{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:d,type:m}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return L5;case"linkViaPopup":case"linkViaRedirect":return P5;case"reauthViaPopup":case"reauthViaRedirect":return U5;default:wr(this.auth,"internal-error")}}resolve(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const z5=new Cu(2e3,1e4);class mo extends qS{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,mo.currentPopupAction&&mo.currentPopupAction.cancel(),mo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){Ni(this.filter.length===1,"Popup operations only handle one event");const e=Rp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,z5.get())};e()}}mo.currentPopupAction=null;const B5="pendingRedirect",Dd=new Map;class F5 extends qS{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Dd.get(this.auth._key());if(!e){try{const s=await q5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Dd.set(this.auth._key(),e)}return this.bypassAuthState||Dd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function q5(i,e){const n=Q5(e),s=G5(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function H5(i,e){Dd.set(i._key(),e)}function G5(i){return wi(i._redirectPersistence)}function Q5(i){return Id(B5,i.config.apiKey,i.name)}async function Y5(i,e,n=!1){if(Er(i.app))return Promise.reject(Ss(i));const s=Fo(i),o=V5(s,e),d=await new F5(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}const K5=600*1e3;class $5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!W5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!HS(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Zr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=K5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zb(e))}saveEventToCache(e){this.cachedEventUids.add(zb(e)),this.lastProcessedEventTime=Date.now()}}function zb(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function HS({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function W5(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HS(i);default:return!1}}async function X5(i,e={}){return ks(i,"GET","/v1/projects",e)}const J5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Z5=/^https?/;async function eO(i){if(i.config.emulator)return;const{authorizedDomains:e}=await X5(i);for(const n of e)try{if(tO(n))return}catch{}wr(i,"unauthorized-domain")}function tO(i){const e=Sg(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!Z5.test(n))return!1;if(J5.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const nO=new Cu(3e4,6e4);function Bb(){const i=ei().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function rO(i){return new Promise((e,n)=>{function s(){Bb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Bb(),n(Zr(i,"network-request-failed"))},timeout:nO.get()})}if(ei().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ei().gapi?.load)s();else{const o=$D("iframefcb");return ei()[o]=()=>{gapi.load?s():n(Zr(i,"network-request-failed"))},IS(`${KD()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw Od=null,e})}let Od=null;function iO(i){return Od=Od||rO(i),Od}const sO=new Cu(5e3,15e3),aO="__/auth/iframe",oO="emulator/auth/iframe",lO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cO(i){const e=i.config;Pe(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Tp(e,oO):`https://${i.config.authDomain}/${aO}`,s={apiKey:e.apiKey,appName:i.name,v:jo},o=uO.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${bu(s).slice(1)}`}async function dO(i){const e=await iO(i),n=ei().gapi;return Pe(n,i,"internal-error"),e.open({where:document.body,url:cO(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lO,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const d=Zr(i,"network-request-failed"),m=ei().setTimeout(()=>{u(d)},sO.get());function p(){ei().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(d)})}))}const hO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fO=500,mO=600,gO="_blank",pO="http://localhost";class Fb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yO(i,e,n,s=fO,o=mO){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p={...hO,width:s.toString(),height:o.toString(),top:u,left:d},y=Sn().toLowerCase();n&&(m=TS(y)?gO:n),bS(y)&&(e=e||pO,p.scrollbars="yes");const E=Object.entries(p).reduce((x,[M,H])=>`${x}${M}=${H},`,"");if(PD(y)&&m!=="_self")return _O(e||"",m),new Fb(null);const T=window.open(e||"",m,E);Pe(T,i,"popup-blocked");try{T.focus()}catch{}return new Fb(T)}function _O(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const vO="__/auth/handler",bO="emulator/auth/handler",EO=encodeURIComponent("fac");async function qb(i,e,n,s,o,u){Pe(i.config.authDomain,i,"auth-domain-config-required"),Pe(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:jo,eventId:o};if(e instanceof NS){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",HA(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))d[E]=T}if(e instanceof Iu){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(d.scopes=E.join(","))}i.tenantId&&(d.tid=i.tenantId);const m=d;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const p=await i._getAppCheckToken(),y=p?`#${EO}=${encodeURIComponent(p)}`:"";return`${TO(i)}?${bu(m).slice(1)}${y}`}function TO({config:i}){return i.emulator?Tp(i,bO):`https://${i.authDomain}/${vO}`}const $m="webStorageSupport";class SO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=US,this._completeRedirectFn=Y5,this._overrideRedirectResult=H5}async _openPopup(e,n,s,o){Ni(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await qb(e,n,s,Sg(),o);return yO(e,u,Rp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await qb(e,n,s,Sg(),o);return A5(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Ni(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await dO(e),s=new $5(e);return n.register("authEvent",o=>(Pe(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($m,{type:$m},o=>{const u=o?.[0]?.[$m];u!==void 0&&n(!!u),wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=eO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return RS()||ES()||wp()}}const wO=SO;var Hb="@firebase/auth",Gb="1.12.0";class xO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function AO(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RO(i){bo(new fa("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=s.options;Pe(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CS(i)},y=new GD(s,o,u,p);return t5(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),bo(new fa("auth-internal",e=>{const n=Fo(e.getProvider("auth").getImmediate());return(s=>new xO(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bs(Hb,Gb,AO(i)),bs(Hb,Gb,"esm2020")}const CO=300,IO=SE("authIdTokenMaxAge")||CO;let Qb=null;const DO=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>IO)return;const o=n?.token;Qb!==o&&(Qb=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function OO(i=IE()){const e=Bg(i,"auth");if(e.isInitialized())return e.getImmediate();const n=e5(i,{popupRedirectResolver:wO,persistence:[j5,S5,US]}),s=SE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=DO(u.toString());_5(n,d,()=>d(n.currentUser)),y5(n,m=>d(m))}}const o=EE("auth");return o&&n5(n,`http://${o}`),n}function NO(){return document.getElementsByTagName("head")?.[0]??document}QD({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=Zr("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",NO().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RO("Browser");function Ou(){const i=OO(Ms);async function e(){return!1}async function n(m,p){return p5(i,m,p)}function s(){return b5(i)}function o(m){v5(i,p=>{m(p)})}function u(){return i.currentUser}return{set_user_listener:o,delete_firebase_user:e,login_firebase_user:n,logout_firebase_user:s,get_current_firebase_user:u}}const GS=j.createContext({currentBudget:null,loading:!1,error:null,isOwner:!1,isAdmin:!1,isTest:!1,currentUserId:null,isInitialized:!1,accounts:[],accountGroups:[],categories:[],categoryGroups:[],budgetUserIds:[],acceptedUserIds:[],pendingInvites:[],hasPendingInvites:!1,needsFirstBudget:!1,accessibleBudgets:[],ensureBudgetLoaded:async()=>{},refreshBudget:async()=>{},inviteUserToBudget:async()=>{},revokeUserFromBudget:async()=>{},checkBudgetInvite:async()=>null,acceptBudgetInvite:async()=>{},loadAccessibleBudgets:async()=>{},switchToBudget:async()=>{},createNewBudget:async()=>{},renameBudget:async()=>{},setAccounts:()=>{},setAccountGroups:()=>{},setCategories:()=>{},setCategoryGroups:()=>{},saveBudgetData:async()=>{}});function MO({children:i}){const e=Ou(),[n,s]=j.useState(null),[o,u]=j.useState(!1),[d,m]=j.useState(null),[p,y]=j.useState(!1),E=j.useRef(null),[T,x]=j.useState([]),[M,H]=j.useState([]),[F,C]=j.useState([]),[ne,B]=j.useState([]),[ue,Ee]=j.useState([]),[Te,Re]=j.useState([]),[D,A]=j.useState([]),[R,k]=j.useState([]),[U,z]=j.useState(!1),[I,Ye]=j.useState(!1),[at,ee]=j.useState(!1),ye=ba(Ms),he=e.get_current_firebase_user();async function ke(){if(!he)throw new Error("Not authenticated");const W=Xe(ye,"users",he.uid);try{const le=await Je(W);if(le.exists())return le.data();const N={uid:he.uid,email:he.email||null,budget_ids:[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return await St(W,N),N}catch(le){throw console.error("[BudgetContext] Error getting/creating user doc:",le),le}}async function Ue(){if(!he){s(null),x([]),H([]),C([]),B([]),Ee([]),Re([]),A([]),k([]),z(!1),u(!1),y(!1),E.current=null;return}u(!0),m(null);try{let W=null,le=!1;try{W=await ke();const q=W?.permission_flags;Ye(q?.is_admin===!0),ee(q?.is_test===!0)}catch(q){console.warn("[BudgetContext] Failed to get user doc, falling back to old approach:",q),le=!0,Ye(!1),ee(!1)}const N=[];try{const q=xd(ye,"budgets"),te=Qm(q,Ym("user_ids","array-contains",he.uid)),Z=await Rd(te);for(const oe of Z.docs){const se=oe.data(),be=se.user_ids?.includes(he.uid),ve=se.accepted_user_ids?.includes(he.uid),Ve=W?.budget_ids?.includes(oe.id);be&&!ve&&!Ve&&N.push({budgetId:oe.id,budgetName:se.name||"Unnamed Budget",ownerEmail:se.owner_email||null})}}catch(q){console.warn("[BudgetContext] Could not check for pending invites:",q)}if(A(N),le||W&&W.budget_ids.length===0){const q=xd(ye,"budgets"),te=Qm(q,Ym("user_ids","array-contains",he.uid)),oe=(await Rd(te)).docs.filter(se=>se.data().accepted_user_ids?.includes(he.uid));if(oe.length>0){const se=oe[0],be=se.data();await O(se.id,be)}else N.length>0?(s(null),x([]),H([]),C([]),B([]),Ee([]),Re([]),z(!1)):(s(null),x([]),H([]),C([]),B([]),Ee([]),Re([]),z(!0))}else if(W&&W.budget_ids.length>0){const q=W.budget_ids[0],te=Xe(ye,"budgets",q),Z=await Je(te);if(!Z.exists())throw new Error(`Budget ${q} not found`);await O(Z.id,Z.data())}E.current=he.uid,y(!0)}catch(W){console.error("[BudgetContext] Error loading budget:",W),m(W instanceof Error?W.message:"Failed to load budget")}finally{u(!1)}}async function O(W,le){s({id:W,name:le.name,user_ids:le.user_ids||[],accepted_user_ids:le.accepted_user_ids||[],owner_id:le.owner_id||le.user_ids?.[0]||he.uid,owner_email:le.owner_email||null}),Ee(le.user_ids||[]),Re(le.accepted_user_ids||[]);const N=(le.accounts||[]).map(oe=>({id:oe.id,nickname:oe.nickname,balance:oe.balance,account_group_id:oe.account_group_id??null,sort_order:oe.sort_order??0}));N.sort((oe,se)=>oe.sort_order-se.sort_order),x(N);const q=(le.account_groups||[]).map(oe=>({id:oe.id,name:oe.name,sort_order:oe.sort_order??0,expected_balance:oe.expected_balance??"positive"}));q.sort((oe,se)=>oe.sort_order-se.sort_order),H(q);const te=(le.categories||[]).map(oe=>({id:oe.id,name:oe.name,category_group_id:oe.category_group_id??null,sort_order:oe.sort_order??0}));te.sort((oe,se)=>oe.sort_order-se.sort_order),C(te);const Z=(le.category_groups||[]).map(oe=>({id:oe.id,name:oe.name,sort_order:oe.sort_order??0}));Z.sort((oe,se)=>oe.sort_order-se.sort_order),B(Z)}async function L(){he&&(p&&E.current===he.uid||await Ue())}async function Q(W){if(!(!n||!he))try{const le=Xe(ye,"budgets",n.id),N=await Je(le);if(N.exists()){const q=N.data();if(q.user_ids?.includes(W))throw new Error("User is already invited to this budget");const te=[...q.user_ids||[],W];await St(le,{...q,user_ids:te}),s({...n,user_ids:te}),Ee(te)}}catch(le){throw new Error(le instanceof Error?le.message:"Failed to invite user")}}async function Y(W){if(!(!n||!he))try{const le=Xe(ye,"budgets",n.id),N=await Je(le);if(N.exists()){const q=N.data(),te=(q.user_ids||[]).filter(oe=>oe!==W),Z=(q.accepted_user_ids||[]).filter(oe=>oe!==W);await St(le,{...q,user_ids:te,accepted_user_ids:Z}),s({...n,user_ids:te,accepted_user_ids:Z}),Ee(te),Re(Z)}}catch(le){throw new Error(le instanceof Error?le.message:"Failed to revoke user access")}}async function fe(W){if(!he)return null;try{const le=Xe(ye,"budgets",W),N=await Je(le);if(!N.exists())return null;const q=N.data();return!q.user_ids?.includes(he.uid)||(await ke()).budget_ids.includes(W)?null:{budgetId:N.id,budgetName:q.name,ownerEmail:q.owner_email||null}}catch{return null}}async function we(W){if(he)try{const le=Xe(ye,"budgets",W),N=await Je(le);if(!N.exists())throw new Error("Budget not found");const q=N.data();if(!q.user_ids?.includes(he.uid))throw new Error("You have not been invited to this budget");const te=await ke();if(te.budget_ids.includes(W))throw new Error("You have already accepted this invite");await St(Xe(ye,"users",he.uid),{...te,budget_ids:[...te.budget_ids,W],updated_at:new Date().toISOString()});const Z=[...q.accepted_user_ids||[],he.uid];await St(le,{...q,accepted_user_ids:Z}),E.current=null,await Ue()}catch(le){throw new Error(le instanceof Error?le.message:"Failed to accept invite")}}async function Ie(){if(n)try{const W=Xe(ye,"budgets",n.id),le=await Je(W);if(le.exists()){const N=le.data();await St(W,{...N,accounts:T,account_groups:M,categories:F,category_groups:ne})}}catch(W){throw new Error(W instanceof Error?W.message:"Failed to save budget data")}}async function je(){if(!he){k([]);return}try{const W=[];let le=null;try{le=await ke()}catch{console.warn("[BudgetContext] Could not get user doc for accessible budgets")}const N=xd(ye,"budgets"),q=Qm(N,Ym("user_ids","array-contains",he.uid)),te=await Rd(q);for(const Z of te.docs){const oe=Z.data(),se=oe.accepted_user_ids?.includes(he.uid)||le?.budget_ids?.includes(Z.id),be=oe.owner_id===he.uid;W.push({id:Z.id,name:oe.name||"Unnamed Budget",ownerEmail:oe.owner_email||null,isOwner:be,isPending:!se})}W.sort((Z,oe)=>Z.isOwner!==oe.isOwner?Z.isOwner?-1:1:Z.isPending!==oe.isPending?Z.isPending?1:-1:Z.name.localeCompare(oe.name)),k(W)}catch(W){console.error("[BudgetContext] Error loading accessible budgets:",W)}}async function Be(W){if(he){u(!0),m(null);try{const le=Xe(ye,"budgets",W),N=await Je(le);if(!N.exists())throw new Error("Budget not found");const q=N.data();if(!(q.accepted_user_ids?.includes(he.uid)||q.owner_id===he.uid))throw new Error("You do not have access to this budget. Please accept the invite first.");try{const Z=Xe(ye,"users",he.uid),oe=await Je(Z);if(oe.exists()){const se=oe.data(),be=[W,...se.budget_ids.filter(ve=>ve!==W)];await St(Z,{...se,budget_ids:be,updated_at:new Date().toISOString()})}}catch(Z){console.warn("[BudgetContext] Could not update user doc primary budget:",Z)}await O(W,q),E.current=he.uid}catch(le){throw console.error("[BudgetContext] Error switching budget:",le),m(le instanceof Error?le.message:"Failed to switch budget"),le}finally{u(!1)}}}async function mt(W){if(!he)return;const le=W?.trim()||"My Budget";u(!0),m(null);try{const N=`budget_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,q={id:N,name:le,user_ids:[he.uid],accepted_user_ids:[he.uid],owner_id:he.uid,owner_email:he.email||null};await St(Xe(ye,"budgets",N),{name:q.name,user_ids:q.user_ids,accepted_user_ids:q.accepted_user_ids,owner_id:q.owner_id,owner_email:q.owner_email,accounts:[],account_groups:[],categories:[],category_groups:[],created_at:new Date().toISOString()});try{const te=Xe(ye,"users",he.uid),Z=await Je(te);if(Z.exists()){const oe=Z.data();await St(te,{...oe,budget_ids:[N,...oe.budget_ids],updated_at:new Date().toISOString()})}else await St(te,{uid:he.uid,email:he.email||null,budget_ids:[N],created_at:new Date().toISOString(),updated_at:new Date().toISOString()})}catch(te){console.warn("[BudgetContext] Could not update user doc:",te)}s(q),x([]),H([]),C([]),B([]),Ee([he.uid]),Re([he.uid]),A([]),z(!1),E.current=he.uid}catch(N){throw console.error("[BudgetContext] Error creating new budget:",N),m(N instanceof Error?N.message:"Failed to create new budget"),N}finally{u(!1)}}async function Vt(W){if(!he||!n)return;if(n.owner_id!==he.uid)throw new Error("Only the budget owner can rename the budget");const le=W.trim();if(!le)throw new Error("Budget name cannot be empty");try{const N=Xe(ye,"budgets",n.id),q=await Je(N);if(!q.exists())throw new Error("Budget not found");const te=q.data();await St(N,{...te,name:le}),s({...n,name:le})}catch(N){throw console.error("[BudgetContext] Error renaming budget:",N),new Error(N instanceof Error?N.message:"Failed to rename budget")}}const de=!!(n&&he&&n.owner_id===he.uid),_e=D.length>0;return g.jsx(GS.Provider,{value:{currentBudget:n,loading:o,error:d,isOwner:de,isAdmin:I,isTest:at,currentUserId:he?.uid||null,isInitialized:p,accounts:T,accountGroups:M,categories:F,categoryGroups:ne,budgetUserIds:ue,acceptedUserIds:Te,pendingInvites:D,hasPendingInvites:_e,needsFirstBudget:U,accessibleBudgets:R,ensureBudgetLoaded:L,refreshBudget:Ue,inviteUserToBudget:Q,revokeUserFromBudget:Y,checkBudgetInvite:fe,acceptBudgetInvite:we,loadAccessibleBudgets:je,switchToBudget:Be,createNewBudget:mt,renameBudget:Vt,setAccounts:x,setAccountGroups:H,setCategories:C,setCategoryGroups:B,saveBudgetData:Ie},children:i})}function ki(){return j.useContext(GS)}function kO(){return g.jsxs("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:[g.jsx("h1",{children:"Welcome"}),g.jsx("nav",{children:g.jsxs("ul",{children:[g.jsx("li",{children:g.jsx(Bt,{to:"/sql-test",children:"SQL Test"})}),g.jsx("li",{children:g.jsx(Bt,{to:"/budget",children:"Budget"})}),g.jsx("li",{children:g.jsx(Bt,{to:"/account",children:"Account"})})]})})]})}function jO(){return g.jsxs("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:[g.jsx("nav",{children:g.jsx(Bt,{to:"/",children:" Back to Home"})}),g.jsx("h1",{children:"SQL Test"}),g.jsx("h2",{children:"Setup"}),g.jsxs("h3",{children:["1. Open up your preferred web browser to ",g.jsx("a",{href:"https://www.programiz.com/sql/online-compiler/",target:"_blank",rel:"noopener noreferrer",children:"https://www.programiz.com/sql/online-compiler/"})]}),g.jsxs("ul",{children:[g.jsx("li",{children:"This is a basic online sql query editor"}),g.jsxs("li",{children:["It will include three tables: ",g.jsx("b",{children:'"Customer"'}),", ",g.jsx("b",{children:'"Orders"'}),", and ",g.jsx("b",{children:'"Shippings"'})]})]}),g.jsx("h3",{children:"2. Run the below query block inside the online editor to make some updates to the schema."}),g.jsx("pre",{style:{backgroundColor:"#1a1a1a",padding:"1rem",borderRadius:"8px",overflow:"auto"},children:g.jsx("code",{children:`ALTER TABLE shippings
ADD order_id INT;

UPDATE shippings
SET order_id = CASE
  WHEN shipping_id = 1 THEN 5
    WHEN shipping_id = 2 THEN 1
    WHEN shipping_id = 3 THEN 3
    WHEN shipping_id = 4 THEN 6
    WHEN shipping_id = 5 THEN 4
END
WHERE shipping_id IN (1,2,3,4,5);

INSERT INTO shippings (shipping_id, status, customer, order_id)
VALUES (6, "Cancelled", 4, 2);

INSERT INTO orders (order_id, item, amount, customer_id)
VALUES (6, "Monitor", 800, 5);`})}),g.jsx("h2",{children:"SQL Problems"}),g.jsx("p",{children:"Write queries in the online editor to answer these questions."}),g.jsx("h3",{children:"Question #1"}),g.jsx("p",{children:'Calculate the total number of orders, the total $ amount, and the total items "delivered" by Country. Show the following columns: country, order count, total $ amount, and total delivered. Order by total $ amount largest to smallest.'}),g.jsx("h3",{children:"Question #2"}),g.jsx("p",{children:"Find the customers who have placed orders with the HIGHEST total amount for each country. One record per country. Display the customer's first name, last name, country, and the corresponding highest total order amount. Also include the shipping status of the associated order."})]})}function VO(){const i=j.useContext(_u),e=Ou(),[n,s]=j.useState(!1),o=lr(),u=Mg(),d=o.state?.from||"/";j.useEffect(()=>{i.is_logged_in&&d!=="/"&&u(d,{replace:!0})},[i.is_logged_in,d,u]);function m(){s(!0),e.logout_firebase_user().then(function(){s(!1)})}return g.jsxs("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:[g.jsx("h1",{children:"Account"}),i.is_logged_in?n?g.jsx("p",{children:"Logging Out..."}):g.jsxs(g.Fragment,{children:[g.jsxs("p",{children:["You are logged in as ",i.username]}),g.jsx("button",{onClick:m,style:{marginTop:"1rem"},children:"Logout"})]}):g.jsx(LO,{}),g.jsx("p",{children:g.jsx(Bt,{to:"/",children:"Back to Home"})})]})}function LO(){const i=Ou(),[e,n]=j.useState(""),[s,o]=j.useState(""),[u,d]=j.useState(!1),[m,p]=j.useState("");function y(x){n(x.target.value)}function E(x){o(x.target.value)}function T(x){x.preventDefault(),d(!0),p(""),i.login_firebase_user(e,s).then(function(){}).catch(function(){p("Incorrect login credentials")}).finally(function(){d(!1)})}return g.jsxs("form",{onSubmit:T,children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"username",children:"Email: "}),g.jsx("input",{id:"username",type:"email",value:e,onChange:y})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"password",children:"Password: "}),g.jsx("input",{id:"password",type:"password",value:s,onChange:E})]}),u?g.jsx("p",{children:"Logging in..."}):g.jsx("button",{children:"Login"}),m&&g.jsx("p",{style:{color:"red"},children:m})]})}const He={primary:"#646cff",primaryLight:"#a5b4fc",error:"#f87171",errorBg:"rgba(220, 38, 38, 0.1)",errorBorder:"rgba(220, 38, 38, 0.3)",success:"#4ade80",danger:"#f87171",warning:"#facc15"},UO={maxWidth:"60rem",margin:"0 auto",padding:"2rem"},Wm={marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},Nu={background:"color-mix(in srgb, currentColor 8%, transparent)",padding:"1rem 1.25rem",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"},PO={...Nu,padding:"0.6rem 0.875rem",gap:"0.5rem"},zO={background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1rem 1.5rem",borderRadius:"8px",marginBottom:"1.5rem"},BO={background:"color-mix(in srgb, currentColor 8%, transparent)",padding:"1.25rem",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"1rem"},FO={display:"flex",flexDirection:"column",gap:"0.5rem"},qO={fontSize:"0.9rem",fontWeight:500},Ip={padding:"0.6rem 0.8rem",borderRadius:"6px",border:"1px solid color-mix(in srgb, currentColor 20%, transparent)",background:"color-mix(in srgb, currentColor 5%, transparent)",fontSize:"1rem",color:"inherit"},HO={...Ip,cursor:"pointer"},Dp={padding:"0.6rem 1.25rem",borderRadius:"6px",cursor:"pointer",fontWeight:500,fontSize:"0.9rem",transition:"opacity 0.15s"},QS={...Dp,background:He.primary,color:"white",border:"none"},GO={...QS,padding:"0.75rem 1.5rem",borderRadius:"8px"},QO={...Dp,background:"transparent",border:"1px solid color-mix(in srgb, currentColor 30%, transparent)"},YO={...Dp,background:"transparent",border:`1px solid ${He.errorBorder}`,color:He.error},KO={background:"transparent",border:"1px solid color-mix(in srgb, currentColor 25%, transparent)",padding:"0.35rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",opacity:.8,transition:"opacity 0.15s"},$O={display:"flex",gap:"0.5rem"},WO={display:"flex",gap:"0.25rem"},YS={background:"transparent",border:"1px solid color-mix(in srgb, currentColor 20%, transparent)",padding:"0.35rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center",minWidth:"2rem",minHeight:"2rem",transition:"opacity 0.15s, border-color 0.15s"},XO={...YS,borderColor:He.errorBorder,color:He.error},Io={background:"transparent",border:"1px solid color-mix(in srgb, currentColor 15%, transparent)",padding:"0.25rem 0.35rem",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center",opacity:.6,transition:"opacity 0.15s, background 0.15s"},Op={display:"flex",flexDirection:"column",gap:"2px"},JO={display:"flex",gap:"0.75rem",marginTop:"0.5rem"},KS={opacity:.4,cursor:"grab"},$S={position:"absolute",top:"-4px",left:0,right:0,height:"3px",background:He.primary,borderRadius:"2px",transition:"opacity 0.15s"},ZO={position:"relative",height:"2rem",marginTop:"-0.25rem"},eN={position:"absolute",top:"50%",left:0,right:0,height:"3px",background:He.primary,borderRadius:"2px",transition:"opacity 0.15s"},tN={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"0.75rem",opacity:.7,background:"var(--background, #1a1a1a)",padding:"0 0.5rem",whiteSpace:"nowrap"},nN={background:He.errorBg,border:`1px solid ${He.errorBorder}`,color:He.error,padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"},rN={background:"transparent",border:"none",color:He.error,cursor:"pointer",fontSize:"1.2rem",padding:"0 0.25rem",lineHeight:1},Rh={opacity:.7,marginBottom:"1.5rem"},Zd={margin:0,fontSize:"0.85rem",textTransform:"uppercase",letterSpacing:"0.5px",opacity:.6},eh={fontWeight:500,fontSize:"1.1rem"},iN={margin:0,fontSize:"0.9rem",opacity:.7},sN={margin:"0.25rem 0 0 0",fontSize:"1.5rem",fontWeight:600},Do={display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"1.5rem"};function Xm({children:i}){return g.jsx("div",{style:UO,children:i})}function Ch({message:i,children:e,onDismiss:n,style:s}){return g.jsxs("div",{style:{...nN,...s},children:[g.jsx("span",{children:e??i}),n&&g.jsx("button",{onClick:n,style:rN,children:""})]})}const aN={primary:QS,"primary-large":GO,secondary:QO,danger:YO,small:KO};function dt({variant:i="primary",isLoading:e,loadingText:n="Saving...",children:s,disabled:o,style:u,...d}){const m=aN[i],p=o||e;return g.jsx("button",{disabled:p,style:{...m,cursor:p?"not-allowed":"pointer",opacity:p?.7:1,...u},...d,children:e?n:s})}function Mu({children:i,onSubmit:e}){return g.jsx("form",{onSubmit:e,style:BO,children:i})}function ya({label:i,htmlFor:e,children:n,hint:s}){return g.jsxs("div",{style:FO,children:[g.jsx("label",{htmlFor:e,style:qO,children:i}),n,s&&g.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.85rem",opacity:.6},children:s})]})}function Ih(i){return g.jsx("input",{style:Ip,...i})}function Np({children:i,...e}){return g.jsx("select",{style:HO,...e,children:i})}function WS({minHeight:i="6rem",style:e,...n}){return g.jsx("textarea",{style:{...Ip,width:"100%",minHeight:i,resize:"vertical",fontFamily:"inherit",boxSizing:"border-box",...e},...n})}function Ho({children:i}){return g.jsx("div",{style:JO,children:i})}const oN=640;function Mp(i=oN){const[e,n]=j.useState(()=>typeof window>"u"?!1:window.innerWidth<i);return j.useEffect(()=>{function s(){n(window.innerWidth<i)}return window.addEventListener("resize",s),s(),()=>window.removeEventListener("resize",s)},[i]),e}function th({children:i,isDragging:e,isDragOver:n,onDragStart:s,onDragOver:o,onDragLeave:u,onDragEnd:d,onDrop:m,onEdit:p,onDelete:y,onMoveUp:E,onMoveDown:T,canMoveUp:x=!0,canMoveDown:M=!0}){const H=Mp(),F=E||T;return g.jsxs("div",{onDragOver:C=>{C.stopPropagation(),o(C)},onDragLeave:C=>{C.stopPropagation(),u()},onDrop:C=>{C.stopPropagation(),m(C)},style:{position:"relative"},children:[g.jsx("div",{style:{...$S,opacity:n?1:0,boxShadow:n?"0 0 8px rgba(100, 108, 255, 0.6)":"none"}}),g.jsxs("div",{draggable:!0,onDragStart:s,onDragEnd:d,style:{...H?PO:Nu,cursor:"grab",opacity:e?.5:1},children:[g.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",gap:H?"0.5rem":"0.75rem",minWidth:0},children:[g.jsx("span",{style:{...KS,fontSize:H?"0.9rem":void 0},children:""}),g.jsx("div",{style:{flex:1,minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},children:i})]}),g.jsxs("div",{style:H?WO:$O,children:[H?g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:p,style:YS,title:"Edit","aria-label":"Edit",children:""}),g.jsx("button",{onClick:y,style:XO,title:"Delete","aria-label":"Delete",children:""})]}):g.jsxs(g.Fragment,{children:[g.jsx(dt,{variant:"secondary",onClick:p,children:"Edit"}),g.jsx(dt,{variant:"danger",onClick:y,children:"Delete"})]}),F&&g.jsxs("div",{style:Op,children:[g.jsx("button",{onClick:C=>{C.stopPropagation(),E?.()},disabled:!x,style:{...Io,opacity:x?.6:.2,cursor:x?"pointer":"default"},title:"Move up","aria-label":"Move up",children:""}),g.jsx("button",{onClick:C=>{C.stopPropagation(),T?.()},disabled:!M,style:{...Io,opacity:M?.6:.2,cursor:M?"pointer":"default"},title:"Move down","aria-label":"Move down",children:""})]})]})]})]})}function kp({isActive:i,onDragOver:e,onDragLeave:n,onDrop:s,label:o="Move to end"}){return g.jsxs("div",{onDragOver:e,onDragLeave:n,onDrop:s,style:ZO,children:[g.jsx("div",{style:{...eN,opacity:i?1:.3,boxShadow:i?"0 0 8px rgba(100, 108, 255, 0.6)":"none"}}),i&&g.jsx("span",{style:tN,children:o})]})}function lN({label:i,value:e,valueColor:n}){return g.jsxs("div",{children:[g.jsx("p",{style:iN,children:i}),g.jsx("p",{style:{...sN,color:n},children:e})]})}function XS({children:i,style:e}){return g.jsx("div",{style:{...zO,...e},children:i})}function ua(i){return`$${i.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function Ti(i){return i>=0?He.success:He.danger}function Ag({isOpen:i,onClose:e,title:n,children:s,maxWidth:o="28rem"}){return i?g.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1001,padding:"1rem"},onClick:e,children:g.jsxs("div",{style:{background:"#1a1a1a",color:"rgba(255, 255, 255, 0.87)",borderRadius:"12px",padding:"1.5rem",width:"100%",maxWidth:o,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)"},onClick:u=>u.stopPropagation(),children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[g.jsx("h2",{style:{margin:0,fontSize:"1.25rem"},children:n}),g.jsx("button",{onClick:e,style:{background:"transparent",border:"none",color:"inherit",cursor:"pointer",fontSize:"1.5rem",opacity:.6,lineHeight:1},children:""})]}),s]})}):null}const uN={critical_bug:{label:"Critical Bug",color:"#ff4757",bgColor:"rgba(255, 71, 87, 0.15)"},bug:{label:"Bug",color:"#ffa502",bgColor:"rgba(255, 165, 2, 0.15)"},feature:{label:"Feature",color:"#2ed573",bgColor:"rgba(46, 213, 115, 0.15)"}};function cN(){const[i,e]=j.useState(!1),[n,s]=j.useState(""),[o,u]=j.useState("bug"),[d,m]=j.useState(!1),[p,y]=j.useState(!1),[E,T]=j.useState(null),x=j.useContext(_u),M=lr(),H=ba(Ms);if(M.pathname.includes("/admin/feedback")||!x.is_logged_in)return null;async function C(ne){if(ne.preventDefault(),!(!n.trim()||!x.username)){m(!0),T(null);try{const B=x.username.replace(/[.@]/g,"_"),ue=Xe(H,"feedback",B),Ee={id:`feedback_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,text:n.trim(),created_at:new Date().toISOString(),is_done:!1,completed_at:null,sort_order:Date.now(),feedback_type:o};(await Je(ue)).exists()?await St(ue,{items:dS(Ee)},{merge:!0}):await St(ue,{user_email:x.username,items:[Ee]}),s(""),u("bug"),y(!0),setTimeout(()=>{y(!1),e(!1)},1500)}catch(B){T(B instanceof Error?B.message:"Failed to submit feedback")}finally{m(!1)}}}return g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:()=>e(!0),style:{position:"fixed",bottom:"1.5rem",right:"1.5rem",width:"3rem",height:"3rem",borderRadius:"50%",background:He.primary,color:"white",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.25rem",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",transition:"transform 0.15s, box-shadow 0.15s",zIndex:1e3},title:"Send Feedback",onMouseEnter:ne=>{ne.currentTarget.style.transform="scale(1.1)",ne.currentTarget.style.boxShadow="0 6px 16px rgba(0, 0, 0, 0.4)"},onMouseLeave:ne=>{ne.currentTarget.style.transform="scale(1)",ne.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.3)"},children:""}),g.jsx(Ag,{isOpen:i,onClose:()=>{e(!1),u("bug")},title:"Send Feedback",children:p?g.jsxs("div",{style:{textAlign:"center",padding:"2rem 0",color:He.success},children:[g.jsx("span",{style:{fontSize:"2rem",display:"block",marginBottom:"0.5rem"},children:""}),"Feedback submitted!"]}):g.jsxs("form",{onSubmit:C,children:[g.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:["critical_bug","bug","feature"].map(ne=>{const B=uN[ne],ue=o===ne;return g.jsx("button",{type:"button",onClick:()=>u(ne),style:{flex:1,padding:"0.6rem 0.5rem",border:`2px solid ${ue?B.color:"transparent"}`,borderRadius:"0.5rem",background:ue?B.bgColor:"rgba(255,255,255,0.05)",color:ue?B.color:"rgba(255,255,255,0.5)",cursor:"pointer",fontWeight:ue?600:400,fontSize:"0.8rem",transition:"all 0.15s ease"},children:B.label},ne)})}),g.jsx(WS,{value:n,onChange:ne=>s(ne.target.value),placeholder:"Share your feedback, bug reports, or feature requests...",minHeight:"8rem",autoFocus:!0,required:!0}),E&&g.jsx("p",{style:{color:He.error,fontSize:"0.85rem",margin:"0.5rem 0"},children:E}),g.jsxs(Ho,{children:[g.jsx(dt,{type:"button",variant:"secondary",onClick:()=>{e(!1),u("bug")},children:"Cancel"}),g.jsx(dt,{type:"submit",isLoading:d,disabled:!n.trim(),children:"Submit"})]})]})})]})}function dN({title:i,count:e,children:n,defaultExpanded:s=!1}){const[o,u]=j.useState(s);return g.jsxs("div",{style:{marginTop:"2rem"},children:[g.jsxs("button",{onClick:()=>u(!o),style:{background:"transparent",border:"none",color:"inherit",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0",fontSize:"0.9rem",opacity:.7},children:[g.jsx("span",{style:{transition:"transform 0.2s",transform:o?"rotate(90deg)":"rotate(0deg)"},children:""}),i,e!==void 0&&` (${e})`]}),o&&n]})}function Rg(i){return new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})}function hN(){const{currentBudget:i,isOwner:e,hasPendingInvites:n,pendingInvites:s,needsFirstBudget:o,acceptBudgetInvite:u,createNewBudget:d}=ki();return!i&&n?g.jsxs(Xm,{children:[g.jsx("nav",{style:Wm,children:g.jsx(Bt,{to:"/",children:" Back to Home"})}),g.jsx(mN,{invites:s,onAccept:u,onCreateNew:d})]}):!i&&o?g.jsxs(Xm,{children:[g.jsx("nav",{style:Wm,children:g.jsx(Bt,{to:"/",children:" Back to Home"})}),g.jsx(fN,{onCreateNew:d})]}):g.jsxs(Xm,{children:[g.jsxs("nav",{style:Wm,children:[g.jsx(Bt,{to:"/",children:" Back to Home"}),g.jsx(Bt,{to:"/budget/admin",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"2.5rem",height:"2.5rem",borderRadius:"8px",background:"color-mix(in srgb, currentColor 8%, transparent)",textDecoration:"none",fontSize:"1.25rem",transition:"background 0.15s"},title:e?"Admin Settings":"Budget Settings",children:""})]}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[g.jsx("h1",{style:{margin:0},children:"Budget"}),i&&g.jsx("span",{style:{background:`color-mix(in srgb, ${He.primary} 15%, transparent)`,color:He.primaryLight,padding:"0.25rem 0.75rem",borderRadius:"6px",fontSize:"0.85rem",fontWeight:500},children:i.name})]}),i&&g.jsxs("p",{style:{opacity:.6,fontSize:"0.85rem",marginBottom:"1.5rem"},children:[i.user_ids.length," user",i.user_ids.length!==1?"s":""," ",e?" You are the owner":" Shared with you"]}),g.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"3rem",borderRadius:"12px",background:"color-mix(in srgb, currentColor 5%, transparent)",border:"1px dashed color-mix(in srgb, currentColor 20%, transparent)"},children:g.jsx("p",{style:{margin:0,opacity:.6,fontSize:"1.1rem"},children:"Content coming soon"})})]})}function fN({onCreateNew:i}){const[e,n]=j.useState(""),[s,o]=j.useState(!1),[u,d]=j.useState(null);async function m(p){p.preventDefault(),o(!0),d(null);try{await i(e.trim()||void 0)}catch(y){d(y instanceof Error?y.message:"Failed to create budget"),o(!1)}}return g.jsxs("div",{style:{maxWidth:"500px",margin:"0 auto"},children:[g.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Welcome!"}),g.jsx("p",{style:{opacity:.7,marginBottom:"2rem"},children:"You don't have any budgets yet. Create your first budget to get started."}),u&&g.jsxs("div",{style:{background:"rgba(220, 38, 38, 0.1)",border:"1px solid rgba(220, 38, 38, 0.3)",color:"#f87171",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[g.jsx("span",{children:u}),g.jsx("button",{onClick:()=>d(null),style:{background:"transparent",border:"none",color:"#f87171",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.25rem",lineHeight:1},children:""})]}),g.jsxs("div",{style:{background:"color-mix(in srgb, #646cff 8%, transparent)",border:"1px solid color-mix(in srgb, #646cff 25%, transparent)",padding:"2rem",borderRadius:"12px"},children:[g.jsxs("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx("span",{children:""})," Create Your Budget"]}),g.jsxs("form",{onSubmit:m,children:[g.jsxs("div",{style:{marginBottom:"1.5rem"},children:[g.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",opacity:.8},children:"Budget Name"}),g.jsx("input",{type:"text",value:e,onChange:p=>n(p.target.value),placeholder:"My Budget",autoFocus:!0,style:{width:"100%",padding:"0.75rem 1rem",borderRadius:"8px",border:"1px solid color-mix(in srgb, currentColor 25%, transparent)",background:"color-mix(in srgb, currentColor 5%, transparent)",fontSize:"1rem",color:"inherit",boxSizing:"border-box"}}),g.jsx("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.8rem",opacity:.5},children:"You can always rename this later"})]}),g.jsx("button",{type:"submit",disabled:s,style:{width:"100%",background:He.primary,color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:s?"not-allowed":"pointer",fontWeight:600,opacity:s?.7:1,fontSize:"1rem"},children:s?"Creating...":"Create Budget"})]})]}),g.jsx("p",{style:{marginTop:"1.5rem",textAlign:"center",fontSize:"0.85rem",opacity:.6},children:"If someone has invited you to their budget, you can accept the invitation from the budget settings page after creating your account."})]})}function mN({invites:i,onAccept:e,onCreateNew:n}){const[s,o]=j.useState(null),[u,d]=j.useState(!1),[m,p]=j.useState(""),[y,E]=j.useState(!1),[T,x]=j.useState(null);async function M(F){o(F),x(null);try{await e(F)}catch(C){x(C instanceof Error?C.message:"Failed to accept invitation"),o(null)}}async function H(F){F.preventDefault(),E(!0),x(null);try{await n(m.trim()||void 0)}catch(C){x(C instanceof Error?C.message:"Failed to create new budget"),E(!1)}}return g.jsxs("div",{children:[g.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Welcome!"}),g.jsxs("p",{style:{opacity:.7,marginBottom:"2rem"},children:["You've been invited to join ",i.length===1?"a budget":"some budgets",". Choose one to get started!"]}),T&&g.jsxs("div",{style:{background:"rgba(220, 38, 38, 0.1)",border:"1px solid rgba(220, 38, 38, 0.3)",color:"#f87171",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[g.jsx("span",{children:T}),g.jsx("button",{onClick:()=>x(null),style:{background:"transparent",border:"none",color:"#f87171",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.25rem",lineHeight:1},children:""})]}),g.jsxs("div",{style:{background:"color-mix(in srgb, #f59e0b 8%, transparent)",border:"1px solid color-mix(in srgb, #f59e0b 25%, transparent)",padding:"1.5rem",borderRadius:"12px",marginBottom:"1.5rem"},children:[g.jsxs("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx("span",{children:""})," Budget Invitations"]}),g.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:i.map(F=>g.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 8%, transparent)",padding:"1rem 1.25rem",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[g.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[g.jsx("p",{style:{margin:"0 0 0.25rem 0",fontWeight:600,fontSize:"1.05rem"},children:F.budgetName}),F.ownerEmail&&g.jsxs("p",{style:{margin:0,fontSize:"0.85rem",opacity:.6},children:["From: ",F.ownerEmail]})]}),g.jsx("button",{onClick:()=>M(F.budgetId),disabled:s!==null||y,style:{background:"#22c55e",color:"white",border:"none",padding:"0.6rem 1.5rem",borderRadius:"8px",cursor:s!==null||y?"not-allowed":"pointer",fontWeight:500,opacity:s!==null||y?.7:1,fontSize:"0.9rem"},children:s===F.budgetId?"Joining...":"Accept & Join"})]},F.budgetId))})]}),g.jsx("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",border:"1px dashed color-mix(in srgb, currentColor 20%, transparent)",padding:"1.5rem",borderRadius:"12px"},children:u?g.jsxs("form",{onSubmit:H,children:[g.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem"},children:"Create Your Budget"}),g.jsxs("div",{style:{marginBottom:"1rem"},children:[g.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",opacity:.8},children:"Budget Name"}),g.jsx("input",{type:"text",value:m,onChange:F=>p(F.target.value),placeholder:"My Budget",autoFocus:!0,style:{width:"100%",padding:"0.6rem 0.8rem",borderRadius:"6px",border:"1px solid color-mix(in srgb, currentColor 25%, transparent)",background:"color-mix(in srgb, currentColor 5%, transparent)",fontSize:"0.95rem",color:"inherit",boxSizing:"border-box"}})]}),g.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[g.jsx("button",{type:"submit",disabled:y||s!==null,style:{background:He.primary,color:"white",border:"none",padding:"0.6rem 1.25rem",borderRadius:"6px",cursor:y||s!==null?"not-allowed":"pointer",fontWeight:500,opacity:y||s!==null?.7:1,fontSize:"0.9rem"},children:y?"Creating...":"Create Budget"}),g.jsx("button",{type:"button",onClick:()=>{d(!1),p("")},disabled:y,style:{background:"transparent",color:"inherit",border:"1px solid color-mix(in srgb, currentColor 30%, transparent)",padding:"0.6rem 1.25rem",borderRadius:"6px",cursor:y?"not-allowed":"pointer",fontWeight:500,opacity:y?.7:.8,fontSize:"0.9rem"},children:"Cancel"})]})]}):g.jsxs("div",{style:{textAlign:"center"},children:[g.jsx("p",{style:{margin:"0 0 1rem 0",opacity:.7},children:"Or start fresh with your own budget"}),g.jsx("button",{onClick:()=>d(!0),disabled:s!==null,style:{background:He.primary,color:"white",border:"none",padding:"0.6rem 1.5rem",borderRadius:"8px",cursor:s!==null?"not-allowed":"pointer",fontWeight:500,opacity:s!==null?.7:1,fontSize:"0.9rem"},children:"Create New Budget"})]})})]})}function gN(i,e){return!e||e==="any"||i===0?!1:e==="positive"&&i<0||e==="negative"&&i>0}function Yb(i,e){return!e||e==="any"||i===0?null:e==="positive"&&i<0?"Unexpected negative balance":e==="negative"&&i>0?"Unexpected positive balance (credit owed to you?)":null}function pN(){const{currentBudget:i,accounts:e,setAccounts:n,accountGroups:s,setAccountGroups:o}=ki(),[u,d]=j.useState(null),m=Mp(),[p,y]=j.useState(null),[E,T]=j.useState(null),[x,M]=j.useState(null),[H,F]=j.useState(!1),[C,ne]=j.useState(null),[B,ue]=j.useState(null),[Ee,Te]=j.useState(null),[Re,D]=j.useState(null),A=ba(Ms);async function R(N){if(i)try{const q=Xe(A,"budgets",i.id),te=await Je(q);if(te.exists()){const Z=te.data();await St(q,{...Z,accounts:N})}}catch(q){throw new Error(q instanceof Error?q.message:"Failed to save accounts")}}async function k(N){if(i)try{const q=Xe(A,"budgets",i.id),te=await Je(q);if(te.exists()){const Z=te.data(),oe=N.map(se=>({id:se.id,name:se.name,sort_order:se.sort_order,expected_balance:se.expected_balance||"positive"}));await St(q,{...Z,account_groups:oe})}}catch(q){throw new Error(q instanceof Error?q.message:"Failed to save account groups")}}async function U(N,q){if(i)try{const te=Xe(A,"budgets",i.id),Z=await Je(te);if(Z.exists()){const oe=Z.data();await St(te,{...oe,accounts:N,account_groups:q})}}catch(te){throw new Error(te instanceof Error?te.message:"Failed to save changes")}}async function z(N,q){if(!i)return;const te=e.filter(be=>q==="ungrouped"?!be.account_group_id:be.account_group_id===q),Z=te.length>0?Math.max(...te.map(be=>be.sort_order)):-1,oe={id:`account_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,nickname:N.nickname,balance:0,account_group_id:q==="ungrouped"?null:q,sort_order:Z+1},se=[...e,oe].sort((be,ve)=>be.sort_order-ve.sort_order);n(se),T(null);try{await R(se)}catch(be){n(e),d(be instanceof Error?be.message:"Failed to create account")}}async function I(N,q){if(i)try{const te=e.find(ve=>ve.id===N);if(!te)return;const Z=te.account_group_id||"ungrouped",oe=q.account_group_id;let se=te.sort_order;if(Z!==(oe||"ungrouped")){const ve=e.filter(Ve=>(Ve.account_group_id||"ungrouped")===(oe||"ungrouped")&&Ve.id!==N);se=ve.length>0?Math.max(...ve.map(Ve=>Ve.sort_order))+1:0}const be=e.map(ve=>ve.id===N?{...ve,nickname:q.nickname,account_group_id:oe,sort_order:se}:ve);n(be),await R(be),y(null)}catch(te){d(te instanceof Error?te.message:"Failed to update account")}}async function Ye(N){if(confirm("Are you sure you want to delete this account?")&&i)try{const q=e.filter(te=>te.id!==N);n(q),await R(q)}catch(q){d(q instanceof Error?q.message:"Failed to delete account")}}async function at(N){if(i)try{const q=s.length>0?Math.max(...s.map(oe=>oe.sort_order)):-1,te={id:`account_group_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:N.name,sort_order:q+1,expected_balance:N.expected_balance},Z=[...s,te];o(Z),await k(Z),F(!1)}catch(q){d(q instanceof Error?q.message:"Failed to create account type")}}async function ee(N,q){if(i)try{const te=s.map(Z=>Z.id===N?{...Z,name:q.name,expected_balance:q.expected_balance}:Z);o(te),await k(te),M(null)}catch(te){d(te instanceof Error?te.message:"Failed to update account type")}}async function ye(N){if(confirm("Are you sure you want to delete this account type? Accounts in this type will move to Ungrouped.")&&i)try{const q=e.map(Z=>Z.account_group_id===N?{...Z,account_group_id:null}:Z),te=s.filter(Z=>Z.id!==N);n(q),o(te),await U(q,te)}catch(q){d(q instanceof Error?q.message:"Failed to delete account type")}}function he(N,q){ne("account"),ue(q),N.dataTransfer.effectAllowed="move"}function ke(N,q,te){N.preventDefault(),C==="account"&&(q!==B&&Te(q),D(te))}function Ue(N,q){N.preventDefault(),C==="account"?(D(q),Te(null)):C==="group"&&q!==B&&Te(q)}function O(){Te(null)}function L(){D(null)}function Q(){ne(null),ue(null),Te(null),D(null)}async function Y(N,q,te){if(N.preventDefault(),N.stopPropagation(),!B||C!=="account"){Q();return}const Z=e.find(Fe=>Fe.id===B);if(!Z)return;const oe=te==="ungrouped"?null:te,se=e.filter(Fe=>(Fe.account_group_id||"ungrouped")===te);let be=e.filter(Fe=>Fe.id!==B),ve;if(q==="__group_end__"||se.length===0||!se.find(Fe=>Fe.id===q))ve=(se.length>0?Math.max(...se.filter(xt=>xt.id!==B).map(xt=>xt.sort_order)):-1)+1;else{const Fe=se.find(xt=>xt.id===q);Fe?(ve=Fe.sort_order,be=be.map(xt=>(xt.account_group_id||"ungrouped")===te&&xt.sort_order>=ve?{...xt,sort_order:xt.sort_order+1}:xt)):ve=0}const Ve={...Z,account_group_id:oe,sort_order:ve};if(be.push(Ve),be.sort((Fe,xt)=>Fe.sort_order-xt.sort_order),n(be),Q(),!!i)try{await R(be)}catch(Fe){d(Fe instanceof Error?Fe.message:"Failed to save changes")}}async function fe(N,q){N.preventDefault(),C==="account"?await Y(N,"__group_end__",q):C==="group"&&await Ie(N,q)}function we(N,q){N.stopPropagation(),ne("group"),ue(q),N.dataTransfer.effectAllowed="move"}async function Ie(N,q){if(N.preventDefault(),!B||C!=="group"||B===q){Q();return}const te=s.findIndex(be=>be.id===B),Z=[...s],[oe]=Z.splice(te,1);if(q==="__end__")Z.push(oe);else{const be=Z.findIndex(ve=>ve.id===q);Z.splice(be,0,oe)}const se=Z.map((be,ve)=>({...be,sort_order:ve}));if(o(se),Q(),!!i)try{await k(se)}catch(be){d(be instanceof Error?be.message:"Failed to save new order")}}async function je(N,q){const te=e.find(Fe=>Fe.id===N);if(!te)return;const Z=te.account_group_id||"ungrouped",oe=e.filter(Fe=>(Fe.account_group_id||"ungrouped")===Z).sort((Fe,xt)=>Fe.sort_order-xt.sort_order),se=oe.findIndex(Fe=>Fe.id===N),be=q==="up"?se-1:se+1;if(be<0||be>=oe.length)return;const ve=oe[be],Ve=e.map(Fe=>Fe.id===N?{...Fe,sort_order:ve.sort_order}:Fe.id===ve.id?{...Fe,sort_order:te.sort_order}:Fe);if(n(Ve),!!i)try{await R(Ve)}catch(Fe){n(e),d(Fe instanceof Error?Fe.message:"Failed to move account")}}async function Be(N,q){const te=[...s].sort((ve,Ve)=>ve.sort_order-Ve.sort_order),Z=te.findIndex(ve=>ve.id===N),oe=q==="up"?Z-1:Z+1;if(oe<0||oe>=te.length)return;const[se]=te.splice(Z,1);te.splice(oe,0,se);const be=te.map((ve,Ve)=>({...ve,sort_order:Ve}));if(o(be),!!i)try{await k(be)}catch(ve){o(s),d(ve instanceof Error?ve.message:"Failed to move account type")}}const mt=e.reduce((N,q)=>{const te=q.account_group_id||"ungrouped";return N[te]||(N[te]=[]),N[te].push(q),N},{}),Vt=[...s].sort((N,q)=>N.sort_order-q.sort_order),de=e.reduce((N,q)=>N+q.balance,0),_e=Vt.map(N=>{const q=mt[N.id]||[];return{id:N.id,name:N.name,balance:q.reduce((te,Z)=>te+Z.balance,0),count:q.length}}),W=mt.ungrouped||[],le=W.reduce((N,q)=>N+q.balance,0);return i?g.jsxs("div",{children:[g.jsx("h2",{style:{marginTop:0},children:"Accounts"}),g.jsxs("p",{style:Rh,children:["Organize your financial accounts by type.",g.jsx("br",{}),g.jsx("span",{style:{fontSize:"0.9rem"},children:m?"Use  buttons to reorder items, or drag to move between types.":"Drag accounts between types, or use  buttons to reorder."})]}),u&&g.jsx(Ch,{message:u,onDismiss:()=>d(null)}),g.jsx(XS,{style:{borderLeft:`4px solid ${He.primary}`,background:`linear-gradient(135deg, color-mix(in srgb, ${He.primary} 8%, transparent), color-mix(in srgb, currentColor 3%, transparent))`,padding:"1.25rem 1.5rem"},children:g.jsx(lN,{label:"Total Balance (All Accounts)",value:ua(de),valueColor:Ti(de)})}),(_e.length>0||W.length>0)&&g.jsxs("div",{style:{display:"grid",gridTemplateColumns:m?"1fr":"repeat(auto-fit, minmax(180px, 1fr))",gap:"0.75rem",marginBottom:"1.5rem"},children:[_e.map(N=>{const q=s.find(Z=>Z.id===N.id),te=Yb(N.balance,q?.expected_balance);return g.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1rem",borderRadius:"8px",borderLeft:`3px solid ${Ti(N.balance)}`},children:[g.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.6,textTransform:"uppercase",letterSpacing:"0.5px"},children:N.name}),g.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.25rem",fontWeight:600,color:Ti(N.balance)},children:ua(N.balance)}),g.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.75rem",opacity:.5},children:[N.count," account",N.count!==1?"s":""]}),te&&g.jsxs("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.7rem",color:"#fbbf24"},children:[" ",te]})]},N.id)}),W.length>0&&g.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1rem",borderRadius:"8px",borderLeft:`3px solid ${Ti(le)}`,opacity:.7},children:[g.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.6,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Ungrouped"}),g.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.25rem",fontWeight:600,color:Ti(le)},children:ua(le)}),g.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.75rem",opacity:.5},children:[W.length," account",W.length!==1?"s":""]})]})]}),g.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",marginBottom:"1.5rem"},children:[e.length===0&&s.length===0&&g.jsx("p",{style:{opacity:.7},children:"No accounts yet. Create an account type first, then add accounts!"}),Vt.map((N,q)=>{const te=(mt[N.id]||[]).sort((Oe,Ht)=>Oe.sort_order-Ht.sort_order),Z=C==="group"&&B===N.id,oe=C==="group"&&Ee===N.id,se=C==="account"&&Re===N.id,be=B&&C==="account"?e.find(Oe=>Oe.id===B):null,ve=be&&(be.account_group_id||"ungrouped")!==N.id,Ve=C==="group"&&oe&&B!==N.id,Fe=q>0,xt=q<Vt.length-1,ni=te.reduce((Oe,Ht)=>Oe+Ht.balance,0);return g.jsxs("div",{children:[C==="group"&&!Z&&g.jsxs("div",{onDragOver:Oe=>{Oe.preventDefault(),Te(N.id)},onDragLeave:O,onDrop:Oe=>Ie(Oe,N.id),style:{position:"relative",height:Ve?"2.5rem":"0.5rem",marginBottom:Ve?"-0.5rem":"-0.25rem",transition:"height 0.15s"},children:[g.jsx("div",{style:{position:"absolute",top:"50%",left:0,right:0,height:"3px",background:He.primary,borderRadius:"2px",opacity:Ve?1:0,transition:"opacity 0.15s",boxShadow:Ve?"0 0 8px rgba(100, 108, 255, 0.6)":"none"}}),Ve&&g.jsx("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"0.75rem",opacity:.7,background:"var(--background, #1a1a1a)",padding:"0 0.5rem",whiteSpace:"nowrap"},children:"Drop here"})]}),g.jsx("div",{draggable:x!==N.id,onDragStart:Oe=>we(Oe,N.id),onDragOver:Oe=>{Ue(Oe,N.id)},onDragLeave:L,onDragEnd:Q,onDrop:Oe=>fe(Oe,N.id),style:{background:Z?"color-mix(in srgb, currentColor 3%, transparent)":se&&ve?`color-mix(in srgb, ${He.primary} 10%, transparent)`:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"12px",padding:"1rem",opacity:Z?.5:1,border:se&&ve?`2px dashed ${He.primary}`:"2px solid transparent",cursor:x===N.id?"default":"grab",transition:"all 0.15s"},children:x===N.id?g.jsx(Kb,{initialData:{name:N.name,expected_balance:N.expected_balance||"positive"},onSubmit:Oe=>ee(N.id,Oe),onCancel:()=>M(null),submitLabel:"Save"}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:m?"0.5rem":"0.75rem",paddingBottom:"0.5rem",borderBottom:"1px solid color-mix(in srgb, currentColor 15%, transparent)",gap:"0.5rem",flexWrap:m?"wrap":"nowrap"},children:[g.jsxs("h3",{style:{...Zd,margin:0,display:"flex",alignItems:"center",gap:"0.5rem",flex:1,minWidth:0},children:[!m&&g.jsx("span",{style:{cursor:"grab",opacity:.4},children:""}),g.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:N.name}),g.jsxs("span",{style:{opacity:.5,fontWeight:400,fontSize:"0.9rem",flexShrink:0},children:["(",te.length,")"]}),g.jsx("span",{style:{marginLeft:"0.5rem",fontWeight:600,fontSize:"0.9rem",color:Ti(ni),flexShrink:0},children:ua(ni)})]}),g.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0,alignItems:"center"},children:[!m&&g.jsx(dt,{variant:"small",onClick:()=>T(N.id),disabled:E!==null,children:"+ Account"}),g.jsx("button",{onClick:()=>M(N.id),style:{background:"transparent",border:"none",cursor:"pointer",opacity:.6,fontSize:"0.9rem",padding:"0.25rem"},title:"Edit account type",children:""}),g.jsx("button",{onClick:()=>ye(N.id),style:{background:"transparent",border:"none",cursor:"pointer",opacity:.6,fontSize:"0.9rem",padding:"0.25rem"},title:"Delete account type",children:""}),g.jsxs("div",{style:Op,children:[g.jsx("button",{onClick:()=>Be(N.id,"up"),disabled:!Fe,style:{...Io,opacity:Fe?.6:.2,cursor:Fe?"pointer":"default"},title:"Move account type up","aria-label":"Move account type up",children:""}),g.jsx("button",{onClick:()=>Be(N.id,"down"),disabled:!xt,style:{...Io,opacity:xt?.6:.2,cursor:xt?"pointer":"default"},title:"Move account type down","aria-label":"Move account type down",children:""})]})]})]}),m&&g.jsx("div",{style:{marginBottom:"0.5rem"},children:g.jsx(dt,{variant:"small",onClick:()=>T(N.id),disabled:E!==null,children:"+ Account"})}),g.jsxs("div",{style:Do,children:[te.map(Oe=>p===Oe.id?g.jsx(pd,{initialData:{nickname:Oe.nickname,account_group_id:Oe.account_group_id},onSubmit:Ht=>I(Oe.id,Ht),onCancel:()=>y(null),submitLabel:"Save",accountGroups:s,showGroupSelector:!0},Oe.id):g.jsx(th,{isDragging:C==="account"&&B===Oe.id,isDragOver:Ee===Oe.id,onDragStart:Ht=>{Ht.stopPropagation(),he(Ht,Oe.id)},onDragOver:Ht=>ke(Ht,Oe.id,N.id),onDragLeave:O,onDragEnd:Q,onDrop:Ht=>Y(Ht,Oe.id,N.id),onEdit:()=>y(Oe.id),onDelete:()=>Ye(Oe.id),onMoveUp:()=>je(Oe.id,"up"),onMoveDown:()=>je(Oe.id,"down"),canMoveUp:te.findIndex(Ht=>Ht.id===Oe.id)>0,canMoveDown:te.findIndex(Ht=>Ht.id===Oe.id)<te.length-1,children:g.jsxs("div",{children:[g.jsx("span",{style:eh,children:Oe.nickname}),g.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.1rem",fontWeight:600,color:Ti(Oe.balance)},children:[ua(Oe.balance),gN(Oe.balance,N.expected_balance)&&g.jsx("span",{title:Yb(Oe.balance,N.expected_balance)||"",style:{marginLeft:"0.5rem",fontSize:"0.85rem"},children:""})]})]})},Oe.id)),te.length===0&&!E&&g.jsx("p",{style:{opacity:.5,fontSize:"0.9rem",margin:"0.5rem 0"},children:"No accounts in this type"}),C==="account"&&te.length>0&&g.jsx($b,{groupId:N.id,isActive:Ee===`__end__${N.id}`,onDragOver:Oe=>{Oe.preventDefault(),Oe.stopPropagation(),Te(`__end__${N.id}`),D(N.id)},onDragLeave:Oe=>{Oe.stopPropagation(),Te(null)},onDrop:Oe=>{Oe.stopPropagation(),Y(Oe,"__group_end__",N.id)}}),E===N.id&&g.jsx(pd,{initialData:{nickname:"",account_group_id:N.id},onSubmit:Oe=>z(Oe,N.id),onCancel:()=>T(null),submitLabel:"Create",accountGroups:s})]}),E!==N.id&&g.jsx("div",{style:{marginTop:"0.75rem",paddingTop:"0.5rem",borderTop:"1px solid color-mix(in srgb, currentColor 10%, transparent)"},children:g.jsx(dt,{variant:"small",onClick:()=>T(N.id),disabled:E!==null,children:"+ Add Account"})})]})})]},N.id)}),C==="group"&&Vt.length>0&&g.jsx(kp,{isActive:Ee==="__end__",onDragOver:N=>{N.preventDefault(),Te("__end__")},onDragLeave:O,onDrop:N=>Ie(N,"__end__"),label:"Move account type to end"}),(()=>{const N=(mt.ungrouped||[]).sort((se,be)=>se.sort_order-be.sort_order),q=C==="account"&&Re==="ungrouped",te=B&&C==="account"?e.find(se=>se.id===B):null,Z=te&&te.account_group_id!==null;if(N.length===0&&!E&&s.length>0&&C!=="account")return null;const oe=N.reduce((se,be)=>se+be.balance,0);return g.jsxs("div",{onDragOver:se=>Ue(se,"ungrouped"),onDragLeave:L,onDrop:se=>fe(se,"ungrouped"),style:{background:q&&Z?`color-mix(in srgb, ${He.primary} 10%, transparent)`:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"12px",padding:"1rem",border:q&&Z?`2px dashed ${He.primary}`:"2px solid transparent",transition:"all 0.15s"},children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem",paddingBottom:"0.5rem",borderBottom:"1px solid color-mix(in srgb, currentColor 15%, transparent)"},children:[g.jsxs("h3",{style:{...Zd,margin:0,opacity:.7,display:"flex",alignItems:"center",gap:"0.5rem"},children:["Ungrouped",g.jsxs("span",{style:{marginLeft:"0.5rem",opacity:.5,fontWeight:400,fontSize:"0.9rem"},children:["(",N.length,")"]}),N.length>0&&g.jsx("span",{style:{marginLeft:"0.5rem",fontWeight:600,fontSize:"0.9rem",color:Ti(oe)},children:ua(oe)})]}),g.jsx(dt,{variant:"small",onClick:()=>T("ungrouped"),disabled:E!==null,children:"+ Account"})]}),g.jsxs("div",{style:Do,children:[N.map(se=>p===se.id?g.jsx(pd,{initialData:{nickname:se.nickname,account_group_id:se.account_group_id},onSubmit:be=>I(se.id,be),onCancel:()=>y(null),submitLabel:"Save",accountGroups:s,showGroupSelector:!0},se.id):g.jsx(th,{isDragging:C==="account"&&B===se.id,isDragOver:Ee===se.id,onDragStart:be=>he(be,se.id),onDragOver:be=>ke(be,se.id,"ungrouped"),onDragLeave:O,onDragEnd:Q,onDrop:be=>Y(be,se.id,"ungrouped"),onEdit:()=>y(se.id),onDelete:()=>Ye(se.id),onMoveUp:()=>je(se.id,"up"),onMoveDown:()=>je(se.id,"down"),canMoveUp:N.findIndex(be=>be.id===se.id)>0,canMoveDown:N.findIndex(be=>be.id===se.id)<N.length-1,children:g.jsxs("div",{children:[g.jsx("span",{style:eh,children:se.nickname}),g.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.1rem",fontWeight:600,color:Ti(se.balance)},children:ua(se.balance)})]})},se.id)),N.length===0&&C==="account"&&g.jsx("p",{style:{opacity:.5,fontSize:"0.9rem",margin:"0.5rem 0",textAlign:"center"},children:"Drop here to ungroup"}),C==="account"&&N.length>0&&g.jsx($b,{groupId:"ungrouped",isActive:Ee==="__end__ungrouped",onDragOver:se=>{se.preventDefault(),se.stopPropagation(),Te("__end__ungrouped"),D("ungrouped")},onDragLeave:se=>{se.stopPropagation(),Te(null)},onDrop:se=>{se.stopPropagation(),Y(se,"__group_end__","ungrouped")}}),E==="ungrouped"&&g.jsx(pd,{initialData:{nickname:"",account_group_id:null},onSubmit:se=>z(se,"ungrouped"),onCancel:()=>T(null),submitLabel:"Create",accountGroups:s})]}),E!=="ungrouped"&&g.jsx("div",{style:{marginTop:"0.75rem",paddingTop:"0.5rem",borderTop:"1px solid color-mix(in srgb, currentColor 10%, transparent)"},children:g.jsx(dt,{variant:"small",onClick:()=>T("ungrouped"),disabled:E!==null,children:"+ Add Account"})})]})})()]}),H?g.jsx(Kb,{onSubmit:at,onCancel:()=>F(!1),submitLabel:"Create Account Type"}):g.jsx(dt,{variant:"primary-large",onClick:()=>F(!0),children:"+ Add Account Type"})]}):g.jsx("p",{children:"No budget found. Please log in."})}function pd({initialData:i,onSubmit:e,onCancel:n,submitLabel:s,accountGroups:o,showGroupSelector:u=!1}){const[d,m]=j.useState(i||{nickname:"",account_group_id:null});function p(y){y.preventDefault(),d.nickname.trim()&&e(d)}return g.jsxs(Mu,{onSubmit:p,children:[g.jsx(ya,{label:"Account Nickname",htmlFor:"account-nickname",children:g.jsx(Ih,{id:"account-nickname",type:"text",value:d.nickname,onChange:y=>m({...d,nickname:y.target.value}),placeholder:"e.g., Main Checking, Savings",required:!0,autoFocus:!0})}),u&&g.jsx(ya,{label:"Account Type",htmlFor:"account-group",children:g.jsxs(Np,{id:"account-group",value:d.account_group_id||"ungrouped",onChange:y=>m({...d,account_group_id:y.target.value==="ungrouped"?null:y.target.value}),children:[g.jsx("option",{value:"ungrouped",children:"Ungrouped"}),o.map(y=>g.jsx("option",{value:y.id,children:y.name},y.id))]})}),g.jsxs(Ho,{children:[g.jsx(dt,{type:"submit",children:s}),g.jsx(dt,{type:"button",variant:"secondary",onClick:n,children:"Cancel"})]})]})}function Kb({initialData:i,onSubmit:e,onCancel:n,submitLabel:s}){const[o,u]=j.useState(i||{name:"",expected_balance:"positive"});function d(m){m.preventDefault(),o.name.trim()&&e(o)}return g.jsxs(Mu,{onSubmit:d,children:[g.jsx(ya,{label:"Account Type Name",htmlFor:"group-name",children:g.jsx(Ih,{id:"group-name",type:"text",value:o.name,onChange:m=>u({...o,name:m.target.value}),placeholder:"e.g., Checking, Savings, Credit Cards, Investments",required:!0,autoFocus:!0})}),g.jsx(ya,{label:"Expected Balance",htmlFor:"expected-balance",children:g.jsxs(Np,{id:"expected-balance",value:o.expected_balance,onChange:m=>u({...o,expected_balance:m.target.value}),children:[g.jsx("option",{value:"positive",children:"Normally Positive (e.g., Checking, Savings)"}),g.jsx("option",{value:"negative",children:"Normally Negative (e.g., Credit Cards, Loans)"}),g.jsx("option",{value:"any",children:"Either (no warnings)"})]})}),g.jsxs(Ho,{children:[g.jsx(dt,{type:"submit",children:s}),g.jsx(dt,{type:"button",variant:"secondary",onClick:n,children:"Cancel"})]})]})}function $b({isActive:i,onDragOver:e,onDragLeave:n,onDrop:s}){return g.jsxs("div",{onDragOver:e,onDragLeave:n,onDrop:s,style:{position:"relative",height:"2rem",marginTop:"-0.25rem"},children:[g.jsx("div",{style:{position:"absolute",top:"50%",left:0,right:0,height:"3px",background:He.primary,borderRadius:"2px",opacity:i?1:.3,transition:"opacity 0.15s",boxShadow:i?"0 0 8px rgba(100, 108, 255, 0.6)":"none"}}),i&&g.jsx("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"0.75rem",opacity:.7,background:"var(--background, #1a1a1a)",padding:"0 0.5rem",whiteSpace:"nowrap"},children:"Move to end"})]})}function yN(){const{currentBudget:i,categories:e,setCategories:n,categoryGroups:s,setCategoryGroups:o}=ki(),[u,d]=j.useState(null),m=Mp(),[p,y]=j.useState(null),[E,T]=j.useState(null),[x,M]=j.useState(null),[H,F]=j.useState(!1),[C,ne]=j.useState(null),[B,ue]=j.useState(null),[Ee,Te]=j.useState(null),[Re,D]=j.useState(null),A=ba(Ms);async function R(de){if(i)try{const _e=Xe(A,"budgets",i.id),W=await Je(_e);if(W.exists()){const le=W.data();await St(_e,{...le,categories:de})}}catch(_e){throw new Error(_e instanceof Error?_e.message:"Failed to save categories")}}async function k(de){if(i)try{const _e=Xe(A,"budgets",i.id),W=await Je(_e);if(W.exists()){const le=W.data();await St(_e,{...le,category_groups:de})}}catch(_e){throw new Error(_e instanceof Error?_e.message:"Failed to save category groups")}}async function U(de,_e){if(i)try{const W=Xe(A,"budgets",i.id),le=await Je(W);if(le.exists()){const N=le.data();await St(W,{...N,categories:de,category_groups:_e})}}catch(W){throw new Error(W instanceof Error?W.message:"Failed to save changes")}}async function z(de,_e){if(!i)return;const W=_e==="ungrouped"?null:_e,le=e.filter(Z=>_e==="ungrouped"?!Z.category_group_id:Z.category_group_id===_e),N=le.length>0?Math.max(...le.map(Z=>Z.sort_order)):-1,q={id:`category_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:de.name,category_group_id:W,sort_order:N+1},te=[...e,q].sort((Z,oe)=>Z.sort_order-oe.sort_order);n(te),T(null);try{await R(te)}catch(Z){n(e),d(Z instanceof Error?Z.message:"Failed to create category")}}async function I(de,_e){if(i)try{const W=e.find(Z=>Z.id===de);if(!W)return;const le=W.category_group_id||"ungrouped",N=_e.category_group_id;let q=W.sort_order;if(le!==(N||"ungrouped")){const Z=e.filter(oe=>(oe.category_group_id||"ungrouped")===(N||"ungrouped")&&oe.id!==de);q=Z.length>0?Math.max(...Z.map(oe=>oe.sort_order))+1:0}const te=e.map(Z=>Z.id===de?{...Z,name:_e.name,category_group_id:N,sort_order:q}:Z);n(te),await R(te),y(null)}catch(W){d(W instanceof Error?W.message:"Failed to update category")}}async function Ye(de){if(confirm("Are you sure you want to delete this category?")&&i)try{const _e=e.filter(W=>W.id!==de);n(_e),await R(_e)}catch(_e){d(_e instanceof Error?_e.message:"Failed to delete category")}}async function at(de){if(i)try{const _e=s.length>0?Math.max(...s.map(N=>N.sort_order)):-1,W={id:`category_group_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:de.name,sort_order:_e+1},le=[...s,W];o(le),await k(le),F(!1)}catch(_e){d(_e instanceof Error?_e.message:"Failed to create group")}}async function ee(de,_e){if(i)try{const W=s.map(le=>le.id===de?{...le,name:_e.name}:le);o(W),await k(W),M(null)}catch(W){d(W instanceof Error?W.message:"Failed to update group")}}async function ye(de){if(confirm("Are you sure you want to delete this group? Categories in this group will move to Uncategorized.")&&i)try{const _e=e.map(le=>le.category_group_id===de?{...le,category_group_id:null}:le),W=s.filter(le=>le.id!==de);n(_e),o(W),await U(_e,W)}catch(_e){d(_e instanceof Error?_e.message:"Failed to delete group")}}function he(de,_e){ne("category"),ue(_e),de.dataTransfer.effectAllowed="move"}function ke(de,_e,W){de.preventDefault(),C==="category"&&(_e!==B&&Te(_e),D(W))}function Ue(de,_e){de.preventDefault(),C==="category"?(D(_e),Te(null)):C==="group"&&_e!==B&&Te(_e)}function O(){Te(null)}function L(){D(null)}function Q(){ne(null),ue(null),Te(null),D(null)}async function Y(de,_e,W){if(de.preventDefault(),de.stopPropagation(),!B||C!=="category"){Q();return}const le=e.find(se=>se.id===B);if(!le)return;const N=W==="ungrouped"?null:W,q=e.filter(se=>(se.category_group_id||"ungrouped")===W);let te=e.filter(se=>se.id!==B),Z;if(_e==="__group_end__"||q.length===0||!q.find(se=>se.id===_e))Z=(q.length>0?Math.max(...q.filter(be=>be.id!==B).map(be=>be.sort_order)):-1)+1;else{const se=q.find(be=>be.id===_e);se?(Z=se.sort_order,te=te.map(be=>(be.category_group_id||"ungrouped")===W&&be.sort_order>=Z?{...be,sort_order:be.sort_order+1}:be)):Z=0}const oe={...le,category_group_id:N,sort_order:Z};if(te.push(oe),te.sort((se,be)=>se.sort_order-be.sort_order),n(te),Q(),!!i)try{await R(te)}catch(se){d(se instanceof Error?se.message:"Failed to save changes")}}async function fe(de,_e){de.preventDefault(),C==="category"?await Y(de,"__group_end__",_e):C==="group"&&await Ie(de,_e)}function we(de,_e){de.stopPropagation(),ne("group"),ue(_e),de.dataTransfer.effectAllowed="move"}async function Ie(de,_e){if(de.preventDefault(),!B||C!=="group"||B===_e){Q();return}const W=s.findIndex(te=>te.id===B),le=[...s],[N]=le.splice(W,1);if(_e==="__end__")le.push(N);else{const te=le.findIndex(Z=>Z.id===_e);le.splice(te,0,N)}const q=le.map((te,Z)=>({...te,sort_order:Z}));if(o(q),Q(),!!i)try{await k(q)}catch(te){d(te instanceof Error?te.message:"Failed to save new order")}}async function je(de,_e){const W=e.find(se=>se.id===de);if(!W)return;const le=W.category_group_id||"ungrouped",N=e.filter(se=>(se.category_group_id||"ungrouped")===le).sort((se,be)=>se.sort_order-be.sort_order),q=N.findIndex(se=>se.id===de),te=_e==="up"?q-1:q+1;if(te<0||te>=N.length)return;const Z=N[te],oe=e.map(se=>se.id===de?{...se,sort_order:Z.sort_order}:se.id===Z.id?{...se,sort_order:W.sort_order}:se);if(n(oe),!!i)try{await R(oe)}catch(se){n(e),d(se instanceof Error?se.message:"Failed to move category")}}async function Be(de,_e){const W=[...s].sort((Z,oe)=>Z.sort_order-oe.sort_order),le=W.findIndex(Z=>Z.id===de),N=_e==="up"?le-1:le+1;if(N<0||N>=W.length)return;const[q]=W.splice(le,1);W.splice(N,0,q);const te=W.map((Z,oe)=>({...Z,sort_order:oe}));if(o(te),!!i)try{await k(te)}catch(Z){o(s),d(Z instanceof Error?Z.message:"Failed to move group")}}const mt=e.reduce((de,_e)=>{const W=_e.category_group_id||"ungrouped";return de[W]||(de[W]=[]),de[W].push(_e),de},{}),Vt=[...s].sort((de,_e)=>de.sort_order-_e.sort_order);return i?g.jsxs("div",{children:[g.jsx("h2",{style:{marginTop:0},children:"Categories & Groups"}),g.jsxs("p",{style:Rh,children:["Organize your spending categories into groups.",g.jsx("br",{}),g.jsx("span",{style:{fontSize:"0.9rem"},children:m?"Use  buttons to reorder items, or drag to move between groups.":"Drag categories between groups, or use  buttons to reorder."})]}),u&&g.jsx(Ch,{message:u,onDismiss:()=>d(null)}),g.jsxs(XS,{style:{display:"flex",gap:"2rem"},children:[g.jsxs("div",{children:[g.jsx("p",{style:{margin:0,fontSize:"0.9rem",opacity:.7},children:"Categories"}),g.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.5rem",fontWeight:600},children:e.length})]}),g.jsxs("div",{children:[g.jsx("p",{style:{margin:0,fontSize:"0.9rem",opacity:.7},children:"Groups"}),g.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.5rem",fontWeight:600},children:s.length})]})]}),g.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",marginBottom:"1.5rem"},children:[e.length===0&&s.length===0&&g.jsx("p",{style:{opacity:.7},children:"No categories yet. Create a group first, then add categories!"}),Vt.map((de,_e)=>{const W=(mt[de.id]||[]).sort((ve,Ve)=>ve.sort_order-Ve.sort_order),le=C==="group"&&B===de.id,N=C==="group"&&Ee===de.id,q=C==="category"&&Re===de.id,te=B&&C==="category"?e.find(ve=>ve.id===B):null,Z=te&&(te.category_group_id||"ungrouped")!==de.id,oe=C==="group"&&N&&B!==de.id,se=_e>0,be=_e<Vt.length-1;return g.jsxs("div",{children:[C==="group"&&!le&&g.jsxs("div",{onDragOver:ve=>{ve.preventDefault(),Te(de.id)},onDragLeave:O,onDrop:ve=>Ie(ve,de.id),style:{position:"relative",height:oe?"2.5rem":"0.5rem",marginBottom:oe?"-0.5rem":"-0.25rem",transition:"height 0.15s"},children:[g.jsx("div",{style:{position:"absolute",top:"50%",left:0,right:0,height:"3px",background:He.primary,borderRadius:"2px",opacity:oe?1:0,transition:"opacity 0.15s",boxShadow:oe?"0 0 8px rgba(100, 108, 255, 0.6)":"none"}}),oe&&g.jsx("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"0.75rem",opacity:.7,background:"var(--background, #1a1a1a)",padding:"0 0.5rem",whiteSpace:"nowrap"},children:"Drop here"})]}),g.jsx("div",{draggable:x!==de.id,onDragStart:ve=>we(ve,de.id),onDragOver:ve=>{Ue(ve,de.id)},onDragLeave:L,onDragEnd:Q,onDrop:ve=>fe(ve,de.id),style:{background:le?"color-mix(in srgb, currentColor 3%, transparent)":q&&Z?`color-mix(in srgb, ${He.primary} 10%, transparent)`:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"12px",padding:"1rem",opacity:le?.5:1,border:q&&Z?`2px dashed ${He.primary}`:"2px solid transparent",cursor:x===de.id?"default":"grab",transition:"all 0.15s"},children:x===de.id?g.jsx(Wb,{initialData:{name:de.name},onSubmit:ve=>ee(de.id,ve),onCancel:()=>M(null),submitLabel:"Save"}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:m?"0.5rem":"0.75rem",paddingBottom:"0.5rem",borderBottom:"1px solid color-mix(in srgb, currentColor 15%, transparent)",gap:"0.5rem",flexWrap:m?"wrap":"nowrap"},children:[g.jsxs("h3",{style:{...Zd,margin:0,display:"flex",alignItems:"center",gap:"0.5rem",flex:1,minWidth:0},children:[!m&&g.jsx("span",{style:{cursor:"grab",opacity:.4},children:""}),g.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:de.name}),g.jsxs("span",{style:{opacity:.5,fontWeight:400,fontSize:"0.9rem",flexShrink:0},children:["(",W.length,")"]})]}),g.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0,alignItems:"center"},children:[!m&&g.jsx(dt,{variant:"small",onClick:()=>T(de.id),disabled:E!==null,children:"+ Category"}),g.jsx("button",{onClick:()=>M(de.id),style:{background:"transparent",border:"none",cursor:"pointer",opacity:.6,fontSize:"0.9rem",padding:"0.25rem"},title:"Edit group",children:""}),g.jsx("button",{onClick:()=>ye(de.id),style:{background:"transparent",border:"none",cursor:"pointer",opacity:.6,fontSize:"0.9rem",padding:"0.25rem"},title:"Delete group",children:""}),g.jsxs("div",{style:Op,children:[g.jsx("button",{onClick:()=>Be(de.id,"up"),disabled:!se,style:{...Io,opacity:se?.6:.2,cursor:se?"pointer":"default"},title:"Move group up","aria-label":"Move group up",children:""}),g.jsx("button",{onClick:()=>Be(de.id,"down"),disabled:!be,style:{...Io,opacity:be?.6:.2,cursor:be?"pointer":"default"},title:"Move group down","aria-label":"Move group down",children:""})]})]})]}),m&&g.jsx("div",{style:{marginBottom:"0.5rem"},children:g.jsx(dt,{variant:"small",onClick:()=>T(de.id),disabled:E!==null,children:"+ Category"})}),g.jsxs("div",{style:Do,children:[W.map(ve=>p===ve.id?g.jsx(yd,{initialData:{name:ve.name,category_group_id:ve.category_group_id},onSubmit:Ve=>I(ve.id,Ve),onCancel:()=>y(null),submitLabel:"Save",categoryGroups:s,showGroupSelector:!0},ve.id):g.jsx(th,{isDragging:C==="category"&&B===ve.id,isDragOver:Ee===ve.id,onDragStart:Ve=>{Ve.stopPropagation(),he(Ve,ve.id)},onDragOver:Ve=>ke(Ve,ve.id,de.id),onDragLeave:O,onDragEnd:Q,onDrop:Ve=>Y(Ve,ve.id,de.id),onEdit:()=>y(ve.id),onDelete:()=>Ye(ve.id),onMoveUp:()=>je(ve.id,"up"),onMoveDown:()=>je(ve.id,"down"),canMoveUp:W.findIndex(Ve=>Ve.id===ve.id)>0,canMoveDown:W.findIndex(Ve=>Ve.id===ve.id)<W.length-1,children:g.jsx("span",{style:eh,children:ve.name})},ve.id)),W.length===0&&!E&&g.jsx("p",{style:{opacity:.5,fontSize:"0.9rem",margin:"0.5rem 0"},children:"No categories in this group"}),C==="category"&&W.length>0&&g.jsx(Xb,{groupId:de.id,isActive:Ee===`__end__${de.id}`,onDragOver:ve=>{ve.preventDefault(),ve.stopPropagation(),Te(`__end__${de.id}`),D(de.id)},onDragLeave:ve=>{ve.stopPropagation(),Te(null)},onDrop:ve=>{ve.stopPropagation(),Y(ve,"__group_end__",de.id)}}),E===de.id&&g.jsx(yd,{initialData:{name:"",category_group_id:de.id},onSubmit:ve=>z(ve,de.id),onCancel:()=>T(null),submitLabel:"Create",categoryGroups:s})]}),E!==de.id&&g.jsx("div",{style:{marginTop:"0.75rem",paddingTop:"0.5rem",borderTop:"1px solid color-mix(in srgb, currentColor 10%, transparent)"},children:g.jsx(dt,{variant:"small",onClick:()=>T(de.id),disabled:E!==null,children:"+ Add Category"})})]})})]},de.id)}),C==="group"&&Vt.length>0&&g.jsx(kp,{isActive:Ee==="__end__",onDragOver:de=>{de.preventDefault(),Te("__end__")},onDragLeave:O,onDrop:de=>Ie(de,"__end__"),label:"Move group to end"}),(()=>{const de=(mt.ungrouped||[]).sort((N,q)=>N.sort_order-q.sort_order),_e=C==="category"&&Re==="ungrouped",W=B&&C==="category"?e.find(N=>N.id===B):null,le=W&&W.category_group_id!==null;return de.length===0&&!E&&s.length>0&&C!=="category"?null:g.jsxs("div",{onDragOver:N=>Ue(N,"ungrouped"),onDragLeave:L,onDrop:N=>fe(N,"ungrouped"),style:{background:_e&&le?`color-mix(in srgb, ${He.primary} 10%, transparent)`:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"12px",padding:"1rem",border:_e&&le?`2px dashed ${He.primary}`:"2px solid transparent",transition:"all 0.15s"},children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem",paddingBottom:"0.5rem",borderBottom:"1px solid color-mix(in srgb, currentColor 15%, transparent)"},children:[g.jsxs("h3",{style:{...Zd,margin:0,opacity:.7},children:["Uncategorized",g.jsxs("span",{style:{marginLeft:"0.5rem",opacity:.5,fontWeight:400,fontSize:"0.9rem"},children:["(",de.length,")"]})]}),g.jsx(dt,{variant:"small",onClick:()=>T("ungrouped"),disabled:E!==null,children:"+ Category"})]}),g.jsxs("div",{style:Do,children:[de.map(N=>p===N.id?g.jsx(yd,{initialData:{name:N.name,category_group_id:N.category_group_id},onSubmit:q=>I(N.id,q),onCancel:()=>y(null),submitLabel:"Save",categoryGroups:s,showGroupSelector:!0},N.id):g.jsx(th,{isDragging:C==="category"&&B===N.id,isDragOver:Ee===N.id,onDragStart:q=>he(q,N.id),onDragOver:q=>ke(q,N.id,"ungrouped"),onDragLeave:O,onDragEnd:Q,onDrop:q=>Y(q,N.id,"ungrouped"),onEdit:()=>y(N.id),onDelete:()=>Ye(N.id),onMoveUp:()=>je(N.id,"up"),onMoveDown:()=>je(N.id,"down"),canMoveUp:de.findIndex(q=>q.id===N.id)>0,canMoveDown:de.findIndex(q=>q.id===N.id)<de.length-1,children:g.jsx("span",{style:eh,children:N.name})},N.id)),de.length===0&&C==="category"&&g.jsx("p",{style:{opacity:.5,fontSize:"0.9rem",margin:"0.5rem 0",textAlign:"center"},children:"Drop here to uncategorize"}),C==="category"&&de.length>0&&g.jsx(Xb,{groupId:"ungrouped",isActive:Ee==="__end__ungrouped",onDragOver:N=>{N.preventDefault(),N.stopPropagation(),Te("__end__ungrouped"),D("ungrouped")},onDragLeave:N=>{N.stopPropagation(),Te(null)},onDrop:N=>{N.stopPropagation(),Y(N,"__group_end__","ungrouped")}}),E==="ungrouped"&&g.jsx(yd,{initialData:{name:"",category_group_id:null},onSubmit:N=>z(N,"ungrouped"),onCancel:()=>T(null),submitLabel:"Create",categoryGroups:s})]}),E!=="ungrouped"&&g.jsx("div",{style:{marginTop:"0.75rem",paddingTop:"0.5rem",borderTop:"1px solid color-mix(in srgb, currentColor 10%, transparent)"},children:g.jsx(dt,{variant:"small",onClick:()=>T("ungrouped"),disabled:E!==null,children:"+ Add Category"})})]})})()]}),H?g.jsx(Wb,{onSubmit:at,onCancel:()=>F(!1),submitLabel:"Create Group"}):g.jsx(dt,{variant:"primary-large",onClick:()=>F(!0),children:"+ Add Category Group"})]}):g.jsx("p",{children:"No budget found. Please log in."})}function yd({initialData:i,onSubmit:e,onCancel:n,submitLabel:s,categoryGroups:o=[],showGroupSelector:u=!1}){const[d,m]=j.useState(i||{name:"",category_group_id:null}),[p,y]=j.useState(!1);function E(T){T.preventDefault(),d.name.trim()&&(y(!0),e(d))}return g.jsxs(Mu,{onSubmit:E,children:[g.jsx(ya,{label:"Category Name",htmlFor:"category-name",children:g.jsx(Ih,{id:"category-name",type:"text",value:d.name,onChange:T=>m({...d,name:T.target.value}),placeholder:"e.g., Groceries, Rent, Gas",required:!0,autoFocus:!0})}),u&&g.jsx(ya,{label:"Category Group",htmlFor:"category-group",children:g.jsxs(Np,{id:"category-group",value:d.category_group_id||"ungrouped",onChange:T=>m({...d,category_group_id:T.target.value==="ungrouped"?null:T.target.value}),children:[g.jsx("option",{value:"ungrouped",children:"Uncategorized"}),o.map(T=>g.jsx("option",{value:T.id,children:T.name},T.id))]})}),g.jsxs(Ho,{children:[g.jsx(dt,{type:"submit",isLoading:p,children:s}),g.jsx(dt,{type:"button",variant:"secondary",onClick:n,children:"Cancel"})]})]})}function Wb({initialData:i,onSubmit:e,onCancel:n,submitLabel:s}){const[o,u]=j.useState(i||{name:""}),[d,m]=j.useState(!1);function p(y){y.preventDefault(),o.name.trim()&&(m(!0),e(o))}return g.jsxs(Mu,{onSubmit:p,children:[g.jsx(ya,{label:"Group Name",htmlFor:"group-name",children:g.jsx(Ih,{id:"group-name",type:"text",value:o.name,onChange:y=>u({...o,name:y.target.value}),placeholder:"e.g., Housing, Transportation, Food",required:!0,autoFocus:!0})}),g.jsxs(Ho,{children:[g.jsx(dt,{type:"submit",isLoading:d,children:s}),g.jsx(dt,{type:"button",variant:"secondary",onClick:n,children:"Cancel"})]})]})}function Xb({isActive:i,onDragOver:e,onDragLeave:n,onDrop:s}){return g.jsxs("div",{onDragOver:e,onDragLeave:n,onDrop:s,style:{position:"relative",height:"2rem",marginTop:"-0.25rem"},children:[g.jsx("div",{style:{position:"absolute",top:"50%",left:0,right:0,height:"3px",background:He.primary,borderRadius:"2px",opacity:i?1:.3,transition:"opacity 0.15s",boxShadow:i?"0 0 8px rgba(100, 108, 255, 0.6)":"none"}}),i&&g.jsx("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"0.75rem",opacity:.7,background:"var(--background, #1a1a1a)",padding:"0 0.5rem",whiteSpace:"nowrap"},children:"Move to end"})]})}function _N(){const{currentBudget:i,loading:e,isOwner:n,isAdmin:s,isTest:o}=ki(),u=lr();if(e)return g.jsx("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:g.jsx("p",{children:"Loading..."})});const d=u.pathname.includes("/admin/accounts"),m=u.pathname.includes("/admin/categories"),p=u.pathname.includes("/admin/users"),y=u.pathname.includes("/admin/migration"),E=u.pathname.includes("/admin/feedback"),T=u.pathname.includes("/admin/my-budgets"),x=u.pathname.includes("/admin/tests"),M=u.pathname==="/budget/admin",H=p,F=y||E,C=x;return!n&&H||!s&&F||!o&&C?g.jsxs("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:[g.jsx("nav",{style:{marginBottom:"1.5rem"},children:g.jsx(Bt,{to:"/budget",children:" Back to Budget"})}),g.jsx("h1",{children:"Access Denied"}),g.jsx("p",{style:{opacity:.7},children:C?"Only test users can access this section.":F?"Only administrators can access this section.":"Only the budget owner can access this section."}),g.jsx("p",{style:{marginTop:"1rem"},children:g.jsx(Bt,{to:"/budget/admin/my-budgets",style:{color:"#646cff"},children:"Go to My Budgets "})})]}):g.jsxs("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:[g.jsx("nav",{style:{marginBottom:"1.5rem"},children:g.jsx(Bt,{to:"/budget",children:" Back to Budget"})}),g.jsx("h1",{children:n?"Admin Settings":"Budget Settings"}),g.jsx("p",{style:{opacity:.7,marginBottom:"0.5rem"},children:n?"Manage your budget settings, users, and data migration.":"Manage your budgets, accounts, and categories."}),i&&g.jsxs("div",{style:{opacity:.6,marginBottom:"1.5rem",fontSize:"0.9rem",display:"flex",flexDirection:"column",gap:"0.25rem"},children:[g.jsxs("p",{style:{margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx("span",{children:""}),g.jsxs("span",{children:["Budget Name: ",g.jsx("strong",{style:{opacity:1},children:i.name})]})]}),g.jsxs("p",{style:{margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx("span",{children:""}),g.jsxs("span",{children:["Budget ID: ",g.jsx("code",{style:{opacity:1,background:"color-mix(in srgb, currentColor 10%, transparent)",padding:"0.1rem 0.4rem",borderRadius:"4px",fontSize:"0.85rem"},children:i.id})]})]}),g.jsxs("p",{style:{margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx("span",{children:""}),g.jsxs("span",{children:["Budget Owner: ",g.jsx("strong",{style:{opacity:1},children:i.owner_email||i.owner_id})]})]})]}),g.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"2rem",borderBottom:"1px solid color-mix(in srgb, currentColor 15%, transparent)",paddingBottom:"1rem",flexWrap:"wrap"},children:[g.jsx(Bt,{to:"/budget/admin/my-budgets",style:{padding:"0.5rem 1rem",borderRadius:"6px",textDecoration:"none",color:"inherit",background:T?"color-mix(in srgb, #646cff 20%, transparent)":"color-mix(in srgb, currentColor 8%, transparent)",border:T?"1px solid #646cff":"1px solid transparent",fontWeight:T?500:400},children:" My Budgets"}),g.jsx(Bt,{to:"/budget/admin/accounts",style:{padding:"0.5rem 1rem",borderRadius:"6px",textDecoration:"none",color:"inherit",background:d?"color-mix(in srgb, #646cff 20%, transparent)":"color-mix(in srgb, currentColor 8%, transparent)",border:d?"1px solid #646cff":"1px solid transparent",fontWeight:d?500:400},children:" Accounts"}),g.jsx(Bt,{to:"/budget/admin/categories",style:{padding:"0.5rem 1rem",borderRadius:"6px",textDecoration:"none",color:"inherit",background:m?"color-mix(in srgb, #646cff 20%, transparent)":"color-mix(in srgb, currentColor 8%, transparent)",border:m?"1px solid #646cff":"1px solid transparent",fontWeight:m?500:400},children:" Categories"}),n&&g.jsx(Bt,{to:"/budget/admin/users",style:{padding:"0.5rem 1rem",borderRadius:"6px",textDecoration:"none",color:"inherit",background:p?"color-mix(in srgb, #646cff 20%, transparent)":"color-mix(in srgb, currentColor 8%, transparent)",border:p?"1px solid #646cff":"1px solid transparent",fontWeight:p?500:400},children:" Users"}),s&&g.jsxs(g.Fragment,{children:[g.jsx(Bt,{to:"/budget/admin/migration",style:{padding:"0.5rem 1rem",borderRadius:"6px",textDecoration:"none",color:"inherit",background:y?"color-mix(in srgb, #646cff 20%, transparent)":"color-mix(in srgb, currentColor 8%, transparent)",border:y?"1px solid #646cff":"1px solid transparent",fontWeight:y?500:400},children:" Migration"}),g.jsx(Bt,{to:"/budget/admin/feedback",style:{padding:"0.5rem 1rem",borderRadius:"6px",textDecoration:"none",color:"inherit",background:E?"color-mix(in srgb, #646cff 20%, transparent)":"color-mix(in srgb, currentColor 8%, transparent)",border:E?"1px solid #646cff":"1px solid transparent",fontWeight:E?500:400},children:" Feedback"})]}),o&&g.jsx(Bt,{to:"/budget/admin/tests",style:{padding:"0.5rem 1rem",borderRadius:"6px",textDecoration:"none",color:"inherit",background:x?"color-mix(in srgb, #ff6b6b 20%, transparent)":"color-mix(in srgb, currentColor 8%, transparent)",border:x?"1px solid #ff6b6b":"1px solid transparent",fontWeight:x?500:400},children:" Tests"})]}),M?g.jsx(fE,{to:"/budget/admin/my-budgets",replace:!0}):g.jsx(Vg,{})]})}function vN(){const{currentBudget:i,currentUserId:e,budgetUserIds:n,acceptedUserIds:s,inviteUserToBudget:o,revokeUserFromBudget:u}=ki(),[d,m]=j.useState(""),[p,y]=j.useState(!1),[E,T]=j.useState(null),[x,M]=j.useState(null);if(!i)return g.jsx("p",{children:"No budget found."});async function H(B){if(B.preventDefault(),!(!d.trim()||!i)){y(!0),T(null),M(null);try{await o(d.trim()),m(""),M("Invite sent! The user can now accept the invitation from their account.")}catch(ue){T(ue instanceof Error?ue.message:"Failed to invite user")}finally{y(!1)}}}async function F(B){if(!i)return;if(B===i.owner_id){T("Cannot revoke the budget owner");return}if(B===e){T("Cannot revoke yourself from the budget");return}const ue=s.includes(B);if(confirm(ue?"Are you sure you want to revoke this user's access? They will lose access to this budget.":"Are you sure you want to cancel this invitation?")){T(null),M(null);try{await u(B),M(ue?"User access revoked.":"Invitation cancelled.")}catch(Te){T(Te instanceof Error?Te.message:"Failed to revoke user")}}}const C=n.filter(B=>s.includes(B)),ne=n.filter(B=>!s.includes(B));return g.jsxs("div",{children:[g.jsx("h2",{style:{marginTop:0},children:"Budget Users"}),g.jsx("p",{style:{opacity:.7,marginBottom:"1.5rem"},children:"Invite users to access this budget. They must accept the invitation before they can access it."}),E&&g.jsxs("div",{style:{background:"rgba(220, 38, 38, 0.1)",border:"1px solid rgba(220, 38, 38, 0.3)",color:"#f87171",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[g.jsx("span",{children:E}),g.jsx("button",{onClick:()=>T(null),style:{background:"transparent",border:"none",color:"#f87171",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.25rem",lineHeight:1},children:""})]}),x&&g.jsxs("div",{style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#4ade80",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[g.jsx("span",{children:x}),g.jsx("button",{onClick:()=>M(null),style:{background:"transparent",border:"none",color:"#4ade80",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.25rem",lineHeight:1},children:""})]}),g.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.25rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[g.jsxs("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem"},children:["Active Users (",C.length,")"]}),C.length===0?g.jsx("p",{style:{opacity:.6,margin:0},children:"No users have accepted invitations yet."}):g.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:C.map(B=>{const ue=B===i.owner_id,Ee=B===e;return g.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 8%, transparent)",padding:"0.75rem 1rem",borderRadius:"6px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"},children:[g.jsx("div",{style:{flex:1,minWidth:0},children:g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[g.jsx("code",{style:{fontSize:"0.85rem",background:"color-mix(in srgb, currentColor 10%, transparent)",padding:"0.2rem 0.5rem",borderRadius:"4px",wordBreak:"break-all"},children:B}),ue&&g.jsx("span",{style:{background:"color-mix(in srgb, #646cff 20%, transparent)",color:"#a5b4fc",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600},children:"Owner"}),Ee&&g.jsx("span",{style:{background:"color-mix(in srgb, #22c55e 20%, transparent)",color:"#4ade80",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600},children:"You"})]})}),!ue&&!Ee&&g.jsx("button",{onClick:()=>F(B),style:{background:"transparent",border:"1px solid rgba(220, 38, 38, 0.4)",color:"#f87171",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",whiteSpace:"nowrap"},children:"Revoke Access"})]},B)})})]}),ne.length>0&&g.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.25rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[g.jsxs("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem"},children:["Pending Invitations (",ne.length,")"]}),g.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:ne.map(B=>g.jsxs("div",{style:{background:"color-mix(in srgb, #f59e0b 10%, transparent)",border:"1px solid color-mix(in srgb, #f59e0b 30%, transparent)",padding:"0.75rem 1rem",borderRadius:"6px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"},children:[g.jsx("div",{style:{flex:1,minWidth:0},children:g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[g.jsx("code",{style:{fontSize:"0.85rem",background:"color-mix(in srgb, currentColor 10%, transparent)",padding:"0.2rem 0.5rem",borderRadius:"4px",wordBreak:"break-all"},children:B}),g.jsx("span",{style:{background:"color-mix(in srgb, #f59e0b 20%, transparent)",color:"#fbbf24",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600},children:"Pending"})]})}),g.jsx("button",{onClick:()=>F(B),style:{background:"transparent",border:"1px solid color-mix(in srgb, currentColor 30%, transparent)",color:"inherit",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",whiteSpace:"nowrap",opacity:.8},children:"Cancel Invite"})]},B))})]}),g.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.25rem",borderRadius:"8px"},children:[g.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem"},children:"Invite User"}),g.jsxs("form",{onSubmit:H,style:{display:"flex",gap:"0.75rem"},children:[g.jsx("input",{type:"text",value:d,onChange:B=>m(B.target.value),placeholder:"Enter Firebase User ID",style:{flex:1,padding:"0.6rem 0.8rem",borderRadius:"6px",border:"1px solid color-mix(in srgb, currentColor 20%, transparent)",background:"color-mix(in srgb, currentColor 5%, transparent)",fontSize:"0.95rem",color:"inherit"}}),g.jsx("button",{type:"submit",disabled:p||!d.trim(),style:{background:"#646cff",color:"white",border:"none",padding:"0.6rem 1.25rem",borderRadius:"6px",cursor:p||!d.trim()?"not-allowed":"pointer",fontWeight:500,opacity:p||!d.trim()?.7:1,whiteSpace:"nowrap"},children:p?"Inviting...":"Send Invite"})]}),g.jsx("p",{style:{margin:"1rem 0 0 0",fontSize:"0.85rem",opacity:.6},children:" The invited user will need to accept the invitation from their Account page using this budget's ID:"}),g.jsx("code",{style:{display:"block",marginTop:"0.5rem",padding:"0.5rem 0.75rem",background:"color-mix(in srgb, currentColor 10%, transparent)",borderRadius:"6px",fontSize:"0.85rem",wordBreak:"break-all"},children:i.id})]})]})}function Yl(){return g.jsx("span",{style:{display:"inline-block",width:"14px",height:"14px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTopColor:"white",borderRadius:"50%",animation:"spin 0.8s linear infinite",marginRight:"0.5rem",verticalAlign:"middle"}})}function bN(){const i=Ou(),{currentBudget:e}=ki(),n=j.useRef(!1),[s,o]=j.useState({ownerIdInFirestore:null,ownerEmailInFirestore:null,accountTypeMigrationNeeded:!1,accountsWithOldType:0,userDocsMigrationNeeded:!1,usersToMigrate:0,acceptedUserIdsMigrationNeeded:!1,loading:!0}),[u,d]=j.useState(!1),[m,p]=j.useState(null),[y,E]=j.useState(!1),[T,x]=j.useState(null),[M,H]=j.useState(!1),[F,C]=j.useState(null),[ne,B]=j.useState(!1),[ue,Ee]=j.useState(null),[Te,Re]=j.useState(!1),[D,A]=j.useState(null),R=ba(Ms),k=i.get_current_firebase_user();j.useEffect(()=>{async function O(){if(!e||n.current){e||o({ownerIdInFirestore:null,ownerEmailInFirestore:null,accountTypeMigrationNeeded:!1,accountsWithOldType:0,userDocsMigrationNeeded:!1,usersToMigrate:0,acceptedUserIdsMigrationNeeded:!1,loading:!1});return}n.current=!0;try{const L=Xe(R,"budgets",e.id),Q=await Je(L);if(Q.exists()){const Y=Q.data(),we=(Y.accounts||[]).filter(mt=>mt.account_type!==void 0),Ie=Y.user_ids||[];let je=0;for(const mt of Ie){const Vt=Xe(R,"users",mt),de=await Je(Vt);de.exists()&&de.data().budget_ids?.includes(e.id)||je++}const Be=Y.accepted_user_ids===void 0;o({ownerIdInFirestore:Y.owner_id||null,ownerEmailInFirestore:Y.owner_email||null,accountTypeMigrationNeeded:we.length>0,accountsWithOldType:we.length,userDocsMigrationNeeded:je>0,usersToMigrate:je,acceptedUserIdsMigrationNeeded:Be,loading:!1})}else o({ownerIdInFirestore:null,ownerEmailInFirestore:null,accountTypeMigrationNeeded:!1,accountsWithOldType:0,userDocsMigrationNeeded:!1,usersToMigrate:0,acceptedUserIdsMigrationNeeded:!1,loading:!1})}catch{o({ownerIdInFirestore:null,ownerEmailInFirestore:null,accountTypeMigrationNeeded:!1,accountsWithOldType:0,userDocsMigrationNeeded:!1,usersToMigrate:0,acceptedUserIdsMigrationNeeded:!1,loading:!1})}}O()},[e,R]);async function U(){if(!(!e||!k)){d(!0),p(null);try{const O=Xe(R,"budgets",e.id),L=await Je(O);if(!L.exists())throw new Error("Budget document not found");const Q=L.data();if(Q.owner_id){p(`Owner ID already set: ${Q.owner_id}`),o(fe=>({...fe,ownerIdInFirestore:Q.owner_id})),d(!1);return}const Y=Q.user_ids?.[0]||k.uid;await St(O,{...Q,owner_id:Y}),o(fe=>({...fe,ownerIdInFirestore:Y})),p(`Successfully added owner ID: ${Y}`)}catch(O){p(`Error: ${O instanceof Error?O.message:"Migration failed"}`)}finally{d(!1)}}}async function z(){if(!(!e||!k)){E(!0),x(null);try{const O=Xe(R,"budgets",e.id),L=await Je(O);if(!L.exists())throw new Error("Budget document not found");const Q=L.data();if(Q.owner_email){x(`Owner email already set: ${Q.owner_email}`),o(Y=>({...Y,ownerEmailInFirestore:Q.owner_email})),E(!1);return}if(Q.owner_id!==k.uid)throw new Error("Only the budget owner can run this migration");await St(O,{...Q,owner_email:k.email||null}),o(Y=>({...Y,ownerEmailInFirestore:k.email||null})),x(`Successfully added owner email: ${k.email}`)}catch(O){x(`Error: ${O instanceof Error?O.message:"Migration failed"}`)}finally{E(!1)}}}async function I(){if(!(!e||!k)){H(!0),C(null);try{const O=Xe(R,"budgets",e.id),L=await Je(O);if(!L.exists())throw new Error("Budget document not found");const Q=L.data(),Y=Q.accounts||[],fe=Q.account_groups||[],we=Y.filter(W=>W.account_type!==void 0);if(we.length===0){C("No accounts need migration - already using new format"),o(W=>({...W,accountTypeMigrationNeeded:!1,accountsWithOldType:0})),H(!1);return}const Ie={checking:{name:"Checking",expected_balance:"positive"},savings:{name:"Savings",expected_balance:"positive"},credit_card:{name:"Credit Card",expected_balance:"negative"}},je=[...new Set(we.map(W=>W.account_type))],Be={},mt=[...fe];let Vt=fe.length>0?Math.max(...fe.map(W=>W.sort_order))+1:0;for(const W of je){const le=Ie[W]||{name:W,expected_balance:"positive"},N=mt.find(q=>q.name.toLowerCase()===le.name.toLowerCase());if(N)Be[W]=N.id;else{const q={id:`account_group_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:le.name,sort_order:Vt++,expected_balance:le.expected_balance};mt.push(q),Be[W]=q.id}}const de=Y.map(W=>{if(W.account_type!==void 0){const{account_type:le,...N}=W;return{...N,account_group_id:Be[le]||null}}return W});await St(O,{...Q,accounts:de,account_groups:mt}),o(W=>({...W,accountTypeMigrationNeeded:!1,accountsWithOldType:0}));const _e=mt.length-fe.length;C(`Successfully migrated ${we.length} account(s). Created ${_e} new account type(s): ${je.map(W=>Ie[W]?.name||W).join(", ")}`)}catch(O){C(`Error: ${O instanceof Error?O.message:"Migration failed"}`)}finally{H(!1)}}}async function Ye(){if(!(!e||!k)){B(!0),Ee(null);try{const O=Xe(R,"budgets",e.id),L=await Je(O);if(!L.exists())throw new Error("Budget document not found");const Y=L.data().user_ids||[];let fe=0,we=0;for(const Ie of Y){const je=Xe(R,"users",Ie),Be=await Je(je);if(!Be.exists())await St(je,{uid:Ie,email:null,budget_ids:[e.id],created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),we++,fe++;else{const mt=Be.data();mt.budget_ids?.includes(e.id)||(await St(je,{...mt,budget_ids:[...mt.budget_ids||[],e.id],updated_at:new Date().toISOString()}),fe++)}}o(Ie=>({...Ie,userDocsMigrationNeeded:!1,usersToMigrate:0})),Ee(fe===0?"All user documents are already up to date":`Successfully migrated ${fe} user(s). Created ${we} new user document(s), updated ${fe-we} existing.`)}catch(O){Ee(`Error: ${O instanceof Error?O.message:"Migration failed"}`)}finally{B(!1)}}}async function at(){if(!(!e||!k)){Re(!0),A(null);try{const O=Xe(R,"budgets",e.id),L=await Je(O);if(!L.exists())throw new Error("Budget document not found");const Q=L.data();if(Q.accepted_user_ids!==void 0){A("accepted_user_ids field already exists"),o(fe=>({...fe,acceptedUserIdsMigrationNeeded:!1})),Re(!1);return}const Y=Q.user_ids||[];await St(O,{...Q,accepted_user_ids:Y}),o(fe=>({...fe,acceptedUserIdsMigrationNeeded:!1})),A(`Successfully added accepted_user_ids field with ${Y.length} user(s) marked as accepted.`)}catch(O){A(`Error: ${O instanceof Error?O.message:"Migration failed"}`)}finally{Re(!1)}}}const ee=!!s.ownerIdInFirestore,ye=!!s.ownerEmailInFirestore,he=s.accountTypeMigrationNeeded,ke=s.userDocsMigrationNeeded,Ue=s.acceptedUserIdsMigrationNeeded;return s.loading?g.jsxs("div",{children:[g.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),g.jsx("h2",{style:{marginTop:0},children:"Data Migrations"}),g.jsx("p",{style:{opacity:.7},children:"Checking migration status..."})]}):g.jsxs("div",{children:[g.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),g.jsx("h2",{style:{marginTop:0},children:"Data Migrations"}),g.jsx("p",{style:{opacity:.7,marginBottom:"1.5rem"},children:"Run migrations to update your budget data structure with new fields."}),g.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.5rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[g.jsxs("h3",{style:{marginTop:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx("span",{style:{background:ee?"rgba(34, 197, 94, 0.2)":"rgba(100, 108, 255, 0.2)",color:ee?"#4ade80":"#a5b4fc",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600},children:ee?"Complete":"Step 1"}),"Add Owner ID to Budget"]}),g.jsx("p",{style:{opacity:.7,marginBottom:"1rem"},children:"Sets the budget owner to the first user in the user list (the original creator)."}),u?g.jsxs("div",{style:{background:"rgba(100, 108, 255, 0.1)",border:"1px solid rgba(100, 108, 255, 0.3)",color:"#a5b4fc",padding:"0.75rem 1rem",borderRadius:"8px",display:"flex",alignItems:"center"},children:[g.jsx(Yl,{})," Running migration..."]}):ee?g.jsxs("div",{style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#4ade80",padding:"0.75rem 1rem",borderRadius:"8px"},children:[" Owner ID already set: ",g.jsx("strong",{children:s.ownerIdInFirestore})]}):g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:U,disabled:!k,style:{background:"#646cff",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:k?"pointer":"not-allowed",fontWeight:500,opacity:k?1:.7},children:"Add Owner ID"}),m&&g.jsx("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",borderRadius:"8px",background:m.startsWith("Error")?"rgba(220, 38, 38, 0.1)":"rgba(34, 197, 94, 0.1)",border:m.startsWith("Error")?"1px solid rgba(220, 38, 38, 0.3)":"1px solid rgba(34, 197, 94, 0.3)",color:m.startsWith("Error")?"#f87171":"#4ade80"},children:m})]})]}),g.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.5rem",borderRadius:"8px",opacity:ee?1:.5},children:[g.jsxs("h3",{style:{marginTop:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx("span",{style:{background:ye?"rgba(34, 197, 94, 0.2)":"rgba(100, 108, 255, 0.2)",color:ye?"#4ade80":"#a5b4fc",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600},children:ye?"Complete":"Step 2"}),"Add Owner Email to Budget"]}),g.jsxs("p",{style:{opacity:.7,marginBottom:"1rem"},children:["Stores the budget owner's email for display purposes.",k?.email&&g.jsxs(g.Fragment,{children:[" Your email: ",g.jsx("strong",{children:k.email})]})]}),!ee&&g.jsx("div",{style:{background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",color:"#fbbf24",padding:"0.75rem 1rem",borderRadius:"8px"},children:" Complete Step 1 first (Add Owner ID)"}),ee&&y&&g.jsxs("div",{style:{background:"rgba(100, 108, 255, 0.1)",border:"1px solid rgba(100, 108, 255, 0.3)",color:"#a5b4fc",padding:"0.75rem 1rem",borderRadius:"8px",display:"flex",alignItems:"center"},children:[g.jsx(Yl,{})," Running migration..."]}),ee&&!y&&ye&&g.jsxs("div",{style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#4ade80",padding:"0.75rem 1rem",borderRadius:"8px"},children:[" Owner email already set: ",g.jsx("strong",{children:s.ownerEmailInFirestore})]}),ee&&!y&&!ye&&g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:z,disabled:!k,style:{background:"#646cff",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:k?"pointer":"not-allowed",fontWeight:500,opacity:k?1:.7},children:"Add Owner Email"}),T&&g.jsx("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",borderRadius:"8px",background:T.startsWith("Error")?"rgba(220, 38, 38, 0.1)":"rgba(34, 197, 94, 0.1)",border:T.startsWith("Error")?"1px solid rgba(220, 38, 38, 0.3)":"1px solid rgba(34, 197, 94, 0.3)",color:T.startsWith("Error")?"#f87171":"#4ade80"},children:T})]})]}),g.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.5rem",borderRadius:"8px",marginTop:"1.5rem"},children:[g.jsxs("h3",{style:{marginTop:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx("span",{style:{background:he?"rgba(100, 108, 255, 0.2)":"rgba(34, 197, 94, 0.2)",color:he?"#a5b4fc":"#4ade80",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600},children:he?"Step 3":"Complete"}),"Migrate Account Types to Groups"]}),g.jsx("p",{style:{opacity:.7,marginBottom:"1rem"},children:"Converts the old fixed account types (Checking, Savings, Credit Card) to customizable account groups. This creates account groups for each existing type and updates your accounts to reference them."}),M?g.jsxs("div",{style:{background:"rgba(100, 108, 255, 0.1)",border:"1px solid rgba(100, 108, 255, 0.3)",color:"#a5b4fc",padding:"0.75rem 1rem",borderRadius:"8px",display:"flex",alignItems:"center"},children:[g.jsx(Yl,{})," Running migration..."]}):he?g.jsxs(g.Fragment,{children:[g.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",color:"#fbbf24",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1rem"},children:[" Found ",s.accountsWithOldType," account(s) using the old format"]}),g.jsx("button",{onClick:I,disabled:!k,style:{background:"#646cff",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:k?"pointer":"not-allowed",fontWeight:500,opacity:k?1:.7},children:"Migrate Account Types"}),F&&g.jsx("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",borderRadius:"8px",background:F.startsWith("Error")?"rgba(220, 38, 38, 0.1)":"rgba(34, 197, 94, 0.1)",border:F.startsWith("Error")?"1px solid rgba(220, 38, 38, 0.3)":"1px solid rgba(34, 197, 94, 0.3)",color:F.startsWith("Error")?"#f87171":"#4ade80"},children:F})]}):g.jsx("div",{style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#4ade80",padding:"0.75rem 1rem",borderRadius:"8px"},children:" All accounts are using the new group format"})]}),g.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.5rem",borderRadius:"8px",marginTop:"1.5rem"},children:[g.jsxs("h3",{style:{marginTop:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx("span",{style:{background:ke?"rgba(100, 108, 255, 0.2)":"rgba(34, 197, 94, 0.2)",color:ke?"#a5b4fc":"#4ade80",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600},children:ke?"Step 4":"Complete"}),"Migrate User Documents (Budget Access)"]}),g.jsxs("p",{style:{opacity:.7,marginBottom:"1rem"},children:["Creates user documents in the ",g.jsx("code",{style:{background:"color-mix(in srgb, currentColor 10%, transparent)",padding:"0.1rem 0.4rem",borderRadius:"4px"},children:"users"})," collection and populates their ",g.jsx("code",{style:{background:"color-mix(in srgb, currentColor 10%, transparent)",padding:"0.1rem 0.4rem",borderRadius:"4px"},children:"budget_ids"})," array. This is required for the new permission system where user documents are the source of truth for budget access."]}),ne?g.jsxs("div",{style:{background:"rgba(100, 108, 255, 0.1)",border:"1px solid rgba(100, 108, 255, 0.3)",color:"#a5b4fc",padding:"0.75rem 1rem",borderRadius:"8px",display:"flex",alignItems:"center"},children:[g.jsx(Yl,{})," Running migration..."]}):ke?g.jsxs(g.Fragment,{children:[g.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",color:"#fbbf24",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1rem"},children:[" Found ",s.usersToMigrate," user(s) needing user document migration"]}),g.jsx("button",{onClick:Ye,disabled:!k,style:{background:"#646cff",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:k?"pointer":"not-allowed",fontWeight:500,opacity:k?1:.7},children:"Migrate User Documents"}),ue&&g.jsx("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",borderRadius:"8px",background:ue.startsWith("Error")?"rgba(220, 38, 38, 0.1)":"rgba(34, 197, 94, 0.1)",border:ue.startsWith("Error")?"1px solid rgba(220, 38, 38, 0.3)":"1px solid rgba(34, 197, 94, 0.3)",color:ue.startsWith("Error")?"#f87171":"#4ade80"},children:ue})]}):g.jsx("div",{style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#4ade80",padding:"0.75rem 1rem",borderRadius:"8px"},children:" All user documents are set up with budget access"})]}),g.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.5rem",borderRadius:"8px",marginTop:"1.5rem"},children:[g.jsxs("h3",{style:{marginTop:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx("span",{style:{background:Ue?"rgba(100, 108, 255, 0.2)":"rgba(34, 197, 94, 0.2)",color:Ue?"#a5b4fc":"#4ade80",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600},children:Ue?"Step 5":"Complete"}),"Add Accepted Users Tracking"]}),g.jsxs("p",{style:{opacity:.7,marginBottom:"1rem"},children:["Adds the ",g.jsx("code",{style:{background:"color-mix(in srgb, currentColor 10%, transparent)",padding:"0.1rem 0.4rem",borderRadius:"4px"},children:"accepted_user_ids"})," field to track which invited users have accepted. For existing budgets, all current users are marked as accepted."]}),Te?g.jsxs("div",{style:{background:"rgba(100, 108, 255, 0.1)",border:"1px solid rgba(100, 108, 255, 0.3)",color:"#a5b4fc",padding:"0.75rem 1rem",borderRadius:"8px",display:"flex",alignItems:"center"},children:[g.jsx(Yl,{})," Running migration..."]}):Ue?g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:at,disabled:!k,style:{background:"#646cff",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:k?"pointer":"not-allowed",fontWeight:500,opacity:k?1:.7},children:"Add Accepted Users Field"}),D&&g.jsx("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",borderRadius:"8px",background:D.startsWith("Error")?"rgba(220, 38, 38, 0.1)":"rgba(34, 197, 94, 0.1)",border:D.startsWith("Error")?"1px solid rgba(220, 38, 38, 0.3)":"1px solid rgba(34, 197, 94, 0.3)",color:D.startsWith("Error")?"#f87171":"#4ade80"},children:D})]}):g.jsx("div",{style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#4ade80",padding:"0.75rem 1rem",borderRadius:"8px"},children:" Budget already has accepted_user_ids tracking"})]})]})}const Cg={critical_bug:{label:"Critical Bug",color:"#ff4757",bgColor:"rgba(255, 71, 87, 0.15)"},bug:{label:"Bug",color:"#ffa502",bgColor:"rgba(255, 165, 2, 0.15)"},feature:{label:"Feature",color:"#2ed573",bgColor:"rgba(46, 213, 115, 0.15)"}};function EN(){const[i,e]=j.useState([]),[n,s]=j.useState(!0),[o,u]=j.useState(null),[d,m]=j.useState(null),[p,y]=j.useState(null),[E,T]=j.useState(!1),[x,M]=j.useState(""),[H,F]=j.useState("bug"),[C,ne]=j.useState(!1),[B,ue]=j.useState(null),[Ee,Te]=j.useState(null),Re=j.useContext(_u),D=ba(Ms);j.useEffect(()=>{A()},[]);async function A(){try{const L=xd(D,"feedback"),Q=await Rd(L),Y=[];Q.forEach(fe=>{const we=fe.data();we.items&&we.items.forEach(Ie=>{Y.push({...Ie,user_email:we.user_email,doc_id:fe.id})})}),e(Y)}catch(L){u(L instanceof Error?L.message:"Failed to load feedback")}finally{s(!1)}}async function R(L){if(L.preventDefault(),!(!x.trim()||!Re.username)){ne(!0),u(null);try{const Q=Re.username.replace(/[.@]/g,"_"),Y=Xe(D,"feedback",Q),fe={id:`feedback_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,text:x.trim(),created_at:new Date().toISOString(),is_done:!1,completed_at:null,sort_order:Date.now(),feedback_type:H};(await Je(Y)).exists()?await St(Y,{items:dS(fe)},{merge:!0}):await St(Y,{user_email:Re.username,items:[fe]}),e(Ie=>[...Ie,{...fe,user_email:Re.username,doc_id:Q}]),M(""),F("bug"),T(!1)}catch(Q){u(Q instanceof Error?Q.message:"Failed to add feedback")}finally{ne(!1)}}}async function k(L){try{const Q=Xe(D,"feedback",L.doc_id),Y=await Je(Q);if(Y.exists()){const fe=Y.data(),we=fe.items.map(Ie=>Ie.id===L.id?{id:L.id,text:L.text,created_at:L.created_at,is_done:L.is_done,completed_at:L.completed_at,sort_order:L.sort_order,feedback_type:L.feedback_type||"bug"}:Ie);await St(Q,{...fe,items:we})}}catch(Q){u(Q instanceof Error?Q.message:"Failed to update feedback")}}function U(L){L.is_done?z(L):ue(L)}async function z(L){const Q={...L,is_done:!L.is_done,completed_at:L.is_done?null:new Date().toISOString()};e(Y=>Y.map(fe=>fe.id===L.id?Q:fe)),await k(Q)}function I(){B&&(z(B),ue(null))}async function Ye(L){if(!Ee)return;const Q={...Ee,feedback_type:L};e(Y=>Y.map(fe=>fe.id===Ee.id?Q:fe)),Te(null),await k(Q)}const at=i.filter(L=>!L.is_done).sort((L,Q)=>L.sort_order-Q.sort_order),ee=i.filter(L=>L.is_done).sort((L,Q)=>{const Y=L.completed_at?new Date(L.completed_at).getTime():0;return(Q.completed_at?new Date(Q.completed_at).getTime():0)-Y});function ye(L,Q){m(Q),L.dataTransfer.effectAllowed="move"}function he(L,Q){L.preventDefault(),Q!==d&&y(Q)}function ke(){y(null)}function Ue(){m(null),y(null)}async function O(L,Q){if(L.preventDefault(),!d||d===Q){Ue();return}const Y=at.findIndex(je=>je.id===d),fe=[...at],[we]=fe.splice(Y,1);if(Q==="__end__")fe.push(we);else{const je=fe.findIndex(Be=>Be.id===Q);fe.splice(je,0,we)}const Ie=fe.map((je,Be)=>({...je,sort_order:Be}));e(je=>[...je.filter(Be=>Be.is_done),...Ie]),Ue();for(const je of Ie)await k(je)}return n?g.jsx("p",{children:"Loading feedback..."}):g.jsxs("div",{children:[g.jsx("h2",{style:{marginTop:0},children:"Feedback"}),g.jsx("p",{style:{...Rh,fontSize:"0.9rem"},children:"View and manage user feedback. Drag to reorder pending items."}),o&&g.jsx(Ch,{message:o,onDismiss:()=>u(null)}),g.jsxs("div",{style:Do,children:[at.length===0&&!E&&g.jsx("p",{style:{opacity:.7},children:"No pending feedback."}),at.map(L=>g.jsx(TN,{item:L,isDragging:d===L.id,isDragOver:p===L.id,onDragStart:Q=>ye(Q,L.id),onDragOver:Q=>he(Q,L.id),onDragLeave:ke,onDragEnd:Ue,onDrop:Q=>O(Q,L.id),onToggleDone:()=>U(L),onTypeClick:()=>Te(L)},L.id)),d&&at.length>0&&g.jsx(kp,{isActive:p==="__end__",onDragOver:L=>he(L,"__end__"),onDragLeave:ke,onDrop:L=>O(L,"__end__")})]}),E?g.jsxs(Mu,{onSubmit:R,children:[g.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:["critical_bug","bug","feature"].map(L=>{const Q=Cg[L],Y=H===L;return g.jsx("button",{type:"button",onClick:()=>F(L),style:{flex:1,padding:"0.6rem 0.75rem",border:`2px solid ${Y?Q.color:"transparent"}`,borderRadius:"0.5rem",background:Y?Q.bgColor:"rgba(255,255,255,0.05)",color:Y?Q.color:"rgba(255,255,255,0.5)",cursor:"pointer",fontWeight:Y?600:400,fontSize:"0.85rem",transition:"all 0.15s ease"},children:Q.label},L)})}),g.jsx(WS,{value:x,onChange:L=>M(L.target.value),placeholder:"Enter your feedback, bug report, or feature request...",autoFocus:!0,required:!0}),g.jsxs(Ho,{children:[g.jsx(dt,{type:"submit",isLoading:C,disabled:!x.trim(),children:"Add Feedback"}),g.jsx(dt,{type:"button",variant:"secondary",onClick:()=>{T(!1),M(""),F("bug")},children:"Cancel"})]})]}):g.jsx(dt,{variant:"primary-large",onClick:()=>T(!0),children:"+ Add Feedback"}),ee.length>0&&g.jsx(dN,{title:"Completed",count:ee.length,children:g.jsx("div",{style:{...Do,marginTop:"0.5rem"},children:ee.map(L=>g.jsx("div",{style:{...Nu,opacity:.6,flexDirection:"column",alignItems:"stretch",gap:"0.5rem"},children:g.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[g.jsx("input",{type:"checkbox",checked:L.is_done,onChange:()=>U(L),style:{width:"1.25rem",height:"1.25rem",marginTop:"0.1rem",cursor:"pointer",accentColor:He.primary,flexShrink:0}}),g.jsx(JS,{type:L.feedback_type,onClick:()=>Te(L)}),g.jsxs("div",{style:{flex:1},children:[g.jsx("p",{style:{margin:0,lineHeight:1.5,textDecoration:"line-through"},children:L.text}),g.jsxs("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.8rem",opacity:.8},children:[L.user_email,"  Created: ",Rg(L.created_at)]}),L.completed_at&&g.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.8rem",color:He.success},children:[" Completed: ",Rg(L.completed_at)]})]})]})},L.id))})}),g.jsxs(Ag,{isOpen:B!==null,onClose:()=>ue(null),title:"Mark as Complete",children:[g.jsx("p",{style:{margin:"0 0 1.5rem 0"},children:"Are you sure you want to mark this feedback item as complete?"}),B&&g.jsxs("p",{style:{margin:"0 0 1.5rem 0",padding:"0.75rem",background:"rgba(255,255,255,0.05)",borderRadius:"0.5rem",fontSize:"0.9rem"},children:['"',B.text,'"']}),g.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[g.jsx(dt,{variant:"secondary",onClick:()=>ue(null),children:"Cancel"}),g.jsx(dt,{variant:"primary",onClick:I,children:"Mark Complete"})]})]}),g.jsxs(Ag,{isOpen:Ee!==null,onClose:()=>Te(null),title:"Change Feedback Type",children:[g.jsx("p",{style:{margin:"0 0 1rem 0",fontSize:"0.9rem",opacity:.8},children:"Select a new type for this feedback:"}),g.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:["critical_bug","bug","feature"].map(L=>{const Q=Cg[L],Y=Ee?.feedback_type===L||!Ee?.feedback_type&&L==="bug";return g.jsx("button",{type:"button",onClick:()=>Ye(L),style:{flex:1,padding:"0.75rem 0.5rem",border:`2px solid ${Y?Q.color:"transparent"}`,borderRadius:"0.5rem",background:Y?Q.bgColor:"rgba(255,255,255,0.05)",color:Y?Q.color:"rgba(255,255,255,0.5)",cursor:"pointer",fontWeight:Y?600:400,fontSize:"0.85rem",transition:"all 0.15s ease"},children:Q.label},L)})}),g.jsx(dt,{variant:"secondary",onClick:()=>Te(null),style:{width:"100%"},children:"Cancel"})]})]})}function JS({type:i,onClick:e}){const s=Cg[i||"bug"];return g.jsx("button",{type:"button",onClick:e,style:{padding:"0.25rem 0.5rem",borderRadius:"0.25rem",background:s.bgColor,color:s.color,fontSize:"0.7rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.025em",flexShrink:0,border:"none",cursor:"pointer",transition:"opacity 0.15s, transform 0.15s"},onMouseEnter:o=>{o.currentTarget.style.opacity="0.8",o.currentTarget.style.transform="scale(1.05)"},onMouseLeave:o=>{o.currentTarget.style.opacity="1",o.currentTarget.style.transform="scale(1)"},title:"Click to change type",children:s.label})}function TN({item:i,isDragging:e,isDragOver:n,onDragStart:s,onDragOver:o,onDragLeave:u,onDragEnd:d,onDrop:m,onToggleDone:p,onTypeClick:y}){return g.jsxs("div",{onDragOver:E=>{E.stopPropagation(),o(E)},onDragLeave:E=>{E.stopPropagation(),u()},onDrop:E=>{E.stopPropagation(),m(E)},style:{position:"relative"},children:[g.jsx("div",{style:{...$S,opacity:n?1:0,boxShadow:n?"0 0 8px rgba(100, 108, 255, 0.6)":"none"}}),g.jsx("div",{draggable:!0,onDragStart:s,onDragEnd:d,style:{...Nu,cursor:"grab",opacity:e?.5:1,flexDirection:"column",alignItems:"stretch",gap:"0.75rem"},children:g.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[g.jsx("span",{style:{...KS,marginTop:"0.25rem"},children:""}),g.jsx("input",{type:"checkbox",checked:i.is_done,onChange:p,style:{width:"1.25rem",height:"1.25rem",marginTop:"0.1rem",cursor:"pointer",accentColor:He.primary,flexShrink:0}}),g.jsx(JS,{type:i.feedback_type,onClick:y}),g.jsxs("div",{style:{flex:1},children:[g.jsx("p",{style:{margin:0,lineHeight:1.5},children:i.text}),g.jsxs("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.8rem",opacity:.6},children:[i.user_email,"  ",Rg(i.created_at)]})]})]})})]})}function SN(){const{currentUserId:i}=ki(),[e,n]=j.useState([]),[s,o]=j.useState(!1),u=ba(Ms);function d(M,H){n(F=>F.map(C=>C.name===M?{...C,...H}:C))}async function m(){o(!0),n([]),n([{name:"Read unauthorized budget",status:"pending",message:"",expectedToFail:!0},{name:"Read another user's document",status:"pending",message:"",expectedToFail:!0},{name:"Toggle is_admin in own permission_flags",status:"pending",message:"",expectedToFail:!0},{name:"Toggle is_test in own permission_flags",status:"pending",message:"",expectedToFail:!0},{name:"Read own user document",status:"pending",message:"",expectedToFail:!1}]),await p("Read unauthorized budget",async()=>{const F=Xe(u,"budgets","unauthorized_budget_test_12345");return await Je(F),"Was able to read budget (unexpected)"},!0),await p("Read another user's document",async()=>{const F=Xe(u,"users","another_user_test_12345");return await Je(F),"Was able to read user document (unexpected)"},!0),await p("Toggle is_admin in own permission_flags",async()=>{if(!i)throw new Error("Not authenticated");const H=Xe(u,"users",i),C=(await Je(H)).data()?.permission_flags?.is_admin??!1;return await md(H,{"permission_flags.is_admin":!C}),`Was able to change is_admin from ${C} to ${!C} (SECURITY ISSUE!)`},!0),await p("Toggle is_test in own permission_flags",async()=>{if(!i)throw new Error("Not authenticated");const H=Xe(u,"users",i),C=(await Je(H)).data()?.permission_flags?.is_test??!1;return await md(H,{"permission_flags.is_test":!C}),`Was able to change is_test from ${C} to ${!C} (SECURITY ISSUE!)`},!0),await p("Read own user document",async()=>{if(!i)throw new Error("Not authenticated");const H=Xe(u,"users",i);if((await Je(H)).exists())return"Successfully read own document";throw new Error("Document does not exist")},!1),o(!1)}async function p(M,H,F){d(M,{status:"running",message:"Running..."});try{const C=await H();F?d(M,{status:"failed",message:` ${C}`}):d(M,{status:"passed",message:` ${C}`})}catch(C){const ne=C instanceof Error?C.message:"Unknown error";F?d(M,{status:"passed",message:` Blocked as expected: ${ne}`}):d(M,{status:"failed",message:` ${ne}`})}}async function y(M){switch(e.find(F=>F.name===M)||n(F=>[...F,{name:M,status:"pending",message:"",expectedToFail:!0}]),o(!0),M){case"Read unauthorized budget":await p(M,async()=>{const C=Xe(u,"budgets","unauthorized_budget_test_12345");return await Je(C),"Was able to read budget (unexpected)"},!0);break;case"Read another user's document":await p(M,async()=>{const C=Xe(u,"users","another_user_test_12345");return await Je(C),"Was able to read user document (unexpected)"},!0);break;case"Toggle is_admin in own permission_flags":await p(M,async()=>{if(!i)throw new Error("Not authenticated");const F=Xe(u,"users",i),ne=(await Je(F)).data()?.permission_flags?.is_admin??!1;return await md(F,{"permission_flags.is_admin":!ne}),`Was able to change is_admin from ${ne} to ${!ne} (SECURITY ISSUE!)`},!0);break;case"Toggle is_test in own permission_flags":await p(M,async()=>{if(!i)throw new Error("Not authenticated");const F=Xe(u,"users",i),ne=(await Je(F)).data()?.permission_flags?.is_test??!1;return await md(F,{"permission_flags.is_test":!ne}),`Was able to change is_test from ${ne} to ${!ne} (SECURITY ISSUE!)`},!0);break;case"Read own user document":await p(M,async()=>{if(!i)throw new Error("Not authenticated");const F=Xe(u,"users",i);if((await Je(F)).exists())return"Successfully read own document";throw new Error("Document does not exist")},!1);break}o(!1)}const E=e.filter(M=>M.status==="passed").length,T=e.filter(M=>M.status==="failed").length,x=e.length;return g.jsxs("div",{children:[g.jsx("p",{style:Rh,children:'Run security tests to verify Firestore rules are working correctly. Tests that are expected to fail (blocked by security rules) should show as "passed".'}),g.jsx("div",{style:{marginBottom:"1.5rem"},children:g.jsx(dt,{onClick:m,disabled:s,variant:"primary",children:s?"Running Tests...":"Run All Tests"})}),e.length>0&&g.jsx("div",{style:{marginBottom:"1.5rem"},children:g.jsxs("div",{style:{display:"flex",gap:"1rem",padding:"0.75rem 1rem",borderRadius:"8px",background:"color-mix(in srgb, currentColor 5%, transparent)",marginBottom:"1rem"},children:[g.jsxs("span",{children:["Total: ",g.jsx("strong",{children:x})]}),g.jsxs("span",{style:{color:He.success},children:["Passed: ",g.jsx("strong",{children:E})]}),g.jsxs("span",{style:{color:He.danger},children:["Failed: ",g.jsx("strong",{children:T})]})]})}),g.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[g.jsx("h3",{style:{margin:"0.5rem 0"},children:"Individual Tests"}),g.jsx(Kl,{name:"Read unauthorized budget",description:"Try to read a budget the user doesn't have access to",expectedBehavior:"Should be blocked by Firestore rules",result:e.find(M=>M.name==="Read unauthorized budget"),onRun:()=>y("Read unauthorized budget"),disabled:s}),g.jsx(Kl,{name:"Read another user's document",description:"Try to read another user's profile document",expectedBehavior:"Should be blocked by Firestore rules",result:e.find(M=>M.name==="Read another user's document"),onRun:()=>y("Read another user's document"),disabled:s}),g.jsx(Kl,{name:"Toggle is_admin in own permission_flags",description:"Try to change your admin privileges (toggles current value)",expectedBehavior:"Should be blocked - permission_flags is protected",result:e.find(M=>M.name==="Toggle is_admin in own permission_flags"),onRun:()=>y("Toggle is_admin in own permission_flags"),disabled:s}),g.jsx(Kl,{name:"Toggle is_test in own permission_flags",description:"Try to change your test privileges (toggles current value)",expectedBehavior:"Should be blocked - permission_flags is protected",result:e.find(M=>M.name==="Toggle is_test in own permission_flags"),onRun:()=>y("Toggle is_test in own permission_flags"),disabled:s}),g.jsx(Kl,{name:"Read own user document",description:"Read your own user profile document",expectedBehavior:"Should succeed - users can read their own data",result:e.find(M=>M.name==="Read own user document"),onRun:()=>y("Read own user document"),disabled:s,expectedToSucceed:!0})]}),T>0&&g.jsxs(Ch,{style:{marginTop:"1.5rem"},children:[" ",T," test(s) failed! This may indicate a security vulnerability in your Firestore rules."]})]})}function Kl({name:i,description:e,expectedBehavior:n,result:s,onRun:o,disabled:u,expectedToSucceed:d}){const m=s?.status==="passed"?He.success:s?.status==="failed"?He.danger:s?.status==="running"?He.warning:"inherit";return g.jsxs("div",{style:{...Nu,display:"flex",flexDirection:"column",gap:"0.5rem"},children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem"},children:[g.jsxs("div",{style:{flex:1},children:[g.jsx("h4",{style:{margin:0,fontSize:"0.95rem"},children:i}),g.jsx("p",{style:{margin:"0.25rem 0 0",opacity:.7,fontSize:"0.85rem"},children:e}),g.jsxs("p",{style:{margin:"0.25rem 0 0",fontSize:"0.8rem",color:d?He.success:He.warning},children:["Expected: ",n]})]}),g.jsx(dt,{onClick:o,disabled:u,variant:"secondary",style:{flexShrink:0},children:s?.status==="running"?"":"Run"})]}),s&&s.status!=="pending"&&g.jsx("div",{style:{padding:"0.5rem 0.75rem",borderRadius:"6px",background:`color-mix(in srgb, ${m} 15%, transparent)`,border:`1px solid color-mix(in srgb, ${m} 30%, transparent)`,fontSize:"0.85rem",color:m},children:s.message})]})}function wN(){const{currentBudget:i,currentUserId:e,accessibleBudgets:n,loadAccessibleBudgets:s,switchToBudget:o,acceptBudgetInvite:u,checkBudgetInvite:d,renameBudget:m,loading:p}=ki(),[y,E]=j.useState(!1),[T,x]=j.useState(null),[M,H]=j.useState(null),[F,C]=j.useState(null),[ne,B]=j.useState(null),[ue,Ee]=j.useState(null),[Te,Re]=j.useState(""),[D,A]=j.useState(!1),[R,k]=j.useState(""),[U,z]=j.useState(!1),[I,Ye]=j.useState(null);j.useEffect(()=>{async function Y(){E(!0),await s(),E(!1)}Y()},[]);async function at(Y){if(Y!==i?.id){x(Y),C(null),B(null);try{await o(Y),B("Switched to budget successfully!"),await s()}catch(fe){C(fe instanceof Error?fe.message:"Failed to switch budget")}finally{x(null)}}}async function ee(Y){H(Y),C(null),B(null);try{await u(Y),B("Invitation accepted! You now have access to this budget."),await s()}catch(fe){C(fe instanceof Error?fe.message:"Failed to accept invitation")}finally{H(null)}}async function ye(Y){if(Y.preventDefault(),!!R.trim()){z(!0),C(null),Ye(null);try{const fe=await d(R.trim());fe?Ye(fe):C("No pending invitation found for this budget ID. Make sure you've been invited by the budget owner.")}catch(fe){C(fe instanceof Error?fe.message:"Failed to check invitation")}finally{z(!1)}}}async function he(){if(I){H(I.budgetId),C(null);try{await u(I.budgetId),B(`Successfully joined "${I.budgetName}"!`),Ye(null),k(""),await s()}catch(Y){C(Y instanceof Error?Y.message:"Failed to accept invitation")}finally{H(null)}}}function ke(Y,fe){Re(fe),Ee(Y)}function Ue(){Ee(null),Re("")}async function O(Y){if(Y.preventDefault(),!(!Te.trim()||!ue)){A(!0),C(null),B(null);try{await m(Te.trim()),B("Budget renamed successfully!"),Ee(null),await s()}catch(fe){C(fe instanceof Error?fe.message:"Failed to rename budget")}finally{A(!1)}}}const L=n.filter(Y=>!Y.isPending),Q=n.filter(Y=>Y.isPending);return p||y?g.jsx("p",{children:"Loading your budgets..."}):g.jsxs("div",{children:[g.jsx("h2",{style:{marginTop:0},children:"My Budgets"}),g.jsx("p",{style:{opacity:.7,marginBottom:"1.5rem"},children:"Manage your budgets, switch between them, and accept new invitations."}),F&&g.jsxs("div",{style:{background:"rgba(220, 38, 38, 0.1)",border:"1px solid rgba(220, 38, 38, 0.3)",color:"#f87171",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[g.jsx("span",{children:F}),g.jsx("button",{onClick:()=>C(null),style:{background:"transparent",border:"none",color:"#f87171",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.25rem",lineHeight:1},children:""})]}),ne&&g.jsxs("div",{style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#4ade80",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[g.jsx("span",{children:ne}),g.jsx("button",{onClick:()=>B(null),style:{background:"transparent",border:"none",color:"#4ade80",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.25rem",lineHeight:1},children:""})]}),Q.length>0&&g.jsxs("div",{style:{background:"color-mix(in srgb, #f59e0b 10%, transparent)",border:"1px solid color-mix(in srgb, #f59e0b 30%, transparent)",padding:"1.25rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[g.jsxs("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx("span",{children:""})," Pending Invitations (",Q.length,")"]}),g.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:Q.map(Y=>g.jsx(Jb,{budget:Y,isCurrent:!1,isAccepting:M===Y.id,isSwitching:!1,isEditing:!1,editName:"",isRenaming:!1,onAccept:()=>ee(Y.id),onSwitch:()=>{},onStartEdit:()=>{},onCancelEdit:()=>{},onEditNameChange:()=>{},onSaveEdit:()=>{}},Y.id))})]}),g.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.25rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[g.jsxs("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx("span",{children:""})," Your Budgets (",L.length,")"]}),L.length===0?g.jsx("p",{style:{opacity:.6,margin:0},children:"You don't have access to any budgets yet."}):g.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:L.map(Y=>{const fe=Y.id===i?.id,we=ue===Y.id;return g.jsx(Jb,{budget:Y,isCurrent:fe,isAccepting:!1,isSwitching:T===Y.id,isEditing:we,editName:we?Te:"",isRenaming:D,onAccept:()=>{},onSwitch:()=>at(Y.id),onStartEdit:()=>ke(Y.id,Y.name),onCancelEdit:Ue,onEditNameChange:Re,onSaveEdit:O},Y.id)})})]}),g.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.25rem",borderRadius:"8px"},children:[g.jsxs("h3",{style:{margin:"0 0 0.75rem 0",fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx("span",{children:""})," Join Budget by ID"]}),g.jsx("p",{style:{margin:"0 0 1rem 0",fontSize:"0.9rem",opacity:.7},children:"If someone shared a budget ID with you, enter it below to accept the invitation:"}),I?g.jsxs("div",{style:{background:"color-mix(in srgb, #22c55e 10%, transparent)",border:"1px solid color-mix(in srgb, #22c55e 30%, transparent)",padding:"1rem",borderRadius:"8px"},children:[g.jsx("p",{style:{margin:"0 0 0.75rem 0",fontWeight:500},children:" You've been invited to join:"}),g.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 8%, transparent)",padding:"0.75rem 1rem",borderRadius:"6px",marginBottom:"1rem"},children:[g.jsx("p",{style:{margin:"0 0 0.25rem 0",fontWeight:600,fontSize:"1.1rem"},children:I.budgetName}),I.ownerEmail&&g.jsxs("p",{style:{margin:0,fontSize:"0.9rem",opacity:.7},children:["Owner: ",I.ownerEmail]})]}),g.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[g.jsx("button",{onClick:he,disabled:M===I.budgetId,style:{background:"#22c55e",color:"white",border:"none",padding:"0.6rem 1.25rem",borderRadius:"6px",cursor:M===I.budgetId?"not-allowed":"pointer",fontWeight:500,opacity:M===I.budgetId?.7:1},children:M===I.budgetId?"Accepting...":"Accept Invitation"}),g.jsx("button",{onClick:()=>{Ye(null),k("")},disabled:M===I.budgetId,style:{background:"transparent",color:"inherit",border:"1px solid color-mix(in srgb, currentColor 30%, transparent)",padding:"0.6rem 1.25rem",borderRadius:"6px",cursor:M===I.budgetId?"not-allowed":"pointer",fontWeight:500,opacity:M===I.budgetId?.7:.8},children:"Cancel"})]})]}):g.jsxs("form",{onSubmit:ye,style:{display:"flex",gap:"0.75rem"},children:[g.jsx("input",{type:"text",value:R,onChange:Y=>k(Y.target.value),placeholder:"Enter Budget ID",style:{flex:1,padding:"0.6rem 0.8rem",borderRadius:"6px",border:"1px solid color-mix(in srgb, currentColor 20%, transparent)",background:"color-mix(in srgb, currentColor 5%, transparent)",fontSize:"0.95rem",color:"inherit"}}),g.jsx("button",{type:"submit",disabled:U||!R.trim(),style:{background:"#646cff",color:"white",border:"none",padding:"0.6rem 1.25rem",borderRadius:"6px",cursor:U||!R.trim()?"not-allowed":"pointer",fontWeight:500,opacity:U||!R.trim()?.7:1,whiteSpace:"nowrap"},children:U?"Checking...":"Check Invite"})]})]}),e&&g.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"color-mix(in srgb, currentColor 3%, transparent)",borderRadius:"6px",fontSize:"0.85rem",opacity:.7},children:[g.jsx("p",{style:{margin:"0 0 0.5rem 0"},children:" Share your User ID with budget owners so they can invite you:"}),g.jsx("code",{style:{display:"block",padding:"0.5rem 0.75rem",background:"color-mix(in srgb, currentColor 8%, transparent)",borderRadius:"4px",fontSize:"0.8rem",wordBreak:"break-all"},children:e})]})]})}function Jb({budget:i,isCurrent:e,isAccepting:n,isSwitching:s,isEditing:o,editName:u,isRenaming:d,onAccept:m,onSwitch:p,onStartEdit:y,onCancelEdit:E,onEditNameChange:T,onSaveEdit:x}){const M=e&&i.isOwner;return g.jsx("div",{style:{background:e?"color-mix(in srgb, #646cff 15%, transparent)":"color-mix(in srgb, currentColor 8%, transparent)",border:e?"2px solid color-mix(in srgb, #646cff 50%, transparent)":"1px solid transparent",padding:"1rem",borderRadius:"8px"},children:o?g.jsxs("form",{onSubmit:x,children:[g.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:g.jsx("input",{type:"text",value:u,onChange:H=>T(H.target.value),placeholder:"Budget name",autoFocus:!0,style:{flex:1,padding:"0.5rem 0.75rem",borderRadius:"6px",border:"1px solid color-mix(in srgb, currentColor 30%, transparent)",background:"color-mix(in srgb, currentColor 5%, transparent)",fontSize:"1rem",fontWeight:600,color:"inherit"}})}),g.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[g.jsx("button",{type:"submit",disabled:d||!u.trim(),style:{background:"#22c55e",color:"white",border:"none",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:d||!u.trim()?"not-allowed":"pointer",fontWeight:500,opacity:d||!u.trim()?.7:1,fontSize:"0.8rem"},children:d?"Saving...":"Save"}),g.jsx("button",{type:"button",onClick:E,disabled:d,style:{background:"transparent",color:"inherit",border:"1px solid color-mix(in srgb, currentColor 30%, transparent)",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:d?"not-allowed":"pointer",fontWeight:500,opacity:d?.7:.8,fontSize:"0.8rem"},children:"Cancel"})]})]}):g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[g.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap",marginBottom:"0.25rem"},children:[g.jsx("span",{style:{fontWeight:600},children:i.name}),i.isOwner&&g.jsx("span",{style:{background:"color-mix(in srgb, #646cff 20%, transparent)",color:"#a5b4fc",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.65rem",textTransform:"uppercase",fontWeight:600},children:"Owner"}),e&&g.jsx("span",{style:{background:"color-mix(in srgb, #22c55e 20%, transparent)",color:"#4ade80",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.65rem",textTransform:"uppercase",fontWeight:600},children:"Active"}),i.isPending&&g.jsx("span",{style:{background:"color-mix(in srgb, #f59e0b 20%, transparent)",color:"#fbbf24",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.65rem",textTransform:"uppercase",fontWeight:600},children:"Pending"}),M&&g.jsx("button",{onClick:y,style:{background:"transparent",border:"none",padding:"0.15rem",cursor:"pointer",opacity:.5,fontSize:"0.8rem",lineHeight:1},title:"Rename budget",children:""})]}),g.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.6},children:i.ownerEmail?`Owner: ${i.ownerEmail}`:`ID: ${i.id}`})]}),g.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:i.isPending?g.jsx("button",{onClick:m,disabled:n,style:{background:"#22c55e",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"6px",cursor:n?"not-allowed":"pointer",fontWeight:500,opacity:n?.7:1,fontSize:"0.85rem"},children:n?"Accepting...":"Accept"}):e?null:g.jsx("button",{onClick:p,disabled:s,style:{background:"#646cff",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"6px",cursor:s?"not-allowed":"pointer",fontWeight:500,opacity:s?.7:1,fontSize:"0.85rem"},children:s?"Switching...":"Switch"})})]})})}function xN({children:i}){const e=j.useContext(_u),n=lr();return e.is_auth_checked?e.is_logged_in?i?g.jsx(g.Fragment,{children:i}):g.jsx(Vg,{}):g.jsx(fE,{to:"/account",state:{from:n.pathname},replace:!0}):g.jsx("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:g.jsx("p",{children:"Loading..."})})}function AN(){const{ensureBudgetLoaded:i,isInitialized:e,loading:n,error:s}=ki();return j.useEffect(()=>{i()},[]),e?s?(console.error("[BudgetLayout] Error:",s),g.jsx("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:g.jsxs("p",{style:{color:"#ef4444"},children:["Error: ",s]})})):g.jsx(Vg,{}):g.jsxs("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:[g.jsx("p",{children:"Loading budget..."}),n&&g.jsx("p",{style:{opacity:.6},children:"Fetching data from server..."})]})}const RN={is_logged_in:!1,is_auth_checked:!1,username:"",set_user_context:()=>{}};function CN(){const[i,e]=j.useState(RN),n=Ou();return j.useEffect(function(){n.set_user_listener(s=>{e({is_logged_in:s!=null,is_auth_checked:!0,username:s?.email??"",set_user_context:e})})},[]),i.is_auth_checked?g.jsx(_u.Provider,{value:i,children:g.jsx(MO,{children:g.jsxs(oA,{children:[g.jsxs(Lx,{children:[g.jsx(An,{path:"/",element:g.jsx(kO,{})}),g.jsx(An,{path:"/account",element:g.jsx(VO,{})}),g.jsx(An,{path:"/sql-test",element:g.jsx(jO,{})}),g.jsx(An,{path:"/budget",element:g.jsx(xN,{}),children:g.jsxs(An,{element:g.jsx(AN,{}),children:[g.jsx(An,{index:!0,element:g.jsx(hN,{})}),g.jsxs(An,{path:"admin",element:g.jsx(_N,{}),children:[g.jsx(An,{path:"my-budgets",element:g.jsx(wN,{})}),g.jsx(An,{path:"accounts",element:g.jsx(pN,{})}),g.jsx(An,{path:"categories",element:g.jsx(yN,{})}),g.jsx(An,{path:"users",element:g.jsx(vN,{})}),g.jsx(An,{path:"migration",element:g.jsx(bN,{})}),g.jsx(An,{path:"feedback",element:g.jsx(EN,{})}),g.jsx(An,{path:"tests",element:g.jsx(SN,{})})]})]})})]}),g.jsx(cN,{})]})})}):g.jsx("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:g.jsx("p",{children:"Loading..."})})}Uw.createRoot(document.getElementById("root")).render(g.jsx(j.StrictMode,{children:g.jsx(CN,{})}));
