(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();var sp={exports:{}},gu={};var Hv;function nA(){if(Hv)return gu;Hv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:t,type:i,key:c,ref:a!==void 0?a:null,props:l}}return gu.Fragment=e,gu.jsx=n,gu.jsxs=n,gu}var Gv;function rA(){return Gv||(Gv=1,sp.exports=nA()),sp.exports}var m=rA(),ap={exports:{}},Ve={};var Qv;function iA(){if(Qv)return Ve;Qv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),E=Symbol.iterator;function A(V){return V===null||typeof V!="object"?null:(V=E&&V[E]||V["@@iterator"],typeof V=="function"?V:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,I={};function B(V,J,ye){this.props=V,this.context=J,this.refs=I,this.updater=ye||w}B.prototype.isReactComponent={},B.prototype.setState=function(V,J){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,J,"setState")},B.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function q(){}q.prototype=B.prototype;function z(V,J,ye){this.props=V,this.context=J,this.refs=I,this.updater=ye||w}var $=z.prototype=new q;$.constructor=z,D($,B.prototype),$.isPureReactComponent=!0;var W=Array.isArray;function oe(){}var N={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function C(V,J,ye){var ie=ye.ref;return{$$typeof:t,type:V,key:J,ref:ie!==void 0?ie:null,props:ye}}function j(V,J){return C(V.type,J,V.props)}function R(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function L(V){var J={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ye){return J[ye]})}var k=/\/+/g;function X(V,J){return typeof V=="object"&&V!==null&&V.key!=null?L(""+V.key):J.toString(36)}function F(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(oe,oe):(V.status="pending",V.then(function(J){V.status==="pending"&&(V.status="fulfilled",V.value=J)},function(J){V.status==="pending"&&(V.status="rejected",V.reason=J)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function U(V,J,ye,ie,ce){var Ee=typeof V;(Ee==="undefined"||Ee==="boolean")&&(V=null);var De=!1;if(V===null)De=!0;else switch(Ee){case"bigint":case"string":case"number":De=!0;break;case"object":switch(V.$$typeof){case t:case e:De=!0;break;case _:return De=V._init,U(De(V._payload),J,ye,ie,ce)}}if(De)return ce=ce(V),De=ie===""?"."+X(V,0):ie,W(ce)?(ye="",De!=null&&(ye=De.replace(k,"$&/")+"/"),U(ce,J,ye,"",function(Z){return Z})):ce!=null&&(R(ce)&&(ce=j(ce,ye+(ce.key==null||V&&V.key===ce.key?"":(""+ce.key).replace(k,"$&/")+"/")+De)),J.push(ce)),1;De=0;var ve=ie===""?".":ie+":";if(W(V))for(var fe=0;fe<V.length;fe++)ie=V[fe],Ee=ve+X(ie,fe),De+=U(ie,J,ye,Ee,ce);else if(fe=A(V),typeof fe=="function")for(V=fe.call(V),fe=0;!(ie=V.next()).done;)ie=ie.value,Ee=ve+X(ie,fe++),De+=U(ie,J,ye,Ee,ce);else if(Ee==="object"){if(typeof V.then=="function")return U(F(V),J,ye,ie,ce);throw J=String(V),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return De}function H(V,J,ye){if(V==null)return V;var ie=[],ce=0;return U(V,ie,"","",function(Ee){return J.call(ye,Ee,ce++)}),ie}function Q(V){if(V._status===-1){var J=V._result;J=J(),J.then(function(ye){(V._status===0||V._status===-1)&&(V._status=1,V._result=ye)},function(ye){(V._status===0||V._status===-1)&&(V._status=2,V._result=ye)}),V._status===-1&&(V._status=0,V._result=J)}if(V._status===1)return V._result.default;throw V._result}var le=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},de={map:H,forEach:function(V,J,ye){H(V,function(){J.apply(this,arguments)},ye)},count:function(V){var J=0;return H(V,function(){J++}),J},toArray:function(V){return H(V,function(J){return J})||[]},only:function(V){if(!R(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Ve.Activity=b,Ve.Children=de,Ve.Component=B,Ve.Fragment=n,Ve.Profiler=a,Ve.PureComponent=z,Ve.StrictMode=i,Ve.Suspense=d,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(V){return N.H.useMemoCache(V)}},Ve.cache=function(V){return function(){return V.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(V,J,ye){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ie=D({},V.props),ce=V.key;if(J!=null)for(Ee in J.key!==void 0&&(ce=""+J.key),J)!T.call(J,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&J.ref===void 0||(ie[Ee]=J[Ee]);var Ee=arguments.length-2;if(Ee===1)ie.children=ye;else if(1<Ee){for(var De=Array(Ee),ve=0;ve<Ee;ve++)De[ve]=arguments[ve+2];ie.children=De}return C(V.type,ce,ie)},Ve.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},Ve.createElement=function(V,J,ye){var ie,ce={},Ee=null;if(J!=null)for(ie in J.key!==void 0&&(Ee=""+J.key),J)T.call(J,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(ce[ie]=J[ie]);var De=arguments.length-2;if(De===1)ce.children=ye;else if(1<De){for(var ve=Array(De),fe=0;fe<De;fe++)ve[fe]=arguments[fe+2];ce.children=ve}if(V&&V.defaultProps)for(ie in De=V.defaultProps,De)ce[ie]===void 0&&(ce[ie]=De[ie]);return C(V,Ee,ce)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(V){return{$$typeof:f,render:V}},Ve.isValidElement=R,Ve.lazy=function(V){return{$$typeof:_,_payload:{_status:-1,_result:V},_init:Q}},Ve.memo=function(V,J){return{$$typeof:p,type:V,compare:J===void 0?null:J}},Ve.startTransition=function(V){var J=N.T,ye={};N.T=ye;try{var ie=V(),ce=N.S;ce!==null&&ce(ye,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(oe,le)}catch(Ee){le(Ee)}finally{J!==null&&ye.types!==null&&(J.types=ye.types),N.T=J}},Ve.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Ve.use=function(V){return N.H.use(V)},Ve.useActionState=function(V,J,ye){return N.H.useActionState(V,J,ye)},Ve.useCallback=function(V,J){return N.H.useCallback(V,J)},Ve.useContext=function(V){return N.H.useContext(V)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(V,J){return N.H.useDeferredValue(V,J)},Ve.useEffect=function(V,J){return N.H.useEffect(V,J)},Ve.useEffectEvent=function(V){return N.H.useEffectEvent(V)},Ve.useId=function(){return N.H.useId()},Ve.useImperativeHandle=function(V,J,ye){return N.H.useImperativeHandle(V,J,ye)},Ve.useInsertionEffect=function(V,J){return N.H.useInsertionEffect(V,J)},Ve.useLayoutEffect=function(V,J){return N.H.useLayoutEffect(V,J)},Ve.useMemo=function(V,J){return N.H.useMemo(V,J)},Ve.useOptimistic=function(V,J){return N.H.useOptimistic(V,J)},Ve.useReducer=function(V,J,ye){return N.H.useReducer(V,J,ye)},Ve.useRef=function(V){return N.H.useRef(V)},Ve.useState=function(V){return N.H.useState(V)},Ve.useSyncExternalStore=function(V,J,ye){return N.H.useSyncExternalStore(V,J,ye)},Ve.useTransition=function(){return N.H.useTransition()},Ve.version="19.2.3",Ve}var Kv;function fg(){return Kv||(Kv=1,ap.exports=iA()),ap.exports}var M=fg(),op={exports:{}},yu={},lp={exports:{}},up={};var $v;function sA(){return $v||($v=1,(function(t){function e(U,H){var Q=U.length;U.push(H);e:for(;0<Q;){var le=Q-1>>>1,de=U[le];if(0<a(de,H))U[le]=H,U[Q]=de,Q=le;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var H=U[0],Q=U.pop();if(Q!==H){U[0]=Q;e:for(var le=0,de=U.length,V=de>>>1;le<V;){var J=2*(le+1)-1,ye=U[J],ie=J+1,ce=U[ie];if(0>a(ye,Q))ie<de&&0>a(ce,ye)?(U[le]=ce,U[ie]=Q,le=ie):(U[le]=ye,U[J]=Q,le=J);else if(ie<de&&0>a(ce,Q))U[le]=ce,U[ie]=Q,le=ie;else break e}}return H}function a(U,H){var Q=U.sortIndex-H.sortIndex;return Q!==0?Q:U.id-H.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();t.unstable_now=function(){return c.now()-f}}var d=[],p=[],_=1,b=null,E=3,A=!1,w=!1,D=!1,I=!1,B=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function $(U){for(var H=n(p);H!==null;){if(H.callback===null)i(p);else if(H.startTime<=U)i(p),H.sortIndex=H.expirationTime,e(d,H);else break;H=n(p)}}function W(U){if(D=!1,$(U),!w)if(n(d)!==null)w=!0,oe||(oe=!0,L());else{var H=n(p);H!==null&&F(W,H.startTime-U)}}var oe=!1,N=-1,T=5,C=-1;function j(){return I?!0:!(t.unstable_now()-C<T)}function R(){if(I=!1,oe){var U=t.unstable_now();C=U;var H=!0;try{e:{w=!1,D&&(D=!1,q(N),N=-1),A=!0;var Q=E;try{t:{for($(U),b=n(d);b!==null&&!(b.expirationTime>U&&j());){var le=b.callback;if(typeof le=="function"){b.callback=null,E=b.priorityLevel;var de=le(b.expirationTime<=U);if(U=t.unstable_now(),typeof de=="function"){b.callback=de,$(U),H=!0;break t}b===n(d)&&i(d),$(U)}else i(d);b=n(d)}if(b!==null)H=!0;else{var V=n(p);V!==null&&F(W,V.startTime-U),H=!1}}break e}finally{b=null,E=Q,A=!1}H=void 0}}finally{H?L():oe=!1}}}var L;if(typeof z=="function")L=function(){z(R)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,X=k.port2;k.port1.onmessage=R,L=function(){X.postMessage(null)}}else L=function(){B(R,0)};function F(U,H){N=B(function(){U(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_next=function(U){switch(E){case 1:case 2:case 3:var H=3;break;default:H=E}var Q=E;E=H;try{return U()}finally{E=Q}},t.unstable_requestPaint=function(){I=!0},t.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Q=E;E=U;try{return H()}finally{E=Q}},t.unstable_scheduleCallback=function(U,H,Q){var le=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?le+Q:le):Q=le,U){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=Q+de,U={id:_++,callback:H,priorityLevel:U,startTime:Q,expirationTime:de,sortIndex:-1},Q>le?(U.sortIndex=Q,e(p,U),n(d)===null&&U===n(p)&&(D?(q(N),N=-1):D=!0,F(W,Q-le))):(U.sortIndex=de,e(d,U),w||A||(w=!0,oe||(oe=!0,L()))),U},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(U){var H=E;return function(){var Q=E;E=H;try{return U.apply(this,arguments)}finally{E=Q}}}})(up)),up}var Yv;function aA(){return Yv||(Yv=1,lp.exports=sA()),lp.exports}var cp={exports:{}},_n={};var Wv;function oA(){if(Wv)return _n;Wv=1;var t=fg();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(d,p,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:d,containerInfo:p,implementation:_}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,_n.createPortal=function(d,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(d,p,null,_)},_n.flushSync=function(d){var p=c.T,_=i.p;try{if(c.T=null,i.p=2,d)return d()}finally{c.T=p,i.p=_,i.d.f()}},_n.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(d,p))},_n.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},_n.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var _=p.as,b=f(_,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?i.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:E,fetchPriority:A}):_==="script"&&i.d.X(d,{crossOrigin:b,integrity:E,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},_n.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=f(p.as,p.crossOrigin);i.d.M(d,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(d)},_n.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,b=f(_,p.crossOrigin);i.d.L(d,_,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},_n.preloadModule=function(d,p){if(typeof d=="string")if(p){var _=f(p.as,p.crossOrigin);i.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(d)},_n.requestFormReset=function(d){i.d.r(d)},_n.unstable_batchedUpdates=function(d,p){return d(p)},_n.useFormState=function(d,p,_){return c.H.useFormState(d,p,_)},_n.useFormStatus=function(){return c.H.useHostTransitionStatus()},_n.version="19.2.3",_n}var Xv;function lA(){if(Xv)return cp.exports;Xv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),cp.exports=oA(),cp.exports}var Jv;function uA(){if(Jv)return yu;Jv=1;var t=aA(),e=fg(),n=lA();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(l(r)!==r)throw Error(i(188))}function p(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,u=s;;){var g=o.return;if(g===null)break;var y=g.alternate;if(y===null){if(u=g.return,u!==null){o=u;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===o)return d(g),r;if(y===u)return d(g),s;y=y.sibling}throw Error(i(188))}if(o.return!==u.return)o=g,u=y;else{for(var S=!1,O=g.child;O;){if(O===o){S=!0,o=g,u=y;break}if(O===u){S=!0,u=g,o=y;break}O=O.sibling}if(!S){for(O=y.child;O;){if(O===o){S=!0,o=y,u=g;break}if(O===u){S=!0,u=y,o=g;break}O=O.sibling}if(!S)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function _(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=_(r),s!==null)return s;r=r.sibling}return null}var b=Object.assign,E=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),z=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function L(r){return r===null||typeof r!="object"?null:(r=R&&r[R]||r["@@iterator"],typeof r=="function"?r:null)}var k=Symbol.for("react.client.reference");function X(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===k?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case D:return"Fragment";case B:return"Profiler";case I:return"StrictMode";case W:return"Suspense";case oe:return"SuspenseList";case C:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case w:return"Portal";case z:return r.displayName||"Context";case q:return(r._context.displayName||"Context")+".Consumer";case $:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case N:return s=r.displayName||null,s!==null?s:X(r.type)||"Memo";case T:s=r._payload,r=r._init;try{return X(r(s))}catch{}}return null}var F=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},le=[],de=-1;function V(r){return{current:r}}function J(r){0>de||(r.current=le[de],le[de]=null,de--)}function ye(r,s){de++,le[de]=r.current,r.current=s}var ie=V(null),ce=V(null),Ee=V(null),De=V(null);function ve(r,s){switch(ye(Ee,s),ye(ce,r),ye(ie,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?fv(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=fv(s),r=mv(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}J(ie),ye(ie,r)}function fe(){J(ie),J(ce),J(Ee)}function Z(r){r.memoizedState!==null&&ye(De,r);var s=ie.current,o=mv(s,r.type);s!==o&&(ye(ce,r),ye(ie,o))}function Ce(r){ce.current===r&&(J(ie),J(ce)),De.current===r&&(J(De),hu._currentValue=Q)}var xe,He;function qe(r){if(xe===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);xe=s&&s[1]||"",He=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xe+r+He}var tt=!1;function Ue(r,s){if(!r||tt)return"";tt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(ue){var re=ue}Reflect.construct(r,[],pe)}else{try{pe.call()}catch(ue){re=ue}r.call(pe.prototype)}}else{try{throw Error()}catch(ue){re=ue}(pe=r())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(ue){if(ue&&re&&typeof ue.stack=="string")return[ue.stack,re.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),S=y[0],O=y[1];if(S&&O){var G=S.split(`
`),ne=O.split(`
`);for(g=u=0;u<G.length&&!G[u].includes("DetermineComponentFrameRoot");)u++;for(;g<ne.length&&!ne[g].includes("DetermineComponentFrameRoot");)g++;if(u===G.length||g===ne.length)for(u=G.length-1,g=ne.length-1;1<=u&&0<=g&&G[u]!==ne[g];)g--;for(;1<=u&&0<=g;u--,g--)if(G[u]!==ne[g]){if(u!==1||g!==1)do if(u--,g--,0>g||G[u]!==ne[g]){var he=`
`+G[u].replace(" at new "," at ");return r.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",r.displayName)),he}while(1<=u&&0<=g);break}}}finally{tt=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?qe(o):""}function Et(r,s){switch(r.tag){case 26:case 27:case 5:return qe(r.type);case 16:return qe("Lazy");case 13:return r.child!==s&&s!==null?qe("Suspense Fallback"):qe("Suspense");case 19:return qe("SuspenseList");case 0:case 15:return Ue(r.type,!1);case 11:return Ue(r.type.render,!1);case 1:return Ue(r.type,!0);case 31:return qe("Activity");default:return""}}function gt(r){try{var s="",o=null;do s+=Et(r,o),o=r,r=r.return;while(r);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var dt=Object.prototype.hasOwnProperty,Xt=t.unstable_scheduleCallback,Bi=t.unstable_cancelCallback,of=t.unstable_shouldYield,sc=t.unstable_requestPaint,wn=t.unstable_now,Ks=t.unstable_getCurrentPriorityLevel,pl=t.unstable_ImmediatePriority,gl=t.unstable_UserBlockingPriority,Fi=t.unstable_NormalPriority,lf=t.unstable_LowPriority,ac=t.unstable_IdlePriority,oc=t.log,lc=t.unstable_setDisableYieldValue,mr=null,ln=null;function Wn(r){if(typeof oc=="function"&&lc(r),ln&&typeof ln.setStrictMode=="function")try{ln.setStrictMode(mr,r)}catch{}}var Mt=Math.clz32?Math.clz32:cc,uc=Math.log,Ua=Math.LN2;function cc(r){return r>>>=0,r===0?32:31-(uc(r)/Ua|0)|0}var Ir=256,$s=262144,Ut=4194304;function Or(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function jr(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var g=0,y=r.suspendedLanes,S=r.pingedLanes;r=r.warmLanes;var O=u&134217727;return O!==0?(u=O&~y,u!==0?g=Or(u):(S&=O,S!==0?g=Or(S):o||(o=O&~r,o!==0&&(g=Or(o))))):(O=u&~y,O!==0?g=Or(O):S!==0?g=Or(S):o||(o=u&~r,o!==0&&(g=Or(o)))),g===0?0:s!==0&&s!==g&&(s&y)===0&&(y=g&-g,o=s&-s,y>=o||y===32&&(o&4194048)!==0)?s:g}function pr(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function uf(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dc(){var r=Ut;return Ut<<=1,(Ut&62914560)===0&&(Ut=4194304),r}function Mr(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function Ys(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function cf(r,s,o,u,g,y){var S=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var O=r.entanglements,G=r.expirationTimes,ne=r.hiddenUpdates;for(o=S&~o;0<o;){var he=31-Mt(o),pe=1<<he;O[he]=0,G[he]=-1;var re=ne[he];if(re!==null)for(ne[he]=null,he=0;he<re.length;he++){var ue=re[he];ue!==null&&(ue.lane&=-536870913)}o&=~pe}u!==0&&Ws(r,u,0),y!==0&&g===0&&r.tag!==0&&(r.suspendedLanes|=y&~(S&~s))}function Ws(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-Mt(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function yl(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-Mt(o),g=1<<u;g&s|r[u]&s&&(r[u]|=s),o&=~g}}function _l(r,s){var o=s&-s;return o=(o&42)!==0?1:Xs(o),(o&(r.suspendedLanes|s))!==0?0:o}function Xs(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function oi(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function hc(){var r=H.p;return r!==0?r:(r=window.event,r===void 0?32:Vv(r.type))}function gr(r,s){var o=H.p;try{return H.p=r,s()}finally{H.p=o}}var yr=Math.random().toString(36).slice(2),zt="__reactFiber$"+yr,nn="__reactProps$"+yr,kr="__reactContainer$"+yr,za="__reactEvents$"+yr,df="__reactListeners$"+yr,fc="__reactHandles$"+yr,mc="__reactResources$"+yr,Nr="__reactMarker$"+yr;function Ba(r){delete r[zt],delete r[nn],delete r[za],delete r[df],delete r[fc]}function Pr(r){var s=r[zt];if(s)return s;for(var o=r.parentNode;o;){if(s=o[kr]||o[zt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=Ev(r);r!==null;){if(o=r[zt])return o;r=Ev(r)}return s}r=o,o=r.parentNode}return null}function Xn(r){if(r=r[zt]||r[kr]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function Vn(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Vr(r){var s=r[mc];return s||(s=r[mc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Bt(r){r[Nr]=!0}var vl=new Set,bl={};function Lr(r,s){Ur(r,s),Ur(r+"Capture",s)}function Ur(r,s){for(bl[r]=s,r=0;r<s.length;r++)vl.add(s[r])}var El=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Sl={},xl={};function pc(r){return dt.call(xl,r)?!0:dt.call(Sl,r)?!1:El.test(r)?xl[r]=!0:(Sl[r]=!0,!1)}function Fa(r,s,o){if(pc(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function Ln(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Ft(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}function rn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function qi(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function wl(r,s,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return g.call(this)},set:function(S){o=""+S,y.call(this,S)}}),Object.defineProperty(r,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(S){o=""+S},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function lt(r){if(!r._valueTracker){var s=qi(r)?"checked":"value";r._valueTracker=wl(r,s,""+r[s])}}function Js(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=qi(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function zr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Zs=/[\n"\\]/g;function Rn(r){return r.replace(Zs,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function qa(r,s,o,u,g,y,S,O){r.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.type=S:r.removeAttribute("type"),s!=null?S==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+rn(s)):r.value!==""+rn(s)&&(r.value=""+rn(s)):S!=="submit"&&S!=="reset"||r.removeAttribute("value"),s!=null?Tl(r,S,rn(s)):o!=null?Tl(r,S,rn(o)):u!=null&&r.removeAttribute("value"),g==null&&y!=null&&(r.defaultChecked=!!y),g!=null&&(r.checked=g&&typeof g!="function"&&typeof g!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?r.name=""+rn(O):r.removeAttribute("name")}function gc(r,s,o,u,g,y,S,O){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),s!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){lt(r);return}o=o!=null?""+rn(o):"",s=s!=null?""+rn(s):o,O||s===r.value||(r.value=s),r.defaultValue=s}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=O?r.checked:!!u,r.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(r.name=S),lt(r)}function Tl(r,s,o){s==="number"&&zr(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Hi(r,s,o,u){if(r=r.options,s){s={};for(var g=0;g<o.length;g++)s["$"+o[g]]=!0;for(o=0;o<r.length;o++)g=s.hasOwnProperty("$"+r[o].value),r[o].selected!==g&&(r[o].selected=g),g&&u&&(r[o].defaultSelected=!0)}else{for(o=""+rn(o),s=null,g=0;g<r.length;g++){if(r[g].value===o){r[g].selected=!0,u&&(r[g].defaultSelected=!0);return}s!==null||r[g].disabled||(s=r[g])}s!==null&&(s.selected=!0)}}function yc(r,s,o){if(s!=null&&(s=""+rn(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+rn(o):""}function Gi(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(F(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=rn(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),lt(r)}function Dn(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var _c=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Al(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||_c.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Cl(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var g in s)u=s[g],s.hasOwnProperty(g)&&o[g]!==u&&Al(r,g,u)}else for(var y in s)s.hasOwnProperty(y)&&Al(r,y,s[y])}function Ha(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ga(r){return Qi.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function _r(){}var Rl=null;function Jn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ki=null,Br=null;function ea(r){var s=Xn(r);if(s&&(r=s.stateNode)){var o=r[nn]||null;e:switch(r=s.stateNode,s.type){case"input":if(qa(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Rn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var g=u[nn]||null;if(!g)throw Error(i(90));qa(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&Js(u)}break e;case"textarea":yc(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Hi(r,!!o.multiple,s,!1)}}}var Qa=!1;function $i(r,s,o){if(Qa)return r(s,o);Qa=!0;try{var u=r(s);return u}finally{if(Qa=!1,(Ki!==null||Br!==null)&&(hd(),Ki&&(s=Ki,r=Br,Br=Ki=null,ea(s),r)))for(s=0;s<r.length;s++)ea(r[s])}}function vr(r,s){var o=r.stateNode;if(o===null)return null;var u=o[nn]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ta=!1;if(Zn)try{var ht={};Object.defineProperty(ht,"passive",{get:function(){ta=!0}}),window.addEventListener("test",ht,ht),window.removeEventListener("test",ht,ht)}catch{ta=!1}var Fr=null,Dl=null,na=null;function Il(){if(na)return na;var r,s=Dl,o=s.length,u,g="value"in Fr?Fr.value:Fr.textContent,y=g.length;for(r=0;r<o&&s[r]===g[r];r++);var S=o-r;for(u=1;u<=S&&s[o-u]===g[y-u];u++);return na=g.slice(r,1<u?1-u:void 0)}function ra(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function li(){return!0}function br(){return!1}function un(r){function s(o,u,g,y,S){this._reactName=o,this._targetInst=g,this.type=u,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var O in r)r.hasOwnProperty(O)&&(o=r[O],this[O]=o?o(y):y[O]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?li:br,this.isPropagationStopped=br,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=li)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=li)},persist:function(){},isPersistent:li}),s}var ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qr=un(ui),Yi=b({},ui,{view:0,detail:0}),Ol=un(Yi),Wi,Ka,Hr,$a=b({},Yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xi,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Hr&&(Hr&&r.type==="mousemove"?(Wi=r.screenX-Hr.screenX,Ka=r.screenY-Hr.screenY):Ka=Wi=0,Hr=r),Wi)},movementY:function(r){return"movementY"in r?r.movementY:Ka}}),jl=un($a),ia=b({},$a,{dataTransfer:0}),bc=un(ia),Ec=b({},Yi,{relatedTarget:0}),sa=un(Ec),Ml=b({},ui,{animationName:0,elapsedTime:0,pseudoElement:0}),Sc=un(Ml),Ya=b({},ui,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),xc=un(Ya),wc=b({},ui,{data:0}),Gr=un(wc),Tc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ac={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rc(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Cc[r])?!!s[r]:!1}function Xi(){return Rc}var Tn=b({},Yi,{key:function(r){if(r.key){var s=Tc[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=ra(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Ac[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xi,charCode:function(r){return r.type==="keypress"?ra(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ra(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Dc=un(Tn),Ic=b({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ci=un(Ic),h=b({},Yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xi}),v=un(h),x=b({},ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),P=un(x),ee=b({},$a,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ae=un(ee),Se=b({},ui,{newState:0,oldState:0}),ze=un(Se),kt=[9,13,27,32],st=Zn&&"CompositionEvent"in window,Tt=null;Zn&&"documentMode"in document&&(Tt=document.documentMode);var er=Zn&&"TextEvent"in window&&!Tt,Qr=Zn&&(!st||Tt&&8<Tt&&11>=Tt),Er=" ",Sr=!1;function aa(r,s){switch(r){case"keyup":return kt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wa(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Xa=!1;function AT(r,s){switch(r){case"compositionend":return Wa(s);case"keypress":return s.which!==32?null:(Sr=!0,Er);case"textInput":return r=s.data,r===Er&&Sr?null:r;default:return null}}function CT(r,s){if(Xa)return r==="compositionend"||!st&&aa(r,s)?(r=Il(),na=Dl=Fr=null,Xa=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Qr&&s.locale!=="ko"?null:s.data;default:return null}}var RT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wy(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!RT[r.type]:s==="textarea"}function Ty(r,s,o,u){Ki?Br?Br.push(u):Br=[u]:Ki=u,s=vd(s,"onChange"),0<s.length&&(o=new qr("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var kl=null,Nl=null;function DT(r){ov(r,0)}function Oc(r){var s=Vn(r);if(Js(s))return r}function Ay(r,s){if(r==="change")return s}var Cy=!1;if(Zn){var hf;if(Zn){var ff="oninput"in document;if(!ff){var Ry=document.createElement("div");Ry.setAttribute("oninput","return;"),ff=typeof Ry.oninput=="function"}hf=ff}else hf=!1;Cy=hf&&(!document.documentMode||9<document.documentMode)}function Dy(){kl&&(kl.detachEvent("onpropertychange",Iy),Nl=kl=null)}function Iy(r){if(r.propertyName==="value"&&Oc(Nl)){var s=[];Ty(s,Nl,r,Jn(r)),$i(DT,s)}}function IT(r,s,o){r==="focusin"?(Dy(),kl=s,Nl=o,kl.attachEvent("onpropertychange",Iy)):r==="focusout"&&Dy()}function OT(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Oc(Nl)}function jT(r,s){if(r==="click")return Oc(s)}function MT(r,s){if(r==="input"||r==="change")return Oc(s)}function kT(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Un=typeof Object.is=="function"?Object.is:kT;function Pl(r,s){if(Un(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var g=o[u];if(!dt.call(s,g)||!Un(r[g],s[g]))return!1}return!0}function Oy(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function jy(r,s){var o=Oy(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Oy(o)}}function My(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?My(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function ky(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=zr(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=zr(r.document)}return s}function mf(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var NT=Zn&&"documentMode"in document&&11>=document.documentMode,Ja=null,pf=null,Vl=null,gf=!1;function Ny(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;gf||Ja==null||Ja!==zr(u)||(u=Ja,"selectionStart"in u&&mf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Vl&&Pl(Vl,u)||(Vl=u,u=vd(pf,"onSelect"),0<u.length&&(s=new qr("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=Ja)))}function oa(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var Za={animationend:oa("Animation","AnimationEnd"),animationiteration:oa("Animation","AnimationIteration"),animationstart:oa("Animation","AnimationStart"),transitionrun:oa("Transition","TransitionRun"),transitionstart:oa("Transition","TransitionStart"),transitioncancel:oa("Transition","TransitionCancel"),transitionend:oa("Transition","TransitionEnd")},yf={},Py={};Zn&&(Py=document.createElement("div").style,"AnimationEvent"in window||(delete Za.animationend.animation,delete Za.animationiteration.animation,delete Za.animationstart.animation),"TransitionEvent"in window||delete Za.transitionend.transition);function la(r){if(yf[r])return yf[r];if(!Za[r])return r;var s=Za[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in Py)return yf[r]=s[o];return r}var Vy=la("animationend"),Ly=la("animationiteration"),Uy=la("animationstart"),PT=la("transitionrun"),VT=la("transitionstart"),LT=la("transitioncancel"),zy=la("transitionend"),By=new Map,_f="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_f.push("scrollEnd");function xr(r,s){By.set(r,s),Lr(s,[r])}var jc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},tr=[],eo=0,vf=0;function Mc(){for(var r=eo,s=vf=eo=0;s<r;){var o=tr[s];tr[s++]=null;var u=tr[s];tr[s++]=null;var g=tr[s];tr[s++]=null;var y=tr[s];if(tr[s++]=null,u!==null&&g!==null){var S=u.pending;S===null?g.next=g:(g.next=S.next,S.next=g),u.pending=g}y!==0&&Fy(o,g,y)}}function kc(r,s,o,u){tr[eo++]=r,tr[eo++]=s,tr[eo++]=o,tr[eo++]=u,vf|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function bf(r,s,o,u){return kc(r,s,o,u),Nc(r)}function ua(r,s){return kc(r,null,null,s),Nc(r)}function Fy(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var g=!1,y=r.return;y!==null;)y.childLanes|=o,u=y.alternate,u!==null&&(u.childLanes|=o),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(g=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,g&&s!==null&&(g=31-Mt(o),r=y.hiddenUpdates,u=r[g],u===null?r[g]=[s]:u.push(s),s.lane=o|536870912),y):null}function Nc(r){if(50<su)throw su=0,Dm=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var to={};function UT(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(r,s,o,u){return new UT(r,s,o,u)}function Ef(r){return r=r.prototype,!(!r||!r.isReactComponent)}function di(r,s){var o=r.alternate;return o===null?(o=zn(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function qy(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Pc(r,s,o,u,g,y){var S=0;if(u=r,typeof r=="function")Ef(r)&&(S=1);else if(typeof r=="string")S=H1(r,o,ie.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case C:return r=zn(31,o,s,g),r.elementType=C,r.lanes=y,r;case D:return ca(o.children,g,y,s);case I:S=8,g|=24;break;case B:return r=zn(12,o,s,g|2),r.elementType=B,r.lanes=y,r;case W:return r=zn(13,o,s,g),r.elementType=W,r.lanes=y,r;case oe:return r=zn(19,o,s,g),r.elementType=oe,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case z:S=10;break e;case q:S=9;break e;case $:S=11;break e;case N:S=14;break e;case T:S=16,u=null;break e}S=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=zn(S,o,s,g),s.elementType=r,s.type=u,s.lanes=y,s}function ca(r,s,o,u){return r=zn(7,r,u,s),r.lanes=o,r}function Sf(r,s,o){return r=zn(6,r,null,s),r.lanes=o,r}function Hy(r){var s=zn(18,null,null,0);return s.stateNode=r,s}function xf(r,s,o){return s=zn(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var Gy=new WeakMap;function nr(r,s){if(typeof r=="object"&&r!==null){var o=Gy.get(r);return o!==void 0?o:(s={value:r,source:s,stack:gt(s)},Gy.set(r,s),s)}return{value:r,source:s,stack:gt(s)}}var no=[],ro=0,Vc=null,Ll=0,rr=[],ir=0,Ji=null,Kr=1,$r="";function hi(r,s){no[ro++]=Ll,no[ro++]=Vc,Vc=r,Ll=s}function Qy(r,s,o){rr[ir++]=Kr,rr[ir++]=$r,rr[ir++]=Ji,Ji=r;var u=Kr;r=$r;var g=32-Mt(u)-1;u&=~(1<<g),o+=1;var y=32-Mt(s)+g;if(30<y){var S=g-g%5;y=(u&(1<<S)-1).toString(32),u>>=S,g-=S,Kr=1<<32-Mt(s)+g|o<<g|u,$r=y+r}else Kr=1<<y|o<<g|u,$r=r}function wf(r){r.return!==null&&(hi(r,1),Qy(r,1,0))}function Tf(r){for(;r===Vc;)Vc=no[--ro],no[ro]=null,Ll=no[--ro],no[ro]=null;for(;r===Ji;)Ji=rr[--ir],rr[ir]=null,$r=rr[--ir],rr[ir]=null,Kr=rr[--ir],rr[ir]=null}function Ky(r,s){rr[ir++]=Kr,rr[ir++]=$r,rr[ir++]=Ji,Kr=s.id,$r=s.overflow,Ji=r}var cn=null,St=null,et=!1,Zi=null,sr=!1,Af=Error(i(519));function es(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ul(nr(s,r)),Af}function $y(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[zt]=r,s[nn]=u,o){case"dialog":$e("cancel",s),$e("close",s);break;case"iframe":case"object":case"embed":$e("load",s);break;case"video":case"audio":for(o=0;o<ou.length;o++)$e(ou[o],s);break;case"source":$e("error",s);break;case"img":case"image":case"link":$e("error",s),$e("load",s);break;case"details":$e("toggle",s);break;case"input":$e("invalid",s),gc(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":$e("invalid",s);break;case"textarea":$e("invalid",s),Gi(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||dv(s.textContent,o)?(u.popover!=null&&($e("beforetoggle",s),$e("toggle",s)),u.onScroll!=null&&$e("scroll",s),u.onScrollEnd!=null&&$e("scrollend",s),u.onClick!=null&&(s.onclick=_r),s=!0):s=!1,s||es(r,!0)}function Yy(r){for(cn=r.return;cn;)switch(cn.tag){case 5:case 31:case 13:sr=!1;return;case 27:case 3:sr=!0;return;default:cn=cn.return}}function io(r){if(r!==cn)return!1;if(!et)return Yy(r),et=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Hm(r.type,r.memoizedProps)),o=!o),o&&St&&es(r),Yy(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));St=bv(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));St=bv(r)}else s===27?(s=St,ms(r.type)?(r=Ym,Ym=null,St=r):St=s):St=cn?or(r.stateNode.nextSibling):null;return!0}function da(){St=cn=null,et=!1}function Cf(){var r=Zi;return r!==null&&(Mn===null?Mn=r:Mn.push.apply(Mn,r),Zi=null),r}function Ul(r){Zi===null?Zi=[r]:Zi.push(r)}var Rf=V(null),ha=null,fi=null;function ts(r,s,o){ye(Rf,s._currentValue),s._currentValue=o}function mi(r){r._currentValue=Rf.current,J(Rf)}function Df(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function If(r,s,o,u){var g=r.child;for(g!==null&&(g.return=r);g!==null;){var y=g.dependencies;if(y!==null){var S=g.child;y=y.firstContext;e:for(;y!==null;){var O=y;y=g;for(var G=0;G<s.length;G++)if(O.context===s[G]){y.lanes|=o,O=y.alternate,O!==null&&(O.lanes|=o),Df(y.return,o,r),u||(S=null);break e}y=O.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(i(341));S.lanes|=o,y=S.alternate,y!==null&&(y.lanes|=o),Df(S,o,r),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===r){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function so(r,s,o,u){r=null;for(var g=s,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var O=g.type;Un(g.pendingProps.value,S.value)||(r!==null?r.push(O):r=[O])}}else if(g===De.current){if(S=g.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(r!==null?r.push(hu):r=[hu])}g=g.return}r!==null&&If(s,r,o,u),s.flags|=262144}function Lc(r){for(r=r.firstContext;r!==null;){if(!Un(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function fa(r){ha=r,fi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function dn(r){return Wy(ha,r)}function Uc(r,s){return ha===null&&fa(r),Wy(r,s)}function Wy(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},fi===null){if(r===null)throw Error(i(308));fi=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else fi=fi.next=s;return o}var zT=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},BT=t.unstable_scheduleCallback,FT=t.unstable_NormalPriority,qt={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Of(){return{controller:new zT,data:new Map,refCount:0}}function zl(r){r.refCount--,r.refCount===0&&BT(FT,function(){r.controller.abort()})}var Bl=null,jf=0,ao=0,oo=null;function qT(r,s){if(Bl===null){var o=Bl=[];jf=0,ao=Nm(),oo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return jf++,s.then(Xy,Xy),s}function Xy(){if(--jf===0&&Bl!==null){oo!==null&&(oo.status="fulfilled");var r=Bl;Bl=null,ao=0,oo=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function HT(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(g){o.push(g)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var g=0;g<o.length;g++)(0,o[g])(s)},function(g){for(u.status="rejected",u.reason=g,g=0;g<o.length;g++)(0,o[g])(void 0)}),u}var Jy=U.S;U.S=function(r,s){N0=wn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&qT(r,s),Jy!==null&&Jy(r,s)};var ma=V(null);function Mf(){var r=ma.current;return r!==null?r:yt.pooledCache}function zc(r,s){s===null?ye(ma,ma.current):ye(ma,s.pool)}function Zy(){var r=Mf();return r===null?null:{parent:qt._currentValue,pool:r}}var lo=Error(i(460)),kf=Error(i(474)),Bc=Error(i(542)),Fc={then:function(){}};function e_(r){return r=r.status,r==="fulfilled"||r==="rejected"}function t_(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(_r,_r),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r_(r),r;default:if(typeof s.status=="string")s.then(_r,_r);else{if(r=yt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=u}},function(u){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r_(r),r}throw ga=s,lo}}function pa(r){try{var s=r._init;return s(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ga=o,lo):o}}var ga=null;function n_(){if(ga===null)throw Error(i(459));var r=ga;return ga=null,r}function r_(r){if(r===lo||r===Bc)throw Error(i(483))}var uo=null,Fl=0;function qc(r){var s=Fl;return Fl+=1,uo===null&&(uo=[]),t_(uo,r,s)}function ql(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Hc(r,s){throw s.$$typeof===E?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function i_(r){function s(Y,K){if(r){var te=Y.deletions;te===null?(Y.deletions=[K],Y.flags|=16):te.push(K)}}function o(Y,K){if(!r)return null;for(;K!==null;)s(Y,K),K=K.sibling;return null}function u(Y){for(var K=new Map;Y!==null;)Y.key!==null?K.set(Y.key,Y):K.set(Y.index,Y),Y=Y.sibling;return K}function g(Y,K){return Y=di(Y,K),Y.index=0,Y.sibling=null,Y}function y(Y,K,te){return Y.index=te,r?(te=Y.alternate,te!==null?(te=te.index,te<K?(Y.flags|=67108866,K):te):(Y.flags|=67108866,K)):(Y.flags|=1048576,K)}function S(Y){return r&&Y.alternate===null&&(Y.flags|=67108866),Y}function O(Y,K,te,me){return K===null||K.tag!==6?(K=Sf(te,Y.mode,me),K.return=Y,K):(K=g(K,te),K.return=Y,K)}function G(Y,K,te,me){var Ie=te.type;return Ie===D?he(Y,K,te.props.children,me,te.key):K!==null&&(K.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===T&&pa(Ie)===K.type)?(K=g(K,te.props),ql(K,te),K.return=Y,K):(K=Pc(te.type,te.key,te.props,null,Y.mode,me),ql(K,te),K.return=Y,K)}function ne(Y,K,te,me){return K===null||K.tag!==4||K.stateNode.containerInfo!==te.containerInfo||K.stateNode.implementation!==te.implementation?(K=xf(te,Y.mode,me),K.return=Y,K):(K=g(K,te.children||[]),K.return=Y,K)}function he(Y,K,te,me,Ie){return K===null||K.tag!==7?(K=ca(te,Y.mode,me,Ie),K.return=Y,K):(K=g(K,te),K.return=Y,K)}function pe(Y,K,te){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Sf(""+K,Y.mode,te),K.return=Y,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case A:return te=Pc(K.type,K.key,K.props,null,Y.mode,te),ql(te,K),te.return=Y,te;case w:return K=xf(K,Y.mode,te),K.return=Y,K;case T:return K=pa(K),pe(Y,K,te)}if(F(K)||L(K))return K=ca(K,Y.mode,te,null),K.return=Y,K;if(typeof K.then=="function")return pe(Y,qc(K),te);if(K.$$typeof===z)return pe(Y,Uc(Y,K),te);Hc(Y,K)}return null}function re(Y,K,te,me){var Ie=K!==null?K.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return Ie!==null?null:O(Y,K,""+te,me);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case A:return te.key===Ie?G(Y,K,te,me):null;case w:return te.key===Ie?ne(Y,K,te,me):null;case T:return te=pa(te),re(Y,K,te,me)}if(F(te)||L(te))return Ie!==null?null:he(Y,K,te,me,null);if(typeof te.then=="function")return re(Y,K,qc(te),me);if(te.$$typeof===z)return re(Y,K,Uc(Y,te),me);Hc(Y,te)}return null}function ue(Y,K,te,me,Ie){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return Y=Y.get(te)||null,O(K,Y,""+me,Ie);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case A:return Y=Y.get(me.key===null?te:me.key)||null,G(K,Y,me,Ie);case w:return Y=Y.get(me.key===null?te:me.key)||null,ne(K,Y,me,Ie);case T:return me=pa(me),ue(Y,K,te,me,Ie)}if(F(me)||L(me))return Y=Y.get(te)||null,he(K,Y,me,Ie,null);if(typeof me.then=="function")return ue(Y,K,te,qc(me),Ie);if(me.$$typeof===z)return ue(Y,K,te,Uc(K,me),Ie);Hc(K,me)}return null}function Ae(Y,K,te,me){for(var Ie=null,rt=null,Re=K,Fe=K=0,We=null;Re!==null&&Fe<te.length;Fe++){Re.index>Fe?(We=Re,Re=null):We=Re.sibling;var it=re(Y,Re,te[Fe],me);if(it===null){Re===null&&(Re=We);break}r&&Re&&it.alternate===null&&s(Y,Re),K=y(it,K,Fe),rt===null?Ie=it:rt.sibling=it,rt=it,Re=We}if(Fe===te.length)return o(Y,Re),et&&hi(Y,Fe),Ie;if(Re===null){for(;Fe<te.length;Fe++)Re=pe(Y,te[Fe],me),Re!==null&&(K=y(Re,K,Fe),rt===null?Ie=Re:rt.sibling=Re,rt=Re);return et&&hi(Y,Fe),Ie}for(Re=u(Re);Fe<te.length;Fe++)We=ue(Re,Y,Fe,te[Fe],me),We!==null&&(r&&We.alternate!==null&&Re.delete(We.key===null?Fe:We.key),K=y(We,K,Fe),rt===null?Ie=We:rt.sibling=We,rt=We);return r&&Re.forEach(function(vs){return s(Y,vs)}),et&&hi(Y,Fe),Ie}function je(Y,K,te,me){if(te==null)throw Error(i(151));for(var Ie=null,rt=null,Re=K,Fe=K=0,We=null,it=te.next();Re!==null&&!it.done;Fe++,it=te.next()){Re.index>Fe?(We=Re,Re=null):We=Re.sibling;var vs=re(Y,Re,it.value,me);if(vs===null){Re===null&&(Re=We);break}r&&Re&&vs.alternate===null&&s(Y,Re),K=y(vs,K,Fe),rt===null?Ie=vs:rt.sibling=vs,rt=vs,Re=We}if(it.done)return o(Y,Re),et&&hi(Y,Fe),Ie;if(Re===null){for(;!it.done;Fe++,it=te.next())it=pe(Y,it.value,me),it!==null&&(K=y(it,K,Fe),rt===null?Ie=it:rt.sibling=it,rt=it);return et&&hi(Y,Fe),Ie}for(Re=u(Re);!it.done;Fe++,it=te.next())it=ue(Re,Y,Fe,it.value,me),it!==null&&(r&&it.alternate!==null&&Re.delete(it.key===null?Fe:it.key),K=y(it,K,Fe),rt===null?Ie=it:rt.sibling=it,rt=it);return r&&Re.forEach(function(tA){return s(Y,tA)}),et&&hi(Y,Fe),Ie}function pt(Y,K,te,me){if(typeof te=="object"&&te!==null&&te.type===D&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case A:e:{for(var Ie=te.key;K!==null;){if(K.key===Ie){if(Ie=te.type,Ie===D){if(K.tag===7){o(Y,K.sibling),me=g(K,te.props.children),me.return=Y,Y=me;break e}}else if(K.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===T&&pa(Ie)===K.type){o(Y,K.sibling),me=g(K,te.props),ql(me,te),me.return=Y,Y=me;break e}o(Y,K);break}else s(Y,K);K=K.sibling}te.type===D?(me=ca(te.props.children,Y.mode,me,te.key),me.return=Y,Y=me):(me=Pc(te.type,te.key,te.props,null,Y.mode,me),ql(me,te),me.return=Y,Y=me)}return S(Y);case w:e:{for(Ie=te.key;K!==null;){if(K.key===Ie)if(K.tag===4&&K.stateNode.containerInfo===te.containerInfo&&K.stateNode.implementation===te.implementation){o(Y,K.sibling),me=g(K,te.children||[]),me.return=Y,Y=me;break e}else{o(Y,K);break}else s(Y,K);K=K.sibling}me=xf(te,Y.mode,me),me.return=Y,Y=me}return S(Y);case T:return te=pa(te),pt(Y,K,te,me)}if(F(te))return Ae(Y,K,te,me);if(L(te)){if(Ie=L(te),typeof Ie!="function")throw Error(i(150));return te=Ie.call(te),je(Y,K,te,me)}if(typeof te.then=="function")return pt(Y,K,qc(te),me);if(te.$$typeof===z)return pt(Y,K,Uc(Y,te),me);Hc(Y,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,K!==null&&K.tag===6?(o(Y,K.sibling),me=g(K,te),me.return=Y,Y=me):(o(Y,K),me=Sf(te,Y.mode,me),me.return=Y,Y=me),S(Y)):o(Y,K)}return function(Y,K,te,me){try{Fl=0;var Ie=pt(Y,K,te,me);return uo=null,Ie}catch(Re){if(Re===lo||Re===Bc)throw Re;var rt=zn(29,Re,null,Y.mode);return rt.lanes=me,rt.return=Y,rt}}}var ya=i_(!0),s_=i_(!1),ns=!1;function Nf(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pf(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function rs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function is(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(at&2)!==0){var g=u.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),u.pending=s,s=Nc(r),Fy(r,null,o),s}return kc(r,u,s,o),Nc(r)}function Hl(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,yl(r,o)}}function Vf(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var g=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var S={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?g=y=S:y=y.next=S,o=o.next}while(o!==null);y===null?g=y=s:y=y.next=s}else g=y=s;o={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var Lf=!1;function Gl(){if(Lf){var r=oo;if(r!==null)throw r}}function Ql(r,s,o,u){Lf=!1;var g=r.updateQueue;ns=!1;var y=g.firstBaseUpdate,S=g.lastBaseUpdate,O=g.shared.pending;if(O!==null){g.shared.pending=null;var G=O,ne=G.next;G.next=null,S===null?y=ne:S.next=ne,S=G;var he=r.alternate;he!==null&&(he=he.updateQueue,O=he.lastBaseUpdate,O!==S&&(O===null?he.firstBaseUpdate=ne:O.next=ne,he.lastBaseUpdate=G))}if(y!==null){var pe=g.baseState;S=0,he=ne=G=null,O=y;do{var re=O.lane&-536870913,ue=re!==O.lane;if(ue?(Ye&re)===re:(u&re)===re){re!==0&&re===ao&&(Lf=!0),he!==null&&(he=he.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Ae=r,je=O;re=s;var pt=o;switch(je.tag){case 1:if(Ae=je.payload,typeof Ae=="function"){pe=Ae.call(pt,pe,re);break e}pe=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=je.payload,re=typeof Ae=="function"?Ae.call(pt,pe,re):Ae,re==null)break e;pe=b({},pe,re);break e;case 2:ns=!0}}re=O.callback,re!==null&&(r.flags|=64,ue&&(r.flags|=8192),ue=g.callbacks,ue===null?g.callbacks=[re]:ue.push(re))}else ue={lane:re,tag:O.tag,payload:O.payload,callback:O.callback,next:null},he===null?(ne=he=ue,G=pe):he=he.next=ue,S|=re;if(O=O.next,O===null){if(O=g.shared.pending,O===null)break;ue=O,O=ue.next,ue.next=null,g.lastBaseUpdate=ue,g.shared.pending=null}}while(!0);he===null&&(G=pe),g.baseState=G,g.firstBaseUpdate=ne,g.lastBaseUpdate=he,y===null&&(g.shared.lanes=0),us|=S,r.lanes=S,r.memoizedState=pe}}function a_(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function o_(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)a_(o[r],s)}var co=V(null),Gc=V(0);function l_(r,s){r=xi,ye(Gc,r),ye(co,s),xi=r|s.baseLanes}function Uf(){ye(Gc,xi),ye(co,co.current)}function zf(){xi=Gc.current,J(co),J(Gc)}var Bn=V(null),ar=null;function ss(r){var s=r.alternate;ye(Nt,Nt.current&1),ye(Bn,r),ar===null&&(s===null||co.current!==null||s.memoizedState!==null)&&(ar=r)}function Bf(r){ye(Nt,Nt.current),ye(Bn,r),ar===null&&(ar=r)}function u_(r){r.tag===22?(ye(Nt,Nt.current),ye(Bn,r),ar===null&&(ar=r)):as()}function as(){ye(Nt,Nt.current),ye(Bn,Bn.current)}function Fn(r){J(Bn),ar===r&&(ar=null),J(Nt)}var Nt=V(0);function Qc(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Km(o)||$m(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var pi=0,Be=null,ft=null,Ht=null,Kc=!1,ho=!1,_a=!1,$c=0,Kl=0,fo=null,GT=0;function Ot(){throw Error(i(321))}function Ff(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!Un(r[o],s[o]))return!1;return!0}function qf(r,s,o,u,g,y){return pi=y,Be=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,U.H=r===null||r.memoizedState===null?Q_:im,_a=!1,y=o(u,g),_a=!1,ho&&(y=d_(s,o,u,g)),c_(r),y}function c_(r){U.H=Wl;var s=ft!==null&&ft.next!==null;if(pi=0,Ht=ft=Be=null,Kc=!1,Kl=0,fo=null,s)throw Error(i(300));r===null||Gt||(r=r.dependencies,r!==null&&Lc(r)&&(Gt=!0))}function d_(r,s,o,u){Be=r;var g=0;do{if(ho&&(fo=null),Kl=0,ho=!1,25<=g)throw Error(i(301));if(g+=1,Ht=ft=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}U.H=K_,y=s(o,u)}while(ho);return y}function QT(){var r=U.H,s=r.useState()[0];return s=typeof s.then=="function"?$l(s):s,r=r.useState()[0],(ft!==null?ft.memoizedState:null)!==r&&(Be.flags|=1024),s}function Hf(){var r=$c!==0;return $c=0,r}function Gf(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function Qf(r){if(Kc){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Kc=!1}pi=0,Ht=ft=Be=null,ho=!1,Kl=$c=0,fo=null}function An(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?Be.memoizedState=Ht=r:Ht=Ht.next=r,Ht}function Pt(){if(ft===null){var r=Be.alternate;r=r!==null?r.memoizedState:null}else r=ft.next;var s=Ht===null?Be.memoizedState:Ht.next;if(s!==null)Ht=s,ft=r;else{if(r===null)throw Be.alternate===null?Error(i(467)):Error(i(310));ft=r,r={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Ht===null?Be.memoizedState=Ht=r:Ht=Ht.next=r}return Ht}function Yc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $l(r){var s=Kl;return Kl+=1,fo===null&&(fo=[]),r=t_(fo,r,s),s=Be,(Ht===null?s.memoizedState:Ht.next)===null&&(s=s.alternate,U.H=s===null||s.memoizedState===null?Q_:im),r}function Wc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return $l(r);if(r.$$typeof===z)return dn(r)}throw Error(i(438,String(r)))}function Kf(r){var s=null,o=Be.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Be.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Yc(),Be.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=j;return s.index++,o}function gi(r,s){return typeof s=="function"?s(r):s}function Xc(r){var s=Pt();return $f(s,ft,r)}function $f(r,s,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var g=r.baseQueue,y=u.pending;if(y!==null){if(g!==null){var S=g.next;g.next=y.next,y.next=S}s.baseQueue=g=y,u.pending=null}if(y=r.baseState,g===null)r.memoizedState=y;else{s=g.next;var O=S=null,G=null,ne=s,he=!1;do{var pe=ne.lane&-536870913;if(pe!==ne.lane?(Ye&pe)===pe:(pi&pe)===pe){var re=ne.revertLane;if(re===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),pe===ao&&(he=!0);else if((pi&re)===re){ne=ne.next,re===ao&&(he=!0);continue}else pe={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},G===null?(O=G=pe,S=y):G=G.next=pe,Be.lanes|=re,us|=re;pe=ne.action,_a&&o(y,pe),y=ne.hasEagerState?ne.eagerState:o(y,pe)}else re={lane:pe,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},G===null?(O=G=re,S=y):G=G.next=re,Be.lanes|=pe,us|=pe;ne=ne.next}while(ne!==null&&ne!==s);if(G===null?S=y:G.next=O,!Un(y,r.memoizedState)&&(Gt=!0,he&&(o=oo,o!==null)))throw o;r.memoizedState=y,r.baseState=S,r.baseQueue=G,u.lastRenderedState=y}return g===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Yf(r){var s=Pt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,g=o.pending,y=s.memoizedState;if(g!==null){o.pending=null;var S=g=g.next;do y=r(y,S.action),S=S.next;while(S!==g);Un(y,s.memoizedState)||(Gt=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),o.lastRenderedState=y}return[y,u]}function h_(r,s,o){var u=Be,g=Pt(),y=et;if(y){if(o===void 0)throw Error(i(407));o=o()}else o=s();var S=!Un((ft||g).memoizedState,o);if(S&&(g.memoizedState=o,Gt=!0),g=g.queue,Jf(p_.bind(null,u,g,r),[r]),g.getSnapshot!==s||S||Ht!==null&&Ht.memoizedState.tag&1){if(u.flags|=2048,mo(9,{destroy:void 0},m_.bind(null,u,g,o,s),null),yt===null)throw Error(i(349));y||(pi&127)!==0||f_(u,s,o)}return o}function f_(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=Be.updateQueue,s===null?(s=Yc(),Be.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function m_(r,s,o,u){s.value=o,s.getSnapshot=u,g_(s)&&y_(r)}function p_(r,s,o){return o(function(){g_(s)&&y_(r)})}function g_(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!Un(r,o)}catch{return!0}}function y_(r){var s=ua(r,2);s!==null&&kn(s,r,2)}function Wf(r){var s=An();if(typeof r=="function"){var o=r;if(r=o(),_a){Wn(!0);try{o()}finally{Wn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:r},s}function __(r,s,o,u){return r.baseState=o,$f(r,ft,typeof u=="function"?u:gi)}function KT(r,s,o,u,g){if(ed(r))throw Error(i(485));if(r=s.action,r!==null){var y={payload:g,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};U.T!==null?o(!0):y.isTransition=!1,u(y),o=s.pending,o===null?(y.next=s.pending=y,v_(s,y)):(y.next=o.next,s.pending=o.next=y)}}function v_(r,s){var o=s.action,u=s.payload,g=r.state;if(s.isTransition){var y=U.T,S={};U.T=S;try{var O=o(g,u),G=U.S;G!==null&&G(S,O),b_(r,s,O)}catch(ne){Xf(r,s,ne)}finally{y!==null&&S.types!==null&&(y.types=S.types),U.T=y}}else try{y=o(g,u),b_(r,s,y)}catch(ne){Xf(r,s,ne)}}function b_(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){E_(r,s,u)},function(u){return Xf(r,s,u)}):E_(r,s,o)}function E_(r,s,o){s.status="fulfilled",s.value=o,S_(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,v_(r,o)))}function Xf(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,S_(s),s=s.next;while(s!==u)}r.action=null}function S_(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function x_(r,s){return s}function w_(r,s){if(et){var o=yt.formState;if(o!==null){e:{var u=Be;if(et){if(St){t:{for(var g=St,y=sr;g.nodeType!==8;){if(!y){g=null;break t}if(g=or(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){St=or(g.nextSibling),u=g.data==="F!";break e}}es(u)}u=!1}u&&(s=o[0])}}return o=An(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:x_,lastRenderedState:s},o.queue=u,o=q_.bind(null,Be,u),u.dispatch=o,u=Wf(!1),y=rm.bind(null,Be,!1,u.queue),u=An(),g={state:s,dispatch:null,action:r,pending:null},u.queue=g,o=KT.bind(null,Be,g,y,o),g.dispatch=o,u.memoizedState=r,[s,o,!1]}function T_(r){var s=Pt();return A_(s,ft,r)}function A_(r,s,o){if(s=$f(r,s,x_)[0],r=Xc(gi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=$l(s)}catch(S){throw S===lo?Bc:S}else u=s;s=Pt();var g=s.queue,y=g.dispatch;return o!==s.memoizedState&&(Be.flags|=2048,mo(9,{destroy:void 0},$T.bind(null,g,o),null)),[u,y,r]}function $T(r,s){r.action=s}function C_(r){var s=Pt(),o=ft;if(o!==null)return A_(s,o,r);Pt(),s=s.memoizedState,o=Pt();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function mo(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=Be.updateQueue,s===null&&(s=Yc(),Be.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function R_(){return Pt().memoizedState}function Jc(r,s,o,u){var g=An();Be.flags|=r,g.memoizedState=mo(1|s,{destroy:void 0},o,u===void 0?null:u)}function Zc(r,s,o,u){var g=Pt();u=u===void 0?null:u;var y=g.memoizedState.inst;ft!==null&&u!==null&&Ff(u,ft.memoizedState.deps)?g.memoizedState=mo(s,y,o,u):(Be.flags|=r,g.memoizedState=mo(1|s,y,o,u))}function D_(r,s){Jc(8390656,8,r,s)}function Jf(r,s){Zc(2048,8,r,s)}function YT(r){Be.flags|=4;var s=Be.updateQueue;if(s===null)s=Yc(),Be.updateQueue=s,s.events=[r];else{var o=s.events;o===null?s.events=[r]:o.push(r)}}function I_(r){var s=Pt().memoizedState;return YT({ref:s,nextImpl:r}),function(){if((at&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function O_(r,s){return Zc(4,2,r,s)}function j_(r,s){return Zc(4,4,r,s)}function M_(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function k_(r,s,o){o=o!=null?o.concat([r]):null,Zc(4,4,M_.bind(null,s,r),o)}function Zf(){}function N_(r,s){var o=Pt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Ff(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function P_(r,s){var o=Pt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Ff(s,u[1]))return u[0];if(u=r(),_a){Wn(!0);try{r()}finally{Wn(!1)}}return o.memoizedState=[u,s],u}function em(r,s,o){return o===void 0||(pi&1073741824)!==0&&(Ye&261930)===0?r.memoizedState=s:(r.memoizedState=o,r=V0(),Be.lanes|=r,us|=r,o)}function V_(r,s,o,u){return Un(o,s)?o:co.current!==null?(r=em(r,o,u),Un(r,s)||(Gt=!0),r):(pi&42)===0||(pi&1073741824)!==0&&(Ye&261930)===0?(Gt=!0,r.memoizedState=o):(r=V0(),Be.lanes|=r,us|=r,s)}function L_(r,s,o,u,g){var y=H.p;H.p=y!==0&&8>y?y:8;var S=U.T,O={};U.T=O,rm(r,!1,s,o);try{var G=g(),ne=U.S;if(ne!==null&&ne(O,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var he=HT(G,u);Yl(r,s,he,Gn(r))}else Yl(r,s,u,Gn(r))}catch(pe){Yl(r,s,{then:function(){},status:"rejected",reason:pe},Gn())}finally{H.p=y,S!==null&&O.types!==null&&(S.types=O.types),U.T=S}}function WT(){}function tm(r,s,o,u){if(r.tag!==5)throw Error(i(476));var g=U_(r).queue;L_(r,g,s,Q,o===null?WT:function(){return z_(r),o(u)})}function U_(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:Q},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function z_(r){var s=U_(r);s.next===null&&(s=r.alternate.memoizedState),Yl(r,s.next.queue,{},Gn())}function nm(){return dn(hu)}function B_(){return Pt().memoizedState}function F_(){return Pt().memoizedState}function XT(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=Gn();r=rs(o);var u=is(s,r,o);u!==null&&(kn(u,s,o),Hl(u,s,o)),s={cache:Of()},r.payload=s;return}s=s.return}}function JT(r,s,o){var u=Gn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},ed(r)?H_(s,o):(o=bf(r,s,o,u),o!==null&&(kn(o,r,u),G_(o,s,u)))}function q_(r,s,o){var u=Gn();Yl(r,s,o,u)}function Yl(r,s,o,u){var g={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(ed(r))H_(s,g);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var S=s.lastRenderedState,O=y(S,o);if(g.hasEagerState=!0,g.eagerState=O,Un(O,S))return kc(r,s,g,0),yt===null&&Mc(),!1}catch{}if(o=bf(r,s,g,u),o!==null)return kn(o,r,u),G_(o,s,u),!0}return!1}function rm(r,s,o,u){if(u={lane:2,revertLane:Nm(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},ed(r)){if(s)throw Error(i(479))}else s=bf(r,o,u,2),s!==null&&kn(s,r,2)}function ed(r){var s=r.alternate;return r===Be||s!==null&&s===Be}function H_(r,s){ho=Kc=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function G_(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,yl(r,o)}}var Wl={readContext:dn,use:Wc,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot};Wl.useEffectEvent=Ot;var Q_={readContext:dn,use:Wc,useCallback:function(r,s){return An().memoizedState=[r,s===void 0?null:s],r},useContext:dn,useEffect:D_,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Jc(4194308,4,M_.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Jc(4194308,4,r,s)},useInsertionEffect:function(r,s){Jc(4,2,r,s)},useMemo:function(r,s){var o=An();s=s===void 0?null:s;var u=r();if(_a){Wn(!0);try{r()}finally{Wn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=An();if(o!==void 0){var g=o(s);if(_a){Wn(!0);try{o(s)}finally{Wn(!1)}}}else g=s;return u.memoizedState=u.baseState=g,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:g},u.queue=r,r=r.dispatch=JT.bind(null,Be,r),[u.memoizedState,r]},useRef:function(r){var s=An();return r={current:r},s.memoizedState=r},useState:function(r){r=Wf(r);var s=r.queue,o=q_.bind(null,Be,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:Zf,useDeferredValue:function(r,s){var o=An();return em(o,r,s)},useTransition:function(){var r=Wf(!1);return r=L_.bind(null,Be,r.queue,!0,!1),An().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=Be,g=An();if(et){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),yt===null)throw Error(i(349));(Ye&127)!==0||f_(u,s,o)}g.memoizedState=o;var y={value:o,getSnapshot:s};return g.queue=y,D_(p_.bind(null,u,y,r),[r]),u.flags|=2048,mo(9,{destroy:void 0},m_.bind(null,u,y,o,s),null),o},useId:function(){var r=An(),s=yt.identifierPrefix;if(et){var o=$r,u=Kr;o=(u&~(1<<32-Mt(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=$c++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=GT++,s="_"+s+"r_"+o.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:nm,useFormState:w_,useActionState:w_,useOptimistic:function(r){var s=An();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=rm.bind(null,Be,!0,o),o.dispatch=s,[r,s]},useMemoCache:Kf,useCacheRefresh:function(){return An().memoizedState=XT.bind(null,Be)},useEffectEvent:function(r){var s=An(),o={impl:r};return s.memoizedState=o,function(){if((at&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},im={readContext:dn,use:Wc,useCallback:N_,useContext:dn,useEffect:Jf,useImperativeHandle:k_,useInsertionEffect:O_,useLayoutEffect:j_,useMemo:P_,useReducer:Xc,useRef:R_,useState:function(){return Xc(gi)},useDebugValue:Zf,useDeferredValue:function(r,s){var o=Pt();return V_(o,ft.memoizedState,r,s)},useTransition:function(){var r=Xc(gi)[0],s=Pt().memoizedState;return[typeof r=="boolean"?r:$l(r),s]},useSyncExternalStore:h_,useId:B_,useHostTransitionStatus:nm,useFormState:T_,useActionState:T_,useOptimistic:function(r,s){var o=Pt();return __(o,ft,r,s)},useMemoCache:Kf,useCacheRefresh:F_};im.useEffectEvent=I_;var K_={readContext:dn,use:Wc,useCallback:N_,useContext:dn,useEffect:Jf,useImperativeHandle:k_,useInsertionEffect:O_,useLayoutEffect:j_,useMemo:P_,useReducer:Yf,useRef:R_,useState:function(){return Yf(gi)},useDebugValue:Zf,useDeferredValue:function(r,s){var o=Pt();return ft===null?em(o,r,s):V_(o,ft.memoizedState,r,s)},useTransition:function(){var r=Yf(gi)[0],s=Pt().memoizedState;return[typeof r=="boolean"?r:$l(r),s]},useSyncExternalStore:h_,useId:B_,useHostTransitionStatus:nm,useFormState:C_,useActionState:C_,useOptimistic:function(r,s){var o=Pt();return ft!==null?__(o,ft,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Kf,useCacheRefresh:F_};K_.useEffectEvent=I_;function sm(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:b({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var am={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=Gn(),g=rs(u);g.payload=s,o!=null&&(g.callback=o),s=is(r,g,u),s!==null&&(kn(s,r,u),Hl(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=Gn(),g=rs(u);g.tag=1,g.payload=s,o!=null&&(g.callback=o),s=is(r,g,u),s!==null&&(kn(s,r,u),Hl(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=Gn(),u=rs(o);u.tag=2,s!=null&&(u.callback=s),s=is(r,u,o),s!==null&&(kn(s,r,o),Hl(s,r,o))}};function $_(r,s,o,u,g,y,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,y,S):s.prototype&&s.prototype.isPureReactComponent?!Pl(o,u)||!Pl(g,y):!0}function Y_(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&am.enqueueReplaceState(s,s.state,null)}function va(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=b({},o));for(var g in r)o[g]===void 0&&(o[g]=r[g])}return o}function W_(r){jc(r)}function X_(r){console.error(r)}function J_(r){jc(r)}function td(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Z_(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function om(r,s,o){return o=rs(o),o.tag=3,o.payload={element:null},o.callback=function(){td(r,s)},o}function e0(r){return r=rs(r),r.tag=3,r}function t0(r,s,o,u){var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var y=u.value;r.payload=function(){return g(y)},r.callback=function(){Z_(s,o,u)}}var S=o.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(r.callback=function(){Z_(s,o,u),typeof g!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var O=u.stack;this.componentDidCatch(u.value,{componentStack:O!==null?O:""})})}function ZT(r,s,o,u,g){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&so(s,o,g,!0),o=Bn.current,o!==null){switch(o.tag){case 31:case 13:return ar===null?fd():o.alternate===null&&jt===0&&(jt=3),o.flags&=-257,o.flags|=65536,o.lanes=g,u===Fc?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),jm(r,u,g)),!1;case 22:return o.flags|=65536,u===Fc?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),jm(r,u,g)),!1}throw Error(i(435,o.tag))}return jm(r,u,g),fd(),!1}if(et)return s=Bn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,u!==Af&&(r=Error(i(422),{cause:u}),Ul(nr(r,o)))):(u!==Af&&(s=Error(i(423),{cause:u}),Ul(nr(s,o))),r=r.current.alternate,r.flags|=65536,g&=-g,r.lanes|=g,u=nr(u,o),g=om(r.stateNode,u,g),Vf(r,g),jt!==4&&(jt=2)),!1;var y=Error(i(520),{cause:u});if(y=nr(y,o),iu===null?iu=[y]:iu.push(y),jt!==4&&(jt=2),s===null)return!0;u=nr(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=g&-g,o.lanes|=r,r=om(o.stateNode,u,r),Vf(o,r),!1;case 1:if(s=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(cs===null||!cs.has(y))))return o.flags|=65536,g&=-g,o.lanes|=g,g=e0(g),t0(g,r,o,u),Vf(o,g),!1}o=o.return}while(o!==null);return!1}var lm=Error(i(461)),Gt=!1;function hn(r,s,o,u){s.child=r===null?s_(s,null,o,u):ya(s,r.child,o,u)}function n0(r,s,o,u,g){o=o.render;var y=s.ref;if("ref"in u){var S={};for(var O in u)O!=="ref"&&(S[O]=u[O])}else S=u;return fa(s),u=qf(r,s,o,S,y,g),O=Hf(),r!==null&&!Gt?(Gf(r,s,g),yi(r,s,g)):(et&&O&&wf(s),s.flags|=1,hn(r,s,u,g),s.child)}function r0(r,s,o,u,g){if(r===null){var y=o.type;return typeof y=="function"&&!Ef(y)&&y.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=y,i0(r,s,y,u,g)):(r=Pc(o.type,null,u,s,s.mode,g),r.ref=s.ref,r.return=s,s.child=r)}if(y=r.child,!gm(r,g)){var S=y.memoizedProps;if(o=o.compare,o=o!==null?o:Pl,o(S,u)&&r.ref===s.ref)return yi(r,s,g)}return s.flags|=1,r=di(y,u),r.ref=s.ref,r.return=s,s.child=r}function i0(r,s,o,u,g){if(r!==null){var y=r.memoizedProps;if(Pl(y,u)&&r.ref===s.ref)if(Gt=!1,s.pendingProps=u=y,gm(r,g))(r.flags&131072)!==0&&(Gt=!0);else return s.lanes=r.lanes,yi(r,s,g)}return um(r,s,o,u,g)}function s0(r,s,o,u){var g=u.children,y=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|o:o,r!==null){for(u=s.child=r.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~y}else u=0,s.child=null;return a0(r,s,y,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&zc(s,y!==null?y.cachePool:null),y!==null?l_(s,y):Uf(),u_(s);else return u=s.lanes=536870912,a0(r,s,y!==null?y.baseLanes|o:o,o,u)}else y!==null?(zc(s,y.cachePool),l_(s,y),as(),s.memoizedState=null):(r!==null&&zc(s,null),Uf(),as());return hn(r,s,g,o),s.child}function Xl(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function a0(r,s,o,u,g){var y=Mf();return y=y===null?null:{parent:qt._currentValue,pool:y},s.memoizedState={baseLanes:o,cachePool:y},r!==null&&zc(s,null),Uf(),u_(s),r!==null&&so(r,s,u,!0),s.childLanes=g,null}function nd(r,s){return s=id({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function o0(r,s,o){return ya(s,r.child,null,o),r=nd(s,s.pendingProps),r.flags|=2,Fn(s),s.memoizedState=null,r}function e1(r,s,o){var u=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(et){if(u.mode==="hidden")return r=nd(s,u),s.lanes=536870912,Xl(null,r);if(Bf(s),(r=St)?(r=vv(r,sr),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Ji!==null?{id:Kr,overflow:$r}:null,retryLane:536870912,hydrationErrors:null},o=Hy(r),o.return=s,s.child=o,cn=s,St=null)):r=null,r===null)throw es(s);return s.lanes=536870912,null}return nd(s,u)}var y=r.memoizedState;if(y!==null){var S=y.dehydrated;if(Bf(s),g)if(s.flags&256)s.flags&=-257,s=o0(r,s,o);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(Gt||so(r,s,o,!1),g=(o&r.childLanes)!==0,Gt||g){if(u=yt,u!==null&&(S=_l(u,o),S!==0&&S!==y.retryLane))throw y.retryLane=S,ua(r,S),kn(u,r,S),lm;fd(),s=o0(r,s,o)}else r=y.treeContext,St=or(S.nextSibling),cn=s,et=!0,Zi=null,sr=!1,r!==null&&Ky(s,r),s=nd(s,u),s.flags|=4096;return s}return r=di(r.child,{mode:u.mode,children:u.children}),r.ref=s.ref,s.child=r,r.return=s,r}function rd(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function um(r,s,o,u,g){return fa(s),o=qf(r,s,o,u,void 0,g),u=Hf(),r!==null&&!Gt?(Gf(r,s,g),yi(r,s,g)):(et&&u&&wf(s),s.flags|=1,hn(r,s,o,g),s.child)}function l0(r,s,o,u,g,y){return fa(s),s.updateQueue=null,o=d_(s,u,o,g),c_(r),u=Hf(),r!==null&&!Gt?(Gf(r,s,y),yi(r,s,y)):(et&&u&&wf(s),s.flags|=1,hn(r,s,o,y),s.child)}function u0(r,s,o,u,g){if(fa(s),s.stateNode===null){var y=to,S=o.contextType;typeof S=="object"&&S!==null&&(y=dn(S)),y=new o(u,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=am,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=u,y.state=s.memoizedState,y.refs={},Nf(s),S=o.contextType,y.context=typeof S=="object"&&S!==null?dn(S):to,y.state=s.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(sm(s,o,S,u),y.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&am.enqueueReplaceState(y,y.state,null),Ql(s,u,y,g),Gl(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){y=s.stateNode;var O=s.memoizedProps,G=va(o,O);y.props=G;var ne=y.context,he=o.contextType;S=to,typeof he=="object"&&he!==null&&(S=dn(he));var pe=o.getDerivedStateFromProps;he=typeof pe=="function"||typeof y.getSnapshotBeforeUpdate=="function",O=s.pendingProps!==O,he||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(O||ne!==S)&&Y_(s,y,u,S),ns=!1;var re=s.memoizedState;y.state=re,Ql(s,u,y,g),Gl(),ne=s.memoizedState,O||re!==ne||ns?(typeof pe=="function"&&(sm(s,o,pe,u),ne=s.memoizedState),(G=ns||$_(s,o,G,u,re,ne,S))?(he||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=ne),y.props=u,y.state=ne,y.context=S,u=G):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{y=s.stateNode,Pf(r,s),S=s.memoizedProps,he=va(o,S),y.props=he,pe=s.pendingProps,re=y.context,ne=o.contextType,G=to,typeof ne=="object"&&ne!==null&&(G=dn(ne)),O=o.getDerivedStateFromProps,(ne=typeof O=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==pe||re!==G)&&Y_(s,y,u,G),ns=!1,re=s.memoizedState,y.state=re,Ql(s,u,y,g),Gl();var ue=s.memoizedState;S!==pe||re!==ue||ns||r!==null&&r.dependencies!==null&&Lc(r.dependencies)?(typeof O=="function"&&(sm(s,o,O,u),ue=s.memoizedState),(he=ns||$_(s,o,he,u,re,ue,G)||r!==null&&r.dependencies!==null&&Lc(r.dependencies))?(ne||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,ue,G),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,ue,G)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===r.memoizedProps&&re===r.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&re===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=ue),y.props=u,y.state=ue,y.context=G,u=he):(typeof y.componentDidUpdate!="function"||S===r.memoizedProps&&re===r.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&re===r.memoizedState||(s.flags|=1024),u=!1)}return y=u,rd(r,s),u=(s.flags&128)!==0,y||u?(y=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,r!==null&&u?(s.child=ya(s,r.child,null,g),s.child=ya(s,null,o,g)):hn(r,s,o,g),s.memoizedState=y.state,r=s.child):r=yi(r,s,g),r}function c0(r,s,o,u){return da(),s.flags|=256,hn(r,s,o,u),s.child}var cm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dm(r){return{baseLanes:r,cachePool:Zy()}}function hm(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Hn),r}function d0(r,s,o){var u=s.pendingProps,g=!1,y=(s.flags&128)!==0,S;if((S=y)||(S=r!==null&&r.memoizedState===null?!1:(Nt.current&2)!==0),S&&(g=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,r===null){if(et){if(g?ss(s):as(),(r=St)?(r=vv(r,sr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Ji!==null?{id:Kr,overflow:$r}:null,retryLane:536870912,hydrationErrors:null},o=Hy(r),o.return=s,s.child=o,cn=s,St=null)):r=null,r===null)throw es(s);return $m(r)?s.lanes=32:s.lanes=536870912,null}var O=u.children;return u=u.fallback,g?(as(),g=s.mode,O=id({mode:"hidden",children:O},g),u=ca(u,g,o,null),O.return=s,u.return=s,O.sibling=u,s.child=O,u=s.child,u.memoizedState=dm(o),u.childLanes=hm(r,S,o),s.memoizedState=cm,Xl(null,u)):(ss(s),fm(s,O))}var G=r.memoizedState;if(G!==null&&(O=G.dehydrated,O!==null)){if(y)s.flags&256?(ss(s),s.flags&=-257,s=mm(r,s,o)):s.memoizedState!==null?(as(),s.child=r.child,s.flags|=128,s=null):(as(),O=u.fallback,g=s.mode,u=id({mode:"visible",children:u.children},g),O=ca(O,g,o,null),O.flags|=2,u.return=s,O.return=s,u.sibling=O,s.child=u,ya(s,r.child,null,o),u=s.child,u.memoizedState=dm(o),u.childLanes=hm(r,S,o),s.memoizedState=cm,s=Xl(null,u));else if(ss(s),$m(O)){if(S=O.nextSibling&&O.nextSibling.dataset,S)var ne=S.dgst;S=ne,u=Error(i(419)),u.stack="",u.digest=S,Ul({value:u,source:null,stack:null}),s=mm(r,s,o)}else if(Gt||so(r,s,o,!1),S=(o&r.childLanes)!==0,Gt||S){if(S=yt,S!==null&&(u=_l(S,o),u!==0&&u!==G.retryLane))throw G.retryLane=u,ua(r,u),kn(S,r,u),lm;Km(O)||fd(),s=mm(r,s,o)}else Km(O)?(s.flags|=192,s.child=r.child,s=null):(r=G.treeContext,St=or(O.nextSibling),cn=s,et=!0,Zi=null,sr=!1,r!==null&&Ky(s,r),s=fm(s,u.children),s.flags|=4096);return s}return g?(as(),O=u.fallback,g=s.mode,G=r.child,ne=G.sibling,u=di(G,{mode:"hidden",children:u.children}),u.subtreeFlags=G.subtreeFlags&65011712,ne!==null?O=di(ne,O):(O=ca(O,g,o,null),O.flags|=2),O.return=s,u.return=s,u.sibling=O,s.child=u,Xl(null,u),u=s.child,O=r.child.memoizedState,O===null?O=dm(o):(g=O.cachePool,g!==null?(G=qt._currentValue,g=g.parent!==G?{parent:G,pool:G}:g):g=Zy(),O={baseLanes:O.baseLanes|o,cachePool:g}),u.memoizedState=O,u.childLanes=hm(r,S,o),s.memoizedState=cm,Xl(r.child,u)):(ss(s),o=r.child,r=o.sibling,o=di(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(S=s.deletions,S===null?(s.deletions=[r],s.flags|=16):S.push(r)),s.child=o,s.memoizedState=null,o)}function fm(r,s){return s=id({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function id(r,s){return r=zn(22,r,null,s),r.lanes=0,r}function mm(r,s,o){return ya(s,r.child,null,o),r=fm(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function h0(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),Df(r.return,s,o)}function pm(r,s,o,u,g,y){var S=r.memoizedState;S===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:g,treeForkCount:y}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=o,S.tailMode=g,S.treeForkCount=y)}function f0(r,s,o){var u=s.pendingProps,g=u.revealOrder,y=u.tail;u=u.children;var S=Nt.current,O=(S&2)!==0;if(O?(S=S&1|2,s.flags|=128):S&=1,ye(Nt,S),hn(r,s,u,o),u=et?Ll:0,!O&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&h0(r,o,s);else if(r.tag===19)h0(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(g){case"forwards":for(o=s.child,g=null;o!==null;)r=o.alternate,r!==null&&Qc(r)===null&&(g=o),o=o.sibling;o=g,o===null?(g=s.child,s.child=null):(g=o.sibling,o.sibling=null),pm(s,!1,g,o,y,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,g=s.child,s.child=null;g!==null;){if(r=g.alternate,r!==null&&Qc(r)===null){s.child=g;break}r=g.sibling,g.sibling=o,o=g,g=r}pm(s,!0,o,null,y,u);break;case"together":pm(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function yi(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),us|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(so(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=di(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=di(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function gm(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Lc(r)))}function t1(r,s,o){switch(s.tag){case 3:ve(s,s.stateNode.containerInfo),ts(s,qt,r.memoizedState.cache),da();break;case 27:case 5:Z(s);break;case 4:ve(s,s.stateNode.containerInfo);break;case 10:ts(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Bf(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(ss(s),s.flags|=128,null):(o&s.child.childLanes)!==0?d0(r,s,o):(ss(s),r=yi(r,s,o),r!==null?r.sibling:null);ss(s);break;case 19:var g=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(so(r,s,o,!1),u=(o&s.childLanes)!==0),g){if(u)return f0(r,s,o);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ye(Nt,Nt.current),u)break;return null;case 22:return s.lanes=0,s0(r,s,o,s.pendingProps);case 24:ts(s,qt,r.memoizedState.cache)}return yi(r,s,o)}function m0(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)Gt=!0;else{if(!gm(r,o)&&(s.flags&128)===0)return Gt=!1,t1(r,s,o);Gt=(r.flags&131072)!==0}else Gt=!1,et&&(s.flags&1048576)!==0&&Qy(s,Ll,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(r=pa(s.elementType),s.type=r,typeof r=="function")Ef(r)?(u=va(r,u),s.tag=1,s=u0(null,s,r,u,o)):(s.tag=0,s=um(null,s,r,u,o));else{if(r!=null){var g=r.$$typeof;if(g===$){s.tag=11,s=n0(null,s,r,u,o);break e}else if(g===N){s.tag=14,s=r0(null,s,r,u,o);break e}}throw s=X(r)||r,Error(i(306,s,""))}}return s;case 0:return um(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,g=va(u,s.pendingProps),u0(r,s,u,g,o);case 3:e:{if(ve(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var y=s.memoizedState;g=y.element,Pf(r,s),Ql(s,u,null,o);var S=s.memoizedState;if(u=S.cache,ts(s,qt,u),u!==y.cache&&If(s,[qt],o,!0),Gl(),u=S.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=c0(r,s,u,o);break e}else if(u!==g){g=nr(Error(i(424)),s),Ul(g),s=c0(r,s,u,o);break e}else for(r=s.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,St=or(r.firstChild),cn=s,et=!0,Zi=null,sr=!0,o=s_(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(da(),u===g){s=yi(r,s,o);break e}hn(r,s,u,o)}s=s.child}return s;case 26:return rd(r,s),r===null?(o=Tv(s.type,null,s.pendingProps,null))?s.memoizedState=o:et||(o=s.type,r=s.pendingProps,u=bd(Ee.current).createElement(o),u[zt]=s,u[nn]=r,fn(u,o,r),Bt(u),s.stateNode=u):s.memoizedState=Tv(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Z(s),r===null&&et&&(u=s.stateNode=Sv(s.type,s.pendingProps,Ee.current),cn=s,sr=!0,g=St,ms(s.type)?(Ym=g,St=or(u.firstChild)):St=g),hn(r,s,s.pendingProps.children,o),rd(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&et&&((g=u=St)&&(u=O1(u,s.type,s.pendingProps,sr),u!==null?(s.stateNode=u,cn=s,St=or(u.firstChild),sr=!1,g=!0):g=!1),g||es(s)),Z(s),g=s.type,y=s.pendingProps,S=r!==null?r.memoizedProps:null,u=y.children,Hm(g,y)?u=null:S!==null&&Hm(g,S)&&(s.flags|=32),s.memoizedState!==null&&(g=qf(r,s,QT,null,null,o),hu._currentValue=g),rd(r,s),hn(r,s,u,o),s.child;case 6:return r===null&&et&&((r=o=St)&&(o=j1(o,s.pendingProps,sr),o!==null?(s.stateNode=o,cn=s,St=null,r=!0):r=!1),r||es(s)),null;case 13:return d0(r,s,o);case 4:return ve(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=ya(s,null,u,o):hn(r,s,u,o),s.child;case 11:return n0(r,s,s.type,s.pendingProps,o);case 7:return hn(r,s,s.pendingProps,o),s.child;case 8:return hn(r,s,s.pendingProps.children,o),s.child;case 12:return hn(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,ts(s,s.type,u.value),hn(r,s,u.children,o),s.child;case 9:return g=s.type._context,u=s.pendingProps.children,fa(s),g=dn(g),u=u(g),s.flags|=1,hn(r,s,u,o),s.child;case 14:return r0(r,s,s.type,s.pendingProps,o);case 15:return i0(r,s,s.type,s.pendingProps,o);case 19:return f0(r,s,o);case 31:return e1(r,s,o);case 22:return s0(r,s,o,s.pendingProps);case 24:return fa(s),u=dn(qt),r===null?(g=Mf(),g===null&&(g=yt,y=Of(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=o),g=y),s.memoizedState={parent:u,cache:g},Nf(s),ts(s,qt,g)):((r.lanes&o)!==0&&(Pf(r,s),Ql(s,null,null,o),Gl()),g=r.memoizedState,y=s.memoizedState,g.parent!==u?(g={parent:u,cache:u},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),ts(s,qt,u)):(u=y.cache,ts(s,qt,u),u!==g.cache&&If(s,[qt],o,!0))),hn(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function _i(r){r.flags|=4}function ym(r,s,o,u,g){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(g&335544128)===g)if(r.stateNode.complete)r.flags|=8192;else if(B0())r.flags|=8192;else throw ga=Fc,kf}else r.flags&=-16777217}function p0(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Iv(s))if(B0())r.flags|=8192;else throw ga=Fc,kf}function sd(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?dc():536870912,r.lanes|=s,_o|=s)}function Jl(r,s){if(!et)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function xt(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var g=r.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function n1(r,s,o){var u=s.pendingProps;switch(Tf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(s),null;case 1:return xt(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),mi(qt),fe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(io(s)?_i(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Cf())),xt(s),null;case 26:var g=s.type,y=s.memoizedState;return r===null?(_i(s),y!==null?(xt(s),p0(s,y)):(xt(s),ym(s,g,null,u,o))):y?y!==r.memoizedState?(_i(s),xt(s),p0(s,y)):(xt(s),s.flags&=-16777217):(r=r.memoizedProps,r!==u&&_i(s),xt(s),ym(s,g,r,u,o)),null;case 27:if(Ce(s),o=Ee.current,g=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&_i(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return xt(s),null}r=ie.current,io(s)?$y(s):(r=Sv(g,u,o),s.stateNode=r,_i(s))}return xt(s),null;case 5:if(Ce(s),g=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&_i(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return xt(s),null}if(y=ie.current,io(s))$y(s);else{var S=bd(Ee.current);switch(y){case 1:y=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=S.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?S.createElement(g,{is:u.is}):S.createElement(g)}}y[zt]=s,y[nn]=u;e:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)y.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break e;for(;S.sibling===null;){if(S.return===null||S.return===s)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=y;e:switch(fn(y,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&_i(s)}}return xt(s),ym(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,o),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&_i(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=Ee.current,io(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,g=cn,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}r[zt]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||dv(r.nodeValue,o)),r||es(s,!0)}else r=bd(r).createTextNode(u),r[zt]=s,s.stateNode=r}return xt(s),null;case 31:if(o=s.memoizedState,r===null||r.memoizedState!==null){if(u=io(s),o!==null){if(r===null){if(!u)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[zt]=s}else da(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;xt(s),r=!1}else o=Cf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return s.flags&256?(Fn(s),s):(Fn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return xt(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(g=io(s),u!==null&&u.dehydrated!==null){if(r===null){if(!g)throw Error(i(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[zt]=s}else da(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;xt(s),g=!1}else g=Cf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(Fn(s),s):(Fn(s),null)}return Fn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=s.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==g&&(u.flags|=2048)),o!==r&&o&&(s.child.flags|=8192),sd(s,s.updateQueue),xt(s),null);case 4:return fe(),r===null&&Um(s.stateNode.containerInfo),xt(s),null;case 10:return mi(s.type),xt(s),null;case 19:if(J(Nt),u=s.memoizedState,u===null)return xt(s),null;if(g=(s.flags&128)!==0,y=u.rendering,y===null)if(g)Jl(u,!1);else{if(jt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(y=Qc(r),y!==null){for(s.flags|=128,Jl(u,!1),r=y.updateQueue,s.updateQueue=r,sd(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)qy(o,r),o=o.sibling;return ye(Nt,Nt.current&1|2),et&&hi(s,u.treeForkCount),s.child}r=r.sibling}u.tail!==null&&wn()>cd&&(s.flags|=128,g=!0,Jl(u,!1),s.lanes=4194304)}else{if(!g)if(r=Qc(y),r!==null){if(s.flags|=128,g=!0,r=r.updateQueue,s.updateQueue=r,sd(s,r),Jl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!et)return xt(s),null}else 2*wn()-u.renderingStartTime>cd&&o!==536870912&&(s.flags|=128,g=!0,Jl(u,!1),s.lanes=4194304);u.isBackwards?(y.sibling=s.child,s.child=y):(r=u.last,r!==null?r.sibling=y:s.child=y,u.last=y)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=wn(),r.sibling=null,o=Nt.current,ye(Nt,g?o&1|2:o&1),et&&hi(s,u.treeForkCount),r):(xt(s),null);case 22:case 23:return Fn(s),zf(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(xt(s),s.subtreeFlags&6&&(s.flags|=8192)):xt(s),o=s.updateQueue,o!==null&&sd(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&J(ma),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),mi(qt),xt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function r1(r,s){switch(Tf(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return mi(qt),fe(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Ce(s),null;case 31:if(s.memoizedState!==null){if(Fn(s),s.alternate===null)throw Error(i(340));da()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(Fn(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));da()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return J(Nt),null;case 4:return fe(),null;case 10:return mi(s.type),null;case 22:case 23:return Fn(s),zf(),r!==null&&J(ma),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return mi(qt),null;case 25:return null;default:return null}}function g0(r,s){switch(Tf(s),s.tag){case 3:mi(qt),fe();break;case 26:case 27:case 5:Ce(s);break;case 4:fe();break;case 31:s.memoizedState!==null&&Fn(s);break;case 13:Fn(s);break;case 19:J(Nt);break;case 10:mi(s.type);break;case 22:case 23:Fn(s),zf(),r!==null&&J(ma);break;case 24:mi(qt)}}function Zl(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var g=u.next;o=g;do{if((o.tag&r)===r){u=void 0;var y=o.create,S=o.inst;u=y(),S.destroy=u}o=o.next}while(o!==g)}}catch(O){ct(s,s.return,O)}}function os(r,s,o){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var y=g.next;u=y;do{if((u.tag&r)===r){var S=u.inst,O=S.destroy;if(O!==void 0){S.destroy=void 0,g=s;var G=o,ne=O;try{ne()}catch(he){ct(g,G,he)}}}u=u.next}while(u!==y)}}catch(he){ct(s,s.return,he)}}function y0(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{o_(s,o)}catch(u){ct(r,r.return,u)}}}function _0(r,s,o){o.props=va(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){ct(r,s,u)}}function eu(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(g){ct(r,s,g)}}function Yr(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(g){ct(r,s,g)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(g){ct(r,s,g)}else o.current=null}function v0(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(g){ct(r,r.return,g)}}function _m(r,s,o){try{var u=r.stateNode;T1(u,r.type,o,s),u[nn]=s}catch(g){ct(r,r.return,g)}}function b0(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ms(r.type)||r.tag===4}function vm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||b0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ms(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function bm(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=_r));else if(u!==4&&(u===27&&ms(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(bm(r,s,o),r=r.sibling;r!==null;)bm(r,s,o),r=r.sibling}function ad(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&ms(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(ad(r,s,o),r=r.sibling;r!==null;)ad(r,s,o),r=r.sibling}function E0(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);fn(s,u,o),s[zt]=r,s[nn]=o}catch(y){ct(r,r.return,y)}}var vi=!1,Qt=!1,Em=!1,S0=typeof WeakSet=="function"?WeakSet:Set,sn=null;function i1(r,s){if(r=r.containerInfo,Fm=Cd,r=ky(r),mf(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var g=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var S=0,O=-1,G=-1,ne=0,he=0,pe=r,re=null;t:for(;;){for(var ue;pe!==o||g!==0&&pe.nodeType!==3||(O=S+g),pe!==y||u!==0&&pe.nodeType!==3||(G=S+u),pe.nodeType===3&&(S+=pe.nodeValue.length),(ue=pe.firstChild)!==null;)re=pe,pe=ue;for(;;){if(pe===r)break t;if(re===o&&++ne===g&&(O=S),re===y&&++he===u&&(G=S),(ue=pe.nextSibling)!==null)break;pe=re,re=pe.parentNode}pe=ue}o=O===-1||G===-1?null:{start:O,end:G}}else o=null}o=o||{start:0,end:0}}else o=null;for(qm={focusedElem:r,selectionRange:o},Cd=!1,sn=s;sn!==null;)if(s=sn,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,sn=r;else for(;sn!==null;){switch(s=sn,y=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)g=r[o],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,o=s,g=y.memoizedProps,y=y.memoizedState,u=o.stateNode;try{var Ae=va(o.type,g);r=u.getSnapshotBeforeUpdate(Ae,y),u.__reactInternalSnapshotBeforeUpdate=r}catch(je){ct(o,o.return,je)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)Qm(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Qm(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,sn=r;break}sn=s.return}}function x0(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Ei(r,o),u&4&&Zl(5,o);break;case 1:if(Ei(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(S){ct(o,o.return,S)}else{var g=va(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(g,s,r.__reactInternalSnapshotBeforeUpdate)}catch(S){ct(o,o.return,S)}}u&64&&y0(o),u&512&&eu(o,o.return);break;case 3:if(Ei(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{o_(r,s)}catch(S){ct(o,o.return,S)}}break;case 27:s===null&&u&4&&E0(o);case 26:case 5:Ei(r,o),s===null&&u&4&&v0(o),u&512&&eu(o,o.return);break;case 12:Ei(r,o);break;case 31:Ei(r,o),u&4&&A0(r,o);break;case 13:Ei(r,o),u&4&&C0(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=f1.bind(null,o),M1(r,o))));break;case 22:if(u=o.memoizedState!==null||vi,!u){s=s!==null&&s.memoizedState!==null||Qt,g=vi;var y=Qt;vi=u,(Qt=s)&&!y?Si(r,o,(o.subtreeFlags&8772)!==0):Ei(r,o),vi=g,Qt=y}break;case 30:break;default:Ei(r,o)}}function w0(r){var s=r.alternate;s!==null&&(r.alternate=null,w0(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Ba(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var At=null,In=!1;function bi(r,s,o){for(o=o.child;o!==null;)T0(r,s,o),o=o.sibling}function T0(r,s,o){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(mr,o)}catch{}switch(o.tag){case 26:Qt||Yr(o,s),bi(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Qt||Yr(o,s);var u=At,g=In;ms(o.type)&&(At=o.stateNode,In=!1),bi(r,s,o),uu(o.stateNode),At=u,In=g;break;case 5:Qt||Yr(o,s);case 6:if(u=At,g=In,At=null,bi(r,s,o),At=u,In=g,At!==null)if(In)try{(At.nodeType===9?At.body:At.nodeName==="HTML"?At.ownerDocument.body:At).removeChild(o.stateNode)}catch(y){ct(o,s,y)}else try{At.removeChild(o.stateNode)}catch(y){ct(o,s,y)}break;case 18:At!==null&&(In?(r=At,yv(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Ao(r)):yv(At,o.stateNode));break;case 4:u=At,g=In,At=o.stateNode.containerInfo,In=!0,bi(r,s,o),At=u,In=g;break;case 0:case 11:case 14:case 15:os(2,o,s),Qt||os(4,o,s),bi(r,s,o);break;case 1:Qt||(Yr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&_0(o,s,u)),bi(r,s,o);break;case 21:bi(r,s,o);break;case 22:Qt=(u=Qt)||o.memoizedState!==null,bi(r,s,o),Qt=u;break;default:bi(r,s,o)}}function A0(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Ao(r)}catch(o){ct(s,s.return,o)}}}function C0(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ao(r)}catch(o){ct(s,s.return,o)}}function s1(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new S0),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new S0),s;default:throw Error(i(435,r.tag))}}function od(r,s){var o=s1(r);s.forEach(function(u){if(!o.has(u)){o.add(u);var g=m1.bind(null,r,u);u.then(g,g)}})}function On(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var g=o[u],y=r,S=s,O=S;e:for(;O!==null;){switch(O.tag){case 27:if(ms(O.type)){At=O.stateNode,In=!1;break e}break;case 5:At=O.stateNode,In=!1;break e;case 3:case 4:At=O.stateNode.containerInfo,In=!0;break e}O=O.return}if(At===null)throw Error(i(160));T0(y,S,g),At=null,In=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)R0(s,r),s=s.sibling}var wr=null;function R0(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:On(s,r),jn(r),u&4&&(os(3,r,r.return),Zl(3,r),os(5,r,r.return));break;case 1:On(s,r),jn(r),u&512&&(Qt||o===null||Yr(o,o.return)),u&64&&vi&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var g=wr;if(On(s,r),jn(r),u&512&&(Qt||o===null||Yr(o,o.return)),u&4){var y=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Nr]||y[zt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(u),g.head.insertBefore(y,g.querySelector("head > title"))),fn(y,u,o),y[zt]=r,Bt(y),u=y;break e;case"link":var S=Rv("link","href",g).get(u+(o.href||""));if(S){for(var O=0;O<S.length;O++)if(y=S[O],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){S.splice(O,1);break t}}y=g.createElement(u),fn(y,u,o),g.head.appendChild(y);break;case"meta":if(S=Rv("meta","content",g).get(u+(o.content||""))){for(O=0;O<S.length;O++)if(y=S[O],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){S.splice(O,1);break t}}y=g.createElement(u),fn(y,u,o),g.head.appendChild(y);break;default:throw Error(i(468,u))}y[zt]=r,Bt(y),u=y}r.stateNode=u}else Dv(g,r.type,r.stateNode);else r.stateNode=Cv(g,u,r.memoizedProps);else y!==u?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,u===null?Dv(g,r.type,r.stateNode):Cv(g,u,r.memoizedProps)):u===null&&r.stateNode!==null&&_m(r,r.memoizedProps,o.memoizedProps)}break;case 27:On(s,r),jn(r),u&512&&(Qt||o===null||Yr(o,o.return)),o!==null&&u&4&&_m(r,r.memoizedProps,o.memoizedProps);break;case 5:if(On(s,r),jn(r),u&512&&(Qt||o===null||Yr(o,o.return)),r.flags&32){g=r.stateNode;try{Dn(g,"")}catch(Ae){ct(r,r.return,Ae)}}u&4&&r.stateNode!=null&&(g=r.memoizedProps,_m(r,g,o!==null?o.memoizedProps:g)),u&1024&&(Em=!0);break;case 6:if(On(s,r),jn(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(Ae){ct(r,r.return,Ae)}}break;case 3:if(xd=null,g=wr,wr=Ed(s.containerInfo),On(s,r),wr=g,jn(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Ao(s.containerInfo)}catch(Ae){ct(r,r.return,Ae)}Em&&(Em=!1,D0(r));break;case 4:u=wr,wr=Ed(r.stateNode.containerInfo),On(s,r),jn(r),wr=u;break;case 12:On(s,r),jn(r);break;case 31:On(s,r),jn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,od(r,u)));break;case 13:On(s,r),jn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(ud=wn()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,od(r,u)));break;case 22:g=r.memoizedState!==null;var G=o!==null&&o.memoizedState!==null,ne=vi,he=Qt;if(vi=ne||g,Qt=he||G,On(s,r),Qt=he,vi=ne,jn(r),u&8192)e:for(s=r.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(o===null||G||vi||Qt||ba(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){G=o=s;try{if(y=G.stateNode,g)S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{O=G.stateNode;var pe=G.memoizedProps.style,re=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;O.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(Ae){ct(G,G.return,Ae)}}}else if(s.tag===6){if(o===null){G=s;try{G.stateNode.nodeValue=g?"":G.memoizedProps}catch(Ae){ct(G,G.return,Ae)}}}else if(s.tag===18){if(o===null){G=s;try{var ue=G.stateNode;g?_v(ue,!0):_v(G.stateNode,!1)}catch(Ae){ct(G,G.return,Ae)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,od(r,o))));break;case 19:On(s,r),jn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,od(r,u)));break;case 30:break;case 21:break;default:On(s,r),jn(r)}}function jn(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(b0(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var g=o.stateNode,y=vm(r);ad(r,y,g);break;case 5:var S=o.stateNode;o.flags&32&&(Dn(S,""),o.flags&=-33);var O=vm(r);ad(r,O,S);break;case 3:case 4:var G=o.stateNode.containerInfo,ne=vm(r);bm(r,ne,G);break;default:throw Error(i(161))}}catch(he){ct(r,r.return,he)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function D0(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;D0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Ei(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)x0(r,s.alternate,s),s=s.sibling}function ba(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:os(4,s,s.return),ba(s);break;case 1:Yr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&_0(s,s.return,o),ba(s);break;case 27:uu(s.stateNode);case 26:case 5:Yr(s,s.return),ba(s);break;case 22:s.memoizedState===null&&ba(s);break;case 30:ba(s);break;default:ba(s)}r=r.sibling}}function Si(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,g=r,y=s,S=y.flags;switch(y.tag){case 0:case 11:case 15:Si(g,y,o),Zl(4,y);break;case 1:if(Si(g,y,o),u=y,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ne){ct(u,u.return,ne)}if(u=y,g=u.updateQueue,g!==null){var O=u.stateNode;try{var G=g.shared.hiddenCallbacks;if(G!==null)for(g.shared.hiddenCallbacks=null,g=0;g<G.length;g++)a_(G[g],O)}catch(ne){ct(u,u.return,ne)}}o&&S&64&&y0(y),eu(y,y.return);break;case 27:E0(y);case 26:case 5:Si(g,y,o),o&&u===null&&S&4&&v0(y),eu(y,y.return);break;case 12:Si(g,y,o);break;case 31:Si(g,y,o),o&&S&4&&A0(g,y);break;case 13:Si(g,y,o),o&&S&4&&C0(g,y);break;case 22:y.memoizedState===null&&Si(g,y,o),eu(y,y.return);break;case 30:break;default:Si(g,y,o)}s=s.sibling}}function Sm(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&zl(o))}function xm(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&zl(r))}function Tr(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)I0(r,s,o,u),s=s.sibling}function I0(r,s,o,u){var g=s.flags;switch(s.tag){case 0:case 11:case 15:Tr(r,s,o,u),g&2048&&Zl(9,s);break;case 1:Tr(r,s,o,u);break;case 3:Tr(r,s,o,u),g&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&zl(r)));break;case 12:if(g&2048){Tr(r,s,o,u),r=s.stateNode;try{var y=s.memoizedProps,S=y.id,O=y.onPostCommit;typeof O=="function"&&O(S,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(G){ct(s,s.return,G)}}else Tr(r,s,o,u);break;case 31:Tr(r,s,o,u);break;case 13:Tr(r,s,o,u);break;case 23:break;case 22:y=s.stateNode,S=s.alternate,s.memoizedState!==null?y._visibility&2?Tr(r,s,o,u):tu(r,s):y._visibility&2?Tr(r,s,o,u):(y._visibility|=2,po(r,s,o,u,(s.subtreeFlags&10256)!==0||!1)),g&2048&&Sm(S,s);break;case 24:Tr(r,s,o,u),g&2048&&xm(s.alternate,s);break;default:Tr(r,s,o,u)}}function po(r,s,o,u,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=r,S=s,O=o,G=u,ne=S.flags;switch(S.tag){case 0:case 11:case 15:po(y,S,O,G,g),Zl(8,S);break;case 23:break;case 22:var he=S.stateNode;S.memoizedState!==null?he._visibility&2?po(y,S,O,G,g):tu(y,S):(he._visibility|=2,po(y,S,O,G,g)),g&&ne&2048&&Sm(S.alternate,S);break;case 24:po(y,S,O,G,g),g&&ne&2048&&xm(S.alternate,S);break;default:po(y,S,O,G,g)}s=s.sibling}}function tu(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,g=u.flags;switch(u.tag){case 22:tu(o,u),g&2048&&Sm(u.alternate,u);break;case 24:tu(o,u),g&2048&&xm(u.alternate,u);break;default:tu(o,u)}s=s.sibling}}var nu=8192;function go(r,s,o){if(r.subtreeFlags&nu)for(r=r.child;r!==null;)O0(r,s,o),r=r.sibling}function O0(r,s,o){switch(r.tag){case 26:go(r,s,o),r.flags&nu&&r.memoizedState!==null&&G1(o,wr,r.memoizedState,r.memoizedProps);break;case 5:go(r,s,o);break;case 3:case 4:var u=wr;wr=Ed(r.stateNode.containerInfo),go(r,s,o),wr=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=nu,nu=16777216,go(r,s,o),nu=u):go(r,s,o));break;default:go(r,s,o)}}function j0(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function ru(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];sn=u,k0(u,r)}j0(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)M0(r),r=r.sibling}function M0(r){switch(r.tag){case 0:case 11:case 15:ru(r),r.flags&2048&&os(9,r,r.return);break;case 3:ru(r);break;case 12:ru(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,ld(r)):ru(r);break;default:ru(r)}}function ld(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];sn=u,k0(u,r)}j0(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:os(8,s,s.return),ld(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,ld(s));break;default:ld(s)}r=r.sibling}}function k0(r,s){for(;sn!==null;){var o=sn;switch(o.tag){case 0:case 11:case 15:os(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:zl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,sn=u;else e:for(o=r;sn!==null;){u=sn;var g=u.sibling,y=u.return;if(w0(u),u===o){sn=null;break e}if(g!==null){g.return=y,sn=g;break e}sn=y}}}var a1={getCacheForType:function(r){var s=dn(qt),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o},cacheSignal:function(){return dn(qt).controller.signal}},o1=typeof WeakMap=="function"?WeakMap:Map,at=0,yt=null,Ke=null,Ye=0,ut=0,qn=null,ls=!1,yo=!1,wm=!1,xi=0,jt=0,us=0,Ea=0,Tm=0,Hn=0,_o=0,iu=null,Mn=null,Am=!1,ud=0,N0=0,cd=1/0,dd=null,cs=null,Jt=0,ds=null,vo=null,wi=0,Cm=0,Rm=null,P0=null,su=0,Dm=null;function Gn(){return(at&2)!==0&&Ye!==0?Ye&-Ye:U.T!==null?Nm():hc()}function V0(){if(Hn===0)if((Ye&536870912)===0||et){var r=$s;$s<<=1,($s&3932160)===0&&($s=262144),Hn=r}else Hn=536870912;return r=Bn.current,r!==null&&(r.flags|=32),Hn}function kn(r,s,o){(r===yt&&(ut===2||ut===9)||r.cancelPendingCommit!==null)&&(bo(r,0),hs(r,Ye,Hn,!1)),Ys(r,o),((at&2)===0||r!==yt)&&(r===yt&&((at&2)===0&&(Ea|=o),jt===4&&hs(r,Ye,Hn,!1)),Wr(r))}function L0(r,s,o){if((at&6)!==0)throw Error(i(327));var u=!o&&(s&127)===0&&(s&r.expiredLanes)===0||pr(r,s),g=u?c1(r,s):Om(r,s,!0),y=u;do{if(g===0){yo&&!u&&hs(r,s,0,!1);break}else{if(o=r.current.alternate,y&&!l1(o)){g=Om(r,s,!1),y=!1;continue}if(g===2){if(y=s,r.errorRecoveryDisabledLanes&y)var S=0;else S=r.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var O=r;g=iu;var G=O.current.memoizedState.isDehydrated;if(G&&(bo(O,S).flags|=256),S=Om(O,S,!1),S!==2){if(wm&&!G){O.errorRecoveryDisabledLanes|=y,Ea|=y,g=4;break e}y=Mn,Mn=g,y!==null&&(Mn===null?Mn=y:Mn.push.apply(Mn,y))}g=S}if(y=!1,g!==2)continue}}if(g===1){bo(r,0),hs(r,s,0,!0);break}e:{switch(u=r,y=g,y){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:hs(u,s,Hn,!ls);break e;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(g=ud+300-wn(),10<g)){if(hs(u,s,Hn,!ls),jr(u,0,!0)!==0)break e;wi=s,u.timeoutHandle=pv(U0.bind(null,u,o,Mn,dd,Am,s,Hn,Ea,_o,ls,y,"Throttled",-0,0),g);break e}U0(u,o,Mn,dd,Am,s,Hn,Ea,_o,ls,y,null,-0,0)}}break}while(!0);Wr(r)}function U0(r,s,o,u,g,y,S,O,G,ne,he,pe,re,ue){if(r.timeoutHandle=-1,pe=s.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_r},O0(s,y,pe);var Ae=(y&62914560)===y?ud-wn():(y&4194048)===y?N0-wn():0;if(Ae=Q1(pe,Ae),Ae!==null){wi=y,r.cancelPendingCommit=Ae(K0.bind(null,r,s,y,o,u,g,S,O,G,he,pe,null,re,ue)),hs(r,y,S,!ne);return}}K0(r,s,y,o,u,g,S,O,G)}function l1(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var g=o[u],y=g.getSnapshot;g=g.value;try{if(!Un(y(),g))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function hs(r,s,o,u){s&=~Tm,s&=~Ea,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var g=s;0<g;){var y=31-Mt(g),S=1<<y;u[y]=-1,g&=~S}o!==0&&Ws(r,o,s)}function hd(){return(at&6)===0?(au(0),!1):!0}function Im(){if(Ke!==null){if(ut===0)var r=Ke.return;else r=Ke,fi=ha=null,Qf(r),uo=null,Fl=0,r=Ke;for(;r!==null;)g0(r.alternate,r),r=r.return;Ke=null}}function bo(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,R1(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),wi=0,Im(),yt=r,Ke=o=di(r.current,null),Ye=s,ut=0,qn=null,ls=!1,yo=pr(r,s),wm=!1,_o=Hn=Tm=Ea=us=jt=0,Mn=iu=null,Am=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var g=31-Mt(u),y=1<<g;s|=r[g],u&=~y}return xi=s,Mc(),o}function z0(r,s){Be=null,U.H=Wl,s===lo||s===Bc?(s=n_(),ut=3):s===kf?(s=n_(),ut=4):ut=s===lm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,qn=s,Ke===null&&(jt=1,td(r,nr(s,r.current)))}function B0(){var r=Bn.current;return r===null?!0:(Ye&4194048)===Ye?ar===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?r===ar:!1}function F0(){var r=U.H;return U.H=Wl,r===null?Wl:r}function q0(){var r=U.A;return U.A=a1,r}function fd(){jt=4,ls||(Ye&4194048)!==Ye&&Bn.current!==null||(yo=!0),(us&134217727)===0&&(Ea&134217727)===0||yt===null||hs(yt,Ye,Hn,!1)}function Om(r,s,o){var u=at;at|=2;var g=F0(),y=q0();(yt!==r||Ye!==s)&&(dd=null,bo(r,s)),s=!1;var S=jt;e:do try{if(ut!==0&&Ke!==null){var O=Ke,G=qn;switch(ut){case 8:Im(),S=6;break e;case 3:case 2:case 9:case 6:Bn.current===null&&(s=!0);var ne=ut;if(ut=0,qn=null,Eo(r,O,G,ne),o&&yo){S=0;break e}break;default:ne=ut,ut=0,qn=null,Eo(r,O,G,ne)}}u1(),S=jt;break}catch(he){z0(r,he)}while(!0);return s&&r.shellSuspendCounter++,fi=ha=null,at=u,U.H=g,U.A=y,Ke===null&&(yt=null,Ye=0,Mc()),S}function u1(){for(;Ke!==null;)H0(Ke)}function c1(r,s){var o=at;at|=2;var u=F0(),g=q0();yt!==r||Ye!==s?(dd=null,cd=wn()+500,bo(r,s)):yo=pr(r,s);e:do try{if(ut!==0&&Ke!==null){s=Ke;var y=qn;t:switch(ut){case 1:ut=0,qn=null,Eo(r,s,y,1);break;case 2:case 9:if(e_(y)){ut=0,qn=null,G0(s);break}s=function(){ut!==2&&ut!==9||yt!==r||(ut=7),Wr(r)},y.then(s,s);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:e_(y)?(ut=0,qn=null,G0(s)):(ut=0,qn=null,Eo(r,s,y,7));break;case 5:var S=null;switch(Ke.tag){case 26:S=Ke.memoizedState;case 5:case 27:var O=Ke;if(S?Iv(S):O.stateNode.complete){ut=0,qn=null;var G=O.sibling;if(G!==null)Ke=G;else{var ne=O.return;ne!==null?(Ke=ne,md(ne)):Ke=null}break t}}ut=0,qn=null,Eo(r,s,y,5);break;case 6:ut=0,qn=null,Eo(r,s,y,6);break;case 8:Im(),jt=6;break e;default:throw Error(i(462))}}d1();break}catch(he){z0(r,he)}while(!0);return fi=ha=null,U.H=u,U.A=g,at=o,Ke!==null?0:(yt=null,Ye=0,Mc(),jt)}function d1(){for(;Ke!==null&&!of();)H0(Ke)}function H0(r){var s=m0(r.alternate,r,xi);r.memoizedProps=r.pendingProps,s===null?md(r):Ke=s}function G0(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=l0(o,s,s.pendingProps,s.type,void 0,Ye);break;case 11:s=l0(o,s,s.pendingProps,s.type.render,s.ref,Ye);break;case 5:Qf(s);default:g0(o,s),s=Ke=qy(s,xi),s=m0(o,s,xi)}r.memoizedProps=r.pendingProps,s===null?md(r):Ke=s}function Eo(r,s,o,u){fi=ha=null,Qf(s),uo=null,Fl=0;var g=s.return;try{if(ZT(r,g,s,o,Ye)){jt=1,td(r,nr(o,r.current)),Ke=null;return}}catch(y){if(g!==null)throw Ke=g,y;jt=1,td(r,nr(o,r.current)),Ke=null;return}s.flags&32768?(et||u===1?r=!0:yo||(Ye&536870912)!==0?r=!1:(ls=r=!0,(u===2||u===9||u===3||u===6)&&(u=Bn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Q0(s,r)):md(s)}function md(r){var s=r;do{if((s.flags&32768)!==0){Q0(s,ls);return}r=s.return;var o=n1(s.alternate,s,xi);if(o!==null){Ke=o;return}if(s=s.sibling,s!==null){Ke=s;return}Ke=s=r}while(s!==null);jt===0&&(jt=5)}function Q0(r,s){do{var o=r1(r.alternate,r);if(o!==null){o.flags&=32767,Ke=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){Ke=r;return}Ke=r=o}while(r!==null);jt=6,Ke=null}function K0(r,s,o,u,g,y,S,O,G){r.cancelPendingCommit=null;do pd();while(Jt!==0);if((at&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(y=s.lanes|s.childLanes,y|=vf,cf(r,o,y,S,O,G),r===yt&&(Ke=yt=null,Ye=0),vo=s,ds=r,wi=o,Cm=y,Rm=g,P0=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,p1(Fi,function(){return J0(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=U.T,U.T=null,g=H.p,H.p=2,S=at,at|=4;try{i1(r,s,o)}finally{at=S,H.p=g,U.T=u}}Jt=1,$0(),Y0(),W0()}}function $0(){if(Jt===1){Jt=0;var r=ds,s=vo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=U.T,U.T=null;var u=H.p;H.p=2;var g=at;at|=4;try{R0(s,r);var y=qm,S=ky(r.containerInfo),O=y.focusedElem,G=y.selectionRange;if(S!==O&&O&&O.ownerDocument&&My(O.ownerDocument.documentElement,O)){if(G!==null&&mf(O)){var ne=G.start,he=G.end;if(he===void 0&&(he=ne),"selectionStart"in O)O.selectionStart=ne,O.selectionEnd=Math.min(he,O.value.length);else{var pe=O.ownerDocument||document,re=pe&&pe.defaultView||window;if(re.getSelection){var ue=re.getSelection(),Ae=O.textContent.length,je=Math.min(G.start,Ae),pt=G.end===void 0?je:Math.min(G.end,Ae);!ue.extend&&je>pt&&(S=pt,pt=je,je=S);var Y=jy(O,je),K=jy(O,pt);if(Y&&K&&(ue.rangeCount!==1||ue.anchorNode!==Y.node||ue.anchorOffset!==Y.offset||ue.focusNode!==K.node||ue.focusOffset!==K.offset)){var te=pe.createRange();te.setStart(Y.node,Y.offset),ue.removeAllRanges(),je>pt?(ue.addRange(te),ue.extend(K.node,K.offset)):(te.setEnd(K.node,K.offset),ue.addRange(te))}}}}for(pe=[],ue=O;ue=ue.parentNode;)ue.nodeType===1&&pe.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<pe.length;O++){var me=pe[O];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}Cd=!!Fm,qm=Fm=null}finally{at=g,H.p=u,U.T=o}}r.current=s,Jt=2}}function Y0(){if(Jt===2){Jt=0;var r=ds,s=vo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=U.T,U.T=null;var u=H.p;H.p=2;var g=at;at|=4;try{x0(r,s.alternate,s)}finally{at=g,H.p=u,U.T=o}}Jt=3}}function W0(){if(Jt===4||Jt===3){Jt=0,sc();var r=ds,s=vo,o=wi,u=P0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Jt=5:(Jt=0,vo=ds=null,X0(r,r.pendingLanes));var g=r.pendingLanes;if(g===0&&(cs=null),oi(o),s=s.stateNode,ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(mr,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=U.T,g=H.p,H.p=2,U.T=null;try{for(var y=r.onRecoverableError,S=0;S<u.length;S++){var O=u[S];y(O.value,{componentStack:O.stack})}}finally{U.T=s,H.p=g}}(wi&3)!==0&&pd(),Wr(r),g=r.pendingLanes,(o&261930)!==0&&(g&42)!==0?r===Dm?su++:(su=0,Dm=r):su=0,au(0)}}function X0(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,zl(s)))}function pd(){return $0(),Y0(),W0(),J0()}function J0(){if(Jt!==5)return!1;var r=ds,s=Cm;Cm=0;var o=oi(wi),u=U.T,g=H.p;try{H.p=32>o?32:o,U.T=null,o=Rm,Rm=null;var y=ds,S=wi;if(Jt=0,vo=ds=null,wi=0,(at&6)!==0)throw Error(i(331));var O=at;if(at|=4,M0(y.current),I0(y,y.current,S,o),at=O,au(0,!1),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(mr,y)}catch{}return!0}finally{H.p=g,U.T=u,X0(r,s)}}function Z0(r,s,o){s=nr(o,s),s=om(r.stateNode,s,2),r=is(r,s,2),r!==null&&(Ys(r,2),Wr(r))}function ct(r,s,o){if(r.tag===3)Z0(r,r,o);else for(;s!==null;){if(s.tag===3){Z0(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(cs===null||!cs.has(u))){r=nr(o,r),o=e0(2),u=is(s,o,2),u!==null&&(t0(o,u,s,r),Ys(u,2),Wr(u));break}}s=s.return}}function jm(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new o1;var g=new Set;u.set(s,g)}else g=u.get(s),g===void 0&&(g=new Set,u.set(s,g));g.has(o)||(wm=!0,g.add(o),r=h1.bind(null,r,s,o),s.then(r,r))}function h1(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,yt===r&&(Ye&o)===o&&(jt===4||jt===3&&(Ye&62914560)===Ye&&300>wn()-ud?(at&2)===0&&bo(r,0):Tm|=o,_o===Ye&&(_o=0)),Wr(r)}function ev(r,s){s===0&&(s=dc()),r=ua(r,s),r!==null&&(Ys(r,s),Wr(r))}function f1(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),ev(r,o)}function m1(r,s){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,g=r.memoizedState;g!==null&&(o=g.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),ev(r,o)}function p1(r,s){return Xt(r,s)}var gd=null,So=null,Mm=!1,yd=!1,km=!1,fs=0;function Wr(r){r!==So&&r.next===null&&(So===null?gd=So=r:So=So.next=r),yd=!0,Mm||(Mm=!0,y1())}function au(r,s){if(!km&&yd){km=!0;do for(var o=!1,u=gd;u!==null;){if(r!==0){var g=u.pendingLanes;if(g===0)var y=0;else{var S=u.suspendedLanes,O=u.pingedLanes;y=(1<<31-Mt(42|r)+1)-1,y&=g&~(S&~O),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,iv(u,y))}else y=Ye,y=jr(u,u===yt?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||pr(u,y)||(o=!0,iv(u,y));u=u.next}while(o);km=!1}}function g1(){tv()}function tv(){yd=Mm=!1;var r=0;fs!==0&&C1()&&(r=fs);for(var s=wn(),o=null,u=gd;u!==null;){var g=u.next,y=nv(u,s);y===0?(u.next=null,o===null?gd=g:o.next=g,g===null&&(So=o)):(o=u,(r!==0||(y&3)!==0)&&(yd=!0)),u=g}Jt!==0&&Jt!==5||au(r),fs!==0&&(fs=0)}function nv(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,g=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var S=31-Mt(y),O=1<<S,G=g[S];G===-1?((O&o)===0||(O&u)!==0)&&(g[S]=uf(O,s)):G<=s&&(r.expiredLanes|=O),y&=~O}if(s=yt,o=Ye,o=jr(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(ut===2||ut===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Bi(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||pr(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&Bi(u),oi(o)){case 2:case 8:o=gl;break;case 32:o=Fi;break;case 268435456:o=ac;break;default:o=Fi}return u=rv.bind(null,r),o=Xt(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&Bi(u),r.callbackPriority=2,r.callbackNode=null,2}function rv(r,s){if(Jt!==0&&Jt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(pd()&&r.callbackNode!==o)return null;var u=Ye;return u=jr(r,r===yt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(L0(r,u,s),nv(r,wn()),r.callbackNode!=null&&r.callbackNode===o?rv.bind(null,r):null)}function iv(r,s){if(pd())return null;L0(r,s,!0)}function y1(){D1(function(){(at&6)!==0?Xt(pl,g1):tv()})}function Nm(){if(fs===0){var r=ao;r===0&&(r=Ir,Ir<<=1,(Ir&261888)===0&&(Ir=256)),fs=r}return fs}function sv(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Ga(""+r)}function av(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function _1(r,s,o,u,g){if(s==="submit"&&o&&o.stateNode===g){var y=sv((g[nn]||null).action),S=u.submitter;S&&(s=(s=S[nn]||null)?sv(s.formAction):S.getAttribute("formAction"),s!==null&&(y=s,S=null));var O=new qr("action","action",null,u,g);r.push({event:O,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(fs!==0){var G=S?av(g,S):new FormData(g);tm(o,{pending:!0,data:G,method:g.method,action:y},null,G)}}else typeof y=="function"&&(O.preventDefault(),G=S?av(g,S):new FormData(g),tm(o,{pending:!0,data:G,method:g.method,action:y},y,G))},currentTarget:g}]})}}for(var Pm=0;Pm<_f.length;Pm++){var Vm=_f[Pm],v1=Vm.toLowerCase(),b1=Vm[0].toUpperCase()+Vm.slice(1);xr(v1,"on"+b1)}xr(Vy,"onAnimationEnd"),xr(Ly,"onAnimationIteration"),xr(Uy,"onAnimationStart"),xr("dblclick","onDoubleClick"),xr("focusin","onFocus"),xr("focusout","onBlur"),xr(PT,"onTransitionRun"),xr(VT,"onTransitionStart"),xr(LT,"onTransitionCancel"),xr(zy,"onTransitionEnd"),Ur("onMouseEnter",["mouseout","mouseover"]),Ur("onMouseLeave",["mouseout","mouseover"]),Ur("onPointerEnter",["pointerout","pointerover"]),Ur("onPointerLeave",["pointerout","pointerover"]),Lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Lr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ou));function ov(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],g=u.event;u=u.listeners;e:{var y=void 0;if(s)for(var S=u.length-1;0<=S;S--){var O=u[S],G=O.instance,ne=O.currentTarget;if(O=O.listener,G!==y&&g.isPropagationStopped())break e;y=O,g.currentTarget=ne;try{y(g)}catch(he){jc(he)}g.currentTarget=null,y=G}else for(S=0;S<u.length;S++){if(O=u[S],G=O.instance,ne=O.currentTarget,O=O.listener,G!==y&&g.isPropagationStopped())break e;y=O,g.currentTarget=ne;try{y(g)}catch(he){jc(he)}g.currentTarget=null,y=G}}}}function $e(r,s){var o=s[za];o===void 0&&(o=s[za]=new Set);var u=r+"__bubble";o.has(u)||(lv(s,r,2,!1),o.add(u))}function Lm(r,s,o){var u=0;s&&(u|=4),lv(o,r,u,s)}var _d="_reactListening"+Math.random().toString(36).slice(2);function Um(r){if(!r[_d]){r[_d]=!0,vl.forEach(function(o){o!=="selectionchange"&&(E1.has(o)||Lm(o,!1,r),Lm(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[_d]||(s[_d]=!0,Lm("selectionchange",!1,s))}}function lv(r,s,o,u){switch(Vv(s)){case 2:var g=Y1;break;case 8:g=W1;break;default:g=ep}o=g.bind(null,s,o,r),g=void 0,!ta||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),u?g!==void 0?r.addEventListener(s,o,{capture:!0,passive:g}):r.addEventListener(s,o,!0):g!==void 0?r.addEventListener(s,o,{passive:g}):r.addEventListener(s,o,!1)}function zm(r,s,o,u,g){var y=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var O=u.stateNode.containerInfo;if(O===g)break;if(S===4)for(S=u.return;S!==null;){var G=S.tag;if((G===3||G===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;O!==null;){if(S=Pr(O),S===null)return;if(G=S.tag,G===5||G===6||G===26||G===27){u=y=S;continue e}O=O.parentNode}}u=u.return}$i(function(){var ne=y,he=Jn(o),pe=[];e:{var re=By.get(r);if(re!==void 0){var ue=qr,Ae=r;switch(r){case"keypress":if(ra(o)===0)break e;case"keydown":case"keyup":ue=Dc;break;case"focusin":Ae="focus",ue=sa;break;case"focusout":Ae="blur",ue=sa;break;case"beforeblur":case"afterblur":ue=sa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=jl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=bc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=v;break;case Vy:case Ly:case Uy:ue=Sc;break;case zy:ue=P;break;case"scroll":case"scrollend":ue=Ol;break;case"wheel":ue=ae;break;case"copy":case"cut":case"paste":ue=xc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=ci;break;case"toggle":case"beforetoggle":ue=ze}var je=(s&4)!==0,pt=!je&&(r==="scroll"||r==="scrollend"),Y=je?re!==null?re+"Capture":null:re;je=[];for(var K=ne,te;K!==null;){var me=K;if(te=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||te===null||Y===null||(me=vr(K,Y),me!=null&&je.push(lu(K,me,te))),pt)break;K=K.return}0<je.length&&(re=new ue(re,Ae,null,o,he),pe.push({event:re,listeners:je}))}}if((s&7)===0){e:{if(re=r==="mouseover"||r==="pointerover",ue=r==="mouseout"||r==="pointerout",re&&o!==Rl&&(Ae=o.relatedTarget||o.fromElement)&&(Pr(Ae)||Ae[kr]))break e;if((ue||re)&&(re=he.window===he?he:(re=he.ownerDocument)?re.defaultView||re.parentWindow:window,ue?(Ae=o.relatedTarget||o.toElement,ue=ne,Ae=Ae?Pr(Ae):null,Ae!==null&&(pt=l(Ae),je=Ae.tag,Ae!==pt||je!==5&&je!==27&&je!==6)&&(Ae=null)):(ue=null,Ae=ne),ue!==Ae)){if(je=jl,me="onMouseLeave",Y="onMouseEnter",K="mouse",(r==="pointerout"||r==="pointerover")&&(je=ci,me="onPointerLeave",Y="onPointerEnter",K="pointer"),pt=ue==null?re:Vn(ue),te=Ae==null?re:Vn(Ae),re=new je(me,K+"leave",ue,o,he),re.target=pt,re.relatedTarget=te,me=null,Pr(he)===ne&&(je=new je(Y,K+"enter",Ae,o,he),je.target=te,je.relatedTarget=pt,me=je),pt=me,ue&&Ae)t:{for(je=S1,Y=ue,K=Ae,te=0,me=Y;me;me=je(me))te++;me=0;for(var Ie=K;Ie;Ie=je(Ie))me++;for(;0<te-me;)Y=je(Y),te--;for(;0<me-te;)K=je(K),me--;for(;te--;){if(Y===K||K!==null&&Y===K.alternate){je=Y;break t}Y=je(Y),K=je(K)}je=null}else je=null;ue!==null&&uv(pe,re,ue,je,!1),Ae!==null&&pt!==null&&uv(pe,pt,Ae,je,!0)}}e:{if(re=ne?Vn(ne):window,ue=re.nodeName&&re.nodeName.toLowerCase(),ue==="select"||ue==="input"&&re.type==="file")var rt=Ay;else if(wy(re))if(Cy)rt=MT;else{rt=OT;var Re=IT}else ue=re.nodeName,!ue||ue.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?ne&&Ha(ne.elementType)&&(rt=Ay):rt=jT;if(rt&&(rt=rt(r,ne))){Ty(pe,rt,o,he);break e}Re&&Re(r,re,ne),r==="focusout"&&ne&&re.type==="number"&&ne.memoizedProps.value!=null&&Tl(re,"number",re.value)}switch(Re=ne?Vn(ne):window,r){case"focusin":(wy(Re)||Re.contentEditable==="true")&&(Ja=Re,pf=ne,Vl=null);break;case"focusout":Vl=pf=Ja=null;break;case"mousedown":gf=!0;break;case"contextmenu":case"mouseup":case"dragend":gf=!1,Ny(pe,o,he);break;case"selectionchange":if(NT)break;case"keydown":case"keyup":Ny(pe,o,he)}var Fe;if(st)e:{switch(r){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else Xa?aa(r,o)&&(We="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(We="onCompositionStart");We&&(Qr&&o.locale!=="ko"&&(Xa||We!=="onCompositionStart"?We==="onCompositionEnd"&&Xa&&(Fe=Il()):(Fr=he,Dl="value"in Fr?Fr.value:Fr.textContent,Xa=!0)),Re=vd(ne,We),0<Re.length&&(We=new Gr(We,r,null,o,he),pe.push({event:We,listeners:Re}),Fe?We.data=Fe:(Fe=Wa(o),Fe!==null&&(We.data=Fe)))),(Fe=er?AT(r,o):CT(r,o))&&(We=vd(ne,"onBeforeInput"),0<We.length&&(Re=new Gr("onBeforeInput","beforeinput",null,o,he),pe.push({event:Re,listeners:We}),Re.data=Fe)),_1(pe,r,ne,o,he)}ov(pe,s)})}function lu(r,s,o){return{instance:r,listener:s,currentTarget:o}}function vd(r,s){for(var o=s+"Capture",u=[];r!==null;){var g=r,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=vr(r,o),g!=null&&u.unshift(lu(r,g,y)),g=vr(r,s),g!=null&&u.push(lu(r,g,y))),r.tag===3)return u;r=r.return}return[]}function S1(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function uv(r,s,o,u,g){for(var y=s._reactName,S=[];o!==null&&o!==u;){var O=o,G=O.alternate,ne=O.stateNode;if(O=O.tag,G!==null&&G===u)break;O!==5&&O!==26&&O!==27||ne===null||(G=ne,g?(ne=vr(o,y),ne!=null&&S.unshift(lu(o,ne,G))):g||(ne=vr(o,y),ne!=null&&S.push(lu(o,ne,G)))),o=o.return}S.length!==0&&r.push({event:s,listeners:S})}var x1=/\r\n?/g,w1=/\u0000|\uFFFD/g;function cv(r){return(typeof r=="string"?r:""+r).replace(x1,`
`).replace(w1,"")}function dv(r,s){return s=cv(s),cv(r)===s}function mt(r,s,o,u,g,y){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Dn(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Dn(r,""+u);break;case"className":Ln(r,"class",u);break;case"tabIndex":Ln(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Ln(r,o,u);break;case"style":Cl(r,u,y);break;case"data":if(s!=="object"){Ln(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Ga(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(s!=="input"&&mt(r,s,"name",g.name,g,null),mt(r,s,"formEncType",g.formEncType,g,null),mt(r,s,"formMethod",g.formMethod,g,null),mt(r,s,"formTarget",g.formTarget,g,null)):(mt(r,s,"encType",g.encType,g,null),mt(r,s,"method",g.method,g,null),mt(r,s,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Ga(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=_r);break;case"onScroll":u!=null&&$e("scroll",r);break;case"onScrollEnd":u!=null&&$e("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=Ga(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":$e("beforetoggle",r),$e("toggle",r),Fa(r,"popover",u);break;case"xlinkActuate":Ft(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ft(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ft(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ft(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ft(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ft(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ft(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ft(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ft(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Fa(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=vc.get(o)||o,Fa(r,o,u))}}function Bm(r,s,o,u,g,y){switch(o){case"style":Cl(r,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?Dn(r,u):(typeof u=="number"||typeof u=="bigint")&&Dn(r,""+u);break;case"onScroll":u!=null&&$e("scroll",r);break;case"onScrollEnd":u!=null&&$e("scrollend",r);break;case"onClick":u!=null&&(r.onclick=_r);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(g=o.endsWith("Capture"),s=o.slice(2,g?o.length-7:void 0),y=r[nn]||null,y=y!=null?y[o]:null,typeof y=="function"&&r.removeEventListener(s,y,g),typeof u=="function")){typeof y!="function"&&y!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,g);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Fa(r,o,u)}}}function fn(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",r),$e("load",r);var u=!1,g=!1,y;for(y in o)if(o.hasOwnProperty(y)){var S=o[y];if(S!=null)switch(y){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:mt(r,s,y,S,o,null)}}g&&mt(r,s,"srcSet",o.srcSet,o,null),u&&mt(r,s,"src",o.src,o,null);return;case"input":$e("invalid",r);var O=y=S=g=null,G=null,ne=null;for(u in o)if(o.hasOwnProperty(u)){var he=o[u];if(he!=null)switch(u){case"name":g=he;break;case"type":S=he;break;case"checked":G=he;break;case"defaultChecked":ne=he;break;case"value":y=he;break;case"defaultValue":O=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(137,s));break;default:mt(r,s,u,he,o,null)}}gc(r,y,O,G,ne,S,g,!1);return;case"select":$e("invalid",r),u=S=y=null;for(g in o)if(o.hasOwnProperty(g)&&(O=o[g],O!=null))switch(g){case"value":y=O;break;case"defaultValue":S=O;break;case"multiple":u=O;default:mt(r,s,g,O,o,null)}s=y,o=S,r.multiple=!!u,s!=null?Hi(r,!!u,s,!1):o!=null&&Hi(r,!!u,o,!0);return;case"textarea":$e("invalid",r),y=g=u=null;for(S in o)if(o.hasOwnProperty(S)&&(O=o[S],O!=null))switch(S){case"value":u=O;break;case"defaultValue":g=O;break;case"children":y=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:mt(r,s,S,O,o,null)}Gi(r,u,g,y);return;case"option":for(G in o)o.hasOwnProperty(G)&&(u=o[G],u!=null)&&(G==="selected"?r.selected=u&&typeof u!="function"&&typeof u!="symbol":mt(r,s,G,u,o,null));return;case"dialog":$e("beforetoggle",r),$e("toggle",r),$e("cancel",r),$e("close",r);break;case"iframe":case"object":$e("load",r);break;case"video":case"audio":for(u=0;u<ou.length;u++)$e(ou[u],r);break;case"image":$e("error",r),$e("load",r);break;case"details":$e("toggle",r);break;case"embed":case"source":case"link":$e("error",r),$e("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in o)if(o.hasOwnProperty(ne)&&(u=o[ne],u!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:mt(r,s,ne,u,o,null)}return;default:if(Ha(s)){for(he in o)o.hasOwnProperty(he)&&(u=o[he],u!==void 0&&Bm(r,s,he,u,o,void 0));return}}for(O in o)o.hasOwnProperty(O)&&(u=o[O],u!=null&&mt(r,s,O,u,o,null))}function T1(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,S=null,O=null,G=null,ne=null,he=null;for(ue in o){var pe=o[ue];if(o.hasOwnProperty(ue)&&pe!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":G=pe;default:u.hasOwnProperty(ue)||mt(r,s,ue,null,u,pe)}}for(var re in u){var ue=u[re];if(pe=o[re],u.hasOwnProperty(re)&&(ue!=null||pe!=null))switch(re){case"type":y=ue;break;case"name":g=ue;break;case"checked":ne=ue;break;case"defaultChecked":he=ue;break;case"value":S=ue;break;case"defaultValue":O=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(i(137,s));break;default:ue!==pe&&mt(r,s,re,ue,u,pe)}}qa(r,S,O,G,ne,he,y,g);return;case"select":ue=S=O=re=null;for(y in o)if(G=o[y],o.hasOwnProperty(y)&&G!=null)switch(y){case"value":break;case"multiple":ue=G;default:u.hasOwnProperty(y)||mt(r,s,y,null,u,G)}for(g in u)if(y=u[g],G=o[g],u.hasOwnProperty(g)&&(y!=null||G!=null))switch(g){case"value":re=y;break;case"defaultValue":O=y;break;case"multiple":S=y;default:y!==G&&mt(r,s,g,y,u,G)}s=O,o=S,u=ue,re!=null?Hi(r,!!o,re,!1):!!u!=!!o&&(s!=null?Hi(r,!!o,s,!0):Hi(r,!!o,o?[]:"",!1));return;case"textarea":ue=re=null;for(O in o)if(g=o[O],o.hasOwnProperty(O)&&g!=null&&!u.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:mt(r,s,O,null,u,g)}for(S in u)if(g=u[S],y=o[S],u.hasOwnProperty(S)&&(g!=null||y!=null))switch(S){case"value":re=g;break;case"defaultValue":ue=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==y&&mt(r,s,S,g,u,y)}yc(r,re,ue);return;case"option":for(var Ae in o)re=o[Ae],o.hasOwnProperty(Ae)&&re!=null&&!u.hasOwnProperty(Ae)&&(Ae==="selected"?r.selected=!1:mt(r,s,Ae,null,u,re));for(G in u)re=u[G],ue=o[G],u.hasOwnProperty(G)&&re!==ue&&(re!=null||ue!=null)&&(G==="selected"?r.selected=re&&typeof re!="function"&&typeof re!="symbol":mt(r,s,G,re,u,ue));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in o)re=o[je],o.hasOwnProperty(je)&&re!=null&&!u.hasOwnProperty(je)&&mt(r,s,je,null,u,re);for(ne in u)if(re=u[ne],ue=o[ne],u.hasOwnProperty(ne)&&re!==ue&&(re!=null||ue!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,s));break;default:mt(r,s,ne,re,u,ue)}return;default:if(Ha(s)){for(var pt in o)re=o[pt],o.hasOwnProperty(pt)&&re!==void 0&&!u.hasOwnProperty(pt)&&Bm(r,s,pt,void 0,u,re);for(he in u)re=u[he],ue=o[he],!u.hasOwnProperty(he)||re===ue||re===void 0&&ue===void 0||Bm(r,s,he,re,u,ue);return}}for(var Y in o)re=o[Y],o.hasOwnProperty(Y)&&re!=null&&!u.hasOwnProperty(Y)&&mt(r,s,Y,null,u,re);for(pe in u)re=u[pe],ue=o[pe],!u.hasOwnProperty(pe)||re===ue||re==null&&ue==null||mt(r,s,pe,re,u,ue)}function hv(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function A1(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var g=o[u],y=g.transferSize,S=g.initiatorType,O=g.duration;if(y&&O&&hv(S)){for(S=0,O=g.responseEnd,u+=1;u<o.length;u++){var G=o[u],ne=G.startTime;if(ne>O)break;var he=G.transferSize,pe=G.initiatorType;he&&hv(pe)&&(G=G.responseEnd,S+=he*(G<O?1:(O-ne)/(G-ne)))}if(--u,s+=8*(y+S)/(g.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Fm=null,qm=null;function bd(r){return r.nodeType===9?r:r.ownerDocument}function fv(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mv(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Hm(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Gm=null;function C1(){var r=window.event;return r&&r.type==="popstate"?r===Gm?!1:(Gm=r,!0):(Gm=null,!1)}var pv=typeof setTimeout=="function"?setTimeout:void 0,R1=typeof clearTimeout=="function"?clearTimeout:void 0,gv=typeof Promise=="function"?Promise:void 0,D1=typeof queueMicrotask=="function"?queueMicrotask:typeof gv<"u"?function(r){return gv.resolve(null).then(r).catch(I1)}:pv;function I1(r){setTimeout(function(){throw r})}function ms(r){return r==="head"}function yv(r,s){var o=s,u=0;do{var g=o.nextSibling;if(r.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(g),Ao(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")uu(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,uu(o);for(var y=o.firstChild;y;){var S=y.nextSibling,O=y.nodeName;y[Nr]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=S}}else o==="body"&&uu(r.ownerDocument.body);o=g}while(o);Ao(s)}function _v(r,s){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function Qm(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Qm(o),Ba(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function O1(r,s,o,u){for(;r.nodeType===1;){var g=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Nr])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==g.rel||r.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||r.getAttribute("title")!==(g.title==null?null:g.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(g.src==null?null:g.src)||r.getAttribute("type")!==(g.type==null?null:g.type)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=or(r.nextSibling),r===null)break}return null}function j1(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=or(r.nextSibling),r===null))return null;return r}function vv(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=or(r.nextSibling),r===null))return null;return r}function Km(r){return r.data==="$?"||r.data==="$~"}function $m(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function M1(r,s){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function or(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var Ym=null;function bv(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(s===0)return or(r.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}r=r.nextSibling}return null}function Ev(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return r;s--}else o!=="/$"&&o!=="/&"||s++}r=r.previousSibling}return null}function Sv(r,s,o){switch(s=bd(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function uu(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Ba(r)}var lr=new Map,xv=new Set;function Ed(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Ti=H.d;H.d={f:k1,r:N1,D:P1,C:V1,L:L1,m:U1,X:B1,S:z1,M:F1};function k1(){var r=Ti.f(),s=hd();return r||s}function N1(r){var s=Xn(r);s!==null&&s.tag===5&&s.type==="form"?z_(s):Ti.r(r)}var xo=typeof document>"u"?null:document;function wv(r,s,o){var u=xo;if(u&&typeof s=="string"&&s){var g=Rn(s);g='link[rel="'+r+'"][href="'+g+'"]',typeof o=="string"&&(g+='[crossorigin="'+o+'"]'),xv.has(g)||(xv.add(g),r={rel:r,crossOrigin:o,href:s},u.querySelector(g)===null&&(s=u.createElement("link"),fn(s,"link",r),Bt(s),u.head.appendChild(s)))}}function P1(r){Ti.D(r),wv("dns-prefetch",r,null)}function V1(r,s){Ti.C(r,s),wv("preconnect",r,s)}function L1(r,s,o){Ti.L(r,s,o);var u=xo;if(u&&r&&s){var g='link[rel="preload"][as="'+Rn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(g+='[imagesrcset="'+Rn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(g+='[imagesizes="'+Rn(o.imageSizes)+'"]')):g+='[href="'+Rn(r)+'"]';var y=g;switch(s){case"style":y=wo(r);break;case"script":y=To(r)}lr.has(y)||(r=b({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),lr.set(y,r),u.querySelector(g)!==null||s==="style"&&u.querySelector(cu(y))||s==="script"&&u.querySelector(du(y))||(s=u.createElement("link"),fn(s,"link",r),Bt(s),u.head.appendChild(s)))}}function U1(r,s){Ti.m(r,s);var o=xo;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+Rn(u)+'"][href="'+Rn(r)+'"]',y=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=To(r)}if(!lr.has(y)&&(r=b({rel:"modulepreload",href:r},s),lr.set(y,r),o.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(du(y)))return}u=o.createElement("link"),fn(u,"link",r),Bt(u),o.head.appendChild(u)}}}function z1(r,s,o){Ti.S(r,s,o);var u=xo;if(u&&r){var g=Vr(u).hoistableStyles,y=wo(r);s=s||"default";var S=g.get(y);if(!S){var O={loading:0,preload:null};if(S=u.querySelector(cu(y)))O.loading=5;else{r=b({rel:"stylesheet",href:r,"data-precedence":s},o),(o=lr.get(y))&&Wm(r,o);var G=S=u.createElement("link");Bt(G),fn(G,"link",r),G._p=new Promise(function(ne,he){G.onload=ne,G.onerror=he}),G.addEventListener("load",function(){O.loading|=1}),G.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Sd(S,s,u)}S={type:"stylesheet",instance:S,count:1,state:O},g.set(y,S)}}}function B1(r,s){Ti.X(r,s);var o=xo;if(o&&r){var u=Vr(o).hoistableScripts,g=To(r),y=u.get(g);y||(y=o.querySelector(du(g)),y||(r=b({src:r,async:!0},s),(s=lr.get(g))&&Xm(r,s),y=o.createElement("script"),Bt(y),fn(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function F1(r,s){Ti.M(r,s);var o=xo;if(o&&r){var u=Vr(o).hoistableScripts,g=To(r),y=u.get(g);y||(y=o.querySelector(du(g)),y||(r=b({src:r,async:!0,type:"module"},s),(s=lr.get(g))&&Xm(r,s),y=o.createElement("script"),Bt(y),fn(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function Tv(r,s,o,u){var g=(g=Ee.current)?Ed(g):null;if(!g)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=wo(o.href),o=Vr(g).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=wo(o.href);var y=Vr(g).hoistableStyles,S=y.get(r);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,S),(y=g.querySelector(cu(r)))&&!y._p&&(S.instance=y,S.state.loading=5),lr.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},lr.set(r,o),y||q1(g,r,o,S.state))),s&&u===null)throw Error(i(528,""));return S}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=To(o),o=Vr(g).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function wo(r){return'href="'+Rn(r)+'"'}function cu(r){return'link[rel="stylesheet"]['+r+"]"}function Av(r){return b({},r,{"data-precedence":r.precedence,precedence:null})}function q1(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),fn(s,"link",o),Bt(s),r.head.appendChild(s))}function To(r){return'[src="'+Rn(r)+'"]'}function du(r){return"script[async]"+r}function Cv(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+Rn(o.href)+'"]');if(u)return s.instance=u,Bt(u),u;var g=b({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Bt(u),fn(u,"style",g),Sd(u,o.precedence,r),s.instance=u;case"stylesheet":g=wo(o.href);var y=r.querySelector(cu(g));if(y)return s.state.loading|=4,s.instance=y,Bt(y),y;u=Av(o),(g=lr.get(g))&&Wm(u,g),y=(r.ownerDocument||r).createElement("link"),Bt(y);var S=y;return S._p=new Promise(function(O,G){S.onload=O,S.onerror=G}),fn(y,"link",u),s.state.loading|=4,Sd(y,o.precedence,r),s.instance=y;case"script":return y=To(o.src),(g=r.querySelector(du(y)))?(s.instance=g,Bt(g),g):(u=o,(g=lr.get(y))&&(u=b({},o),Xm(u,g)),r=r.ownerDocument||r,g=r.createElement("script"),Bt(g),fn(g,"link",u),r.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Sd(u,o.precedence,r));return s.instance}function Sd(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,y=g,S=0;S<u.length;S++){var O=u[S];if(O.dataset.precedence===s)y=O;else if(y!==g)break}y?y.parentNode.insertBefore(r,y.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function Wm(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Xm(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var xd=null;function Rv(r,s,o){if(xd===null){var u=new Map,g=xd=new Map;g.set(o,u)}else g=xd,u=g.get(o),u||(u=new Map,g.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),g=0;g<o.length;g++){var y=o[g];if(!(y[Nr]||y[zt]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(s)||"";S=r+S;var O=u.get(S);O?O.push(y):u.set(S,[y])}}return u}function Dv(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function H1(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(r=s.disabled,typeof s.precedence=="string"&&r==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Iv(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function G1(r,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=wo(u.href),y=s.querySelector(cu(g));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=wd.bind(r),s.then(r,r)),o.state.loading|=4,o.instance=y,Bt(y);return}y=s.ownerDocument||s,u=Av(u),(g=lr.get(g))&&Wm(u,g),y=y.createElement("link"),Bt(y);var S=y;S._p=new Promise(function(O,G){S.onload=O,S.onerror=G}),fn(y,"link",u),o.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=wd.bind(r),s.addEventListener("load",o),s.addEventListener("error",o))}}var Jm=0;function Q1(r,s){return r.stylesheets&&r.count===0&&Ad(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&Ad(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+s);0<r.imgBytes&&Jm===0&&(Jm=62500*A1());var g=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Ad(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>Jm?50:800)+s);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function wd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ad(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Td=null;function Ad(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Td=new Map,s.forEach(K1,r),Td=null,wd.call(r))}function K1(r,s){if(!(s.state.loading&4)){var o=Td.get(r);if(o)var u=o.get(null);else{o=new Map,Td.set(r,o);for(var g=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var S=g[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(o.set(S.dataset.precedence,S),u=S)}u&&o.set(null,u)}g=s.instance,S=g.getAttribute("data-precedence"),y=o.get(S)||u,y===u&&o.set(null,g),o.set(S,g),this.count++,u=wd.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),y?y.parentNode.insertBefore(g,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(g,r.firstChild)),s.state.loading|=4}}var hu={$$typeof:z,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function $1(r,s,o,u,g,y,S,O,G){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mr(0),this.hiddenUpdates=Mr(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function Ov(r,s,o,u,g,y,S,O,G,ne,he,pe){return r=new $1(r,s,o,S,G,ne,he,pe,O),s=1,y===!0&&(s|=24),y=zn(3,null,null,s),r.current=y,y.stateNode=r,s=Of(),s.refCount++,r.pooledCache=s,s.refCount++,y.memoizedState={element:u,isDehydrated:o,cache:s},Nf(y),r}function jv(r){return r?(r=to,r):to}function Mv(r,s,o,u,g,y){g=jv(g),u.context===null?u.context=g:u.pendingContext=g,u=rs(s),u.payload={element:o},y=y===void 0?null:y,y!==null&&(u.callback=y),o=is(r,u,s),o!==null&&(kn(o,r,s),Hl(o,r,s))}function kv(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function Zm(r,s){kv(r,s),(r=r.alternate)&&kv(r,s)}function Nv(r){if(r.tag===13||r.tag===31){var s=ua(r,67108864);s!==null&&kn(s,r,67108864),Zm(r,67108864)}}function Pv(r){if(r.tag===13||r.tag===31){var s=Gn();s=Xs(s);var o=ua(r,s);o!==null&&kn(o,r,s),Zm(r,s)}}var Cd=!0;function Y1(r,s,o,u){var g=U.T;U.T=null;var y=H.p;try{H.p=2,ep(r,s,o,u)}finally{H.p=y,U.T=g}}function W1(r,s,o,u){var g=U.T;U.T=null;var y=H.p;try{H.p=8,ep(r,s,o,u)}finally{H.p=y,U.T=g}}function ep(r,s,o,u){if(Cd){var g=tp(u);if(g===null)zm(r,s,u,Rd,o),Lv(r,u);else if(J1(g,r,s,o,u))u.stopPropagation();else if(Lv(r,u),s&4&&-1<X1.indexOf(r)){for(;g!==null;){var y=Xn(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=Or(y.pendingLanes);if(S!==0){var O=y;for(O.pendingLanes|=2,O.entangledLanes|=2;S;){var G=1<<31-Mt(S);O.entanglements[1]|=G,S&=~G}Wr(y),(at&6)===0&&(cd=wn()+500,au(0))}}break;case 31:case 13:O=ua(y,2),O!==null&&kn(O,y,2),hd(),Zm(y,2)}if(y=tp(u),y===null&&zm(r,s,u,Rd,o),y===g)break;g=y}g!==null&&u.stopPropagation()}else zm(r,s,u,null,o)}}function tp(r){return r=Jn(r),np(r)}var Rd=null;function np(r){if(Rd=null,r=Pr(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===31){if(r=f(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Rd=r,null}function Vv(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ks()){case pl:return 2;case gl:return 8;case Fi:case lf:return 32;case ac:return 268435456;default:return 32}default:return 32}}var rp=!1,ps=null,gs=null,ys=null,fu=new Map,mu=new Map,_s=[],X1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lv(r,s){switch(r){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":gs=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":fu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":mu.delete(s.pointerId)}}function pu(r,s,o,u,g,y){return r===null||r.nativeEvent!==y?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:y,targetContainers:[g]},s!==null&&(s=Xn(s),s!==null&&Nv(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),r)}function J1(r,s,o,u,g){switch(s){case"focusin":return ps=pu(ps,r,s,o,u,g),!0;case"dragenter":return gs=pu(gs,r,s,o,u,g),!0;case"mouseover":return ys=pu(ys,r,s,o,u,g),!0;case"pointerover":var y=g.pointerId;return fu.set(y,pu(fu.get(y)||null,r,s,o,u,g)),!0;case"gotpointercapture":return y=g.pointerId,mu.set(y,pu(mu.get(y)||null,r,s,o,u,g)),!0}return!1}function Uv(r){var s=Pr(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,gr(r.priority,function(){Pv(o)});return}}else if(s===31){if(s=f(o),s!==null){r.blockedOn=s,gr(r.priority,function(){Pv(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Dd(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=tp(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Rl=u,o.target.dispatchEvent(u),Rl=null}else return s=Xn(o),s!==null&&Nv(s),r.blockedOn=o,!1;s.shift()}return!0}function zv(r,s,o){Dd(r)&&o.delete(s)}function Z1(){rp=!1,ps!==null&&Dd(ps)&&(ps=null),gs!==null&&Dd(gs)&&(gs=null),ys!==null&&Dd(ys)&&(ys=null),fu.forEach(zv),mu.forEach(zv)}function Id(r,s){r.blockedOn===s&&(r.blockedOn=null,rp||(rp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Z1)))}var Od=null;function Bv(r){Od!==r&&(Od=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Od===r&&(Od=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],g=r[s+2];if(typeof u!="function"){if(np(u||o)===null)continue;break}var y=Xn(o);y!==null&&(r.splice(s,3),s-=3,tm(y,{pending:!0,data:g,method:o.method,action:u},u,g))}}))}function Ao(r){function s(G){return Id(G,r)}ps!==null&&Id(ps,r),gs!==null&&Id(gs,r),ys!==null&&Id(ys,r),fu.forEach(s),mu.forEach(s);for(var o=0;o<_s.length;o++){var u=_s[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<_s.length&&(o=_s[0],o.blockedOn===null);)Uv(o),o.blockedOn===null&&_s.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var g=o[u],y=o[u+1],S=g[nn]||null;if(typeof y=="function")S||Bv(o);else if(S){var O=null;if(y&&y.hasAttribute("formAction")){if(g=y,S=y[nn]||null)O=S.formAction;else if(np(g)!==null)continue}else O=S.action;typeof O=="function"?o[u+1]=O:(o.splice(u,3),u-=3),Bv(o)}}}function Fv(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function ip(r){this._internalRoot=r}jd.prototype.render=ip.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=Gn();Mv(o,u,r,s,null,null)},jd.prototype.unmount=ip.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Mv(r.current,2,null,r,null,null),hd(),s[kr]=null}};function jd(r){this._internalRoot=r}jd.prototype.unstable_scheduleHydration=function(r){if(r){var s=hc();r={blockedOn:null,target:r,priority:s};for(var o=0;o<_s.length&&s!==0&&s<_s[o].priority;o++);_s.splice(o,0,r),o===0&&Uv(r)}};var qv=e.version;if(qv!=="19.2.3")throw Error(i(527,qv,"19.2.3"));H.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=p(s),r=r!==null?_(r):null,r=r===null?null:r.stateNode,r};var eA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Md.isDisabled&&Md.supportsFiber)try{mr=Md.inject(eA),ln=Md}catch{}}return yu.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,u="",g=W_,y=X_,S=J_;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=Ov(r,1,!1,null,null,o,u,null,g,y,S,Fv),r[kr]=s.current,Um(r),new ip(s)},yu.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var u=!1,g="",y=W_,S=X_,O=J_,G=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(O=o.onRecoverableError),o.formState!==void 0&&(G=o.formState)),s=Ov(r,1,!0,s,o??null,u,g,G,y,S,O,Fv),s.context=jv(null),o=s.current,u=Gn(),u=Xs(u),g=rs(u),g.callback=null,is(o,g,u),o=u,s.current.lanes=o,Ys(s,o),Wr(s),r[kr]=s.current,Um(r),new jd(s)},yu.version="19.2.3",yu}var Zv;function cA(){if(Zv)return op.exports;Zv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),op.exports=uA(),op.exports}var dA=cA();var eb="popstate";function hA(t={}){function e(i,a){let{pathname:l,search:c,hash:f}=i.location;return Cp("",{pathname:l,search:c,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){return typeof a=="string"?a:ju(a)}return mA(e,n,null,t)}function Rt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fA(){return Math.random().toString(36).substring(2,10)}function tb(t,e){return{usr:t.state,key:t.key,idx:e}}function Cp(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Jo(e):e,state:n,key:e&&e.key||i||fA()}}function ju({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Jo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function mA(t,e,n,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,f="POP",d=null,p=_();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function _(){return(c.state||{idx:null}).idx}function b(){f="POP";let I=_(),B=I==null?null:I-p;p=I,d&&d({action:f,location:D.location,delta:B})}function E(I,B){f="PUSH";let q=Cp(D.location,I,B);p=_()+1;let z=tb(q,p),$=D.createHref(q);try{c.pushState(z,"",$)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;a.location.assign($)}l&&d&&d({action:f,location:D.location,delta:1})}function A(I,B){f="REPLACE";let q=Cp(D.location,I,B);p=_();let z=tb(q,p),$=D.createHref(q);c.replaceState(z,"",$),l&&d&&d({action:f,location:D.location,delta:0})}function w(I){return pA(I)}let D={get action(){return f},get location(){return t(a,c)},listen(I){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(eb,b),d=I,()=>{a.removeEventListener(eb,b),d=null}},createHref(I){return e(a,I)},createURL:w,encodeLocation(I){let B=w(I);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:E,replace:A,go(I){return c.go(I)}};return D}function pA(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Rt(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:ju(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function sS(t,e,n="/"){return gA(t,e,n,!1)}function gA(t,e,n,i){let a=typeof e=="string"?Jo(e):e,l=Mi(a.pathname||"/",n);if(l==null)return null;let c=aS(t);yA(c);let f=null;for(let d=0;f==null&&d<c.length;++d){let p=RA(l);f=AA(c[d],p,i)}return f}function aS(t,e=[],n=[],i="",a=!1){let l=(c,f,d=a,p)=>{let _={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&d)return;Rt(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let b=Di([i,_.relativePath]),E=n.concat(_);c.children&&c.children.length>0&&(Rt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),aS(c.children,e,E,b,d)),!(c.path==null&&!c.index)&&e.push({path:b,score:wA(b,c.index),routesMeta:E})};return t.forEach((c,f)=>{if(c.path===""||!c.path?.includes("?"))l(c,f);else for(let d of oS(c.path))l(c,f,!0,d)}),e}function oS(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=oS(i.join("/")),f=[];return f.push(...c.map(d=>d===""?l:[l,d].join("/"))),a&&f.push(...c),f.map(d=>t.startsWith("/")&&d===""?"/":d)}function yA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:TA(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var _A=/^:[\w-]+$/,vA=3,bA=2,EA=1,SA=10,xA=-2,nb=t=>t==="*";function wA(t,e){let n=t.split("/"),i=n.length;return n.some(nb)&&(i+=xA),e&&(i+=bA),n.filter(a=>!nb(a)).reduce((a,l)=>a+(_A.test(l)?vA:l===""?EA:SA),i)}function TA(t,e){return t.length===e.length&&t.slice(0,-1).every((i,a)=>i===e[a])?t[t.length-1]-e[e.length-1]:0}function AA(t,e,n=!1){let{routesMeta:i}=t,a={},l="/",c=[];for(let f=0;f<i.length;++f){let d=i[f],p=f===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",b=rh({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},_),E=d.route;if(!b&&p&&n&&!i[i.length-1].route.index&&(b=rh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},_)),!b)return null;Object.assign(a,b.params),c.push({params:a,pathname:Di([l,b.pathname]),pathnameBase:jA(Di([l,b.pathnameBase])),route:E}),b.pathnameBase!=="/"&&(l=Di([l,b.pathnameBase]))}return c}function rh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=CA(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:i.reduce((p,{paramName:_,isOptional:b},E)=>{if(_==="*"){let w=f[E]||"";c=l.slice(0,l.length-w.length).replace(/(.)\/+$/,"$1")}const A=f[E];return b&&!A?p[_]=void 0:p[_]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:t}}function CA(t,e=!1,n=!0){dr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,d)=>(i.push({paramName:f,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function RA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Mi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}var lS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,DA=t=>lS.test(t);function IA(t,e="/"){let{pathname:n,search:i="",hash:a=""}=typeof t=="string"?Jo(t):t,l;if(n)if(DA(n))l=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),dr(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${n}`)}n.startsWith("/")?l=rb(n.substring(1),"/"):l=rb(n,e)}else l=e;return{pathname:l,search:MA(i),hash:kA(a)}}function rb(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function dp(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function OA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function mg(t){let e=OA(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function pg(t,e,n,i=!1){let a;typeof t=="string"?a=Jo(t):(a={...t},Rt(!a.pathname||!a.pathname.includes("?"),dp("?","pathname","search",a)),Rt(!a.pathname||!a.pathname.includes("#"),dp("#","pathname","hash",a)),Rt(!a.search||!a.search.includes("#"),dp("#","search","hash",a)));let l=t===""||a.pathname==="",c=l?"/":a.pathname,f;if(c==null)f=n;else{let b=e.length-1;if(!i&&c.startsWith("..")){let E=c.split("/");for(;E[0]==="..";)E.shift(),b-=1;a.pathname=E.join("/")}f=b>=0?e[b]:"/"}let d=IA(a,f),p=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||_)&&(d.pathname+="/"),d}var Di=t=>t.join("/").replace(/\/\/+/g,"/"),jA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),MA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,kA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,NA=class{constructor(t,e,n,i=!1){this.status=t,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function PA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function VA(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var uS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function cS(t,e){let n=t;if(typeof n!="string"||!lS.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,a=!1;if(uS)try{let l=new URL(window.location.href),c=n.startsWith("//")?new URL(l.protocol+n):new URL(n),f=Mi(c.pathname,e);c.origin===l.origin&&f!=null?n=f+c.search+c.hash:a=!0}catch{dr(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var dS=["POST","PUT","PATCH","DELETE"];new Set(dS);var LA=["GET",...dS];new Set(LA);var Zo=M.createContext(null);Zo.displayName="DataRouter";var Oh=M.createContext(null);Oh.displayName="DataRouterState";var UA=M.createContext(!1),hS=M.createContext({isTransitioning:!1});hS.displayName="ViewTransition";var zA=M.createContext(new Map);zA.displayName="Fetchers";var BA=M.createContext(null);BA.displayName="Await";var $n=M.createContext(null);$n.displayName="Navigation";var Fu=M.createContext(null);Fu.displayName="Location";var hr=M.createContext({outlet:null,matches:[],isDataRoute:!1});hr.displayName="Route";var gg=M.createContext(null);gg.displayName="RouteError";var fS="REACT_ROUTER_ERROR",FA="REDIRECT",qA="ROUTE_ERROR_RESPONSE";function HA(t){if(t.startsWith(`${fS}:${FA}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function GA(t){if(t.startsWith(`${fS}:${qA}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new NA(e.status,e.statusText,e.data)}catch{}}function QA(t,{relative:e}={}){Rt(el(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=M.useContext($n),{hash:a,pathname:l,search:c}=qu(t,{relative:e}),f=l;return n!=="/"&&(f=l==="/"?n:Di([n,l])),i.createHref({pathname:f,search:c,hash:a})}function el(){return M.useContext(Fu)!=null}function fr(){return Rt(el(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(Fu).location}var mS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pS(t){M.useContext($n).static||M.useLayoutEffect(t)}function jh(){let{isDataRoute:t}=M.useContext(hr);return t?lC():KA()}function KA(){Rt(el(),"useNavigate() may be used only in the context of a <Router> component.");let t=M.useContext(Zo),{basename:e,navigator:n}=M.useContext($n),{matches:i}=M.useContext(hr),{pathname:a}=fr(),l=JSON.stringify(mg(i)),c=M.useRef(!1);return pS(()=>{c.current=!0}),M.useCallback((d,p={})=>{if(dr(c.current,mS),!c.current)return;if(typeof d=="number"){n.go(d);return}let _=pg(d,JSON.parse(l),a,p.relative==="path");t==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Di([e,_.pathname])),(p.replace?n.replace:n.push)(_,p.state,p)},[e,n,l,a,t])}var $A=M.createContext(null);function YA(t){let e=M.useContext(hr).outlet;return M.useMemo(()=>e&&M.createElement($A.Provider,{value:t},e),[e,t])}function WA(){let{matches:t}=M.useContext(hr),e=t[t.length-1];return e?e.params:{}}function qu(t,{relative:e}={}){let{matches:n}=M.useContext(hr),{pathname:i}=fr(),a=JSON.stringify(mg(n));return M.useMemo(()=>pg(t,JSON.parse(a),i,e==="path"),[t,a,i,e])}function XA(t,e){return gS(t,e)}function gS(t,e,n,i,a){Rt(el(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=M.useContext($n),{matches:c}=M.useContext(hr),f=c[c.length-1],d=f?f.params:{},p=f?f.pathname:"/",_=f?f.pathnameBase:"/",b=f&&f.route;{let q=b&&b.path||"";_S(p,!b||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let E=fr(),A;if(e){let q=typeof e=="string"?Jo(e):e;Rt(_==="/"||q.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${q.pathname}" was given in the \`location\` prop.`),A=q}else A=E;let w=A.pathname||"/",D=w;if(_!=="/"){let q=_.replace(/^\//,"").split("/");D="/"+w.replace(/^\//,"").split("/").slice(q.length).join("/")}let I=sS(t,{pathname:D});dr(b||I!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),dr(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=nC(I&&I.map(q=>Object.assign({},q,{params:Object.assign({},d,q.params),pathname:Di([_,l.encodeLocation?l.encodeLocation(q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?_:Di([_,l.encodeLocation?l.encodeLocation(q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathnameBase])})),c,n,i,a);return e&&B?M.createElement(Fu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},B):B}function JA(){let t=oC(),e=PA(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:l},"ErrorBoundary")," or"," ",M.createElement("code",{style:l},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:a},n):null,c)}var ZA=M.createElement(JA,null),yS=class extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=GA(t.digest);n&&(t=n)}let e=t!==void 0?M.createElement(hr.Provider,{value:this.props.routeContext},M.createElement(gg.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?M.createElement(eC,{error:t},e):e}};yS.contextType=UA;var hp=new WeakMap;function eC({children:t,error:e}){let{basename:n}=M.useContext($n);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=HA(e.digest);if(i){let a=hp.get(e);if(a)throw a;let l=cS(i.location,n);if(uS&&!hp.get(e))if(l.isExternal||i.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:i.replace}));throw hp.set(e,c),c}return M.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return t}function tC({routeContext:t,match:e,children:n}){let i=M.useContext(Zo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(hr.Provider,{value:t},n)}function nC(t,e=[],n=null,i=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,c=n?.errors;if(c!=null){let _=l.findIndex(b=>b.route.id&&c?.[b.route.id]!==void 0);Rt(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,_+1))}let f=!1,d=-1;if(n)for(let _=0;_<l.length;_++){let b=l[_];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(d=_),b.route.id){let{loaderData:E,errors:A}=n,w=b.route.loader&&!E.hasOwnProperty(b.route.id)&&(!A||A[b.route.id]===void 0);if(b.route.lazy||w){f=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}let p=n&&i?(_,b)=>{i(_,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:VA(n.matches),errorInfo:b})}:void 0;return l.reduceRight((_,b,E)=>{let A,w=!1,D=null,I=null;n&&(A=c&&b.route.id?c[b.route.id]:void 0,D=b.route.errorElement||ZA,f&&(d<0&&E===0?(_S("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,I=null):d===E&&(w=!0,I=b.route.hydrateFallbackElement||null)));let B=e.concat(l.slice(0,E+1)),q=()=>{let z;return A?z=D:w?z=I:b.route.Component?z=M.createElement(b.route.Component,null):b.route.element?z=b.route.element:z=_,M.createElement(tC,{match:b,routeContext:{outlet:_,matches:B,isDataRoute:n!=null},children:z})};return n&&(b.route.ErrorBoundary||b.route.errorElement||E===0)?M.createElement(yS,{location:n.location,revalidation:n.revalidation,component:D,error:A,children:q(),routeContext:{outlet:null,matches:B,isDataRoute:!0},onError:p}):q()},null)}function yg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rC(t){let e=M.useContext(Zo);return Rt(e,yg(t)),e}function iC(t){let e=M.useContext(Oh);return Rt(e,yg(t)),e}function sC(t){let e=M.useContext(hr);return Rt(e,yg(t)),e}function _g(t){let e=sC(t),n=e.matches[e.matches.length-1];return Rt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function aC(){return _g("useRouteId")}function oC(){let t=M.useContext(gg),e=iC("useRouteError"),n=_g("useRouteError");return t!==void 0?t:e.errors?.[n]}function lC(){let{router:t}=rC("useNavigate"),e=_g("useNavigate"),n=M.useRef(!1);return pS(()=>{n.current=!0}),M.useCallback(async(a,l={})=>{dr(n.current,mS),n.current&&(typeof a=="number"?await t.navigate(a):await t.navigate(a,{fromRouteId:e,...l}))},[t,e])}var ib={};function _S(t,e,n){!e&&!ib[t]&&(ib[t]=!0,dr(!1,n))}M.memo(uC);function uC({routes:t,future:e,state:n,onError:i}){return gS(t,void 0,n,i,e)}function vS({to:t,replace:e,state:n,relative:i}){Rt(el(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=M.useContext($n);dr(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=M.useContext(hr),{pathname:c}=fr(),f=jh(),d=pg(t,mg(l),c,i==="path"),p=JSON.stringify(d);return M.useEffect(()=>{f(JSON.parse(p),{replace:e,state:n,relative:i})},[f,p,i,e,n]),null}function vg(t){return YA(t.context)}function mn(t){Rt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function cC({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){Rt(!el(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=t.replace(/^\/*/,"/"),d=M.useMemo(()=>({basename:f,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[f,a,l,c]);typeof n=="string"&&(n=Jo(n));let{pathname:p="/",search:_="",hash:b="",state:E=null,key:A="default"}=n,w=M.useMemo(()=>{let D=Mi(p,f);return D==null?null:{location:{pathname:D,search:_,hash:b,state:E,key:A},navigationType:i}},[f,p,_,b,E,A,i]);return dr(w!=null,`<Router basename="${f}"> is not able to match the URL "${p}${_}${b}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:M.createElement($n.Provider,{value:d},M.createElement(Fu.Provider,{children:e,value:w}))}function dC({children:t,location:e}){return XA(Rp(t),e)}function Rp(t,e=[]){let n=[];return M.Children.forEach(t,(i,a)=>{if(!M.isValidElement(i))return;let l=[...e,a];if(i.type===M.Fragment){n.push.apply(n,Rp(i.props.children,l));return}Rt(i.type===mn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Rt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Rp(i.props.children,l)),n.push(c)}),n}var qd="get",Hd="application/x-www-form-urlencoded";function Mh(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function hC(t){return Mh(t)&&t.tagName.toLowerCase()==="button"}function fC(t){return Mh(t)&&t.tagName.toLowerCase()==="form"}function mC(t){return Mh(t)&&t.tagName.toLowerCase()==="input"}function pC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function gC(t,e){return t.button===0&&(!e||e==="_self")&&!pC(t)}var kd=null;function yC(){if(kd===null)try{new FormData(document.createElement("form"),0),kd=!1}catch{kd=!0}return kd}var _C=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fp(t){return t!=null&&!_C.has(t)?(dr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hd}"`),null):t}function vC(t,e){let n,i,a,l,c;if(fC(t)){let f=t.getAttribute("action");i=f?Mi(f,e):null,n=t.getAttribute("method")||qd,a=fp(t.getAttribute("enctype"))||Hd,l=new FormData(t)}else if(hC(t)||mC(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||f.getAttribute("action");if(i=d?Mi(d,e):null,n=t.getAttribute("formmethod")||f.getAttribute("method")||qd,a=fp(t.getAttribute("formenctype"))||fp(f.getAttribute("enctype"))||Hd,l=new FormData(f,t),!yC()){let{name:p,type:_,value:b}=t;if(_==="image"){let E=p?`${p}.`:"";l.append(`${E}x`,"0"),l.append(`${E}y`,"0")}else p&&l.append(p,b)}}else{if(Mh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=qd,i=null,a=Hd,c=t}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:n.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function bg(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bC(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&Mi(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function EC(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function SC(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function xC(t,e,n){let i=await Promise.all(t.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await EC(l,n);return c.links?c.links():[]}return[]}));return CC(i.flat(1).filter(SC).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function sb(t,e,n,i,a,l){let c=(d,p)=>n[p]?d.route.id!==n[p].route.id:!0,f=(d,p)=>n[p].pathname!==d.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==d.params["*"];return l==="assets"?e.filter((d,p)=>c(d,p)||f(d,p)):l==="data"?e.filter((d,p)=>{let _=i.routes[d.route.id];if(!_||!_.hasLoader)return!1;if(c(d,p)||f(d,p))return!0;if(d.route.shouldRevalidate){let b=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function wC(t,e,{includeHydrateFallback:n}={}){return TC(t.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function TC(t){return[...new Set(t)]}function AC(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function CC(t,e){let n=new Set;return new Set(e),t.reduce((i,a)=>{let l=JSON.stringify(AC(a));return n.has(l)||(n.add(l),i.push({key:l,link:a})),i},[])}function bS(){let t=M.useContext(Zo);return bg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function RC(){let t=M.useContext(Oh);return bg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Eg=M.createContext(void 0);Eg.displayName="FrameworkContext";function ES(){let t=M.useContext(Eg);return bg(t,"You must render this element inside a <HydratedRouter> element"),t}function DC(t,e){let n=M.useContext(Eg),[i,a]=M.useState(!1),[l,c]=M.useState(!1),{onFocus:f,onBlur:d,onMouseEnter:p,onMouseLeave:_,onTouchStart:b}=e,E=M.useRef(null);M.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let D=B=>{B.forEach(q=>{c(q.isIntersecting)})},I=new IntersectionObserver(D,{threshold:.5});return E.current&&I.observe(E.current),()=>{I.disconnect()}}},[t]),M.useEffect(()=>{if(i){let D=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(D)}}},[i]);let A=()=>{a(!0)},w=()=>{a(!1),c(!1)};return n?t!=="intent"?[l,E,{}]:[l,E,{onFocus:_u(f,A),onBlur:_u(d,w),onMouseEnter:_u(p,A),onMouseLeave:_u(_,w),onTouchStart:_u(b,A)}]:[!1,E,{}]}function _u(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function IC({page:t,...e}){let{router:n}=bS(),i=M.useMemo(()=>sS(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?M.createElement(jC,{page:t,matches:i,...e}):null}function OC(t){let{manifest:e,routeModules:n}=ES(),[i,a]=M.useState([]);return M.useEffect(()=>{let l=!1;return xC(t,e,n).then(c=>{l||a(c)}),()=>{l=!0}},[t,e,n]),i}function jC({page:t,matches:e,...n}){let i=fr(),{manifest:a,routeModules:l}=ES(),{basename:c}=bS(),{loaderData:f,matches:d}=RC(),p=M.useMemo(()=>sb(t,e,d,a,i,"data"),[t,e,d,a,i]),_=M.useMemo(()=>sb(t,e,d,a,i,"assets"),[t,e,d,a,i]),b=M.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let w=new Set,D=!1;if(e.forEach(B=>{let q=a.routes[B.route.id];!q||!q.hasLoader||(!p.some(z=>z.route.id===B.route.id)&&B.route.id in f&&l[B.route.id]?.shouldRevalidate||q.hasClientLoader?D=!0:w.add(B.route.id))}),w.size===0)return[];let I=bC(t,c,"data");return D&&w.size>0&&I.searchParams.set("_routes",e.filter(B=>w.has(B.route.id)).map(B=>B.route.id).join(",")),[I.pathname+I.search]},[c,f,i,a,p,e,t,l]),E=M.useMemo(()=>wC(_,a),[_,a]),A=OC(_);return M.createElement(M.Fragment,null,b.map(w=>M.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),E.map(w=>M.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),A.map(({key:w,link:D})=>M.createElement("link",{key:w,nonce:n.nonce,...D})))}function MC(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var kC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kC&&(window.__reactRouterVersion="7.11.0")}catch{}function NC({basename:t,children:e,unstable_useTransitions:n,window:i}){let a=M.useRef();a.current==null&&(a.current=hA({window:i,v5Compat:!0}));let l=a.current,[c,f]=M.useState({action:l.action,location:l.location}),d=M.useCallback(p=>{n===!1?f(p):M.startTransition(()=>f(p))},[n]);return M.useLayoutEffect(()=>l.listen(d),[l,d]),M.createElement(cC,{basename:t,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:n})}var SS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dt=M.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:f,target:d,to:p,preventScrollReset:_,viewTransition:b,unstable_defaultShouldRevalidate:E,...A},w){let{basename:D,unstable_useTransitions:I}=M.useContext($n),B=typeof p=="string"&&SS.test(p),q=cS(p,D);p=q.to;let z=QA(p,{relative:a}),[$,W,oe]=DC(i,A),N=UC(p,{replace:c,state:f,target:d,preventScrollReset:_,relative:a,viewTransition:b,unstable_defaultShouldRevalidate:E,unstable_useTransitions:I});function T(j){e&&e(j),j.defaultPrevented||N(j)}let C=M.createElement("a",{...A,...oe,href:q.absoluteURL||z,onClick:q.isExternal||l?e:T,ref:MC(w,W),target:d,"data-discover":!B&&n==="render"?"true":void 0});return $&&!B?M.createElement(M.Fragment,null,C,M.createElement(IC,{page:z})):C});Dt.displayName="Link";var PC=M.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:f,children:d,...p},_){let b=qu(c,{relative:p.relative}),E=fr(),A=M.useContext(Oh),{navigator:w,basename:D}=M.useContext($n),I=A!=null&&HC(b)&&f===!0,B=w.encodeLocation?w.encodeLocation(b).pathname:b.pathname,q=E.pathname,z=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;n||(q=q.toLowerCase(),z=z?z.toLowerCase():null,B=B.toLowerCase()),z&&D&&(z=Mi(z,D)||z);const $=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let W=q===B||!a&&q.startsWith(B)&&q.charAt($)==="/",oe=z!=null&&(z===B||!a&&z.startsWith(B)&&z.charAt(B.length)==="/"),N={isActive:W,isPending:oe,isTransitioning:I},T=W?e:void 0,C;typeof i=="function"?C=i(N):C=[i,W?"active":null,oe?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let j=typeof l=="function"?l(N):l;return M.createElement(Dt,{...p,"aria-current":T,className:C,ref:_,style:j,to:c,viewTransition:f},typeof d=="function"?d(N):d)});PC.displayName="NavLink";var VC=M.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:a,state:l,method:c=qd,action:f,onSubmit:d,relative:p,preventScrollReset:_,viewTransition:b,unstable_defaultShouldRevalidate:E,...A},w)=>{let{unstable_useTransitions:D}=M.useContext($n),I=FC(),B=qC(f,{relative:p}),q=c.toLowerCase()==="get"?"get":"post",z=typeof f=="string"&&SS.test(f),$=W=>{if(d&&d(W),W.defaultPrevented)return;W.preventDefault();let oe=W.nativeEvent.submitter,N=oe?.getAttribute("formmethod")||c,T=()=>I(oe||W.currentTarget,{fetcherKey:e,method:N,navigate:n,replace:a,state:l,relative:p,preventScrollReset:_,viewTransition:b,unstable_defaultShouldRevalidate:E});D&&n!==!1?M.startTransition(()=>T()):T()};return M.createElement("form",{ref:w,method:q,action:B,onSubmit:i?d:$,...A,"data-discover":!z&&t==="render"?"true":void 0})});VC.displayName="Form";function LC(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xS(t){let e=M.useContext(Zo);return Rt(e,LC(t)),e}function UC(t,{target:e,replace:n,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f,unstable_useTransitions:d}={}){let p=jh(),_=fr(),b=qu(t,{relative:l});return M.useCallback(E=>{if(gC(E,e)){E.preventDefault();let A=n!==void 0?n:ju(_)===ju(b),w=()=>p(t,{replace:A,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f});d?M.startTransition(()=>w()):w()}},[_,p,b,n,i,e,t,a,l,c,f,d])}var zC=0,BC=()=>`__${String(++zC)}__`;function FC(){let{router:t}=xS("useSubmit"),{basename:e}=M.useContext($n),n=aC(),i=t.fetch,a=t.navigate;return M.useCallback(async(l,c={})=>{let{action:f,method:d,encType:p,formData:_,body:b}=vC(l,e);if(c.navigate===!1){let E=c.fetcherKey||BC();await i(E,n,c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:_,body:b,formMethod:c.method||d,formEncType:c.encType||p,flushSync:c.flushSync})}else await a(c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:_,body:b,formMethod:c.method||d,formEncType:c.encType||p,replace:c.replace,state:c.state,fromRouteId:n,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,a,e,n])}function qC(t,{relative:e}={}){let{basename:n}=M.useContext($n),i=M.useContext(hr);Rt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...qu(t||".",{relative:e})},c=fr();if(t==null){l.search=c.search;let f=new URLSearchParams(l.search),d=f.getAll("index");if(d.some(_=>_==="")){f.delete("index"),d.filter(b=>b).forEach(b=>f.append("index",b));let _=f.toString();l.search=_?`?${_}`:""}}return(!t||t===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:Di([n,l.pathname])),ju(l)}function HC(t,{relative:e}={}){let n=M.useContext(hS);Rt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=xS("useViewTransitionState"),a=qu(t,{relative:e});if(!n.isTransitioning)return!1;let l=Mi(n.currentLocation.pathname,i)||n.currentLocation.pathname,c=Mi(n.nextLocation.pathname,i)||n.nextLocation.pathname;return rh(a.pathname,c)!=null||rh(a.pathname,l)!=null}const GC=function(){},QC={is_logged_in:!1,is_auth_checked:!1,username:"",set_user_context:GC},Hu=M.createContext(QC);var tl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},KC={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},$C=class{#e=KC;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},Ai=new $C;function YC(t){setTimeout(t,0)}var Ta=typeof window>"u"||"Deno"in globalThis;function Zt(){}function WC(t,e){return typeof t=="function"?t(e):t}function Dp(t){return typeof t=="number"&&t>=0&&t!==1/0}function wS(t,e){return Math.max(t+(e||0)-Date.now(),0)}function As(t,e){return typeof t=="function"?t(e):t}function ur(t,e){return typeof t=="function"?t(e):t}function ab(t,e){const{type:n="all",exact:i,fetchStatus:a,predicate:l,queryKey:c,stale:f}=t;if(c){if(i){if(e.queryHash!==Sg(c,e.options))return!1}else if(!Mu(e.queryKey,c))return!1}if(n!=="all"){const d=e.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof f=="boolean"&&e.isStale()!==f||a&&a!==e.state.fetchStatus||l&&!l(e))}function ob(t,e){const{exact:n,status:i,predicate:a,mutationKey:l}=t;if(l){if(!e.options.mutationKey)return!1;if(n){if(Aa(e.options.mutationKey)!==Aa(l))return!1}else if(!Mu(e.options.mutationKey,l))return!1}return!(i&&e.state.status!==i||a&&!a(e))}function Sg(t,e){return(e?.queryKeyHashFn||Aa)(t)}function Aa(t){return JSON.stringify(t,(e,n)=>Ip(n)?Object.keys(n).sort().reduce((i,a)=>(i[a]=n[a],i),{}):n)}function Mu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Mu(t[n],e[n])):!1}var XC=Object.prototype.hasOwnProperty;function TS(t,e){if(t===e)return t;const n=lb(t)&&lb(e);if(!n&&!(Ip(t)&&Ip(e)))return e;const a=(n?t:Object.keys(t)).length,l=n?e:Object.keys(e),c=l.length,f=n?new Array(c):{};let d=0;for(let p=0;p<c;p++){const _=n?p:l[p],b=t[_],E=e[_];if(b===E){f[_]=b,(n?p<a:XC.call(t,_))&&d++;continue}if(b===null||E===null||typeof b!="object"||typeof E!="object"){f[_]=E;continue}const A=TS(b,E);f[_]=A,A===b&&d++}return a===c&&d===a?t:f}function ih(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function lb(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ip(t){if(!ub(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!ub(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function ub(t){return Object.prototype.toString.call(t)==="[object Object]"}function JC(t){return new Promise(e=>{Ai.setTimeout(e,t)})}function Op(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?TS(t,e):e}function ZC(t,e,n=0){const i=[...t,e];return n&&i.length>n?i.slice(1):i}function eR(t,e,n=0){const i=[e,...t];return n&&i.length>n?i.slice(0,-1):i}var xg=Symbol();function AS(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===xg?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function CS(t,e){return typeof t=="function"?t(...e):!!t}var tR=class extends tl{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Ta&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},wg=new tR;function jp(){let t,e;const n=new Promise((a,l)=>{t=a,e=l});n.status="pending",n.catch(()=>{});function i(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{i({status:"fulfilled",value:a}),t(a)},n.reject=a=>{i({status:"rejected",reason:a}),e(a)},n}function nR(t){let e;if(t.then(n=>(e=n,n),Zt)?.catch(Zt),e!==void 0)return{data:e}}function RS(t){return t}function rR(t){return{mutationKey:t.options.mutationKey,state:t.state,...t.options.scope&&{scope:t.options.scope},...t.meta&&{meta:t.meta}}}function iR(t,e,n){const i=()=>{const a=t.promise?.then(e).catch(l=>n(l)?Promise.reject(new Error("redacted")):Promise.reject(l));return a?.catch(Zt),a};return{dehydratedAt:Date.now(),state:{...t.state,...t.state.data!==void 0&&{data:e(t.state.data)}},queryKey:t.queryKey,queryHash:t.queryHash,...t.state.status==="pending"&&{promise:i()},...t.meta&&{meta:t.meta}}}function sR(t){return t.state.isPaused}function aR(t){return t.state.status==="success"}function oR(t){return!0}function lR(t,e={}){const n=e.shouldDehydrateMutation??t.getDefaultOptions().dehydrate?.shouldDehydrateMutation??sR,i=t.getMutationCache().getAll().flatMap(d=>n(d)?[rR(d)]:[]),a=e.shouldDehydrateQuery??t.getDefaultOptions().dehydrate?.shouldDehydrateQuery??aR,l=e.shouldRedactErrors??t.getDefaultOptions().dehydrate?.shouldRedactErrors??oR,c=e.serializeData??t.getDefaultOptions().dehydrate?.serializeData??RS,f=t.getQueryCache().getAll().flatMap(d=>a(d)?[iR(d,c,l)]:[]);return{mutations:i,queries:f}}function uR(t,e,n){if(typeof e!="object"||e===null)return;const i=t.getMutationCache(),a=t.getQueryCache(),l=n?.defaultOptions?.deserializeData??t.getDefaultOptions().hydrate?.deserializeData??RS,c=e.mutations||[],f=e.queries||[];c.forEach(({state:d,...p})=>{i.build(t,{...t.getDefaultOptions().hydrate?.mutations,...n?.defaultOptions?.mutations,...p},d)}),f.forEach(({queryKey:d,state:p,queryHash:_,meta:b,promise:E,dehydratedAt:A})=>{const w=E?nR(E):void 0,D=p.data===void 0?w?.data:p.data,I=D===void 0?D:l(D);let B=a.get(_);const q=B?.state.status==="pending",z=B?.state.fetchStatus==="fetching";if(B){const $=w&&A!==void 0&&A>B.state.dataUpdatedAt;if(p.dataUpdatedAt>B.state.dataUpdatedAt||$){const{fetchStatus:W,...oe}=p;B.setState({...oe,data:I})}}else B=a.build(t,{...t.getDefaultOptions().hydrate?.queries,...n?.defaultOptions?.queries,queryKey:d,queryHash:_,meta:b},{...p,data:I,fetchStatus:"idle",status:I!==void 0?"success":p.status});E&&!q&&!z&&(A===void 0||A>B.state.dataUpdatedAt)&&B.fetch(void 0,{initialPromise:Promise.resolve(E).then(l)}).catch(Zt)})}var cR=YC;function dR(){let t=[],e=0,n=f=>{f()},i=f=>{f()},a=cR;const l=f=>{e?t.push(f):a(()=>{n(f)})},c=()=>{const f=t;t=[],f.length&&a(()=>{i(()=>{f.forEach(d=>{n(d)})})})};return{batch:f=>{let d;e++;try{d=f()}finally{e--,e||c()}return d},batchCalls:f=>(...d)=>{l(()=>{f(...d)})},schedule:l,setNotifyFunction:f=>{n=f},setBatchNotifyFunction:f=>{i=f},setScheduler:f=>{a=f}}}var en=dR(),hR=class extends tl{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Ta&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},sh=new hR;function fR(t){return Math.min(1e3*2**t,3e4)}function DS(t){return(t??"online")==="online"?sh.isOnline():!0}var Mp=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function IS(t){let e=!1,n=0,i;const a=jp(),l=()=>a.status!=="pending",c=D=>{if(!l()){const I=new Mp(D);E(I),t.onCancel?.(I)}},f=()=>{e=!0},d=()=>{e=!1},p=()=>wg.isFocused()&&(t.networkMode==="always"||sh.isOnline())&&t.canRun(),_=()=>DS(t.networkMode)&&t.canRun(),b=D=>{l()||(i?.(),a.resolve(D))},E=D=>{l()||(i?.(),a.reject(D))},A=()=>new Promise(D=>{i=I=>{(l()||p())&&D(I)},t.onPause?.()}).then(()=>{i=void 0,l()||t.onContinue?.()}),w=()=>{if(l())return;let D;const I=n===0?t.initialPromise:void 0;try{D=I??t.fn()}catch(B){D=Promise.reject(B)}Promise.resolve(D).then(b).catch(B=>{if(l())return;const q=t.retry??(Ta?0:3),z=t.retryDelay??fR,$=typeof z=="function"?z(n,B):z,W=q===!0||typeof q=="number"&&n<q||typeof q=="function"&&q(n,B);if(e||!W){E(B);return}n++,t.onFail?.(n,B),JC($).then(()=>p()?void 0:A()).then(()=>{e?E(B):w()})})};return{promise:a,status:()=>a.status,cancel:c,continue:()=>(i?.(),a),cancelRetry:f,continueRetry:d,canStart:_,start:()=>(_()?w():A().then(w),a)}}var OS=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Dp(this.gcTime)&&(this.#e=Ai.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ta?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Ai.clearTimeout(this.#e),this.#e=void 0)}},mR=class extends OS{#e;#t;#n;#i;#r;#a;#o;constructor(e){super(),this.#o=!1,this.#a=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#i=e.client,this.#n=this.#i.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=db(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){if(this.options={...this.#a,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=db(this.options);n.data!==void 0&&(this.setState(cb(n.data,n.dataUpdatedAt)),this.#e=n)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,n){const i=Op(this.state.data,e,this.options);return this.#s({data:i,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),i}setState(e,n){this.#s({type:"setState",state:e,setStateOptions:n})}cancel(e){const n=this.#r?.promise;return this.#r?.cancel(e),n?n.then(Zt).catch(Zt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>ur(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===xg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>As(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!wS(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(n=>n.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(n=>n.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,n){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&n?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(p=>p.options.queryFn);d&&this.setOptions(d.options)}const i=new AbortController,a=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(this.#o=!0,i.signal)})},l=()=>{const d=AS(this.options,n),_=(()=>{const b={client:this.#i,queryKey:this.queryKey,meta:this.meta};return a(b),b})();return this.#o=!1,this.options.persister?this.options.persister(d,_,this):d(_)},f=(()=>{const d={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:l};return a(d),d})();this.options.behavior?.onFetch(f,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==f.fetchOptions?.meta)&&this.#s({type:"fetch",meta:f.fetchOptions?.meta}),this.#r=IS({initialPromise:n?.initialPromise,fn:f.fetchFn,onCancel:d=>{d instanceof Mp&&d.revert&&this.setState({...this.#t,fetchStatus:"idle"}),i.abort()},onFail:(d,p)=>{this.#s({type:"failed",failureCount:d,error:p})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:f.options.retry,retryDelay:f.options.retryDelay,networkMode:f.options.networkMode,canRun:()=>!0});try{const d=await this.#r.start();if(d===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(d),this.#n.config.onSuccess?.(d,this),this.#n.config.onSettled?.(d,this.state.error,this),d}catch(d){if(d instanceof Mp){if(d.silent)return this.#r.promise;if(d.revert){if(this.state.data===void 0)throw d;return this.state.data}}throw this.#s({type:"error",error:d}),this.#n.config.onError?.(d,this),this.#n.config.onSettled?.(this.state.data,d,this),d}finally{this.scheduleGc()}}#s(e){const n=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...jS(i.data,this.options),fetchMeta:e.meta??null};case"success":const a={...i,...cb(e.data,e.dataUpdatedAt),dataUpdateCount:i.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?a:void 0,a;case"error":const l=e.error;return{...i,error:l,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=n(this.state),en.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function jS(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:DS(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function cb(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function db(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,i=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var pR=class extends tl{constructor(t,e){super(),this.options=e,this.#e=t,this.#s=null,this.#o=jp(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#i=void 0;#r;#a;#o;#s;#p;#h;#f;#u;#c;#l;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),hb(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return kp(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return kp(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#E(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ur(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#t.setOptions(this.options),e._defaulted&&!ih(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&fb(this.#t,n,this.options,e)&&this.#d(),this.updateResult(),i&&(this.#t!==n||ur(this.options.enabled,this.#t)!==ur(e.enabled,this.#t)||As(this.options.staleTime,this.#t)!==As(e.staleTime,this.#t))&&this.#g();const a=this.#y();i&&(this.#t!==n||ur(this.options.enabled,this.#t)!==ur(e.enabled,this.#t)||a!==this.#l)&&this.#_(a)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return yR(this,n)&&(this.#i=n,this.#a=this.options,this.#r=this.#t.state),n}getCurrentResult(){return this.#i}trackResult(t,e){return new Proxy(t,{get:(n,i)=>(this.trackProp(i),e?.(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(t){this.#m.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#d(t){this.#S();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(Zt)),e}#g(){this.#b();const t=As(this.options.staleTime,this.#t);if(Ta||this.#i.isStale||!Dp(t))return;const n=wS(this.#i.dataUpdatedAt,t)+1;this.#u=Ai.setTimeout(()=>{this.#i.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#_(t){this.#E(),this.#l=t,!(Ta||ur(this.options.enabled,this.#t)===!1||!Dp(this.#l)||this.#l===0)&&(this.#c=Ai.setInterval(()=>{(this.options.refetchIntervalInBackground||wg.isFocused())&&this.#d()},this.#l))}#v(){this.#g(),this.#_(this.#y())}#b(){this.#u&&(Ai.clearTimeout(this.#u),this.#u=void 0)}#E(){this.#c&&(Ai.clearInterval(this.#c),this.#c=void 0)}createResult(t,e){const n=this.#t,i=this.options,a=this.#i,l=this.#r,c=this.#a,d=t!==n?t.state:this.#n,{state:p}=t;let _={...p},b=!1,E;if(e._optimisticResults){const T=this.hasListeners(),C=!T&&hb(t,e),j=T&&fb(t,n,e,i);(C||j)&&(_={..._,...jS(p.data,t.options)}),e._optimisticResults==="isRestoring"&&(_.fetchStatus="idle")}let{error:A,errorUpdatedAt:w,status:D}=_;E=_.data;let I=!1;if(e.placeholderData!==void 0&&E===void 0&&D==="pending"){let T;a?.isPlaceholderData&&e.placeholderData===c?.placeholderData?(T=a.data,I=!0):T=typeof e.placeholderData=="function"?e.placeholderData(this.#f?.state.data,this.#f):e.placeholderData,T!==void 0&&(D="success",E=Op(a?.data,T,e),b=!0)}if(e.select&&E!==void 0&&!I)if(a&&E===l?.data&&e.select===this.#p)E=this.#h;else try{this.#p=e.select,E=e.select(E),E=Op(a?.data,E,e),this.#h=E,this.#s=null}catch(T){this.#s=T}this.#s&&(A=this.#s,E=this.#h,w=Date.now(),D="error");const B=_.fetchStatus==="fetching",q=D==="pending",z=D==="error",$=q&&B,W=E!==void 0,N={status:D,fetchStatus:_.fetchStatus,isPending:q,isSuccess:D==="success",isError:z,isInitialLoading:$,isLoading:$,data:E,dataUpdatedAt:_.dataUpdatedAt,error:A,errorUpdatedAt:w,failureCount:_.fetchFailureCount,failureReason:_.fetchFailureReason,errorUpdateCount:_.errorUpdateCount,isFetched:_.dataUpdateCount>0||_.errorUpdateCount>0,isFetchedAfterMount:_.dataUpdateCount>d.dataUpdateCount||_.errorUpdateCount>d.errorUpdateCount,isFetching:B,isRefetching:B&&!q,isLoadingError:z&&!W,isPaused:_.fetchStatus==="paused",isPlaceholderData:b,isRefetchError:z&&W,isStale:Tg(t,e),refetch:this.refetch,promise:this.#o,isEnabled:ur(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const T=R=>{N.status==="error"?R.reject(N.error):N.data!==void 0&&R.resolve(N.data)},C=()=>{const R=this.#o=N.promise=jp();T(R)},j=this.#o;switch(j.status){case"pending":t.queryHash===n.queryHash&&T(j);break;case"fulfilled":(N.status==="error"||N.data!==j.value)&&C();break;case"rejected":(N.status!=="error"||N.error!==j.reason)&&C();break}}return N}updateResult(){const t=this.#i,e=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#a=this.options,this.#r.data!==void 0&&(this.#f=this.#t),ih(e,t))return;this.#i=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!this.#m.size)return!0;const l=new Set(a??this.#m);return this.options.throwOnError&&l.add("error"),Object.keys(this.#i).some(c=>{const f=c;return this.#i[f]!==t[f]&&l.has(f)})};this.#x({listeners:n()})}#S(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#x(t){en.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#i)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function gR(t,e){return ur(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function hb(t,e){return gR(t,e)||t.state.data!==void 0&&kp(t,e,e.refetchOnMount)}function kp(t,e,n){if(ur(e.enabled,t)!==!1&&As(e.staleTime,t)!=="static"){const i=typeof n=="function"?n(t):n;return i==="always"||i!==!1&&Tg(t,e)}return!1}function fb(t,e,n,i){return(t!==e||ur(i.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Tg(t,n)}function Tg(t,e){return ur(e.enabled,t)!==!1&&t.isStaleByTime(As(e.staleTime,t))}function yR(t,e){return!ih(t.getCurrentResult(),e)}function mb(t){return{onFetch:(e,n)=>{const i=e.options,a=e.fetchOptions?.meta?.fetchMore?.direction,l=e.state.data?.pages||[],c=e.state.data?.pageParams||[];let f={pages:[],pageParams:[]},d=0;const p=async()=>{let _=!1;const b=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?_=!0:e.signal.addEventListener("abort",()=>{_=!0}),e.signal)})},E=AS(e.options,e.fetchOptions),A=async(w,D,I)=>{if(_)return Promise.reject();if(D==null&&w.pages.length)return Promise.resolve(w);const q=(()=>{const oe={client:e.client,queryKey:e.queryKey,pageParam:D,direction:I?"backward":"forward",meta:e.options.meta};return b(oe),oe})(),z=await E(q),{maxPages:$}=e.options,W=I?eR:ZC;return{pages:W(w.pages,z,$),pageParams:W(w.pageParams,D,$)}};if(a&&l.length){const w=a==="backward",D=w?_R:pb,I={pages:l,pageParams:c},B=D(i,I);f=await A(I,B,w)}else{const w=t??l.length;do{const D=d===0?c[0]??i.initialPageParam:pb(i,f);if(d>0&&D==null)break;f=await A(f,D),d++}while(d<w)}return f};e.options.persister?e.fetchFn=()=>e.options.persister?.(p,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=p}}}function pb(t,{pages:e,pageParams:n}){const i=e.length-1;return e.length>0?t.getNextPageParam(e[i],e,n[i],n):void 0}function _R(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var vR=class extends OS{#e;#t;#n;#i;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||MS(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(n=>n!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(e){const n=()=>{this.#r({type:"continue"})},i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=IS({fn:()=>this.options.mutationFn?this.options.mutationFn(e,i):Promise.reject(new Error("No mutationFn found")),onFail:(c,f)=>{this.#r({type:"failed",failureCount:c,error:f})},onPause:()=>{this.#r({type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const a=this.state.status==="pending",l=!this.#i.canStart();try{if(a)n();else{this.#r({type:"pending",variables:e,isPaused:l}),await this.#n.config.onMutate?.(e,this,i);const f=await this.options.onMutate?.(e,i);f!==this.state.context&&this.#r({type:"pending",context:f,variables:e,isPaused:l})}const c=await this.#i.start();return await this.#n.config.onSuccess?.(c,e,this.state.context,this,i),await this.options.onSuccess?.(c,e,this.state.context,i),await this.#n.config.onSettled?.(c,null,this.state.variables,this.state.context,this,i),await this.options.onSettled?.(c,null,e,this.state.context,i),this.#r({type:"success",data:c}),c}catch(c){try{throw await this.#n.config.onError?.(c,e,this.state.context,this,i),await this.options.onError?.(c,e,this.state.context,i),await this.#n.config.onSettled?.(void 0,c,this.state.variables,this.state.context,this,i),await this.options.onSettled?.(void 0,c,e,this.state.context,i),c}finally{this.#r({type:"error",error:c})}}finally{this.#n.runNext(this)}}#r(e){const n=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),en.batch(()=>{this.#t.forEach(i=>{i.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function MS(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var bR=class extends tl{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const i=new vR({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(i),i}add(t){this.#e.add(t);const e=Nd(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Nd(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const i=n.indexOf(t);i!==-1&&n.splice(i,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Nd(t);if(typeof e=="string"){const i=this.#t.get(e)?.find(a=>a.state.status==="pending");return!i||i===t}else return!0}runNext(t){const e=Nd(t);return typeof e=="string"?this.#t.get(e)?.find(i=>i!==t&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){en.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>ob(e,n))}findAll(t={}){return this.getAll().filter(e=>ob(t,e))}notify(t){en.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return en.batch(()=>Promise.all(t.map(e=>e.continue().catch(Zt))))}};function Nd(t){return t.options.scope?.id}var ER=class extends tl{#e;#t=void 0;#n;#i;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),ih(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&Aa(n.mutationKey)!==Aa(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#r(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#r(),this.#a()}mutate(e,n){return this.#i=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#r(){const e=this.#n?.state??MS();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#a(e){en.batch(()=>{if(this.#i&&this.hasListeners()){const n=this.#t.variables,i=this.#t.context,a={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#i.onSuccess?.(e.data,n,i,a),this.#i.onSettled?.(e.data,null,n,i,a)):e?.type==="error"&&(this.#i.onError?.(e.error,n,i,a),this.#i.onSettled?.(void 0,e.error,n,i,a))}this.listeners.forEach(n=>{n(this.#t)})})}},SR=class extends tl{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const i=e.queryKey,a=e.queryHash??Sg(i,e);let l=this.get(a);return l||(l=new mR({client:t,queryKey:i,queryHash:a,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(l)),l}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){en.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>ab(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>ab(t,n)):e}notify(t){en.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){en.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){en.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},xR=class{#e;#t;#n;#i;#r;#a;#o;#s;constructor(t={}){this.#e=t.queryCache||new SR,this.#t=t.mutationCache||new bR,this.#n=t.defaultOptions||{},this.#i=new Map,this.#r=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=wg.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=sh.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),i=n.state.data;return i===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(As(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const i=n.data;return[e,i]})}setQueryData(t,e,n){const i=this.defaultQueryOptions({queryKey:t}),l=this.#e.get(i.queryHash)?.state.data,c=WC(e,l);if(c!==void 0)return this.#e.build(this,i).setData(c,{...n,manual:!0})}setQueriesData(t,e,n){return en.batch(()=>this.#e.findAll(t).map(({queryKey:i})=>[i,this.setQueryData(i,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;en.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return en.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},i=en.batch(()=>this.#e.findAll(t).map(a=>a.cancel(n)));return Promise.all(i).then(Zt).catch(Zt)}invalidateQueries(t,e={}){return en.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},i=en.batch(()=>this.#e.findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let l=a.fetch(void 0,n);return n.throwOnError||(l=l.catch(Zt)),a.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(i).then(Zt)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(As(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Zt).catch(Zt)}fetchInfiniteQuery(t){return t.behavior=mb(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Zt).catch(Zt)}ensureInfiniteQueryData(t){return t.behavior=mb(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return sh.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#i.set(Aa(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#i.values()],n={};return e.forEach(i=>{Mu(t,i.queryKey)&&Object.assign(n,i.defaultOptions)}),n}setMutationDefaults(t,e){this.#r.set(Aa(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(i=>{Mu(t,i.mutationKey)&&Object.assign(n,i.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Sg(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===xg&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},kS=M.createContext(void 0),Bs=t=>{const e=M.useContext(kS);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},wR=({client:t,children:e})=>(M.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(kS.Provider,{value:t,children:e})),NS=M.createContext(!1),TR=()=>M.useContext(NS),AR=NS.Provider;function CR(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var RR=M.createContext(CR()),DR=()=>M.useContext(RR),IR=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},OR=t=>{M.useEffect(()=>{t.clearReset()},[t])},jR=({result:t,errorResetBoundary:e,throwOnError:n,query:i,suspense:a})=>t.isError&&!e.isReset()&&!t.isFetching&&i&&(a&&t.data===void 0||CS(n,[t.error,i])),MR=t=>{if(t.suspense){const n=a=>a==="static"?a:Math.max(a??1e3,1e3),i=t.staleTime;t.staleTime=typeof i=="function"?(...a)=>n(i(...a)):n(i),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},kR=(t,e)=>t.isLoading&&t.isFetching&&!e,NR=(t,e)=>t?.suspense&&e.isPending,gb=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function PR(t,e,n){const i=TR(),a=DR(),l=Bs(),c=l.defaultQueryOptions(t);l.getDefaultOptions().queries?._experimental_beforeQuery?.(c),c._optimisticResults=i?"isRestoring":"optimistic",MR(c),IR(c,a),OR(a);const f=!l.getQueryCache().get(c.queryHash),[d]=M.useState(()=>new e(l,c)),p=d.getOptimisticResult(c),_=!i&&t.subscribed!==!1;if(M.useSyncExternalStore(M.useCallback(b=>{const E=_?d.subscribe(en.batchCalls(b)):Zt;return d.updateResult(),E},[d,_]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),M.useEffect(()=>{d.setOptions(c)},[c,d]),NR(c,p))throw gb(c,d,a);if(jR({result:p,errorResetBoundary:a,throwOnError:c.throwOnError,query:l.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw p.error;return l.getDefaultOptions().queries?._experimental_afterQuery?.(c,p),c.experimental_prefetchInRender&&!Ta&&kR(p,i)&&(f?gb(c,d,a):l.getQueryCache().get(c.queryHash)?.promise)?.catch(Zt).finally(()=>{d.updateResult()}),c.notifyOnChangeProps?p:d.trackResult(p)}function Ma(t,e){return PR(t,pR)}function Ct(t,e){const n=Bs(),[i]=M.useState(()=>new ER(n,t));M.useEffect(()=>{i.setOptions(t)},[i,t]);const a=M.useSyncExternalStore(M.useCallback(c=>i.subscribe(en.batchCalls(c)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),l=M.useCallback((c,f)=>{i.mutate(c,f).catch(Zt)},[i]);if(a.error&&CS(i.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:l,mutateAsync:a.mutate}}function Np(){}function VR(t,{interval:e=1e3,onError:n=Np}={}){if(typeof t!="function")throw new Error("argument is not function.");let i=0,a=null,l=!1,c=!1;return async(...f)=>{if(a=f,!c){for(c=!0;l;)await new Promise(d=>Ai.setTimeout(d,e));for(;Date.now()<i;)await new Promise(d=>Ai.setTimeout(d,i-Date.now()));c=!1,l=!0;try{await t(...a)}catch(d){try{n(d)}catch{}}i=Date.now()+e,l=!1}}}var LR=({storage:t,key:e="REACT_QUERY_OFFLINE_CACHE",throttleTime:n=1e3,serialize:i=JSON.stringify,deserialize:a=JSON.parse,retry:l})=>{if(t){const c=async f=>{try{const d=await i(f);await t.setItem(e,d);return}catch(d){return d}};return{persistClient:VR(async f=>{let d=f,p=await c(d),_=0;for(;p&&d;)_++,d=await l?.({persistedClient:d,error:p,errorCount:_}),d&&(p=await c(d))},{interval:n}),restoreClient:async()=>{const f=await t.getItem(e);if(f)return await a(f)},removeClient:()=>t.removeItem(e)}}return{persistClient:Np,restoreClient:()=>Promise.resolve(void 0),removeClient:Np}};const vt=new xR({defaultOptions:{queries:{staleTime:300*1e3,gcTime:1440*60*1e3,refetchOnWindowFocus:!1,refetchOnReconnect:!0,retry:1,refetchOnMount:!1},mutations:{retry:1}}});vt.getQueryCache().subscribe(t=>{const e=t?.query;if(e&&t.type==="updated"){const{state:n}=e;n.status==="error"&&n.error&&console.error("[RQ] Query FAILED:",e.queryKey,n.error)}});const UR=LR({storage:typeof window<"u"?{getItem:t=>Promise.resolve(localStorage.getItem(t)),setItem:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),removeItem:t=>Promise.resolve(localStorage.removeItem(t))}:void 0,key:"BUDGET_APP_QUERY_CACHE"}),se={user:t=>["user",t],budget:t=>["budget",t],month:(t,e,n)=>["month",t,e,n],payees:t=>["payees",t],accessibleBudgets:t=>["accessibleBudgets",t],feedback:()=>["feedback"]};var zR=["added","removed","updated"];function yb(t){return zR.includes(t)}async function BR({queryClient:t,persister:e,maxAge:n=1e3*60*60*24,buster:i="",hydrateOptions:a}){try{const l=await e.restoreClient();if(l)if(l.timestamp){const c=Date.now()-l.timestamp>n,f=l.buster!==i;if(c||f)return e.removeClient();uR(t,l.clientState,a)}else return e.removeClient()}catch(l){throw await e.removeClient(),l}}async function _b({queryClient:t,persister:e,buster:n="",dehydrateOptions:i}){const a={buster:n,timestamp:Date.now(),clientState:lR(t,i)};await e.persistClient(a)}function FR(t){const e=t.queryClient.getQueryCache().subscribe(i=>{yb(i.type)&&_b(t)}),n=t.queryClient.getMutationCache().subscribe(i=>{yb(i.type)&&_b(t)});return()=>{e(),n()}}var qR=({children:t,persistOptions:e,onSuccess:n,onError:i,...a})=>{const[l,c]=M.useState(!0),f=M.useRef({persistOptions:e,onSuccess:n,onError:i}),d=M.useRef(!1);return M.useEffect(()=>{f.current={persistOptions:e,onSuccess:n,onError:i}}),M.useEffect(()=>{const p={...f.current.persistOptions,queryClient:a.client};return d.current||(d.current=!0,BR(p).then(()=>f.current.onSuccess?.()).catch(()=>f.current.onError?.()).finally(()=>{c(!1)})),l?void 0:FR(p)},[a.client,l]),m.jsx(wR,{...a,children:m.jsx(AR,{value:l,children:t})})};function HR({children:t}){return m.jsx(qR,{client:vt,persistOptions:{persister:UR,maxAge:1440*60*1e3,buster:"v1"},children:t})}const GR=()=>{};var vb={};const PS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let a=t.charCodeAt(i);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},QR=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const a=t[n++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=t[n++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=t[n++],c=t[n++],f=t[n++],d=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const l=t[n++],c=t[n++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},VS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<t.length;a+=3){const l=t[a],c=a+1<t.length,f=c?t[a+1]:0,d=a+2<t.length,p=d?t[a+2]:0,_=l>>2,b=(l&3)<<4|f>>4;let E=(f&15)<<2|p>>6,A=p&63;d||(A=64,c||(E=64)),i.push(n[_],n[b],n[E],n[A])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(PS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):QR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<t.length;){const l=n[t.charAt(a++)],f=a<t.length?n[t.charAt(a)]:0;++a;const p=a<t.length?n[t.charAt(a)]:64;++a;const b=a<t.length?n[t.charAt(a)]:64;if(++a,l==null||f==null||p==null||b==null)throw new KR;const E=l<<2|f>>4;if(i.push(E),p!==64){const A=f<<4&240|p>>2;if(i.push(A),b!==64){const w=p<<6&192|b;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class KR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $R=function(t){const e=PS(t);return VS.encodeByteArray(e,!0)},ah=function(t){return $R(t).replace(/\./g,"")},LS=function(t){try{return VS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function YR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const WR=()=>YR().__FIREBASE_DEFAULTS__,XR=()=>{if(typeof process>"u"||typeof vb>"u")return;const t=vb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},JR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LS(t[1]);return e&&JSON.parse(e)},kh=()=>{try{return GR()||WR()||XR()||JR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},US=t=>kh()?.emulatorHosts?.[t],ZR=t=>{const e=US(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},zS=()=>kh()?.config,BS=t=>kh()?.[`_${t}`];class eD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function nl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function FS(t){return(await fetch(t,{credentials:"include"})).ok}function tD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",a=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ah(JSON.stringify(n)),ah(JSON.stringify(c)),""].join(".")}const Au={};function nD(){const t={prod:[],emulator:[]};for(const e of Object.keys(Au))Au[e]?t.emulator.push(e):t.prod.push(e);return t}function rD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let bb=!1;function qS(t,e){if(typeof window>"u"||typeof document>"u"||!nl(window.location.host)||Au[t]===e||Au[t]||bb)return;Au[t]=e;function n(E){return`__firebase__banner__${E}`}const i="__firebase__banner",l=nD().prod.length>0;function c(){const E=document.getElementById(i);E&&E.remove()}function f(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function d(E,A){E.setAttribute("width","24"),E.setAttribute("id",A),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{bb=!0,c()},E}function _(E,A){E.setAttribute("id",A),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function b(){const E=rD(i),A=n("text"),w=document.getElementById(A)||document.createElement("span"),D=n("learnmore"),I=document.getElementById(D)||document.createElement("a"),B=n("preprendIcon"),q=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const z=E.element;f(z),_(I,D);const $=p();d(q,B),z.append(q,w,I,$),document.body.appendChild(z)}l?(w.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function xn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xn())}function sD(){const t=kh()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uD(){const t=xn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cD(){return!sD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dD(){try{return typeof indexedDB=="object"}catch{return!1}}function hD(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(n){e(n)}})}const fD="FirebaseError";class zi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=fD,Object.setPrototypeOf(this,zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gu.prototype.create)}}class Gu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?mD(l,i):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new zi(a,f,i)}}function mD(t,e){return t.replace(pD,(n,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const pD=/\{\$([^}]+)}/g;function gD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ms(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const a of n){if(!i.includes(a))return!1;const l=t[a],c=e[a];if(Eb(l)&&Eb(c)){if(!Ms(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!n.includes(a))return!1;return!0}function Eb(t){return t!==null&&typeof t=="object"}function Qu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function bu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Eu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function yD(t,e){const n=new _D(t,e);return n.subscribe.bind(n)}class _D{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let a;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");vD(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:i},a.next===void 0&&(a.next=mp),a.error===void 0&&(a.error=mp),a.complete===void 0&&(a.complete=mp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function mp(){}function on(t){return t&&t._delegate?t._delegate:t}class Ca{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Sa="[DEFAULT]";class bD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new eD;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SD(e))try{this.getOrInitializeService({instanceIdentifier:Sa})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=Sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sa){return this.instances.has(e)}getOptions(e=Sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&c.resolve(a)}return a}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const a of i)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:ED(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Sa){return this.component?this.component.multipleInstances?e:Sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ED(t){return t===Sa?void 0:t}function SD(t){return t.instantiationMode==="EAGER"}class xD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Xe||(Xe={}));const wD={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},TD=Xe.INFO,AD={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},CD=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),a=AD[e];if(a)console[a](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ag{constructor(e){this.name=e,this._logLevel=TD,this._logHandler=CD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const RD=(t,e)=>e.some(n=>t instanceof n);let Sb,xb;function DD(){return Sb||(Sb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ID(){return xb||(xb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HS=new WeakMap,Pp=new WeakMap,GS=new WeakMap,pp=new WeakMap,Cg=new WeakMap;function OD(t){const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("success",l),t.removeEventListener("error",c)},l=()=>{n(Cs(t.result)),a()},c=()=>{i(t.error),a()};t.addEventListener("success",l),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&HS.set(n,t)}).catch(()=>{}),Cg.set(e,t),e}function jD(t){if(Pp.has(t))return;const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",c),t.removeEventListener("abort",c)},l=()=>{n(),a()},c=()=>{i(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",l),t.addEventListener("error",c),t.addEventListener("abort",c)});Pp.set(t,e)}let Vp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Pp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||GS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function MD(t){Vp=t(Vp)}function kD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(gp(this),e,...n);return GS.set(i,e.sort?e.sort():[e]),Cs(i)}:ID().includes(t)?function(...e){return t.apply(gp(this),e),Cs(HS.get(this))}:function(...e){return Cs(t.apply(gp(this),e))}}function ND(t){return typeof t=="function"?kD(t):(t instanceof IDBTransaction&&jD(t),RD(t,DD())?new Proxy(t,Vp):t)}function Cs(t){if(t instanceof IDBRequest)return OD(t);if(pp.has(t))return pp.get(t);const e=ND(t);return e!==t&&(pp.set(t,e),Cg.set(e,t)),e}const gp=t=>Cg.get(t);function PD(t,e,{blocked:n,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(t,e),f=Cs(c);return i&&c.addEventListener("upgradeneeded",d=>{i(Cs(c.result),d.oldVersion,d.newVersion,Cs(c.transaction),d)}),n&&c.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),f.then(d=>{l&&d.addEventListener("close",()=>l()),a&&d.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const VD=["get","getKey","getAll","getAllKeys","count"],LD=["put","add","delete","clear"],yp=new Map;function wb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yp.get(e))return yp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,a=LD.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||VD.includes(n)))return;const l=async function(c,...f){const d=this.transaction(c,a?"readwrite":"readonly");let p=d.store;return i&&(p=p.index(f.shift())),(await Promise.all([p[n](...f),a&&d.done]))[0]};return yp.set(e,l),l}MD(t=>({...t,get:(e,n,i)=>wb(e,n)||t.get(e,n,i),has:(e,n)=>!!wb(e,n)||t.has(e,n)}));class UD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zD(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function zD(t){return t.getComponent()?.type==="VERSION"}const Lp="@firebase/app",Tb="0.14.6";const ki=new Ag("@firebase/app"),BD="@firebase/app-compat",FD="@firebase/analytics-compat",qD="@firebase/analytics",HD="@firebase/app-check-compat",GD="@firebase/app-check",QD="@firebase/auth",KD="@firebase/auth-compat",$D="@firebase/database",YD="@firebase/data-connect",WD="@firebase/database-compat",XD="@firebase/functions",JD="@firebase/functions-compat",ZD="@firebase/installations",eI="@firebase/installations-compat",tI="@firebase/messaging",nI="@firebase/messaging-compat",rI="@firebase/performance",iI="@firebase/performance-compat",sI="@firebase/remote-config",aI="@firebase/remote-config-compat",oI="@firebase/storage",lI="@firebase/storage-compat",uI="@firebase/firestore",cI="@firebase/ai",dI="@firebase/firestore-compat",hI="firebase",fI="12.6.0";const Up="[DEFAULT]",mI={[Lp]:"fire-core",[BD]:"fire-core-compat",[qD]:"fire-analytics",[FD]:"fire-analytics-compat",[GD]:"fire-app-check",[HD]:"fire-app-check-compat",[QD]:"fire-auth",[KD]:"fire-auth-compat",[$D]:"fire-rtdb",[YD]:"fire-data-connect",[WD]:"fire-rtdb-compat",[XD]:"fire-fn",[JD]:"fire-fn-compat",[ZD]:"fire-iid",[eI]:"fire-iid-compat",[tI]:"fire-fcm",[nI]:"fire-fcm-compat",[rI]:"fire-perf",[iI]:"fire-perf-compat",[sI]:"fire-rc",[aI]:"fire-rc-compat",[oI]:"fire-gcs",[lI]:"fire-gcs-compat",[uI]:"fire-fst",[dI]:"fire-fst-compat",[cI]:"fire-vertex","fire-js":"fire-js",[hI]:"fire-js-all"};const oh=new Map,pI=new Map,zp=new Map;function Ab(t,e){try{t.container.addComponent(e)}catch(n){ki.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Bo(t){const e=t.name;if(zp.has(e))return ki.debug(`There were multiple attempts to register component ${e}.`),!1;zp.set(e,t);for(const n of oh.values())Ab(n,t);for(const n of pI.values())Ab(n,t);return!0}function Rg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ar(t){return t==null?!1:t.settings!==void 0}const gI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rs=new Gu("app","Firebase",gI);class yI{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ca("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rs.create("app-deleted",{appName:this._name})}}const rl=fI;function QS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Up,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw Rs.create("bad-app-name",{appName:String(a)});if(n||(n=zS()),!n)throw Rs.create("no-options");const l=oh.get(a);if(l){if(Ms(n,l.options)&&Ms(i,l.config))return l;throw Rs.create("duplicate-app",{appName:a})}const c=new xD(a);for(const d of zp.values())c.addComponent(d);const f=new yI(n,i,c);return oh.set(a,f),f}function KS(t=Up){const e=oh.get(t);if(!e&&t===Up&&zS())return QS();if(!e)throw Rs.create("no-app",{appName:t});return e}function Ds(t,e,n){let i=mI[t]??t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ki.warn(c.join(" "));return}Bo(new Ca(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const _I="firebase-heartbeat-database",vI=1,ku="firebase-heartbeat-store";let _p=null;function $S(){return _p||(_p=PD(_I,vI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ku)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rs.create("idb-open",{originalErrorMessage:t.message})})),_p}async function bI(t){try{const n=(await $S()).transaction(ku),i=await n.objectStore(ku).get(YS(t));return await n.done,i}catch(e){if(e instanceof zi)ki.warn(e.message);else{const n=Rs.create("idb-get",{originalErrorMessage:e?.message});ki.warn(n.message)}}}async function Cb(t,e){try{const i=(await $S()).transaction(ku,"readwrite");await i.objectStore(ku).put(e,YS(t)),await i.done}catch(n){if(n instanceof zi)ki.warn(n.message);else{const i=Rs.create("idb-set",{originalErrorMessage:n?.message});ki.warn(i.message)}}}function YS(t){return`${t.name}!${t.options.appId}`}const EI=1024,SI=30;class xI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TI(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Rb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>SI){const a=AI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ki.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Rb(),{heartbeatsToSend:n,unsentEntries:i}=wI(this._heartbeatsCache.heartbeats),a=ah(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return ki.warn(e),""}}}function Rb(){return new Date().toISOString().substring(0,10)}function wI(t,e=EI){const n=[];let i=t.slice();for(const a of t){const l=n.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Db(n)>e){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),Db(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class TI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dD()?hD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bI(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Cb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Cb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Db(t){return ah(JSON.stringify({version:2,heartbeats:t})).length}function AI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}function CI(t){Bo(new Ca("platform-logger",e=>new UD(e),"PRIVATE")),Bo(new Ca("heartbeat",e=>new xI(e),"PRIVATE")),Ds(Lp,Tb,t),Ds(Lp,Tb,"esm2020"),Ds("fire-js","")}CI("");var Ib=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Is,WS;(function(){var t;function e(N,T){function C(){}C.prototype=T.prototype,N.F=T.prototype,N.prototype=new C,N.prototype.constructor=N,N.D=function(j,R,L){for(var k=Array(arguments.length-2),X=2;X<arguments.length;X++)k[X-2]=arguments[X];return T.prototype[R].apply(j,k)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(N,T,C){C||(C=0);const j=Array(16);if(typeof T=="string")for(var R=0;R<16;++R)j[R]=T.charCodeAt(C++)|T.charCodeAt(C++)<<8|T.charCodeAt(C++)<<16|T.charCodeAt(C++)<<24;else for(R=0;R<16;++R)j[R]=T[C++]|T[C++]<<8|T[C++]<<16|T[C++]<<24;T=N.g[0],C=N.g[1],R=N.g[2];let L=N.g[3],k;k=T+(L^C&(R^L))+j[0]+3614090360&4294967295,T=C+(k<<7&4294967295|k>>>25),k=L+(R^T&(C^R))+j[1]+3905402710&4294967295,L=T+(k<<12&4294967295|k>>>20),k=R+(C^L&(T^C))+j[2]+606105819&4294967295,R=L+(k<<17&4294967295|k>>>15),k=C+(T^R&(L^T))+j[3]+3250441966&4294967295,C=R+(k<<22&4294967295|k>>>10),k=T+(L^C&(R^L))+j[4]+4118548399&4294967295,T=C+(k<<7&4294967295|k>>>25),k=L+(R^T&(C^R))+j[5]+1200080426&4294967295,L=T+(k<<12&4294967295|k>>>20),k=R+(C^L&(T^C))+j[6]+2821735955&4294967295,R=L+(k<<17&4294967295|k>>>15),k=C+(T^R&(L^T))+j[7]+4249261313&4294967295,C=R+(k<<22&4294967295|k>>>10),k=T+(L^C&(R^L))+j[8]+1770035416&4294967295,T=C+(k<<7&4294967295|k>>>25),k=L+(R^T&(C^R))+j[9]+2336552879&4294967295,L=T+(k<<12&4294967295|k>>>20),k=R+(C^L&(T^C))+j[10]+4294925233&4294967295,R=L+(k<<17&4294967295|k>>>15),k=C+(T^R&(L^T))+j[11]+2304563134&4294967295,C=R+(k<<22&4294967295|k>>>10),k=T+(L^C&(R^L))+j[12]+1804603682&4294967295,T=C+(k<<7&4294967295|k>>>25),k=L+(R^T&(C^R))+j[13]+4254626195&4294967295,L=T+(k<<12&4294967295|k>>>20),k=R+(C^L&(T^C))+j[14]+2792965006&4294967295,R=L+(k<<17&4294967295|k>>>15),k=C+(T^R&(L^T))+j[15]+1236535329&4294967295,C=R+(k<<22&4294967295|k>>>10),k=T+(R^L&(C^R))+j[1]+4129170786&4294967295,T=C+(k<<5&4294967295|k>>>27),k=L+(C^R&(T^C))+j[6]+3225465664&4294967295,L=T+(k<<9&4294967295|k>>>23),k=R+(T^C&(L^T))+j[11]+643717713&4294967295,R=L+(k<<14&4294967295|k>>>18),k=C+(L^T&(R^L))+j[0]+3921069994&4294967295,C=R+(k<<20&4294967295|k>>>12),k=T+(R^L&(C^R))+j[5]+3593408605&4294967295,T=C+(k<<5&4294967295|k>>>27),k=L+(C^R&(T^C))+j[10]+38016083&4294967295,L=T+(k<<9&4294967295|k>>>23),k=R+(T^C&(L^T))+j[15]+3634488961&4294967295,R=L+(k<<14&4294967295|k>>>18),k=C+(L^T&(R^L))+j[4]+3889429448&4294967295,C=R+(k<<20&4294967295|k>>>12),k=T+(R^L&(C^R))+j[9]+568446438&4294967295,T=C+(k<<5&4294967295|k>>>27),k=L+(C^R&(T^C))+j[14]+3275163606&4294967295,L=T+(k<<9&4294967295|k>>>23),k=R+(T^C&(L^T))+j[3]+4107603335&4294967295,R=L+(k<<14&4294967295|k>>>18),k=C+(L^T&(R^L))+j[8]+1163531501&4294967295,C=R+(k<<20&4294967295|k>>>12),k=T+(R^L&(C^R))+j[13]+2850285829&4294967295,T=C+(k<<5&4294967295|k>>>27),k=L+(C^R&(T^C))+j[2]+4243563512&4294967295,L=T+(k<<9&4294967295|k>>>23),k=R+(T^C&(L^T))+j[7]+1735328473&4294967295,R=L+(k<<14&4294967295|k>>>18),k=C+(L^T&(R^L))+j[12]+2368359562&4294967295,C=R+(k<<20&4294967295|k>>>12),k=T+(C^R^L)+j[5]+4294588738&4294967295,T=C+(k<<4&4294967295|k>>>28),k=L+(T^C^R)+j[8]+2272392833&4294967295,L=T+(k<<11&4294967295|k>>>21),k=R+(L^T^C)+j[11]+1839030562&4294967295,R=L+(k<<16&4294967295|k>>>16),k=C+(R^L^T)+j[14]+4259657740&4294967295,C=R+(k<<23&4294967295|k>>>9),k=T+(C^R^L)+j[1]+2763975236&4294967295,T=C+(k<<4&4294967295|k>>>28),k=L+(T^C^R)+j[4]+1272893353&4294967295,L=T+(k<<11&4294967295|k>>>21),k=R+(L^T^C)+j[7]+4139469664&4294967295,R=L+(k<<16&4294967295|k>>>16),k=C+(R^L^T)+j[10]+3200236656&4294967295,C=R+(k<<23&4294967295|k>>>9),k=T+(C^R^L)+j[13]+681279174&4294967295,T=C+(k<<4&4294967295|k>>>28),k=L+(T^C^R)+j[0]+3936430074&4294967295,L=T+(k<<11&4294967295|k>>>21),k=R+(L^T^C)+j[3]+3572445317&4294967295,R=L+(k<<16&4294967295|k>>>16),k=C+(R^L^T)+j[6]+76029189&4294967295,C=R+(k<<23&4294967295|k>>>9),k=T+(C^R^L)+j[9]+3654602809&4294967295,T=C+(k<<4&4294967295|k>>>28),k=L+(T^C^R)+j[12]+3873151461&4294967295,L=T+(k<<11&4294967295|k>>>21),k=R+(L^T^C)+j[15]+530742520&4294967295,R=L+(k<<16&4294967295|k>>>16),k=C+(R^L^T)+j[2]+3299628645&4294967295,C=R+(k<<23&4294967295|k>>>9),k=T+(R^(C|~L))+j[0]+4096336452&4294967295,T=C+(k<<6&4294967295|k>>>26),k=L+(C^(T|~R))+j[7]+1126891415&4294967295,L=T+(k<<10&4294967295|k>>>22),k=R+(T^(L|~C))+j[14]+2878612391&4294967295,R=L+(k<<15&4294967295|k>>>17),k=C+(L^(R|~T))+j[5]+4237533241&4294967295,C=R+(k<<21&4294967295|k>>>11),k=T+(R^(C|~L))+j[12]+1700485571&4294967295,T=C+(k<<6&4294967295|k>>>26),k=L+(C^(T|~R))+j[3]+2399980690&4294967295,L=T+(k<<10&4294967295|k>>>22),k=R+(T^(L|~C))+j[10]+4293915773&4294967295,R=L+(k<<15&4294967295|k>>>17),k=C+(L^(R|~T))+j[1]+2240044497&4294967295,C=R+(k<<21&4294967295|k>>>11),k=T+(R^(C|~L))+j[8]+1873313359&4294967295,T=C+(k<<6&4294967295|k>>>26),k=L+(C^(T|~R))+j[15]+4264355552&4294967295,L=T+(k<<10&4294967295|k>>>22),k=R+(T^(L|~C))+j[6]+2734768916&4294967295,R=L+(k<<15&4294967295|k>>>17),k=C+(L^(R|~T))+j[13]+1309151649&4294967295,C=R+(k<<21&4294967295|k>>>11),k=T+(R^(C|~L))+j[4]+4149444226&4294967295,T=C+(k<<6&4294967295|k>>>26),k=L+(C^(T|~R))+j[11]+3174756917&4294967295,L=T+(k<<10&4294967295|k>>>22),k=R+(T^(L|~C))+j[2]+718787259&4294967295,R=L+(k<<15&4294967295|k>>>17),k=C+(L^(R|~T))+j[9]+3951481745&4294967295,N.g[0]=N.g[0]+T&4294967295,N.g[1]=N.g[1]+(R+(k<<21&4294967295|k>>>11))&4294967295,N.g[2]=N.g[2]+R&4294967295,N.g[3]=N.g[3]+L&4294967295}i.prototype.v=function(N,T){T===void 0&&(T=N.length);const C=T-this.blockSize,j=this.C;let R=this.h,L=0;for(;L<T;){if(R==0)for(;L<=C;)a(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<T;)if(j[R++]=N.charCodeAt(L++),R==this.blockSize){a(this,j),R=0;break}}else for(;L<T;)if(j[R++]=N[L++],R==this.blockSize){a(this,j),R=0;break}}this.h=R,this.o+=T},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var T=1;T<N.length-8;++T)N[T]=0;T=this.o*8;for(var C=N.length-8;C<N.length;++C)N[C]=T&255,T/=256;for(this.v(N),N=Array(16),T=0,C=0;C<4;++C)for(let j=0;j<32;j+=8)N[T++]=this.g[C]>>>j&255;return N};function l(N,T){var C=f;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=T(N)}function c(N,T){this.h=T;const C=[];let j=!0;for(let R=N.length-1;R>=0;R--){const L=N[R]|0;j&&L==T||(C[R]=L,j=!1)}this.g=C}var f={};function d(N){return-128<=N&&N<128?l(N,function(T){return new c([T|0],T<0?-1:0)}):new c([N|0],N<0?-1:0)}function p(N){if(isNaN(N)||!isFinite(N))return b;if(N<0)return I(p(-N));const T=[];let C=1;for(let j=0;N>=C;j++)T[j]=N/C|0,C*=4294967296;return new c(T,0)}function _(N,T){if(N.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(N.charAt(0)=="-")return I(_(N.substring(1),T));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=p(Math.pow(T,8));let j=b;for(let L=0;L<N.length;L+=8){var R=Math.min(8,N.length-L);const k=parseInt(N.substring(L,L+R),T);R<8?(R=p(Math.pow(T,R)),j=j.j(R).add(p(k))):(j=j.j(C),j=j.add(p(k)))}return j}var b=d(0),E=d(1),A=d(16777216);t=c.prototype,t.m=function(){if(D(this))return-I(this).m();let N=0,T=1;for(let C=0;C<this.g.length;C++){const j=this.i(C);N+=(j>=0?j:4294967296+j)*T,T*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(w(this))return"0";if(D(this))return"-"+I(this).toString(N);const T=p(Math.pow(N,6));var C=this;let j="";for(;;){const R=$(C,T).g;C=B(C,R.j(T));let L=((C.g.length>0?C.g[0]:C.h)>>>0).toString(N);if(C=R,w(C))return L+j;for(;L.length<6;)L="0"+L;j=L+j}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function w(N){if(N.h!=0)return!1;for(let T=0;T<N.g.length;T++)if(N.g[T]!=0)return!1;return!0}function D(N){return N.h==-1}t.l=function(N){return N=B(this,N),D(N)?-1:w(N)?0:1};function I(N){const T=N.g.length,C=[];for(let j=0;j<T;j++)C[j]=~N.g[j];return new c(C,~N.h).add(E)}t.abs=function(){return D(this)?I(this):this},t.add=function(N){const T=Math.max(this.g.length,N.g.length),C=[];let j=0;for(let R=0;R<=T;R++){let L=j+(this.i(R)&65535)+(N.i(R)&65535),k=(L>>>16)+(this.i(R)>>>16)+(N.i(R)>>>16);j=k>>>16,L&=65535,k&=65535,C[R]=k<<16|L}return new c(C,C[C.length-1]&-2147483648?-1:0)};function B(N,T){return N.add(I(T))}t.j=function(N){if(w(this)||w(N))return b;if(D(this))return D(N)?I(this).j(I(N)):I(I(this).j(N));if(D(N))return I(this.j(I(N)));if(this.l(A)<0&&N.l(A)<0)return p(this.m()*N.m());const T=this.g.length+N.g.length,C=[];for(var j=0;j<2*T;j++)C[j]=0;for(j=0;j<this.g.length;j++)for(let R=0;R<N.g.length;R++){const L=this.i(j)>>>16,k=this.i(j)&65535,X=N.i(R)>>>16,F=N.i(R)&65535;C[2*j+2*R]+=k*F,q(C,2*j+2*R),C[2*j+2*R+1]+=L*F,q(C,2*j+2*R+1),C[2*j+2*R+1]+=k*X,q(C,2*j+2*R+1),C[2*j+2*R+2]+=L*X,q(C,2*j+2*R+2)}for(N=0;N<T;N++)C[N]=C[2*N+1]<<16|C[2*N];for(N=T;N<2*T;N++)C[N]=0;return new c(C,0)};function q(N,T){for(;(N[T]&65535)!=N[T];)N[T+1]+=N[T]>>>16,N[T]&=65535,T++}function z(N,T){this.g=N,this.h=T}function $(N,T){if(w(T))throw Error("division by zero");if(w(N))return new z(b,b);if(D(N))return T=$(I(N),T),new z(I(T.g),I(T.h));if(D(T))return T=$(N,I(T)),new z(I(T.g),T.h);if(N.g.length>30){if(D(N)||D(T))throw Error("slowDivide_ only works with positive integers.");for(var C=E,j=T;j.l(N)<=0;)C=W(C),j=W(j);var R=oe(C,1),L=oe(j,1);for(j=oe(j,2),C=oe(C,2);!w(j);){var k=L.add(j);k.l(N)<=0&&(R=R.add(C),L=k),j=oe(j,1),C=oe(C,1)}return T=B(N,R.j(T)),new z(R,T)}for(R=b;N.l(T)>=0;){for(C=Math.max(1,Math.floor(N.m()/T.m())),j=Math.ceil(Math.log(C)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),L=p(C),k=L.j(T);D(k)||k.l(N)>0;)C-=j,L=p(C),k=L.j(T);w(L)&&(L=E),R=R.add(L),N=B(N,k)}return new z(R,N)}t.B=function(N){return $(this,N).h},t.and=function(N){const T=Math.max(this.g.length,N.g.length),C=[];for(let j=0;j<T;j++)C[j]=this.i(j)&N.i(j);return new c(C,this.h&N.h)},t.or=function(N){const T=Math.max(this.g.length,N.g.length),C=[];for(let j=0;j<T;j++)C[j]=this.i(j)|N.i(j);return new c(C,this.h|N.h)},t.xor=function(N){const T=Math.max(this.g.length,N.g.length),C=[];for(let j=0;j<T;j++)C[j]=this.i(j)^N.i(j);return new c(C,this.h^N.h)};function W(N){const T=N.g.length+1,C=[];for(let j=0;j<T;j++)C[j]=N.i(j)<<1|N.i(j-1)>>>31;return new c(C,N.h)}function oe(N,T){const C=T>>5;T%=32;const j=N.g.length-C,R=[];for(let L=0;L<j;L++)R[L]=T>0?N.i(L+C)>>>T|N.i(L+C+1)<<32-T:N.i(L+C);return new c(R,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,WS=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=_,Is=c}).apply(typeof Ib<"u"?Ib:typeof self<"u"?self:typeof window<"u"?window:{});var Pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var XS,Su,JS,Gd,Bp,ZS,ex,tx;(function(){var t,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pd=="object"&&Pd];for(var v=0;v<h.length;++v){var x=h[v];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function a(h,v){if(v)e:{var x=i;h=h.split(".");for(var P=0;P<h.length-1;P++){var ee=h[P];if(!(ee in x))break e;x=x[ee]}h=h[h.length-1],P=x[h],v=v(P),v!=P&&v!=null&&e(x,h,{configurable:!0,writable:!0,value:v})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(v){var x=[],P;for(P in v)Object.prototype.hasOwnProperty.call(v,P)&&x.push([P,v[P]]);return x}});var l=l||{},c=this||self;function f(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function d(h,v,x){return h.call.apply(h.bind,arguments)}function p(h,v,x){return p=d,p.apply(null,arguments)}function _(h,v){var x=Array.prototype.slice.call(arguments,1);return function(){var P=x.slice();return P.push.apply(P,arguments),h.apply(this,P)}}function b(h,v){function x(){}x.prototype=v.prototype,h.Z=v.prototype,h.prototype=new x,h.prototype.constructor=h,h.Ob=function(P,ee,ae){for(var Se=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)Se[ze-2]=arguments[ze];return v.prototype[ee].apply(P,Se)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function A(h){const v=h.length;if(v>0){const x=Array(v);for(let P=0;P<v;P++)x[P]=h[P];return x}return[]}function w(h,v){for(let P=1;P<arguments.length;P++){const ee=arguments[P];var x=typeof ee;if(x=x!="object"?x:ee?Array.isArray(ee)?"array":x:"null",x=="array"||x=="object"&&typeof ee.length=="number"){x=h.length||0;const ae=ee.length||0;h.length=x+ae;for(let Se=0;Se<ae;Se++)h[x+Se]=ee[Se]}else h.push(ee)}}class D{constructor(v,x){this.i=v,this.j=x,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function I(h){c.setTimeout(()=>{throw h},0)}function B(){var h=N;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class q{constructor(){this.h=this.g=null}add(v,x){const P=z.get();P.set(v,x),this.h?this.h.next=P:this.g=P,this.h=P}}var z=new D(()=>new $,h=>h.reset());class ${constructor(){this.next=this.g=this.h=null}set(v,x){this.h=v,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let W,oe=!1,N=new q,T=()=>{const h=Promise.resolve(void 0);W=()=>{h.then(C)}};function C(){for(var h;h=B();){try{h.h.call(h.g)}catch(x){I(x)}var v=z;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}oe=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const x=()=>{};c.addEventListener("test",x,v),c.removeEventListener("test",x,v)}catch{}return h})();function k(h){return/^[\s\xa0]*$/.test(h)}function X(h,v){R.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}b(X,R),X.prototype.init=function(h,v){const x=this.type=h.type,P=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(x=="mouseover"?v=h.fromElement:x=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&X.Z.h.call(this)},X.prototype.h=function(){X.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var F="closure_listenable_"+(Math.random()*1e6|0),U=0;function H(h,v,x,P,ee){this.listener=h,this.proxy=null,this.src=v,this.type=x,this.capture=!!P,this.ha=ee,this.key=++U,this.da=this.fa=!1}function Q(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function le(h,v,x){for(const P in h)v.call(x,h[P],P,h)}function de(h,v){for(const x in h)v.call(void 0,h[x],x,h)}function V(h){const v={};for(const x in h)v[x]=h[x];return v}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(h,v){let x,P;for(let ee=1;ee<arguments.length;ee++){P=arguments[ee];for(x in P)h[x]=P[x];for(let ae=0;ae<J.length;ae++)x=J[ae],Object.prototype.hasOwnProperty.call(P,x)&&(h[x]=P[x])}}function ie(h){this.src=h,this.g={},this.h=0}ie.prototype.add=function(h,v,x,P,ee){const ae=h.toString();h=this.g[ae],h||(h=this.g[ae]=[],this.h++);const Se=Ee(h,v,P,ee);return Se>-1?(v=h[Se],x||(v.fa=!1)):(v=new H(v,this.src,ae,!!P,ee),v.fa=x,h.push(v)),v};function ce(h,v){const x=v.type;if(x in h.g){var P=h.g[x],ee=Array.prototype.indexOf.call(P,v,void 0),ae;(ae=ee>=0)&&Array.prototype.splice.call(P,ee,1),ae&&(Q(v),h.g[x].length==0&&(delete h.g[x],h.h--))}}function Ee(h,v,x,P){for(let ee=0;ee<h.length;++ee){const ae=h[ee];if(!ae.da&&ae.listener==v&&ae.capture==!!x&&ae.ha==P)return ee}return-1}var De="closure_lm_"+(Math.random()*1e6|0),ve={};function fe(h,v,x,P,ee){if(Array.isArray(v)){for(let ae=0;ae<v.length;ae++)fe(h,v[ae],x,P,ee);return null}return x=gt(x),h&&h[F]?h.J(v,x,f(P)?!!P.capture:!1,ee):Z(h,v,x,!1,P,ee)}function Z(h,v,x,P,ee,ae){if(!v)throw Error("Invalid event type");const Se=f(ee)?!!ee.capture:!!ee;let ze=Ue(h);if(ze||(h[De]=ze=new ie(h)),x=ze.add(v,x,P,Se,ae),x.proxy)return x;if(P=Ce(),x.proxy=P,P.src=h,P.listener=x,h.addEventListener)L||(ee=Se),ee===void 0&&(ee=!1),h.addEventListener(v.toString(),P,ee);else if(h.attachEvent)h.attachEvent(qe(v.toString()),P);else if(h.addListener&&h.removeListener)h.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Ce(){function h(x){return v.call(h.src,h.listener,x)}const v=tt;return h}function xe(h,v,x,P,ee){if(Array.isArray(v))for(var ae=0;ae<v.length;ae++)xe(h,v[ae],x,P,ee);else P=f(P)?!!P.capture:!!P,x=gt(x),h&&h[F]?(h=h.i,ae=String(v).toString(),ae in h.g&&(v=h.g[ae],x=Ee(v,x,P,ee),x>-1&&(Q(v[x]),Array.prototype.splice.call(v,x,1),v.length==0&&(delete h.g[ae],h.h--)))):h&&(h=Ue(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Ee(v,x,P,ee)),(x=h>-1?v[h]:null)&&He(x))}function He(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[F])ce(v.i,h);else{var x=h.type,P=h.proxy;v.removeEventListener?v.removeEventListener(x,P,h.capture):v.detachEvent?v.detachEvent(qe(x),P):v.addListener&&v.removeListener&&v.removeListener(P),(x=Ue(v))?(ce(x,h),x.h==0&&(x.src=null,v[De]=null)):Q(h)}}}function qe(h){return h in ve?ve[h]:ve[h]="on"+h}function tt(h,v){if(h.da)h=!0;else{v=new X(v,this);const x=h.listener,P=h.ha||h.src;h.fa&&He(h),h=x.call(P,v)}return h}function Ue(h){return h=h[De],h instanceof ie?h:null}var Et="__closure_events_fn_"+(Math.random()*1e9>>>0);function gt(h){return typeof h=="function"?h:(h[Et]||(h[Et]=function(v){return h.handleEvent(v)}),h[Et])}function dt(){j.call(this),this.i=new ie(this),this.M=this,this.G=null}b(dt,j),dt.prototype[F]=!0,dt.prototype.removeEventListener=function(h,v,x,P){xe(this,h,v,x,P)};function Xt(h,v){var x,P=h.G;if(P)for(x=[];P;P=P.G)x.push(P);if(h=h.M,P=v.type||v,typeof v=="string")v=new R(v,h);else if(v instanceof R)v.target=v.target||h;else{var ee=v;v=new R(P,h),ye(v,ee)}ee=!0;let ae,Se;if(x)for(Se=x.length-1;Se>=0;Se--)ae=v.g=x[Se],ee=Bi(ae,P,!0,v)&&ee;if(ae=v.g=h,ee=Bi(ae,P,!0,v)&&ee,ee=Bi(ae,P,!1,v)&&ee,x)for(Se=0;Se<x.length;Se++)ae=v.g=x[Se],ee=Bi(ae,P,!1,v)&&ee}dt.prototype.N=function(){if(dt.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const x=h.g[v];for(let P=0;P<x.length;P++)Q(x[P]);delete h.g[v],h.h--}}this.G=null},dt.prototype.J=function(h,v,x,P){return this.i.add(String(h),v,!1,x,P)},dt.prototype.K=function(h,v,x,P){return this.i.add(String(h),v,!0,x,P)};function Bi(h,v,x,P){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let ee=!0;for(let ae=0;ae<v.length;++ae){const Se=v[ae];if(Se&&!Se.da&&Se.capture==x){const ze=Se.listener,kt=Se.ha||Se.src;Se.fa&&ce(h.i,Se),ee=ze.call(kt,P)!==!1&&ee}}return ee&&!P.defaultPrevented}function of(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:c.setTimeout(h,v||0)}function sc(h){h.g=of(()=>{h.g=null,h.i&&(h.i=!1,sc(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class wn extends j{constructor(v,x){super(),this.m=v,this.l=x,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:sc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ks(h){j.call(this),this.h=h,this.g={}}b(Ks,j);var pl=[];function gl(h){le(h.g,function(v,x){this.g.hasOwnProperty(x)&&He(v)},h),h.g={}}Ks.prototype.N=function(){Ks.Z.N.call(this),gl(this)},Ks.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fi=c.JSON.stringify,lf=c.JSON.parse,ac=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function oc(){}function lc(){}var mr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ln(){R.call(this,"d")}b(ln,R);function Wn(){R.call(this,"c")}b(Wn,R);var Mt={},uc=null;function Ua(){return uc=uc||new dt}Mt.Ia="serverreachability";function cc(h){R.call(this,Mt.Ia,h)}b(cc,R);function Ir(h){const v=Ua();Xt(v,new cc(v))}Mt.STAT_EVENT="statevent";function $s(h,v){R.call(this,Mt.STAT_EVENT,h),this.stat=v}b($s,R);function Ut(h){const v=Ua();Xt(v,new $s(v,h))}Mt.Ja="timingevent";function Or(h,v){R.call(this,Mt.Ja,h),this.size=v}b(Or,R);function jr(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},v)}function pr(){this.g=!0}pr.prototype.ua=function(){this.g=!1};function uf(h,v,x,P,ee,ae){h.info(function(){if(h.g)if(ae){var Se="",ze=ae.split("&");for(let st=0;st<ze.length;st++){var kt=ze[st].split("=");if(kt.length>1){const Tt=kt[0];kt=kt[1];const er=Tt.split("_");Se=er.length>=2&&er[1]=="type"?Se+(Tt+"="+kt+"&"):Se+(Tt+"=redacted&")}}}else Se=null;else Se=ae;return"XMLHTTP REQ ("+P+") [attempt "+ee+"]: "+v+`
`+x+`
`+Se})}function dc(h,v,x,P,ee,ae,Se){h.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+ee+"]: "+v+`
`+x+`
`+ae+" "+Se})}function Mr(h,v,x,P){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+cf(h,x)+(P?" "+P:"")})}function Ys(h,v){h.info(function(){return"TIMEOUT: "+v})}pr.prototype.info=function(){};function cf(h,v){if(!h.g)return v;if(!v)return null;try{const ae=JSON.parse(v);if(ae){for(h=0;h<ae.length;h++)if(Array.isArray(ae[h])){var x=ae[h];if(!(x.length<2)){var P=x[1];if(Array.isArray(P)&&!(P.length<1)){var ee=P[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(let Se=1;Se<P.length;Se++)P[Se]=""}}}}return Fi(ae)}catch{return v}}var Ws={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},yl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},_l;function Xs(){}b(Xs,oc),Xs.prototype.g=function(){return new XMLHttpRequest},_l=new Xs;function oi(h){return encodeURIComponent(String(h))}function hc(h){var v=1;h=h.split(":");const x=[];for(;v>0&&h.length;)x.push(h.shift()),v--;return h.length&&x.push(h.join(":")),x}function gr(h,v,x,P){this.j=h,this.i=v,this.l=x,this.S=P||1,this.V=new Ks(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new yr}function yr(){this.i=null,this.g="",this.h=!1}var zt={},nn={};function kr(h,v,x){h.M=1,h.A=Js(Ft(v)),h.u=x,h.R=!0,za(h,null)}function za(h,v){h.F=Date.now(),Nr(h),h.B=Ft(h.A);var x=h.B,P=h.S;Array.isArray(P)||(P=[String(P)]),Ha(x.i,"t",P),h.C=0,x=h.j.L,h.h=new yr,h.g=Cc(h.j,x?v:null,!h.u),h.P>0&&(h.O=new wn(p(h.Y,h,h.g),h.P)),v=h.V,x=h.g,P=h.ba;var ee="readystatechange";Array.isArray(ee)||(ee&&(pl[0]=ee.toString()),ee=pl);for(let ae=0;ae<ee.length;ae++){const Se=fe(x,ee[ae],P||v.handleEvent,!1,v.h||v);if(!Se)break;v.g[Se.key]=Se}v=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),Ir(),uf(h.i,h.v,h.B,h.l,h.S,h.u)}gr.prototype.ba=function(h){h=h.target;const v=this.O;v&&br(h)==3?v.j():this.Y(h)},gr.prototype.Y=function(h){try{if(h==this.g)e:{const ze=br(this.g),kt=this.g.ya(),st=this.g.ca();if(!(ze<3)&&(ze!=3||this.g&&(this.h.h||this.g.la()||un(this.g)))){this.K||ze!=4||kt==7||(kt==8||st<=0?Ir(3):Ir(2)),Pr(this);var v=this.g.ca();this.X=v;var x=df(this);if(this.o=v==200,dc(this.i,this.v,this.B,this.l,this.S,ze,v),this.o){if(this.U&&!this.L){t:{if(this.g){var P,ee=this.g;if((P=ee.g?ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(P)){var ae=P;break t}}ae=null}if(h=ae)Mr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Vr(this,h);else{this.o=!1,this.m=3,Ut(12),Vn(this),Xn(this);break e}}if(this.R){h=!0;let Tt;for(;!this.K&&this.C<x.length;)if(Tt=mc(this,x),Tt==nn){ze==4&&(this.m=4,Ut(14),h=!1),Mr(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==zt){this.m=4,Ut(15),Mr(this.i,this.l,x,"[Invalid Chunk]"),h=!1;break}else Mr(this.i,this.l,Tt,null),Vr(this,Tt);if(fc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ze!=4||x.length!=0||this.h.h||(this.m=1,Ut(16),h=!1),this.o=this.o&&h,!h)Mr(this.i,this.l,x,"[Invalid Chunked Response]"),Vn(this),Xn(this);else if(x.length>0&&!this.W){this.W=!0;var Se=this.j;Se.g==this&&Se.aa&&!Se.P&&(Se.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Ml(Se),Se.P=!0,Ut(11))}}else Mr(this.i,this.l,x,null),Vr(this,x);ze==4&&Vn(this),this.o&&!this.K&&(ze==4?xc(this.j,this):(this.o=!1,Nr(this)))}else ui(this.g),v==400&&x.indexOf("Unknown SID")>0?(this.m=3,Ut(12)):(this.m=0,Ut(13)),Vn(this),Xn(this)}}}catch{}};function df(h){if(!fc(h))return h.g.la();const v=un(h.g);if(v==="")return"";let x="";const P=v.length,ee=br(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Vn(h),Xn(h),"";h.h.i=new c.TextDecoder}for(let ae=0;ae<P;ae++)h.h.h=!0,x+=h.h.i.decode(v[ae],{stream:!(ee&&ae==P-1)});return v.length=0,h.h.g+=x,h.C=0,h.h.g}function fc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function mc(h,v){var x=h.C,P=v.indexOf(`
`,x);return P==-1?nn:(x=Number(v.substring(x,P)),isNaN(x)?zt:(P+=1,P+x>v.length?nn:(v=v.slice(P,P+x),h.C=P+x,v)))}gr.prototype.cancel=function(){this.K=!0,Vn(this)};function Nr(h){h.T=Date.now()+h.H,Ba(h,h.H)}function Ba(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=jr(p(h.aa,h),v)}function Pr(h){h.D&&(c.clearTimeout(h.D),h.D=null)}gr.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ys(this.i,this.B),this.M!=2&&(Ir(),Ut(17)),Vn(this),this.m=2,Xn(this)):Ba(this,this.T-h)};function Xn(h){h.j.I==0||h.K||xc(h.j,h)}function Vn(h){Pr(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,gl(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function Vr(h,v){try{var x=h.j;if(x.I!=0&&(x.g==h||Ur(x.h,h))){if(!h.L&&Ur(x.h,h)&&x.I==3){try{var P=x.Ba.g.parse(v)}catch{P=null}if(Array.isArray(P)&&P.length==3){var ee=P;if(ee[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<h.F)Ya(x),Wi(x);else break e;sa(x),Ut(18)}}else x.xa=ee[1],0<x.xa-x.K&&ee[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=jr(p(x.Va,x),6e3));Lr(x.h)<=1&&x.ta&&(x.ta=void 0)}else Gr(x,11)}else if((h.L||x.g==h)&&Ya(x),!k(v))for(ee=x.Ba.g.parse(v),v=0;v<ee.length;v++){let st=ee[v];const Tt=st[0];if(!(Tt<=x.K))if(x.K=Tt,st=st[1],x.I==2)if(st[0]=="c"){x.M=st[1],x.ba=st[2];const er=st[3];er!=null&&(x.ka=er,x.j.info("VER="+x.ka));const Qr=st[4];Qr!=null&&(x.za=Qr,x.j.info("SVER="+x.za));const Er=st[5];Er!=null&&typeof Er=="number"&&Er>0&&(P=1.5*Er,x.O=P,x.j.info("backChannelRequestTimeoutMs_="+P)),P=x;const Sr=h.g;if(Sr){const aa=Sr.g?Sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(aa){var ae=P.h;ae.g||aa.indexOf("spdy")==-1&&aa.indexOf("quic")==-1&&aa.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(El(ae,ae.h),ae.h=null))}if(P.G){const Wa=Sr.g?Sr.g.getResponseHeader("X-HTTP-Session-Id"):null;Wa&&(P.wa=Wa,lt(P.J,P.G,Wa))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-h.F,x.j.info("Handshake RTT: "+x.T+"ms")),P=x;var Se=h;if(P.na=Ac(P,P.L?P.ba:null,P.W),Se.L){Sl(P.h,Se);var ze=Se,kt=P.O;kt&&(ze.H=kt),ze.D&&(Pr(ze),Nr(ze)),P.g=Se}else Ec(P);x.i.length>0&&Hr(x)}else st[0]!="stop"&&st[0]!="close"||Gr(x,7);else x.I==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?Gr(x,7):Ol(x):st[0]!="noop"&&x.l&&x.l.qa(st),x.A=0)}}Ir(4)}catch{}}var Bt=class{constructor(h,v){this.g=h,this.map=v}};function vl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function bl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Lr(h){return h.h?1:h.g?h.g.size:0}function Ur(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function El(h,v){h.g?h.g.add(v):h.h=v}function Sl(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}vl.prototype.cancel=function(){if(this.i=xl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function xl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const x of h.g.values())v=v.concat(x.G);return v}return A(h.i)}var pc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fa(h,v){if(h){h=h.split("&");for(let x=0;x<h.length;x++){const P=h[x].indexOf("=");let ee,ae=null;P>=0?(ee=h[x].substring(0,P),ae=h[x].substring(P+1)):ee=h[x],v(ee,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function Ln(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof Ln?(this.l=h.l,rn(this,h.j),this.o=h.o,this.g=h.g,qi(this,h.u),this.h=h.h,wl(this,vc(h.i)),this.m=h.m):h&&(v=String(h).match(pc))?(this.l=!1,rn(this,v[1]||"",!0),this.o=zr(v[2]||""),this.g=zr(v[3]||"",!0),qi(this,v[4]),this.h=zr(v[5]||"",!0),wl(this,v[6]||"",!0),this.m=zr(v[7]||"")):(this.l=!1,this.i=new Gi(null,this.l))}Ln.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(Zs(v,qa,!0),":");var x=this.g;return(x||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Zs(v,qa,!0),"@"),h.push(oi(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&h.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&h.push("/"),h.push(Zs(x,x.charAt(0)=="/"?Tl:gc,!0))),(x=this.i.toString())&&h.push("?",x),(x=this.m)&&h.push("#",Zs(x,yc)),h.join("")},Ln.prototype.resolve=function(h){const v=Ft(this);let x=!!h.j;x?rn(v,h.j):x=!!h.o,x?v.o=h.o:x=!!h.g,x?v.g=h.g:x=h.u!=null;var P=h.h;if(x)qi(v,h.u);else if(x=!!h.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var ee=v.h.lastIndexOf("/");ee!=-1&&(P=v.h.slice(0,ee+1)+P)}if(ee=P,ee==".."||ee==".")P="";else if(ee.indexOf("./")!=-1||ee.indexOf("/.")!=-1){P=ee.lastIndexOf("/",0)==0,ee=ee.split("/");const ae=[];for(let Se=0;Se<ee.length;){const ze=ee[Se++];ze=="."?P&&Se==ee.length&&ae.push(""):ze==".."?((ae.length>1||ae.length==1&&ae[0]!="")&&ae.pop(),P&&Se==ee.length&&ae.push("")):(ae.push(ze),P=!0)}P=ae.join("/")}else P=ee}return x?v.h=P:x=h.i.toString()!=="",x?wl(v,vc(h.i)):x=!!h.m,x&&(v.m=h.m),v};function Ft(h){return new Ln(h)}function rn(h,v,x){h.j=x?zr(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function qi(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function wl(h,v,x){v instanceof Gi?(h.i=v,Ga(h.i,h.l)):(x||(v=Zs(v,Hi)),h.i=new Gi(v,h.l))}function lt(h,v,x){h.i.set(v,x)}function Js(h){return lt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function zr(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Zs(h,v,x){return typeof h=="string"?(h=encodeURI(h).replace(v,Rn),x&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Rn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var qa=/[#\/\?@]/g,gc=/[#\?:]/g,Tl=/[#\?]/g,Hi=/[#\?@]/g,yc=/#/g;function Gi(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Dn(h){h.g||(h.g=new Map,h.h=0,h.i&&Fa(h.i,function(v,x){h.add(decodeURIComponent(v.replace(/\+/g," ")),x)}))}t=Gi.prototype,t.add=function(h,v){Dn(this),this.i=null,h=Qi(this,h);let x=this.g.get(h);return x||this.g.set(h,x=[]),x.push(v),this.h+=1,this};function _c(h,v){Dn(h),v=Qi(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Al(h,v){return Dn(h),v=Qi(h,v),h.g.has(v)}t.forEach=function(h,v){Dn(this),this.g.forEach(function(x,P){x.forEach(function(ee){h.call(v,ee,P,this)},this)},this)};function Cl(h,v){Dn(h);let x=[];if(typeof v=="string")Al(h,v)&&(x=x.concat(h.g.get(Qi(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)x=x.concat(h[v]);return x}t.set=function(h,v){return Dn(this),this.i=null,h=Qi(this,h),Al(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},t.get=function(h,v){return h?(h=Cl(this,h),h.length>0?String(h[0]):v):v};function Ha(h,v,x){_c(h,v),x.length>0&&(h.i=null,h.g.set(Qi(h,v),A(x)),h.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let P=0;P<v.length;P++){var x=v[P];const ee=oi(x);x=Cl(this,x);for(let ae=0;ae<x.length;ae++){let Se=ee;x[ae]!==""&&(Se+="="+oi(x[ae])),h.push(Se)}}return this.i=h.join("&")};function vc(h){const v=new Gi;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function Qi(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Ga(h,v){v&&!h.j&&(Dn(h),h.i=null,h.g.forEach(function(x,P){const ee=P.toLowerCase();P!=ee&&(_c(this,P),Ha(this,ee,x))},h)),h.j=v}function _r(h,v){const x=new pr;if(c.Image){const P=new Image;P.onload=_(Jn,x,"TestLoadImage: loaded",!0,v,P),P.onerror=_(Jn,x,"TestLoadImage: error",!1,v,P),P.onabort=_(Jn,x,"TestLoadImage: abort",!1,v,P),P.ontimeout=_(Jn,x,"TestLoadImage: timeout",!1,v,P),c.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=h}else v(!1)}function Rl(h,v){const x=new pr,P=new AbortController,ee=setTimeout(()=>{P.abort(),Jn(x,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:P.signal}).then(ae=>{clearTimeout(ee),ae.ok?Jn(x,"TestPingServer: ok",!0,v):Jn(x,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(ee),Jn(x,"TestPingServer: error",!1,v)})}function Jn(h,v,x,P,ee){try{ee&&(ee.onload=null,ee.onerror=null,ee.onabort=null,ee.ontimeout=null),P(x)}catch{}}function Ki(){this.g=new ac}function Br(h){this.i=h.Sb||null,this.h=h.ab||!1}b(Br,oc),Br.prototype.g=function(){return new ea(this.i,this.h)};function ea(h,v){dt.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(ea,dt),t=ea.prototype,t.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,vr(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||c).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,$i(this)),this.readyState=0},t.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,vr(this)),this.g&&(this.readyState=3,vr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Qa(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Qa(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}t.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?$i(this):vr(this),this.readyState==3&&Qa(this)}},t.Oa=function(h){this.g&&(this.response=this.responseText=h,$i(this))},t.Na=function(h){this.g&&(this.response=h,$i(this))},t.ga=function(){this.g&&$i(this)};function $i(h){h.readyState=4,h.l=null,h.j=null,h.B=null,vr(h)}t.setRequestHeader=function(h,v){this.A.append(h,v)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var x=v.next();!x.done;)x=x.value,h.push(x[0]+": "+x[1]),x=v.next();return h.join(`\r
`)};function vr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ea.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Zn(h){let v="";return le(h,function(x,P){v+=P,v+=":",v+=x,v+=`\r
`}),v}function ta(h,v,x){e:{for(P in x){var P=!1;break e}P=!0}P||(x=Zn(x),typeof h=="string"?x!=null&&oi(x):lt(h,v,x))}function ht(h){dt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(ht,dt);var Fr=/^https?$/i,Dl=["POST","PUT"];t=ht.prototype,t.Fa=function(h){this.H=h},t.ea=function(h,v,x,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():_l.g(),this.g.onreadystatechange=E(p(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(ae){na(this,ae);return}if(h=x||"",x=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var ee in P)x.set(ee,P[ee]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const ae of P.keys())x.set(ae,P.get(ae));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(x.keys()).find(ae=>ae.toLowerCase()=="content-type"),ee=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Dl,v,void 0)>=0)||P||ee||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,Se]of x)this.g.setRequestHeader(ae,Se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ae){na(this,ae)}};function na(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,Il(h),li(h)}function Il(h){h.A||(h.A=!0,Xt(h,"complete"),Xt(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Xt(this,"complete"),Xt(this,"abort"),li(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),li(this,!0)),ht.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ra(this):this.Xa())},t.Xa=function(){ra(this)};function ra(h){if(h.h&&typeof l<"u"){if(h.v&&br(h)==4)setTimeout(h.Ca.bind(h),0);else if(Xt(h,"readystatechange"),br(h)==4){h.h=!1;try{const ae=h.ca();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var x;if(!(x=v)){var P;if(P=ae===0){let Se=String(h.D).match(pc)[1]||null;!Se&&c.self&&c.self.location&&(Se=c.self.location.protocol.slice(0,-1)),P=!Fr.test(Se?Se.toLowerCase():"")}x=P}if(x)Xt(h,"complete"),Xt(h,"success");else{h.o=6;try{var ee=br(h)>2?h.g.statusText:""}catch{ee=""}h.l=ee+" ["+h.ca()+"]",Il(h)}}finally{li(h)}}}}function li(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const x=h.g;h.g=null,v||Xt(h,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function br(h){return h.g?h.g.readyState:0}t.ca=function(){try{return br(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),lf(v)}};function un(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ui(h){const v={};h=(h.g&&br(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<h.length;P++){if(k(h[P]))continue;var x=hc(h[P]);const ee=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const ae=v[ee]||[];v[ee]=ae,ae.push(x)}de(v,function(P){return P.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function qr(h,v,x){return x&&x.internalChannelParams&&x.internalChannelParams[h]||v}function Yi(h){this.za=0,this.i=[],this.j=new pr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=qr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=qr("baseRetryDelayMs",5e3,h),this.Za=qr("retryDelaySeedMs",1e4,h),this.Ta=qr("forwardChannelMaxRetries",2,h),this.va=qr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new vl(h&&h.concurrentRequestLimit),this.Ba=new Ki,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Yi.prototype,t.ka=8,t.I=1,t.connect=function(h,v,x,P){Ut(0),this.W=h,this.H=v||{},x&&P!==void 0&&(this.H.OSID=x,this.H.OAID=P),this.F=this.X,this.J=Ac(this,null,this.W),Hr(this)};function Ol(h){if(Ka(h),h.I==3){var v=h.V++,x=Ft(h.J);if(lt(x,"SID",h.M),lt(x,"RID",v),lt(x,"TYPE","terminate"),ia(h,x),v=new gr(h,h.j,v),v.M=2,v.A=Js(Ft(x)),x=!1,c.navigator&&c.navigator.sendBeacon)try{x=c.navigator.sendBeacon(v.A.toString(),"")}catch{}!x&&c.Image&&(new Image().src=v.A,x=!0),x||(v.g=Cc(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Nr(v)}Tc(h)}function Wi(h){h.g&&(Ml(h),h.g.cancel(),h.g=null)}function Ka(h){Wi(h),h.v&&(c.clearTimeout(h.v),h.v=null),Ya(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Hr(h){if(!bl(h.h)&&!h.m){h.m=!0;var v=h.Ea;W||T(),oe||(W(),oe=!0),N.add(v,h),h.D=0}}function $a(h,v){return Lr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=jr(p(h.Ea,h,v),wc(h,h.D)),h.D++,!0)}t.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const ee=new gr(this,this.j,h);let ae=this.o;if(this.U&&(ae?(ae=V(ae),ye(ae,this.U)):ae=this.U),this.u!==null||this.R||(ee.J=ae,ae=null),this.S)e:{for(var v=0,x=0;x<this.i.length;x++){t:{var P=this.i[x];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(v+=P,v>4096){v=x;break e}if(v===4096||x===this.i.length-1){v=x+1;break e}}v=1e3}else v=1e3;v=bc(this,ee,v),x=Ft(this.J),lt(x,"RID",h),lt(x,"CVER",22),this.G&&lt(x,"X-HTTP-Session-Id",this.G),ia(this,x),ae&&(this.R?v="headers="+oi(Zn(ae))+"&"+v:this.u&&ta(x,this.u,ae)),El(this.h,ee),this.Ra&&lt(x,"TYPE","init"),this.S?(lt(x,"$req",v),lt(x,"SID","null"),ee.U=!0,kr(ee,x,null)):kr(ee,x,v),this.I=2}}else this.I==3&&(h?jl(this,h):this.i.length==0||bl(this.h)||jl(this))};function jl(h,v){var x;v?x=v.l:x=h.V++;const P=Ft(h.J);lt(P,"SID",h.M),lt(P,"RID",x),lt(P,"AID",h.K),ia(h,P),h.u&&h.o&&ta(P,h.u,h.o),x=new gr(h,h.j,x,h.D+1),h.u===null&&(x.J=h.o),v&&(h.i=v.G.concat(h.i)),v=bc(h,x,1e3),x.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),El(h.h,x),kr(x,P,v)}function ia(h,v){h.H&&le(h.H,function(x,P){lt(v,P,x)}),h.l&&le({},function(x,P){lt(v,P,x)})}function bc(h,v,x){x=Math.min(h.i.length,x);const P=h.l?p(h.l.Ka,h.l,h):null;e:{var ee=h.i;let ze=-1;for(;;){const kt=["count="+x];ze==-1?x>0?(ze=ee[0].g,kt.push("ofs="+ze)):ze=0:kt.push("ofs="+ze);let st=!0;for(let Tt=0;Tt<x;Tt++){var ae=ee[Tt].g;const er=ee[Tt].map;if(ae-=ze,ae<0)ze=Math.max(0,ee[Tt].g-100),st=!1;else try{ae="req"+ae+"_"||"";try{var Se=er instanceof Map?er:Object.entries(er);for(const[Qr,Er]of Se){let Sr=Er;f(Er)&&(Sr=Fi(Er)),kt.push(ae+Qr+"="+encodeURIComponent(Sr))}}catch(Qr){throw kt.push(ae+"type="+encodeURIComponent("_badmap")),Qr}}catch{P&&P(er)}}if(st){Se=kt.join("&");break e}}Se=void 0}return h=h.i.splice(0,x),v.G=h,Se}function Ec(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;W||T(),oe||(W(),oe=!0),N.add(v,h),h.A=0}}function sa(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=jr(p(h.Da,h),wc(h,h.A)),h.A++,!0)}t.Da=function(){if(this.v=null,Sc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=jr(p(this.Wa,this),h)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ut(10),Wi(this),Sc(this))};function Ml(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Sc(h){h.g=new gr(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=Ft(h.na);lt(v,"RID","rpc"),lt(v,"SID",h.M),lt(v,"AID",h.K),lt(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&lt(v,"TO",h.ia),lt(v,"TYPE","xmlhttp"),ia(h,v),h.u&&h.o&&ta(v,h.u,h.o),h.O&&(h.g.H=h.O);var x=h.g;h=h.ba,x.M=1,x.A=Js(Ft(v)),x.u=null,x.R=!0,za(x,h)}t.Va=function(){this.C!=null&&(this.C=null,Wi(this),sa(this),Ut(19))};function Ya(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function xc(h,v){var x=null;if(h.g==v){Ya(h),Ml(h),h.g=null;var P=2}else if(Ur(h.h,v))x=v.G,Sl(h.h,v),P=1;else return;if(h.I!=0){if(v.o)if(P==1){x=v.u?v.u.length:0,v=Date.now()-v.F;var ee=h.D;P=Ua(),Xt(P,new Or(P,x)),Hr(h)}else Ec(h);else if(ee=v.m,ee==3||ee==0&&v.X>0||!(P==1&&$a(h,v)||P==2&&sa(h)))switch(x&&x.length>0&&(v=h.h,v.i=v.i.concat(x)),ee){case 1:Gr(h,5);break;case 4:Gr(h,10);break;case 3:Gr(h,6);break;default:Gr(h,2)}}}function wc(h,v){let x=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(x*=2),x*v}function Gr(h,v){if(h.j.info("Error code "+v),v==2){var x=p(h.bb,h),P=h.Ua;const ee=!P;P=new Ln(P||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||rn(P,"https"),Js(P),ee?_r(P.toString(),x):Rl(P.toString(),x)}else Ut(2);h.I=0,h.l&&h.l.pa(v),Tc(h),Ka(h)}t.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function Tc(h){if(h.I=0,h.ja=[],h.l){const v=xl(h.h);(v.length!=0||h.i.length!=0)&&(w(h.ja,v),w(h.ja,h.i),h.h.i.length=0,A(h.i),h.i.length=0),h.l.oa()}}function Ac(h,v,x){var P=x instanceof Ln?Ft(x):new Ln(x);if(P.g!="")v&&(P.g=v+"."+P.g),qi(P,P.u);else{var ee=c.location;P=ee.protocol,v=v?v+"."+ee.hostname:ee.hostname,ee=+ee.port;const ae=new Ln(null);P&&rn(ae,P),v&&(ae.g=v),ee&&qi(ae,ee),x&&(ae.h=x),P=ae}return x=h.G,v=h.wa,x&&v&&lt(P,x,v),lt(P,"VER",h.ka),ia(h,P),P}function Cc(h,v,x){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new ht(new Br({ab:x})):new ht(h.ma),v.Fa(h.L),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rc(){}t=Rc.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Xi(){}Xi.prototype.g=function(h,v){return new Tn(h,v)};function Tn(h,v){dt.call(this),this.g=new Yi(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!k(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!k(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new ci(this)}b(Tn,dt),Tn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){Ol(this.g)},Tn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var x={};x.__data__=h,h=x}else this.v&&(x={},x.__data__=Fi(h),h=x);v.i.push(new Bt(v.Ya++,h)),v.I==3&&Hr(v)},Tn.prototype.N=function(){this.g.l=null,delete this.j,Ol(this.g),delete this.g,Tn.Z.N.call(this)};function Dc(h){ln.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const x in v){h=x;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}b(Dc,ln);function Ic(){Wn.call(this),this.status=1}b(Ic,Wn);function ci(h){this.g=h}b(ci,Rc),ci.prototype.ra=function(){Xt(this.g,"a")},ci.prototype.qa=function(h){Xt(this.g,new Dc(h))},ci.prototype.pa=function(h){Xt(this.g,new Ic)},ci.prototype.oa=function(){Xt(this.g,"b")},Xi.prototype.createWebChannel=Xi.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,tx=function(){return new Xi},ex=function(){return Ua()},ZS=Mt,Bp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ws.NO_ERROR=0,Ws.TIMEOUT=8,Ws.HTTP_ERROR=6,Gd=Ws,yl.COMPLETE="complete",JS=yl,lc.EventType=mr,mr.OPEN="a",mr.CLOSE="b",mr.ERROR="c",mr.MESSAGE="d",dt.prototype.listen=dt.prototype.J,Su=lc,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,XS=ht}).apply(typeof Pd<"u"?Pd:typeof self<"u"?self:typeof window<"u"?window:{});const Ob="@firebase/firestore",jb="4.9.3";class bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");let il="12.7.0";const Ra=new Ag("@firebase/firestore");function Oo(){return Ra.logLevel}function Te(t,...e){if(Ra.logLevel<=Xe.DEBUG){const n=e.map(Dg);Ra.debug(`Firestore (${il}): ${t}`,...n)}}function Ni(t,...e){if(Ra.logLevel<=Xe.ERROR){const n=e.map(Dg);Ra.error(`Firestore (${il}): ${t}`,...n)}}function Fo(t,...e){if(Ra.logLevel<=Xe.WARN){const n=e.map(Dg);Ra.warn(`Firestore (${il}): ${t}`,...n)}}function Dg(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ke(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,nx(t,i,n)}function nx(t,e,n){let i=`FIRESTORE (${il}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ni(i),new Error(i)}function ot(t,e,n,i){let a="Unexpected state";typeof n=="string"?a=n:i=n,t||nx(e,a,i)}function Le(t,e){return t}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends zi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ii{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class rx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(bn.UNAUTHENTICATED)))}shutdown(){}}class DI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class II{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ot(this.o===void 0,42304);let i=this.i;const a=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let l=new Ii;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ii,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const d=l;e.enqueueRetryable((async()=>{await d.promise,await a(this.currentUser)}))},f=d=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>f(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?f(d):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ii)}}),0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ot(typeof i.accessToken=="string",31837,{l:i}),new rx(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string",2055,{h:e}),new bn(e)}}class OI{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jI{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new OI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Mb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ar(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ot(this.o===void 0,3512);const i=l=>{l.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Te("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Mb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ot(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Mb(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function kI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}class Ig{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=kI(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<n&&(i+=e.charAt(a[l]%62))}return i}}function Je(t,e){return t<e?-1:t>e?1:0}function Fp(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const a=t.charAt(i),l=e.charAt(i);if(a!==l)return vp(a)===vp(l)?Je(a,l):vp(a)?1:-1}return Je(t.length,e.length)}const NI=55296,PI=57343;function vp(t){const e=t.charCodeAt(0);return e>=NI&&e<=PI}function qo(t,e,n){return t.length===e.length&&t.every(((i,a)=>n(i,e[a])))}const kb="__name__";class Xr{constructor(e,n,i){n===void 0?n=0:n>e.length&&ke(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&ke(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Xr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xr?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let a=0;a<i;a++){const l=Xr.compareSegments(e.get(a),n.get(a));if(l!==0)return l}return Je(e.length,n.length)}static compareSegments(e,n){const i=Xr.isNumericId(e),a=Xr.isNumericId(n);return i&&!a?-1:!i&&a?1:i&&a?Xr.extractNumericId(e).compare(Xr.extractNumericId(n)):Fp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Is.fromString(e.substring(4,e.length-2))}}class bt extends Xr{construct(e,n,i){return new bt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new we(ge.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((a=>a.length>0)))}return new bt(n)}static emptyPath(){return new bt([])}}const VI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gn extends Xr{construct(e,n,i){return new gn(e,n,i)}static isValidIdentifier(e){return VI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kb}static keyField(){return new gn([kb])}static fromServerFormat(e){const n=[];let i="",a=0;const l=()=>{if(i.length===0)throw new we(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new we(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new we(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(i+=f,a++):(l(),a++)}if(l(),c)throw new we(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gn(n)}static emptyPath(){return new gn([])}}class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(bt.fromString(e))}static fromName(e){return new Oe(bt.fromString(e).popFirst(5))}static empty(){return new Oe(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return bt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new bt(e.slice()))}}function ix(t,e,n){if(!n)throw new we(ge.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function LI(t,e,n,i){if(e===!0&&i===!0)throw new we(ge.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Nb(t){if(!Oe.isDocumentKey(t))throw new we(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Pb(t){if(Oe.isDocumentKey(t))throw new we(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sx(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Nh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ke(12329,{type:typeof t})}function Pi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new we(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nh(t);throw new we(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Wt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ku(t,e){if(!sx(t))throw new we(ge.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const c=t[i];if(a&&typeof c!==a){n=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){n=`Expected '${i}' field to equal '${l.value}'`;break}}if(n)throw new we(ge.INVALID_ARGUMENT,n);return!0}const Vb=-62135596800,Lb=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Lb);return new wt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new we(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new we(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Vb)throw new we(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Lb}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ku(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Vb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:Wt("string",wt._jsonSchemaVersion),seconds:Wt("number"),nanoseconds:Wt("number")};class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new wt(0,0))}static max(){return new Pe(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Nu=-1;function UI(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,a=Pe.fromTimestamp(i===1e9?new wt(n+1,0):new wt(n,i));return new ks(a,Oe.empty(),e)}function zI(t){return new ks(t.readTime,t.key,Nu)}class ks{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ks(Pe.min(),Oe.empty(),Nu)}static max(){return new ks(Pe.max(),Oe.empty(),Nu)}}function BI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Oe.comparator(t.documentKey,e.documentKey),n!==0?n:Je(t.largestBatchId,e.largestBatchId))}const FI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function sl(t){if(t.code!==ge.FAILED_PRECONDITION||t.message!==FI)throw t;Te("LocalStore","Unexpectedly lost primary lease")}class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new _e(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(i,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof _e?n:_e.resolve(n)}catch(n){return _e.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):_e.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):_e.reject(n)}static resolve(e){return new _e(((n,i)=>{n(e)}))}static reject(e){return new _e(((n,i)=>{i(e)}))}static waitFor(e){return new _e(((n,i)=>{let a=0,l=0,c=!1;e.forEach((f=>{++a,f.next((()=>{++l,c&&l===a&&n()}),(d=>i(d)))})),c=!0,l===a&&n()}))}static or(e){let n=_e.resolve(!1);for(const i of e)n=n.next((a=>a?_e.resolve(a):i()));return n}static forEach(e,n){const i=[];return e.forEach(((a,l)=>{i.push(n.call(this,a,l))})),this.waitFor(i)}static mapArray(e,n){return new _e(((i,a)=>{const l=e.length,c=new Array(l);let f=0;for(let d=0;d<l;d++){const p=d;n(e[p]).next((_=>{c[p]=_,++f,f===l&&i(c)}),(_=>a(_)))}}))}static doWhile(e,n){return new _e(((i,a)=>{const l=()=>{e()===!0?n().next((()=>{l()}),a):i()};l()}))}}function HI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function al(t){return t.name==="IndexedDbTransactionError"}class Ph{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ph.ce=-1;const Og=-1;function Vh(t){return t==null}function lh(t){return t===0&&1/t==-1/0}function GI(t){return typeof t=="number"&&Number.isInteger(t)&&!lh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const ax="";function QI(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ub(e)),e=KI(t.get(n),e);return Ub(e)}function KI(t,e){let n=e;const i=t.length;for(let a=0;a<i;a++){const l=t.charAt(a);switch(l){case"\0":n+="";break;case ax:n+="";break;default:n+=l}}return n}function Ub(t){return t+ax+""}function zb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ox(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class It{constructor(e,n){this.comparator=e,this.root=n||pn.EMPTY}insert(e,n){return new It(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new It(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return n+i.left.size;a<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vd(this.root,e,this.comparator,!0)}}class Vd{constructor(e,n,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?i(e.key,n):1,n&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,n,i,a,l){this.key=e,this.value=n,this.color=i??pn.RED,this.left=a??pn.EMPTY,this.right=l??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,a,l){return new pn(e??this.key,n??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,n,i),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return pn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,n,i,a,l){return this}insert(e,n,i){return new pn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class tn{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Bb(this.data.getIterator())}getIteratorFrom(e){return new Bb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof tn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new tn(this.comparator);return n.data=e,n}}class Bb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Kn{constructor(e){this.fields=e,e.sort(gn.comparator)}static empty(){return new Kn([])}unionWith(e){let n=new tn(gn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Kn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qo(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}class lx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new lx("Invalid base64 string: "+l):l}})(e);return new yn(n)}static fromUint8Array(e){const n=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new yn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const $I=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ns(t){if(ot(!!t,39018),typeof t=="string"){let e=0;const n=$I.exec(t);if(ot(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vt(t.seconds),nanos:Vt(t.nanos)}}function Vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ps(t){return typeof t=="string"?yn.fromBase64String(t):yn.fromUint8Array(t)}const ux="server_timestamp",cx="__type__",dx="__previous_value__",hx="__local_write_time__";function jg(t){return(t?.mapValue?.fields||{})[cx]?.stringValue===ux}function Lh(t){const e=t.mapValue.fields[dx];return jg(e)?Lh(e):e}function Pu(t){const e=Ns(t.mapValue.fields[hx].timestampValue);return new wt(e.seconds,e.nanos)}class YI{constructor(e,n,i,a,l,c,f,d,p,_){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=_}}const uh="(default)";class Vu{constructor(e,n){this.projectId=e,this.database=n||uh}static empty(){return new Vu("","")}get isDefaultDatabase(){return this.database===uh}isEqual(e){return e instanceof Vu&&e.projectId===this.projectId&&e.database===this.database}}const fx="__type__",WI="__max__",Ld={mapValue:{}},mx="__vector__",ch="value";function Vs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?jg(t)?4:JI(t)?9007199254740991:XI(t)?10:11:ke(28295,{value:t})}function ai(t,e){if(t===e)return!0;const n=Vs(t);if(n!==Vs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pu(t).isEqual(Pu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Ns(a.timestampValue),f=Ns(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,l){return Ps(a.bytesValue).isEqual(Ps(l.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,l){return Vt(a.geoPointValue.latitude)===Vt(l.geoPointValue.latitude)&&Vt(a.geoPointValue.longitude)===Vt(l.geoPointValue.longitude)})(t,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Vt(a.integerValue)===Vt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Vt(a.doubleValue),f=Vt(l.doubleValue);return c===f?lh(c)===lh(f):isNaN(c)&&isNaN(f)}return!1})(t,e);case 9:return qo(t.arrayValue.values||[],e.arrayValue.values||[],ai);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(zb(c)!==zb(f))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(f[d]===void 0||!ai(c[d],f[d])))return!1;return!0})(t,e);default:return ke(52216,{left:t})}}function Lu(t,e){return(t.values||[]).find((n=>ai(n,e)))!==void 0}function Ho(t,e){if(t===e)return 0;const n=Vs(t),i=Vs(e);if(n!==i)return Je(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Je(t.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=Vt(l.integerValue||l.doubleValue),d=Vt(c.integerValue||c.doubleValue);return f<d?-1:f>d?1:f===d?0:isNaN(f)?isNaN(d)?0:-1:1})(t,e);case 3:return Fb(t.timestampValue,e.timestampValue);case 4:return Fb(Pu(t),Pu(e));case 5:return Fp(t.stringValue,e.stringValue);case 6:return(function(l,c){const f=Ps(l),d=Ps(c);return f.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),d=c.split("/");for(let p=0;p<f.length&&p<d.length;p++){const _=Je(f[p],d[p]);if(_!==0)return _}return Je(f.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=Je(Vt(l.latitude),Vt(c.latitude));return f!==0?f:Je(Vt(l.longitude),Vt(c.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return qb(t.arrayValue,e.arrayValue);case 10:return(function(l,c){const f=l.fields||{},d=c.fields||{},p=f[ch]?.arrayValue,_=d[ch]?.arrayValue,b=Je(p?.values?.length||0,_?.values?.length||0);return b!==0?b:qb(p,_)})(t.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Ld.mapValue&&c===Ld.mapValue)return 0;if(l===Ld.mapValue)return 1;if(c===Ld.mapValue)return-1;const f=l.fields||{},d=Object.keys(f),p=c.fields||{},_=Object.keys(p);d.sort(),_.sort();for(let b=0;b<d.length&&b<_.length;++b){const E=Fp(d[b],_[b]);if(E!==0)return E;const A=Ho(f[d[b]],p[_[b]]);if(A!==0)return A}return Je(d.length,_.length)})(t.mapValue,e.mapValue);default:throw ke(23264,{he:n})}}function Fb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Je(t,e);const n=Ns(t),i=Ns(e),a=Je(n.seconds,i.seconds);return a!==0?a:Je(n.nanos,i.nanos)}function qb(t,e){const n=t.values||[],i=e.values||[];for(let a=0;a<n.length&&a<i.length;++a){const l=Ho(n[a],i[a]);if(l)return l}return Je(n.length,i.length)}function Go(t){return qp(t)}function qp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=Ns(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ps(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Oe.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",a=!0;for(const l of n.values||[])a?a=!1:i+=",",i+=qp(l);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${qp(n.fields[c])}`;return a+"}"})(t.mapValue):ke(61005,{value:t})}function Qd(t){switch(Vs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lh(t);return e?16+Qd(e):16;case 5:return 2*t.stringValue.length;case 6:return Ps(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Qd(l)),0)})(t.arrayValue);case 10:case 11:return(function(i){let a=0;return Fs(i.fields,((l,c)=>{a+=l.length+Qd(c)})),a})(t.mapValue);default:throw ke(13486,{value:t})}}function Hb(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hp(t){return!!t&&"integerValue"in t}function Mg(t){return!!t&&"arrayValue"in t}function Gb(t){return!!t&&"nullValue"in t}function Qb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kd(t){return!!t&&"mapValue"in t}function XI(t){return(t?.mapValue?.fields||{})[fx]?.stringValue===mx}function Cu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Fs(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Cu(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Cu(t.arrayValue.values[n]);return e}return{...t}}function JI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===WI}class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Kd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cu(n)}setAll(e){let n=gn.emptyPath(),i={},a=[];e.forEach(((c,f)=>{if(!n.isImmediateParentOf(f)){const d=this.getFieldsMap(n);this.applyChanges(d,i,a),i={},a=[],n=f.popLast()}c?i[f.lastSegment()]=Cu(c):a.push(f.lastSegment())}));const l=this.getFieldsMap(n);this.applyChanges(l,i,a)}delete(e){const n=this.field(e.popLast());Kd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ai(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=n.mapValue.fields[e.get(i)];Kd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,i){Fs(n,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new Pn(Cu(this.value))}}function px(t){const e=[];return Fs(t.fields,((n,i)=>{const a=new gn([n]);if(Kd(i)){const l=px(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Kn(e)}class En{constructor(e,n,i,a,l,c,f){this.key=e,this.documentType=n,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new En(e,0,Pe.min(),Pe.min(),Pe.min(),Pn.empty(),0)}static newFoundDocument(e,n,i,a){return new En(e,1,n,Pe.min(),i,a,0)}static newNoDocument(e,n){return new En(e,2,n,Pe.min(),Pe.min(),Pn.empty(),0)}static newUnknownDocument(e,n){return new En(e,3,n,Pe.min(),Pe.min(),Pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof En&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new En(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class dh{constructor(e,n){this.position=e,this.inclusive=n}}function Kb(t,e,n){let i=0;for(let a=0;a<t.position.length;a++){const l=e[a],c=t.position[a];if(l.field.isKeyField()?i=Oe.comparator(Oe.fromName(c.referenceValue),n.key):i=Ho(c,n.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function $b(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ai(t.position[n],e.position[n]))return!1;return!0}class hh{constructor(e,n="asc"){this.field=e,this.dir=n}}function ZI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class gx{}class Yt extends gx{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new t2(e,n,i):n==="array-contains"?new i2(e,i):n==="in"?new s2(e,i):n==="not-in"?new a2(e,i):n==="array-contains-any"?new o2(e,i):new Yt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new n2(e,i):new r2(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ho(n,this.value)):n!==null&&Vs(this.value)===Vs(n)&&this.matchesComparison(Ho(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rr extends gx{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Rr(e,n)}matches(e){return yx(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function yx(t){return t.op==="and"}function _x(t){return e2(t)&&yx(t)}function e2(t){for(const e of t.filters)if(e instanceof Rr)return!1;return!0}function Gp(t){if(t instanceof Yt)return t.field.canonicalString()+t.op.toString()+Go(t.value);if(_x(t))return t.filters.map((e=>Gp(e))).join(",");{const e=t.filters.map((n=>Gp(n))).join(",");return`${t.op}(${e})`}}function vx(t,e){return t instanceof Yt?(function(i,a){return a instanceof Yt&&i.op===a.op&&i.field.isEqual(a.field)&&ai(i.value,a.value)})(t,e):t instanceof Rr?(function(i,a){return a instanceof Rr&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,f)=>l&&vx(c,a.filters[f])),!0):!1})(t,e):void ke(19439)}function bx(t){return t instanceof Yt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Go(n.value)}`})(t):t instanceof Rr?(function(n){return n.op.toString()+" {"+n.getFilters().map(bx).join(" ,")+"}"})(t):"Filter"}class t2 extends Yt{constructor(e,n,i){super(e,n,i),this.key=Oe.fromName(i.referenceValue)}matches(e){const n=Oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class n2 extends Yt{constructor(e,n){super(e,"in",n),this.keys=Ex("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class r2 extends Yt{constructor(e,n){super(e,"not-in",n),this.keys=Ex("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Ex(t,e){return(e.arrayValue?.values||[]).map((n=>Oe.fromName(n.referenceValue)))}class i2 extends Yt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Mg(n)&&Lu(n.arrayValue,this.value)}}class s2 extends Yt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Lu(this.value.arrayValue,n)}}class a2 extends Yt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Lu(this.value.arrayValue,n)}}class o2 extends Yt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Mg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Lu(this.value.arrayValue,i)))}}class l2{constructor(e,n=null,i=[],a=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function Yb(t,e=null,n=[],i=[],a=null,l=null,c=null){return new l2(t,e,n,i,a,l,c)}function kg(t){const e=Le(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Gp(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Vh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Go(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Go(i))).join(",")),e.Te=n}return e.Te}function Ng(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ZI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$b(t.startAt,e.startAt)&&$b(t.endAt,e.endAt)}function Qp(t){return Oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class $u{constructor(e,n=null,i=[],a=[],l=null,c="F",f=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function u2(t,e,n,i,a,l,c,f){return new $u(t,e,n,i,a,l,c,f)}function Pg(t){return new $u(t)}function Wb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Sx(t){return t.collectionGroup!==null}function Ru(t){const e=Le(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),n.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new tn(gn.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new hh(l,i))})),n.has(gn.keyField().canonicalString())||e.Ie.push(new hh(gn.keyField(),i))}return e.Ie}function Zr(t){const e=Le(t);return e.Ee||(e.Ee=c2(e,Ru(t))),e.Ee}function c2(t,e){if(t.limitType==="F")return Yb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new hh(a.field,l)}));const n=t.endAt?new dh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new dh(t.startAt.position,t.startAt.inclusive):null;return Yb(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Kp(t,e){const n=t.filters.concat([e]);return new $u(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $p(t,e,n){return new $u(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Uh(t,e){return Ng(Zr(t),Zr(e))&&t.limitType===e.limitType}function xx(t){return`${kg(Zr(t))}|lt:${t.limitType}`}function jo(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((a=>bx(a))).join(", ")}]`),Vh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((a=>Go(a))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((a=>Go(a))).join(",")),`Target(${i})`})(Zr(t))}; limitType=${t.limitType})`}function zh(t,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Oe.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(t,e)&&(function(i,a){for(const l of Ru(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(t,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(t,e)&&(function(i,a){return!(i.startAt&&!(function(c,f,d){const p=Kb(c,f,d);return c.inclusive?p<=0:p<0})(i.startAt,Ru(i),a)||i.endAt&&!(function(c,f,d){const p=Kb(c,f,d);return c.inclusive?p>=0:p>0})(i.endAt,Ru(i),a))})(t,e)}function d2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wx(t){return(e,n)=>{let i=!1;for(const a of Ru(t)){const l=h2(a,e,n);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function h2(t,e,n){const i=t.field.isKeyField()?Oe.comparator(e.key,n.key):(function(l,c,f){const d=c.data.field(l),p=f.data.field(l);return d!==null&&p!==null?Ho(d,p):ke(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ke(19790,{direction:t.dir})}}class ka{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[n]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,((n,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return ox(this.inner)}size(){return this.innerSize}}const f2=new It(Oe.comparator);function Vi(){return f2}const Tx=new It(Oe.comparator);function xu(...t){let e=Tx;for(const n of t)e=e.insert(n.key,n);return e}function Ax(t){let e=Tx;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function xa(){return Du()}function Cx(){return Du()}function Du(){return new ka((t=>t.toString()),((t,e)=>t.isEqual(e)))}const m2=new It(Oe.comparator),p2=new tn(Oe.comparator);function Ze(...t){let e=p2;for(const n of t)e=e.add(n);return e}const g2=new tn(Je);function y2(){return g2}function Vg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lh(e)?"-0":e}}function Rx(t){return{integerValue:""+t}}function _2(t,e){return GI(e)?Rx(e):Vg(t,e)}class Bh{constructor(){this._=void 0}}function v2(t,e,n){return t instanceof fh?(function(a,l){const c={fields:{[cx]:{stringValue:ux},[hx]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&jg(l)&&(l=Lh(l)),l&&(c.fields[dx]=l),{mapValue:c}})(n,e):t instanceof Qo?Ix(t,e):t instanceof Uu?Ox(t,e):(function(a,l){const c=Dx(a,l),f=Xb(c)+Xb(a.Ae);return Hp(c)&&Hp(a.Ae)?Rx(f):Vg(a.serializer,f)})(t,e)}function b2(t,e,n){return t instanceof Qo?Ix(t,e):t instanceof Uu?Ox(t,e):n}function Dx(t,e){return t instanceof mh?(function(i){return Hp(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class fh extends Bh{}class Qo extends Bh{constructor(e){super(),this.elements=e}}function Ix(t,e){const n=jx(e);for(const i of t.elements)n.some((a=>ai(a,i)))||n.push(i);return{arrayValue:{values:n}}}class Uu extends Bh{constructor(e){super(),this.elements=e}}function Ox(t,e){let n=jx(e);for(const i of t.elements)n=n.filter((a=>!ai(a,i)));return{arrayValue:{values:n}}}class mh extends Bh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Xb(t){return Vt(t.integerValue||t.doubleValue)}function jx(t){return Mg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class E2{constructor(e,n){this.field=e,this.transform=n}}function S2(t,e){return t.field.isEqual(e.field)&&(function(i,a){return i instanceof Qo&&a instanceof Qo||i instanceof Uu&&a instanceof Uu?qo(i.elements,a.elements,ai):i instanceof mh&&a instanceof mh?ai(i.Ae,a.Ae):i instanceof fh&&a instanceof fh})(t.transform,e.transform)}class x2{constructor(e,n){this.version=e,this.transformResults=n}}class ei{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ei}static exists(e){return new ei(void 0,e)}static updateTime(e){return new ei(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $d(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fh{}function Mx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nx(t.key,ei.none()):new Yu(t.key,t.data,ei.none());{const n=t.data,i=Pn.empty();let a=new tn(gn.comparator);for(let l of e.fields)if(!a.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new qs(t.key,i,new Kn(a.toArray()),ei.none())}}function w2(t,e,n){t instanceof Yu?(function(a,l,c){const f=a.value.clone(),d=Zb(a.fieldTransforms,l,c.transformResults);f.setAll(d),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(t,e,n):t instanceof qs?(function(a,l,c){if(!$d(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=Zb(a.fieldTransforms,l,c.transformResults),d=l.data;d.setAll(kx(a)),d.setAll(f),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(t,e,n):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,n)}function Iu(t,e,n,i){return t instanceof Yu?(function(l,c,f,d){if(!$d(l.precondition,c))return f;const p=l.value.clone(),_=eE(l.fieldTransforms,d,c);return p.setAll(_),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(t,e,n,i):t instanceof qs?(function(l,c,f,d){if(!$d(l.precondition,c))return f;const p=eE(l.fieldTransforms,d,c),_=c.data;return _.setAll(kx(l)),_.setAll(p),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(t,e,n,i):(function(l,c,f){return $d(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(t,e,n)}function T2(t,e){let n=null;for(const i of t.fieldTransforms){const a=e.data.field(i.field),l=Dx(i.transform,a||null);l!=null&&(n===null&&(n=Pn.empty()),n.set(i.field,l))}return n||null}function Jb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&qo(i,a,((l,c)=>S2(l,c)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Yu extends Fh{constructor(e,n,i,a=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class qs extends Fh{constructor(e,n,i,a,l=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function kx(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function Zb(t,e,n){const i=new Map;ot(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let a=0;a<n.length;a++){const l=t[a],c=l.transform,f=e.data.field(l.field);i.set(l.field,b2(c,f,n[a]))}return i}function eE(t,e,n){const i=new Map;for(const a of t){const l=a.transform,c=n.data.field(a.field);i.set(a.field,v2(l,c,e))}return i}class Nx extends Fh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class A2 extends Fh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class C2{constructor(e,n,i,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&w2(l,e,i[a])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Iu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Iu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Cx();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=n.has(a.key)?null:f;const d=Mx(c,f);d!==null&&i.set(a.key,d),c.isValidDocument()||c.convertToNoDocument(Pe.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&qo(this.mutations,e.mutations,((n,i)=>Jb(n,i)))&&qo(this.baseMutations,e.baseMutations,((n,i)=>Jb(n,i)))}}class Lg{constructor(e,n,i,a){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=a}static from(e,n,i){ot(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return m2})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new Lg(e,n,i,a)}}class R2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class D2{constructor(e,n){this.count=e,this.unchangedNames=n}}var Kt,nt;function I2(t){switch(t){case ge.OK:return ke(64938);case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0;default:return ke(15467,{code:t})}}function Px(t){if(t===void 0)return Ni("GRPC error has no .code"),ge.UNKNOWN;switch(t){case Kt.OK:return ge.OK;case Kt.CANCELLED:return ge.CANCELLED;case Kt.UNKNOWN:return ge.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return ge.INTERNAL;case Kt.UNAVAILABLE:return ge.UNAVAILABLE;case Kt.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Kt.NOT_FOUND:return ge.NOT_FOUND;case Kt.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Kt.ABORTED:return ge.ABORTED;case Kt.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Kt.DATA_LOSS:return ge.DATA_LOSS;default:return ke(39323,{code:t})}}(nt=Kt||(Kt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";function O2(){return new TextEncoder}const j2=new Is([4294967295,4294967295],0);function tE(t){const e=O2().encode(t),n=new WS;return n.update(e),new Uint8Array(n.digest())}function nE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Is([n,i],0),new Is([a,l],0)]}class Ug{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new wu(`Invalid padding: ${n}`);if(i<0)throw new wu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new wu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new wu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Is.fromNumber(this.ge)}ye(e,n,i){let a=e.add(n.multiply(Is.fromNumber(i)));return a.compare(j2)===1&&(a=new Is([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=tE(e),[i,a]=nE(n);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,n,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Ug(l,a,n);return i.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const n=tE(e),[i,a]=nE(n);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.Se(c)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class wu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class qh{constructor(e,n,i,a,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const a=new Map;return a.set(e,Wu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new qh(Pe.min(),a,new It(Je),Vi(),Ze())}}class Wu{constructor(e,n,i,a,l){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Wu(i,n,Ze(),Ze(),Ze())}}class Yd{constructor(e,n,i,a){this.be=e,this.removedTargetIds=n,this.key=i,this.De=a}}class Vx{constructor(e,n){this.targetId=e,this.Ce=n}}class Lx{constructor(e,n,i=yn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=a}}class rE{constructor(){this.ve=0,this.Fe=iE(),this.Me=yn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),n=Ze(),i=Ze();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:i=i.add(a);break;default:ke(38017,{changeType:l})}})),new Wu(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=iE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ot(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class M2{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vi(),this.Je=Ud(),this.He=Ud(),this.Ye=new It(Je)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:ke(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,a)=>{this.rt(a)&&n(a)}))}st(e){const n=e.targetId,i=e.Ce.count,a=this.ot(n);if(a){const l=a.target;if(Qp(l))if(i===0){const c=new Oe(l.path);this.et(n,c,En.newNoDocument(c,Pe.min()))}else ot(i===1,20013,{expectedCount:i});else{const c=this._t(n);if(c!==i){const f=this.ut(e),d=f?this.ct(f,e,c):1;if(d!==0){this.it(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=n;let c,f;try{c=Ps(i).toUint8Array()}catch(d){if(d instanceof lx)return Fo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{f=new Ug(c,a,l)}catch(d){return Fo(d instanceof wu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return f.ge===0?null:f}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(n,l,null),a++)})),a}Tt(e){const n=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Qp(f.target)){const d=new Oe(f.target.path);this.It(d).has(c)||this.Et(c,d)||this.et(c,d,En.newNoDocument(d,e))}l.Be&&(n.set(c,l.ke()),l.qe())}}));let i=Ze();this.He.forEach(((l,c)=>{let f=!0;c.forEachWhile((d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new qh(e,n,this.Ye,this.je,i);return this.je=Vi(),this.Je=Ud(),this.He=Ud(),this.Ye=new It(Je),a}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new rE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new tn(Je),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new tn(Je),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Te("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new rE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ud(){return new It(Oe.comparator)}function iE(){return new It(Oe.comparator)}const k2={asc:"ASCENDING",desc:"DESCENDING"},N2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},P2={and:"AND",or:"OR"};class V2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Yp(t,e){return t.useProto3Json||Vh(e)?e:{value:e}}function ph(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ux(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function L2(t,e){return ph(t,e.toTimestamp())}function ti(t){return ot(!!t,49232),Pe.fromTimestamp((function(n){const i=Ns(n);return new wt(i.seconds,i.nanos)})(t))}function zg(t,e){return Wp(t,e).canonicalString()}function Wp(t,e){const n=(function(a){return new bt(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?n:n.child(e)}function zx(t){const e=bt.fromString(t);return ot(Gx(e),10190,{key:e.toString()}),e}function Xp(t,e){return zg(t.databaseId,e.path)}function bp(t,e){const n=zx(e);if(n.get(1)!==t.databaseId.projectId)throw new we(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new we(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Oe(Fx(n))}function Bx(t,e){return zg(t.databaseId,e)}function U2(t){const e=zx(t);return e.length===4?bt.emptyPath():Fx(e)}function Jp(t){return new bt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Fx(t){return ot(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function sE(t,e,n){return{name:Xp(t,e),fields:n.value.mapValue.fields}}function z2(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ke(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,_){return p.useProto3Json?(ot(_===void 0||typeof _=="string",58123),yn.fromBase64String(_||"")):(ot(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),yn.fromUint8Array(_||new Uint8Array))})(t,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(p){const _=p.code===void 0?ge.UNKNOWN:Px(p.code);return new we(_,p.message||"")})(c);n=new Lx(i,a,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=bp(t,i.document.name),l=ti(i.document.updateTime),c=i.document.createTime?ti(i.document.createTime):Pe.min(),f=new Pn({mapValue:{fields:i.document.fields}}),d=En.newFoundDocument(a,l,c,f),p=i.targetIds||[],_=i.removedTargetIds||[];n=new Yd(p,_,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=bp(t,i.document),l=i.readTime?ti(i.readTime):Pe.min(),c=En.newNoDocument(a,l),f=i.removedTargetIds||[];n=new Yd([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=bp(t,i.document),l=i.removedTargetIds||[];n=new Yd([],l,a,null)}else{if(!("filter"in e))return ke(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new D2(a,l),f=i.targetId;n=new Vx(f,c)}}return n}function B2(t,e){let n;if(e instanceof Yu)n={update:sE(t,e.key,e.value)};else if(e instanceof Nx)n={delete:Xp(t,e.key)};else if(e instanceof qs)n={update:sE(t,e.key,e.data),updateMask:W2(e.fieldMask)};else{if(!(e instanceof A2))return ke(16599,{Vt:e.type});n={verify:Xp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const f=c.transform;if(f instanceof fh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Qo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Uu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof mh)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw ke(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:L2(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ke(27497)})(t,e.precondition)),n}function F2(t,e){return t&&t.length>0?(ot(e!==void 0,14353),t.map((n=>(function(a,l){let c=a.updateTime?ti(a.updateTime):ti(l);return c.isEqual(Pe.min())&&(c=ti(l)),new x2(c,a.transformResults||[])})(n,e)))):[]}function q2(t,e){return{documents:[Bx(t,e.path)]}}function H2(t,e){const n={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Bx(t,a);const l=(function(p){if(p.length!==0)return Hx(Rr.create(p,"and"))})(e.filters);l&&(n.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((_=>(function(E){return{field:Mo(E.field),direction:K2(E.dir)}})(_)))})(e.orderBy);c&&(n.structuredQuery.orderBy=c);const f=Yp(t,e.limit);return f!==null&&(n.structuredQuery.limit=f),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:a}}function G2(t){let e=U2(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let a=null;if(i>0){ot(i===1,65062);const _=n.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];n.where&&(l=(function(b){const E=qx(b);return E instanceof Rr&&_x(E)?E.getFilters():[E]})(n.where));let c=[];n.orderBy&&(c=(function(b){return b.map((E=>(function(w){return new hh(ko(w.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(E)))})(n.orderBy));let f=null;n.limit&&(f=(function(b){let E;return E=typeof b=="object"?b.value:b,Vh(E)?null:E})(n.limit));let d=null;n.startAt&&(d=(function(b){const E=!!b.before,A=b.values||[];return new dh(A,E)})(n.startAt));let p=null;return n.endAt&&(p=(function(b){const E=!b.before,A=b.values||[];return new dh(A,E)})(n.endAt)),u2(e,a,c,l,f,"F",d,p)}function Q2(t,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qx(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ko(n.unaryFilter.field);return Yt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=ko(n.unaryFilter.field);return Yt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ko(n.unaryFilter.field);return Yt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ko(n.unaryFilter.field);return Yt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Yt.create(ko(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Rr.create(n.compositeFilter.filters.map((i=>qx(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ke(1026)}})(n.compositeFilter.op))})(t):ke(30097,{filter:t})}function K2(t){return k2[t]}function $2(t){return N2[t]}function Y2(t){return P2[t]}function Mo(t){return{fieldPath:t.canonicalString()}}function ko(t){return gn.fromServerFormat(t.fieldPath)}function Hx(t){return t instanceof Yt?(function(n){if(n.op==="=="){if(Qb(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NAN"}};if(Gb(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Qb(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NOT_NAN"}};if(Gb(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mo(n.field),op:$2(n.op),value:n.value}}})(t):t instanceof Rr?(function(n){const i=n.getFilters().map((a=>Hx(a)));return i.length===1?i[0]:{compositeFilter:{op:Y2(n.op),filters:i}}})(t):ke(54877,{filter:t})}function W2(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Gx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class Ts{constructor(e,n,i,a,l=Pe.min(),c=Pe.min(),f=yn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=d}withSequenceNumber(e){return new Ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class X2{constructor(e){this.yt=e}}function J2(t){const e=G2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$p(e,e.limit,"L"):e}class Z2{constructor(){this.Cn=new eO}addToCollectionParentIndex(e,n){return this.Cn.add(n),_e.resolve()}getCollectionParents(e,n){return _e.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return _e.resolve()}deleteFieldIndex(e,n){return _e.resolve()}deleteAllFieldIndexes(e){return _e.resolve()}createTargetIndexes(e,n){return _e.resolve()}getDocumentsMatchingTarget(e,n){return _e.resolve(null)}getIndexType(e,n){return _e.resolve(0)}getFieldIndexes(e,n){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}getMinOffset(e,n){return _e.resolve(ks.min())}getMinOffsetFromCollectionGroup(e,n){return _e.resolve(ks.min())}updateCollectionGroup(e,n,i){return _e.resolve()}updateIndexEntries(e,n){return _e.resolve()}}class eO{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n]||new tn(bt.comparator),l=!a.has(i);return this.index[n]=a.add(i),l}has(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n];return a&&a.has(i)}getEntries(e){return(this.index[e]||new tn(bt.comparator)).toArray()}}const aE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qx=41943040;class Nn{static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(Qx,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);class Ko{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ko(0)}static cr(){return new Ko(-1)}}const oE="LruGarbageCollector",tO=1048576;function lE([t,e],[n,i]){const a=Je(t,n);return a===0?Je(e,i):a}class nO{constructor(e){this.Ir=e,this.buffer=new tn(lE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();lE(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class rO{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Te(oE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){al(n)?Te(oE,"Ignoring IndexedDB error during garbage collection: ",n):await sl(n)}await this.Vr(3e5)}))}}class iO{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return _e.resolve(Ph.ce);const i=new nO(n);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(aE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,a,l,c,f,d,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,c=Date.now(),this.nthSequenceNumber(e,a)))).next((b=>(i=b,f=Date.now(),this.removeTargets(e,i,n)))).next((b=>(l=b,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((b=>(p=Date.now(),Oo()<=Xe.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(d-f)+`ms
	Removed ${b} documents in `+(p-d)+`ms
Total Duration: ${p-_}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:b}))))}}function sO(t,e){return new iO(t,e)}class aO{constructor(){this.changes=new ka((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,En.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?_e.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class oO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class lO{constructor(e,n,i,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(i!==null&&Iu(i.mutation,a,Kn.empty(),wt.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Ze()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Ze()){const a=xa();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,i).next((l=>{let c=xu();return l.forEach(((f,d)=>{c=c.insert(f,d.overlayedDocument)})),c}))))}getOverlayedDocuments(e,n){const i=xa();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Ze())))}populateOverlays(e,n,i){const a=[];return i.forEach((l=>{n.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,f)=>{n.set(c,f)}))}))}computeViews(e,n,i,a){let l=Vi();const c=Du(),f=(function(){return Du()})();return n.forEach(((d,p)=>{const _=i.get(p.key);a.has(p.key)&&(_===void 0||_.mutation instanceof qs)?l=l.insert(p.key,p):_!==void 0?(c.set(p.key,_.mutation.getFieldMask()),Iu(_.mutation,p,_.mutation.getFieldMask(),wt.now())):c.set(p.key,Kn.empty())})),this.recalculateAndSaveOverlays(e,l).next((d=>(d.forEach(((p,_)=>c.set(p,_))),n.forEach(((p,_)=>f.set(p,new oO(_,c.get(p)??null)))),f)))}recalculateAndSaveOverlays(e,n){const i=Du();let a=new It(((c,f)=>c-f)),l=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((c=>{for(const f of c)f.keys().forEach((d=>{const p=n.get(d);if(p===null)return;let _=i.get(d)||Kn.empty();_=f.applyToLocalView(p,_),i.set(d,_);const b=(a.get(f.batchId)||Ze()).add(d);a=a.insert(f.batchId,b)}))})).next((()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const d=f.getNext(),p=d.key,_=d.value,b=Cx();_.forEach((E=>{if(!l.has(E)){const A=Mx(n.get(E),i.get(E));A!==null&&b.set(E,A),l=l.add(E)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,b))}return _e.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,a){return(function(c){return Oe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Sx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,a):this.getDocumentsMatchingCollectionQuery(e,n,i,a)}getNextDocuments(e,n,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,a-l.size):_e.resolve(xa());let f=Nu,d=l;return c.next((p=>_e.forEach(p,((_,b)=>(f<b.largestBatchId&&(f=b.largestBatchId),l.get(_)?_e.resolve():this.remoteDocumentCache.getEntry(e,_).next((E=>{d=d.insert(_,E)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,d,p,Ze()))).next((_=>({batchId:f,changes:Ax(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Oe(n)).next((i=>{let a=xu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,a){const l=n.collectionGroup;let c=xu();return this.indexManager.getCollectionParents(e,l).next((f=>_e.forEach(f,(d=>{const p=(function(b,E){return new $u(E,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,d.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,a).next((_=>{_.forEach(((b,E)=>{c=c.insert(b,E)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,n,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,l,a)))).next((c=>{l.forEach(((d,p)=>{const _=p.getKey();c.get(_)===null&&(c=c.insert(_,En.newInvalidDocument(_)))}));let f=xu();return c.forEach(((d,p)=>{const _=l.get(d);_!==void 0&&Iu(_.mutation,p,Kn.empty(),wt.now()),zh(n,p)&&(f=f.insert(d,p))})),f}))}}class uO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return _e.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:ti(a.createTime)}})(n)),_e.resolve()}getNamedQuery(e,n){return _e.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(a){return{name:a.name,query:J2(a.bundledQuery),readTime:ti(a.readTime)}})(n)),_e.resolve()}}class cO{constructor(){this.overlays=new It(Oe.comparator),this.qr=new Map}getOverlay(e,n){return _e.resolve(this.overlays.get(n))}getOverlays(e,n){const i=xa();return _e.forEach(n,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((a,l)=>{this.St(e,n,l)})),_e.resolve()}removeOverlaysForBatchId(e,n,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),_e.resolve()}getOverlaysForCollection(e,n,i){const a=xa(),l=n.length+1,c=new Oe(n.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const d=f.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===l&&d.largestBatchId>i&&a.set(d.getKey(),d)}return _e.resolve(a)}getOverlaysForCollectionGroup(e,n,i,a){let l=new It(((p,_)=>p-_));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let _=l.get(p.largestBatchId);_===null&&(_=xa(),l=l.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const f=xa(),d=l.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((p,_)=>f.set(p,_))),!(f.size()>=a)););return _e.resolve(f)}St(e,n,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new R2(n,i));let l=this.qr.get(n);l===void 0&&(l=Ze(),this.qr.set(n,l)),this.qr.set(n,l.add(i.key))}}class dO{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return _e.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,_e.resolve()}}class Bg{constructor(){this.Qr=new tn(an.$r),this.Ur=new tn(an.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new an(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new an(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new Oe(new bt([])),i=new an(n,e),a=new an(n,e+1),l=[];return this.Ur.forEachInRange([i,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Oe(new bt([])),i=new an(n,e),a=new an(n,e+1);let l=Ze();return this.Ur.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const n=new an(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class an{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Oe.comparator(e.key,n.key)||Je(e.Yr,n.Yr)}static Kr(e,n){return Je(e.Yr,n.Yr)||Oe.comparator(e.key,n.key)}}class hO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new tn(an.$r)}checkEmpty(e){return _e.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new C2(l,n,i,a);this.mutationQueue.push(c);for(const f of a)this.Zr=this.Zr.add(new an(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return _e.resolve(c)}lookupMutationBatch(e,n){return _e.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,a=this.ei(i),l=a<0?0:a;return _e.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(this.mutationQueue.length===0?Og:this.tr-1)}getAllMutationBatches(e){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new an(n,0),a=new an(n,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,a],(c=>{const f=this.Xr(c.Yr);l.push(f)})),_e.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new tn(Je);return n.forEach((a=>{const l=new an(a,0),c=new an(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(f=>{i=i.add(f.Yr)}))})),_e.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,a=i.length+1;let l=i;Oe.isDocumentKey(l)||(l=l.child(""));const c=new an(new Oe(l),0);let f=new tn(Je);return this.Zr.forEachWhile((d=>{const p=d.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(f=f.add(d.Yr)),!0)}),c),_e.resolve(this.ti(f))}ti(e){const n=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){ot(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return _e.forEach(n.mutations,(a=>{const l=new an(a.key,n.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new an(n,0),a=this.Zr.firstAfterOrEqual(i);return _e.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,_e.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class fO{constructor(e){this.ri=e,this.docs=(function(){return new It(Oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,a=this.docs.get(i),l=a?a.size:0,c=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return _e.resolve(i?i.document.mutableCopy():En.newInvalidDocument(n))}getEntries(e,n){let i=Vi();return n.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():En.newInvalidDocument(a))})),_e.resolve(i)}getDocumentsMatchingQuery(e,n,i,a){let l=Vi();const c=n.path,f=new Oe(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(f);for(;d.hasNext();){const{key:p,value:{document:_}}=d.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||BI(zI(_),i)<=0||(a.has(_.key)||zh(n,_))&&(l=l.insert(_.key,_.mutableCopy()))}return _e.resolve(l)}getAllFromCollectionGroup(e,n,i,a){ke(9500)}ii(e,n){return _e.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new mO(this)}getSize(e){return _e.resolve(this.size)}}class mO extends aO{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),_e.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class pO{constructor(e){this.persistence=e,this.si=new ka((n=>kg(n)),Ng),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.oi=0,this._i=new Bg,this.targetCount=0,this.ai=Ko.ur()}forEachTarget(e,n){return this.si.forEach(((i,a)=>n(a))),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),_e.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ko(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,_e.resolve()}updateTargetData(e,n){return this.Pr(n),_e.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,n,i){let a=0;const l=[];return this.si.forEach(((c,f)=>{f.sequenceNumber<=n&&i.get(f.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),_e.waitFor(l).next((()=>a))}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return _e.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),_e.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),_e.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),_e.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return _e.resolve(i)}containsKey(e,n){return _e.resolve(this._i.containsKey(n))}}class Kx{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ph(0),this.li=!1,this.li=!0,this.hi=new dO,this.referenceDelegate=e(this),this.Pi=new pO(this),this.indexManager=new Z2,this.remoteDocumentCache=(function(a){return new fO(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new X2(n),this.Ii=new uO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new cO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new hO(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){Te("MemoryPersistence","Starting transaction:",e);const a=new gO(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,n){return _e.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class gO extends qI{constructor(e){super(),this.currentSequenceNumber=e}}class Fg{constructor(e){this.persistence=e,this.Ri=new Bg,this.Vi=null}static mi(e){return new Fg(e)}get fi(){if(this.Vi)return this.Vi;throw ke(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),_e.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),_e.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),_e.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.fi,(i=>{const a=Oe.fromPath(i);return this.gi(e,a).next((l=>{l||n.removeEntry(a,Pe.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return _e.or([()=>_e.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class gh{constructor(e,n){this.persistence=e,this.pi=new ka((i=>QI(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=sO(this,n)}static mi(e,n){return new gh(e,n)}Ei(){}di(e){return _e.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((a=>i+a))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return _e.forEach(this.pi,((i,a)=>this.br(e,i,a).next((l=>l?_e.resolve():n(a)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,n).next((f=>{f||(i++,l.removeEntry(c,Pe.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),_e.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),_e.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),_e.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),_e.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Qd(e.data.value)),n}br(e,n,i){return _e.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.pi.get(n);return _e.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class qg{constructor(e,n,i,a){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=a}static As(e,n){let i=Ze(),a=Ze();for(const l of n.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new qg(e,n.fromCache,i,a)}}class yO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class _O{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return cD()?8:HI(xn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,a){const l={result:null};return this.ys(e,n).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,n,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new yO;return this.Ss(e,n,c).next((f=>{if(l.result=f,this.Vs)return this.bs(e,n,c,f.size)}))})).next((()=>l.result))}bs(e,n,i,a){return i.documentReadCount<this.fs?(Oo()<=Xe.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",jo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),_e.resolve()):(Oo()<=Xe.DEBUG&&Te("QueryEngine","Query:",jo(n),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(Oo()<=Xe.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",jo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zr(n))):_e.resolve())}ys(e,n){if(Wb(n))return _e.resolve(null);let i=Zr(n);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=$p(n,null,"F"),i=Zr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=Ze(...l);return this.ps.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,i).next((d=>{const p=this.Ds(n,f);return this.Cs(n,p,c,d.readTime)?this.ys(e,$p(n,null,"F")):this.vs(e,p,n,d)}))))})))))}ws(e,n,i,a){return Wb(n)||a.isEqual(Pe.min())?_e.resolve(null):this.ps.getDocuments(e,i).next((l=>{const c=this.Ds(n,l);return this.Cs(n,c,i,a)?_e.resolve(null):(Oo()<=Xe.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),jo(n)),this.vs(e,c,n,UI(a,Nu)).next((f=>f)))}))}Ds(e,n){let i=new tn(wx(e));return n.forEach(((a,l)=>{zh(e,l)&&(i=i.add(l))})),i}Cs(e,n,i,a){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,n,i){return Oo()<=Xe.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",jo(n)),this.ps.getDocumentsMatchingQuery(e,n,ks.min(),i)}vs(e,n,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((l=>(n.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const Hg="LocalStore",vO=3e8;class bO{constructor(e,n,i,a){this.persistence=e,this.Fs=n,this.serializer=a,this.Ms=new It(Je),this.xs=new ka((l=>kg(l)),Ng),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function EO(t,e,n,i){return new bO(t,e,n,i)}async function $x(t,e){const n=Le(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return n.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],f=[];let d=Ze();for(const p of a){c.push(p.batchId);for(const _ of p.mutations)d=d.add(_.key)}for(const p of l){f.push(p.batchId);for(const _ of p.mutations)d=d.add(_.key)}return n.localDocuments.getDocuments(i,d).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:f})))}))}))}function SO(t,e){const n=Le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,d,p,_){const b=p.batch,E=b.keys();let A=_e.resolve();return E.forEach((w=>{A=A.next((()=>_.getEntry(d,w))).next((D=>{const I=p.docVersions.get(w);ot(I!==null,48541),D.version.compareTo(I)<0&&(b.applyToRemoteDocument(D,p),D.isValidDocument()&&(D.setReadTime(p.commitVersion),_.addEntry(D)))}))})),A.next((()=>f.mutationQueue.removeMutationBatch(d,b)))})(n,i,e,l).next((()=>l.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let d=Ze();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(d=d.add(f.batch.mutations[p].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(i,a)))}))}function Yx(t){const e=Le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function xO(t,e){const n=Le(t),i=e.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const f=[];e.targetChanges.forEach(((_,b)=>{const E=a.get(b);if(!E)return;f.push(n.Pi.removeMatchingKeys(l,_.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(l,_.addedDocuments,b))));let A=E.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?A=A.withResumeToken(yn.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):_.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(_.resumeToken,i)),a=a.insert(b,A),(function(D,I,B){return D.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=vO?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(E,A,_)&&f.push(n.Pi.updateTargetData(l,A))}));let d=Vi(),p=Ze();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(n.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(wO(l,c,e.documentUpdates).next((_=>{d=_.ks,p=_.qs}))),!i.isEqual(Pe.min())){const _=n.Pi.getLastRemoteSnapshotVersion(l).next((b=>n.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(_)}return _e.waitFor(f).next((()=>c.apply(l))).next((()=>n.localDocuments.getLocalViewOfDocuments(l,d,p))).next((()=>d))})).then((l=>(n.Ms=a,l)))}function wO(t,e,n){let i=Ze(),a=Ze();return n.forEach((l=>i=i.add(l))),e.getEntries(t,i).next((l=>{let c=Vi();return n.forEach(((f,d)=>{const p=l.get(f);d.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(f)),d.isNoDocument()&&d.version.isEqual(Pe.min())?(e.removeEntry(f,d.readTime),c=c.insert(f,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),c=c.insert(f,d)):Te(Hg,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",d.version)})),{ks:c,qs:a}}))}function TO(t,e){const n=Le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Og),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function AO(t,e){const n=Le(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return n.Pi.getTargetData(i,e).next((l=>l?(a=l,_e.resolve(a)):n.Pi.allocateTargetId(i).next((c=>(a=new Ts(e,c,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=n.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function Zp(t,e,n){const i=Le(t),a=i.Ms.get(e),l=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!al(c))throw c;Te(Hg,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function uE(t,e,n){const i=Le(t);let a=Pe.min(),l=Ze();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,p,_){const b=Le(d),E=b.xs.get(_);return E!==void 0?_e.resolve(b.Ms.get(E)):b.Pi.getTargetData(p,_)})(i,c,Zr(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,f.targetId).next((d=>{l=d}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,n?a:Pe.min(),n?l:Ze()))).next((f=>(CO(i,d2(e),f),{documents:f,Qs:l})))))}function CO(t,e,n){let i=t.Os.get(e)||Pe.min();n.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),t.Os.set(e,i)}class cE{constructor(){this.activeTargetIds=y2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RO{constructor(){this.Mo=new cE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new cE,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class DO{Oo(e){}shutdown(){}}const dE="ConnectivityMonitor";class hE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Te(dE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Te(dE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let zd=null;function eg(){return zd===null?zd=(function(){return 268435456+Math.round(2147483648*Math.random())})():zd++,"0x"+zd.toString(16)}const Ep="RestConnection",IO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===uh?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,n,i,a,l){const c=eg(),f=this.zo(e,n.toUriEncodedString());Te(Ep,`Sending RPC '${e}' ${c}:`,f,i);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,a,l);const{host:p}=new URL(f),_=nl(p);return this.Jo(e,f,d,i,_).then((b=>(Te(Ep,`Received RPC '${e}' ${c}: `,b),b)),(b=>{throw Fo(Ep,`RPC '${e}' ${c} failed with error: `,b,"url: ",f,"request:",i),b}))}Ho(e,n,i,a,l,c){return this.Go(e,n,i,a,l)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+il})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}zo(e,n){const i=IO[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}class jO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const vn="WebChannelConnection";class MO extends OO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,a,l){const c=eg();return new Promise(((f,d)=>{const p=new XS;p.setWithCredentials(!0),p.listenOnce(JS.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Gd.NO_ERROR:const b=p.getResponseJson();Te(vn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),f(b);break;case Gd.TIMEOUT:Te(vn,`RPC '${e}' ${c} timed out`),d(new we(ge.DEADLINE_EXCEEDED,"Request time out"));break;case Gd.HTTP_ERROR:const E=p.getStatus();if(Te(vn,`RPC '${e}' ${c} failed with status:`,E,"response text:",p.getResponseText()),E>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const w=A?.error;if(w&&w.status&&w.message){const D=(function(B){const q=B.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(q)>=0?q:ge.UNKNOWN})(w.status);d(new we(D,w.message))}else d(new we(ge.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new we(ge.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Te(vn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(a);Te(vn,`RPC '${e}' ${c} sending request:`,a),p.send(n,"POST",_,i,15)}))}T_(e,n,i){const a=eg(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=tx(),f=ex(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const _=l.join("");Te(vn,`Creating RPC '${e}' stream ${a}: ${_}`,d);const b=c.createWebChannel(_,d);this.I_(b);let E=!1,A=!1;const w=new jO({Yo:I=>{A?Te(vn,`Not sending because RPC '${e}' stream ${a} is closed:`,I):(E||(Te(vn,`Opening RPC '${e}' stream ${a} transport.`),b.open(),E=!0),Te(vn,`RPC '${e}' stream ${a} sending:`,I),b.send(I))},Zo:()=>b.close()}),D=(I,B,q)=>{I.listen(B,(z=>{try{q(z)}catch($){setTimeout((()=>{throw $}),0)}}))};return D(b,Su.EventType.OPEN,(()=>{A||(Te(vn,`RPC '${e}' stream ${a} transport opened.`),w.o_())})),D(b,Su.EventType.CLOSE,(()=>{A||(A=!0,Te(vn,`RPC '${e}' stream ${a} transport closed`),w.a_(),this.E_(b))})),D(b,Su.EventType.ERROR,(I=>{A||(A=!0,Fo(vn,`RPC '${e}' stream ${a} transport errored. Name:`,I.name,"Message:",I.message),w.a_(new we(ge.UNAVAILABLE,"The operation could not be completed")))})),D(b,Su.EventType.MESSAGE,(I=>{if(!A){const B=I.data[0];ot(!!B,16349);const q=B,z=q?.error||q[0]?.error;if(z){Te(vn,`RPC '${e}' stream ${a} received error:`,z);const $=z.status;let W=(function(T){const C=Kt[T];if(C!==void 0)return Px(C)})($),oe=z.message;W===void 0&&(W=ge.INTERNAL,oe="Unknown error status: "+$+" with message "+z.message),A=!0,w.a_(new we(W,oe)),b.close()}else Te(vn,`RPC '${e}' stream ${a} received:`,B),w.u_(B)}})),D(f,ZS.STAT_EVENT,(I=>{I.stat===Bp.PROXY?Te(vn,`RPC '${e}' stream ${a} detected buffering proxy`):I.stat===Bp.NOPROXY&&Te(vn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{w.__()}),0),w}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Sp(){return typeof document<"u"?document:null}function Hh(t){return new V2(t,!0)}class Wx{constructor(e,n,i=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-i);a>0&&Te("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const fE="PersistentStream";class Xx{constructor(e,n,i,a,l,c,f,d){this.Mi=e,this.S_=i,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Wx(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ge.RESOURCE_EXHAUSTED?(Ni(n.toString()),Ni("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===n&&this.G_(i,a)}),(i=>{e((()=>{const a=new we(ge.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te(fE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Te(fE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class kO extends Xx{constructor(e,n,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,a,c),this.serializer=l}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=z2(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Pe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Pe.min():c.readTime?ti(c.readTime):Pe.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Jp(this.serializer),n.addTarget=(function(l,c){let f;const d=c.target;if(f=Qp(d)?{documents:q2(l,d)}:{query:H2(l,d).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=Ux(l,c.resumeToken);const p=Yp(l,c.expectedCount);p!==null&&(f.expectedCount=p)}else if(c.snapshotVersion.compareTo(Pe.min())>0){f.readTime=ph(l,c.snapshotVersion.toTimestamp());const p=Yp(l,c.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const i=Q2(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Jp(this.serializer),n.removeTarget=e,this.q_(n)}}class NO extends Xx{constructor(e,n,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=F2(e.writeResults,e.commitTime),i=ti(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Jp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>B2(this.serializer,i)))};this.q_(n)}}class PO{}class VO extends PO{constructor(e,n,i,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new we(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Wp(n,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new we(ge.UNKNOWN,l.toString())}))}Ho(e,n,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Ho(e,Wp(n,i),a,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new we(ge.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class LO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ni(n),this.aa=!1):Te("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Da="RemoteStore";class UO{constructor(e,n,i,a,l){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{Na(this)&&(Te(Da,"Restarting streams for network reachability change."),await(async function(d){const p=Le(d);p.Ea.add(4),await Xu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Gh(p)})(this))}))})),this.Ra=new LO(i,a)}}async function Gh(t){if(Na(t))for(const e of t.da)await e(!0)}async function Xu(t){for(const e of t.da)await e(!1)}function Jx(t,e){const n=Le(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),$g(n)?Kg(n):ol(n).O_()&&Qg(n,e))}function Gg(t,e){const n=Le(t),i=ol(n);n.Ia.delete(e),i.O_()&&Zx(n,e),n.Ia.size===0&&(i.O_()?i.L_():Na(n)&&n.Ra.set("Unknown"))}function Qg(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ol(t).Y_(e)}function Zx(t,e){t.Va.Ue(e),ol(t).Z_(e)}function Kg(t){t.Va=new M2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ol(t).start(),t.Ra.ua()}function $g(t){return Na(t)&&!ol(t).x_()&&t.Ia.size>0}function Na(t){return Le(t).Ea.size===0}function ew(t){t.Va=void 0}async function zO(t){t.Ra.set("Online")}async function BO(t){t.Ia.forEach(((e,n)=>{Qg(t,e)}))}async function FO(t,e){ew(t),$g(t)?(t.Ra.ha(e),Kg(t)):t.Ra.set("Unknown")}async function qO(t,e,n){if(t.Ra.set("Online"),e instanceof Lx&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ia.delete(f),a.Va.removeTarget(f))})(t,e)}catch(i){Te(Da,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await yh(t,i)}else if(e instanceof Yd?t.Va.Ze(e):e instanceof Vx?t.Va.st(e):t.Va.tt(e),!n.isEqual(Pe.min()))try{const i=await Yx(t.localStore);n.compareTo(i)>=0&&await(function(l,c){const f=l.Va.Tt(c);return f.targetChanges.forEach(((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const _=l.Ia.get(p);_&&l.Ia.set(p,_.withResumeToken(d.resumeToken,c))}})),f.targetMismatches.forEach(((d,p)=>{const _=l.Ia.get(d);if(!_)return;l.Ia.set(d,_.withResumeToken(yn.EMPTY_BYTE_STRING,_.snapshotVersion)),Zx(l,d);const b=new Ts(_.target,d,p,_.sequenceNumber);Qg(l,b)})),l.remoteSyncer.applyRemoteEvent(f)})(t,n)}catch(i){Te(Da,"Failed to raise snapshot:",i),await yh(t,i)}}async function yh(t,e,n){if(!al(e))throw e;t.Ea.add(1),await Xu(t),t.Ra.set("Offline"),n||(n=()=>Yx(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Te(Da,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Gh(t)}))}function tw(t,e){return e().catch((n=>yh(t,n,e)))}async function Qh(t){const e=Le(t),n=Ls(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Og;for(;HO(e);)try{const a=await TO(e.localStore,i);if(a===null){e.Ta.length===0&&n.L_();break}i=a.batchId,GO(e,a)}catch(a){await yh(e,a)}nw(e)&&rw(e)}function HO(t){return Na(t)&&t.Ta.length<10}function GO(t,e){t.Ta.push(e);const n=Ls(t);n.O_()&&n.X_&&n.ea(e.mutations)}function nw(t){return Na(t)&&!Ls(t).x_()&&t.Ta.length>0}function rw(t){Ls(t).start()}async function QO(t){Ls(t).ra()}async function KO(t){const e=Ls(t);for(const n of t.Ta)e.ea(n.mutations)}async function $O(t,e,n){const i=t.Ta.shift(),a=Lg.from(i,e,n);await tw(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await Qh(t)}async function YO(t,e){e&&Ls(t).X_&&await(async function(i,a){if((function(c){return I2(c)&&c!==ge.ABORTED})(a.code)){const l=i.Ta.shift();Ls(i).B_(),await tw(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Qh(i)}})(t,e),nw(t)&&rw(t)}async function mE(t,e){const n=Le(t);n.asyncQueue.verifyOperationInProgress(),Te(Da,"RemoteStore received new credentials");const i=Na(n);n.Ea.add(3),await Xu(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Gh(n)}async function WO(t,e){const n=Le(t);e?(n.Ea.delete(2),await Gh(n)):e||(n.Ea.add(2),await Xu(n),n.Ra.set("Unknown"))}function ol(t){return t.ma||(t.ma=(function(n,i,a){const l=Le(n);return l.sa(),new kO(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(t.datastore,t.asyncQueue,{Xo:zO.bind(null,t),t_:BO.bind(null,t),r_:FO.bind(null,t),H_:qO.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),$g(t)?Kg(t):t.Ra.set("Unknown")):(await t.ma.stop(),ew(t))}))),t.ma}function Ls(t){return t.fa||(t.fa=(function(n,i,a){const l=Le(n);return l.sa(),new NO(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:QO.bind(null,t),r_:YO.bind(null,t),ta:KO.bind(null,t),na:$O.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Qh(t)):(await t.fa.stop(),t.Ta.length>0&&(Te(Da,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class Yg{constructor(e,n,i,a,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,a,l){const c=Date.now()+i,f=new Yg(e,n,c,a,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wg(t,e){if(Ni("AsyncQueue",`${e}: ${t}`),al(t))return new we(ge.UNAVAILABLE,`${e}: ${t}`);throw t}class Po{static emptySet(e){return new Po(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Oe.comparator(n.key,i.key):(n,i)=>Oe.comparator(n.key,i.key),this.keyedMap=xu(),this.sortedSet=new It(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Po)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Po;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}class pE{constructor(){this.ga=new It(Oe.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ke(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class $o{constructor(e,n,i,a,l,c,f,d,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,a,l){const c=[];return n.forEach((f=>{c.push({type:0,doc:f})})),new $o(e,n,Po.emptySet(n),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==i[a].type||!n[a].doc.isEqual(i[a].doc))return!1;return!0}}class XO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class JO{constructor(){this.queries=gE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const a=Le(n),l=a.queries;a.queries=gE(),l.forEach(((c,f)=>{for(const d of f.Sa)d.onError(i)}))})(this,new we(ge.ABORTED,"Firestore shutting down"))}}function gE(){return new ka((t=>xx(t)),Uh)}async function iw(t,e){const n=Le(t);let i=3;const a=e.query;let l=n.queries.get(a);l?!l.ba()&&e.Da()&&(i=2):(l=new XO,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await n.onListen(a,!0);break;case 1:l.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const f=Wg(c,`Initialization of query '${jo(e.query)}' failed`);return void e.onError(f)}n.queries.set(a,l),l.Sa.push(e),e.va(n.onlineState),l.wa&&e.Fa(l.wa)&&Xg(n)}async function sw(t,e){const n=Le(t),i=e.query;let a=3;const l=n.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function ZO(t,e){const n=Le(t);let i=!1;for(const a of e){const l=a.query,c=n.queries.get(l);if(c){for(const f of c.Sa)f.Fa(a)&&(i=!0);c.wa=a}}i&&Xg(n)}function e5(t,e,n){const i=Le(t),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(n);i.queries.delete(e)}function Xg(t){t.Ca.forEach((e=>{e.next()}))}var tg,yE;(yE=tg||(tg={})).Ma="default",yE.Cache="cache";class aw{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new $o(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=$o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==tg.Cache}}class ow{constructor(e){this.key=e}}class lw{constructor(e){this.key=e}}class t5{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ze(),this.mutatedKeys=Ze(),this.eu=wx(e),this.tu=new Po(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new pE,a=n?n.tu:this.tu;let l=n?n.mutatedKeys:this.mutatedKeys,c=a,f=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((_,b)=>{const E=a.get(_),A=zh(this.query,b)?b:null,w=!!E&&this.mutatedKeys.has(E.key),D=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let I=!1;E&&A?E.data.isEqual(A.data)?w!==D&&(i.track({type:3,doc:A}),I=!0):this.su(E,A)||(i.track({type:2,doc:A}),I=!0,(d&&this.eu(A,d)>0||p&&this.eu(A,p)<0)&&(f=!0)):!E&&A?(i.track({type:0,doc:A}),I=!0):E&&!A&&(i.track({type:1,doc:E}),I=!0,(d||p)&&(f=!0)),I&&(A?(c=c.add(A),l=D?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:c,iu:i,Cs:f,mutatedKeys:l}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,b)=>(function(A,w){const D=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{Rt:I})}};return D(A)-D(w)})(_.type,b.type)||this.eu(_.doc,b.doc))),this.ou(i),a=a??!1;const f=n&&!a?this._u():[],d=this.Xa.size===0&&this.current&&!a?1:0,p=d!==this.Za;return this.Za=d,c.length!==0||p?{snapshot:new $o(this.query,e.tu,l,c,e.mutatedKeys,d===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new pE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ze(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new lw(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new ow(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ze();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return $o.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Jg="SyncEngine";class n5{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class r5{constructor(e){this.key=e,this.hu=!1}}class i5{constructor(e,n,i,a,l,c){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ka((f=>xx(f)),Uh),this.Iu=new Map,this.Eu=new Set,this.du=new It(Oe.comparator),this.Au=new Map,this.Ru=new Bg,this.Vu={},this.mu=new Map,this.fu=Ko.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function s5(t,e,n=!0){const i=mw(t);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await uw(i,e,n,!0),a}async function a5(t,e){const n=mw(t);await uw(n,e,!0,!1)}async function uw(t,e,n,i){const a=await AO(t.localStore,Zr(e)),l=a.targetId,c=t.sharedClientState.addLocalQueryTarget(l,n);let f;return i&&(f=await o5(t,e,l,c==="current",a.resumeToken)),t.isPrimaryClient&&n&&Jx(t.remoteStore,a),f}async function o5(t,e,n,i,a){t.pu=(b,E,A)=>(async function(D,I,B,q){let z=I.view.ru(B);z.Cs&&(z=await uE(D.localStore,I.query,!1).then((({documents:N})=>I.view.ru(N,z))));const $=q&&q.targetChanges.get(I.targetId),W=q&&q.targetMismatches.get(I.targetId)!=null,oe=I.view.applyChanges(z,D.isPrimaryClient,$,W);return vE(D,I.targetId,oe.au),oe.snapshot})(t,b,E,A);const l=await uE(t.localStore,e,!0),c=new t5(e,l.Qs),f=c.ru(l.documents),d=Wu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",a),p=c.applyChanges(f,t.isPrimaryClient,d);vE(t,n,p.au);const _=new n5(e,n,c);return t.Tu.set(e,_),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function l5(t,e,n){const i=Le(t),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!Uh(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Zp(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),n&&Gg(i.remoteStore,a.targetId),ng(i,a.targetId)})).catch(sl)):(ng(i,a.targetId),await Zp(i.localStore,a.targetId,!0))}async function u5(t,e){const n=Le(t),i=n.Tu.get(e),a=n.Iu.get(i.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Gg(n.remoteStore,i.targetId))}async function c5(t,e,n){const i=y5(t);try{const a=await(function(c,f){const d=Le(c),p=wt.now(),_=f.reduce(((A,w)=>A.add(w.key)),Ze());let b,E;return d.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let w=Vi(),D=Ze();return d.Ns.getEntries(A,_).next((I=>{w=I,w.forEach(((B,q)=>{q.isValidDocument()||(D=D.add(B))}))})).next((()=>d.localDocuments.getOverlayedDocuments(A,w))).next((I=>{b=I;const B=[];for(const q of f){const z=T2(q,b.get(q.key).overlayedDocument);z!=null&&B.push(new qs(q.key,z,px(z.value.mapValue),ei.exists(!0)))}return d.mutationQueue.addMutationBatch(A,p,B,f)})).next((I=>{E=I;const B=I.applyToLocalDocumentSet(b,D);return d.documentOverlayCache.saveOverlays(A,I.batchId,B)}))})).then((()=>({batchId:E.batchId,changes:Ax(b)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,f,d){let p=c.Vu[c.currentUser.toKey()];p||(p=new It(Je)),p=p.insert(f,d),c.Vu[c.currentUser.toKey()]=p})(i,a.batchId,n),await Ju(i,a.changes),await Qh(i.remoteStore)}catch(a){const l=Wg(a,"Failed to persist write");n.reject(l)}}async function cw(t,e){const n=Le(t);try{const i=await xO(n.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=n.Au.get(l);c&&(ot(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?ot(c.hu,14607):a.removedDocuments.size>0&&(ot(c.hu,42227),c.hu=!1))})),await Ju(n,i,e)}catch(i){await sl(i)}}function _E(t,e,n){const i=Le(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const a=[];i.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(c,f){const d=Le(c);d.onlineState=f;let p=!1;d.queries.forEach(((_,b)=>{for(const E of b.Sa)E.va(f)&&(p=!0)})),p&&Xg(d)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function d5(t,e,n){const i=Le(t);i.sharedClientState.updateQueryState(e,"rejected",n);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new It(Oe.comparator);c=c.insert(l,En.newNoDocument(l,Pe.min()));const f=Ze().add(l),d=new qh(Pe.min(),new Map,new It(Je),c,f);await cw(i,d),i.du=i.du.remove(l),i.Au.delete(e),Zg(i)}else await Zp(i.localStore,e,!1).then((()=>ng(i,e,n))).catch(sl)}async function h5(t,e){const n=Le(t),i=e.batch.batchId;try{const a=await SO(n.localStore,e);hw(n,i,null),dw(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ju(n,a)}catch(a){await sl(a)}}async function f5(t,e,n){const i=Le(t);try{const a=await(function(c,f){const d=Le(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return d.mutationQueue.lookupMutationBatch(p,f).next((b=>(ot(b!==null,37113),_=b.keys(),d.mutationQueue.removeMutationBatch(p,b)))).next((()=>d.mutationQueue.performConsistencyCheck(p))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(p,_,f))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>d.localDocuments.getDocuments(p,_)))}))})(i.localStore,e);hw(i,e,n),dw(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ju(i,a)}catch(a){await sl(a)}}function dw(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function hw(t,e,n){const i=Le(t);let a=i.Vu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(n?l.reject(n):l.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function ng(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((i=>{t.Ru.containsKey(i)||fw(t,i)}))}function fw(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Gg(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Zg(t))}function vE(t,e,n){for(const i of n)i instanceof ow?(t.Ru.addReference(i.key,e),m5(t,i)):i instanceof lw?(Te(Jg,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||fw(t,i.key)):ke(19791,{wu:i})}function m5(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(Te(Jg,"New document in limbo: "+n),t.Eu.add(i),Zg(t))}function Zg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Oe(bt.fromString(e)),i=t.fu.next();t.Au.set(i,new r5(n)),t.du=t.du.insert(n,i),Jx(t.remoteStore,new Ts(Zr(Pg(n.path)),i,"TargetPurposeLimboResolution",Ph.ce))}}async function Ju(t,e,n){const i=Le(t),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,d)=>{c.push(i.pu(d,e,n).then((p=>{if((p||n)&&i.isPrimaryClient){const _=p?!p.fromCache:n?.targetChanges.get(d.targetId)?.current;i.sharedClientState.updateQueryState(d.targetId,_?"current":"not-current")}if(p){a.push(p);const _=qg.As(d.targetId,p);l.push(_)}})))})),await Promise.all(c),i.Pu.H_(a),await(async function(d,p){const _=Le(d);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>_e.forEach(p,(E=>_e.forEach(E.Es,(A=>_.persistence.referenceDelegate.addReference(b,E.targetId,A))).next((()=>_e.forEach(E.ds,(A=>_.persistence.referenceDelegate.removeReference(b,E.targetId,A)))))))))}catch(b){if(!al(b))throw b;Te(Hg,"Failed to update sequence numbers: "+b)}for(const b of p){const E=b.targetId;if(!b.fromCache){const A=_.Ms.get(E),w=A.snapshotVersion,D=A.withLastLimboFreeSnapshotVersion(w);_.Ms=_.Ms.insert(E,D)}}})(i.localStore,l))}async function p5(t,e){const n=Le(t);if(!n.currentUser.isEqual(e)){Te(Jg,"User change. New user:",e.toKey());const i=await $x(n.localStore,e);n.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((d=>{d.reject(new we(ge.CANCELLED,c))}))})),l.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ju(n,i.Ls)}}function g5(t,e){const n=Le(t),i=n.Au.get(e);if(i&&i.hu)return Ze().add(i.key);{let a=Ze();const l=n.Iu.get(e);if(!l)return a;for(const c of l){const f=n.Tu.get(c);a=a.unionWith(f.view.nu)}return a}}function mw(t){const e=Le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=g5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=d5.bind(null,e),e.Pu.H_=ZO.bind(null,e.eventManager),e.Pu.yu=e5.bind(null,e.eventManager),e}function y5(t){const e=Le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=h5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f5.bind(null,e),e}class _h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return EO(this.persistence,new _O,e.initialUser,this.serializer)}Cu(e){return new Kx(Fg.mi,this.serializer)}Du(e){return new RO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_h.provider={build:()=>new _h};class _5 extends _h{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ot(this.persistence.referenceDelegate instanceof gh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new rO(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new Kx((i=>gh.mi(i,n)),this.serializer)}}class rg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>_E(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=p5.bind(null,this.syncEngine),await WO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new JO})()}createDatastore(e){const n=Hh(e.databaseInfo.databaseId),i=(function(l){return new MO(l)})(e.databaseInfo);return(function(l,c,f,d){return new VO(l,c,f,d)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,a,l,c,f){return new UO(i,a,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(n=>_E(this.syncEngine,n,0)),(function(){return hE.v()?new hE:new DO})())}createSyncEngine(e,n){return(function(a,l,c,f,d,p,_){const b=new i5(a,l,c,f,d,p);return _&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=Le(n);Te(Da,"RemoteStore shutting down."),i.Ea.add(5),await Xu(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}rg.provider={build:()=>new rg};class pw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ni("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Us="FirestoreClient";class v5{constructor(e,n,i,a,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=a,this.user=bn.UNAUTHENTICATED,this.clientId=Ig.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{Te(Us,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(Te(Us,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Wg(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function xp(t,e){t.asyncQueue.verifyOperationInProgress(),Te(Us,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async a=>{i.isEqual(a)||(await $x(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function bE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await b5(t);Te(Us,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>mE(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,a)=>mE(e.remoteStore,a))),t._onlineComponents=e}async function b5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Te(Us,"Using user provided OfflineComponentProvider");try{await xp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ge.FAILED_PRECONDITION||a.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;Fo("Error using user provided cache. Falling back to memory cache: "+n),await xp(t,new _h)}}else Te(Us,"Using default OfflineComponentProvider"),await xp(t,new _5(void 0));return t._offlineComponents}async function gw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Te(Us,"Using user provided OnlineComponentProvider"),await bE(t,t._uninitializedComponentsProvider._online)):(Te(Us,"Using default OnlineComponentProvider"),await bE(t,new rg))),t._onlineComponents}function E5(t){return gw(t).then((e=>e.syncEngine))}async function yw(t){const e=await gw(t),n=e.eventManager;return n.onListen=s5.bind(null,e.syncEngine),n.onUnlisten=l5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=a5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=u5.bind(null,e.syncEngine),n}function S5(t,e,n={}){const i=new Ii;return t.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,d,p){const _=new pw({next:E=>{_.Nu(),c.enqueueAndForget((()=>sw(l,b)));const A=E.docs.has(f);!A&&E.fromCache?p.reject(new we(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&d&&d.source==="server"?p.reject(new we(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),b=new aw(Pg(f.path),_,{includeMetadataChanges:!0,qa:!0});return iw(l,b)})(await yw(t),t.asyncQueue,e,n,i))),i.promise}function x5(t,e,n={}){const i=new Ii;return t.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,d,p){const _=new pw({next:E=>{_.Nu(),c.enqueueAndForget((()=>sw(l,b))),E.fromCache&&d.source==="server"?p.reject(new we(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),b=new aw(f,_,{includeMetadataChanges:!0,qa:!0});return iw(l,b)})(await yw(t),t.asyncQueue,e,n,i))),i.promise}function _w(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const EE=new Map;const vw="firestore.googleapis.com",SE=!0;class xE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vw,this.ssl=SE}else this.host=e.host,this.ssl=e.ssl??SE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Qx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tO)throw new we(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_w(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new we(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new we(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new we(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kh{constructor(e,n,i,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new RI;switch(i.type){case"firstParty":return new jI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new we(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=EE.get(n);i&&(Te("ComponentProvider","Removing Datastore"),EE.delete(n),i.terminate())})(this),Promise.resolve()}}function w5(t,e,n,i={}){t=Pi(t,Kh);const a=nl(e),l=t._getSettings(),c={...l,emulatorOptions:t._getEmulatorOptions()},f=`${e}:${n}`;a&&(FS(`https://${f}`),qS("Firestore",!0)),l.host!==vw&&l.host!==f&&Fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...l,host:f,ssl:a,emulatorOptions:i};if(!Ms(d,c)&&(t._setSettings(d),i.mockUserToken)){let p,_;if(typeof i.mockUserToken=="string")p=i.mockUserToken,_=bn.MOCK_USER;else{p=tD(i.mockUserToken,t._app?.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new we(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new bn(b)}t._authCredentials=new DI(new rx(p,_))}}class ll{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ll(this.firestore,e,this._query)}}class Lt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lt(this.firestore,e,this._key)}toJSON(){return{type:Lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Ku(n,Lt._jsonSchema))return new Lt(e,i||null,new Oe(bt.fromString(n.referencePath)))}}Lt._jsonSchemaVersion="firestore/documentReference/1.0",Lt._jsonSchema={type:Wt("string",Lt._jsonSchemaVersion),referencePath:Wt("string")};class Os extends ll{constructor(e,n,i){super(e,n,Pg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new Oe(e))}withConverter(e){return new Os(this.firestore,e,this._path)}}function T5(t,e,...n){if(t=on(t),ix("collection","path",e),t instanceof Kh){const i=bt.fromString(e,...n);return Pb(i),new Os(t,null,i)}{if(!(t instanceof Lt||t instanceof Os))throw new we(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(bt.fromString(e,...n));return Pb(i),new Os(t.firestore,null,i)}}function ey(t,e,...n){if(t=on(t),arguments.length===1&&(e=Ig.newId()),ix("doc","path",e),t instanceof Kh){const i=bt.fromString(e,...n);return Nb(i),new Lt(t,null,new Oe(i))}{if(!(t instanceof Lt||t instanceof Os))throw new we(ge.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(bt.fromString(e,...n));return Nb(i),new Lt(t.firestore,t instanceof Os?t.converter:null,new Oe(i))}}const wE="AsyncQueue";class TE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Wx(this,"async_queue_retry"),this._c=()=>{const i=Sp();i&&Te(wE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Sp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Sp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ii;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!al(e))throw e;Te(wE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ni("INTERNAL UNHANDLED ERROR: ",AE(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=Yg.createAndSchedule(this,e,n,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&ke(47125,{Pc:AE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function AE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Zu extends Kh{constructor(e,n,i,a){super(e,n,i,a),this.type="firestore",this._queue=new TE,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new TE(e),this._firestoreClient=void 0,await e}}}function A5(t,e){const n=typeof t=="object"?t:KS(),i=typeof t=="string"?t:uh,a=Rg(n,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=ZR("firestore");l&&w5(a,...l)}return a}function ty(t){if(t._terminated)throw new we(ge.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||C5(t),t._firestoreClient}function C5(t){const e=t._freezeSettings(),n=(function(a,l,c,f){return new YI(a,l,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,_w(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new v5(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(t._componentsProvider))}class cr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cr(yn.fromBase64String(e))}catch(n){throw new we(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new cr(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:cr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ku(e,cr._jsonSchema))return cr.fromBase64String(e.bytes)}}cr._jsonSchemaVersion="firestore/bytes/1.0",cr._jsonSchema={type:Wt("string",cr._jsonSchemaVersion),bytes:Wt("string")};class $h{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new we(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Yh{constructor(e){this._methodName=e}}class ni{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new we(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new we(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ni._jsonSchemaVersion}}static fromJSON(e){if(Ku(e,ni._jsonSchema))return new ni(e.latitude,e.longitude)}}ni._jsonSchemaVersion="firestore/geoPoint/1.0",ni._jsonSchema={type:Wt("string",ni._jsonSchemaVersion),latitude:Wt("number"),longitude:Wt("number")};class ri{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ri._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ku(e,ri._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ri(e.vectorValues);throw new we(ge.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ri._jsonSchemaVersion="firestore/vectorValue/1.0",ri._jsonSchema={type:Wt("string",ri._jsonSchemaVersion),vectorValues:Wt("object")};const R5=/^__.*__$/;class D5{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new qs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yu(e,this.data,n,this.fieldTransforms)}}class bw{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new qs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ew(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ac:t})}}class Wh{constructor(e,n,i,a,l,c){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Wh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Ew(this.Ac)&&R5.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class I5{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Hh(e)}Cc(e,n,i,a=!1){return new Wh({Ac:e,methodName:n,Dc:i,path:gn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ny(t){const e=t._freezeSettings(),n=Hh(t._databaseId);return new I5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function O5(t,e,n,i,a,l={}){const c=t.Cc(l.merge||l.mergeFields?2:0,e,n,a);iy("Data must be an object, but it was:",c,i);const f=Sw(i,c);let d,p;if(l.merge)d=new Kn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const b of l.mergeFields){const E=ig(e,b,n);if(!c.contains(E))throw new we(ge.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);ww(_,E)||_.push(E)}d=new Kn(_),p=c.fieldTransforms.filter((b=>d.covers(b.field)))}else d=null,p=c.fieldTransforms;return new D5(new Pn(f),d,p)}class Xh extends Yh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xh}}function j5(t,e,n){return new Wh({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ry extends Yh{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=j5(this,e,!0),i=this.vc.map((l=>ul(l,n))),a=new Qo(i);return new E2(e.path,a)}isEqual(e){return e instanceof ry&&Ms(this.vc,e.vc)}}function M5(t,e,n,i){const a=t.Cc(1,e,n);iy("Data must be an object, but it was:",a,i);const l=[],c=Pn.empty();Fs(i,((d,p)=>{const _=sy(e,d,n);p=on(p);const b=a.yc(_);if(p instanceof Xh)l.push(_);else{const E=ul(p,b);E!=null&&(l.push(_),c.set(_,E))}}));const f=new Kn(l);return new bw(c,f,a.fieldTransforms)}function k5(t,e,n,i,a,l){const c=t.Cc(1,e,n),f=[ig(e,i,n)],d=[a];if(l.length%2!=0)throw new we(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)f.push(ig(e,l[E])),d.push(l[E+1]);const p=[],_=Pn.empty();for(let E=f.length-1;E>=0;--E)if(!ww(p,f[E])){const A=f[E];let w=d[E];w=on(w);const D=c.yc(A);if(w instanceof Xh)p.push(A);else{const I=ul(w,D);I!=null&&(p.push(A),_.set(A,I))}}const b=new Kn(p);return new bw(_,b,c.fieldTransforms)}function N5(t,e,n,i=!1){return ul(n,t.Cc(i?4:3,e))}function ul(t,e){if(xw(t=on(t)))return iy("Unsupported field value:",e,t),Sw(t,e);if(t instanceof Yh)return(function(i,a){if(!Ew(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const f of i){let d=ul(f,a.wc(c));d==null&&(d={nullValue:"NULL_VALUE"}),l.push(d),c++}return{arrayValue:{values:l}}})(t,e)}return(function(i,a){if((i=on(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return _2(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=wt.fromDate(i);return{timestampValue:ph(a.serializer,l)}}if(i instanceof wt){const l=new wt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ph(a.serializer,l)}}if(i instanceof ni)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof cr)return{bytesValue:Ux(a.serializer,i._byteString)};if(i instanceof Lt){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:zg(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof ri)return(function(c,f){return{mapValue:{fields:{[fx]:{stringValue:mx},[ch]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw f.Sc("VectorValues must only contain numeric values.");return Vg(f.serializer,p)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${Nh(i)}`)})(t,e)}function Sw(t,e){const n={};return ox(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(t,((i,a)=>{const l=ul(a,e.mc(i));l!=null&&(n[i]=l)})),{mapValue:{fields:n}}}function xw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof wt||t instanceof ni||t instanceof cr||t instanceof Lt||t instanceof Yh||t instanceof ri)}function iy(t,e,n){if(!xw(n)||!sx(n)){const i=Nh(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function ig(t,e,n){if((e=on(e))instanceof $h)return e._internalPath;if(typeof e=="string")return sy(t,e);throw vh("Field path arguments must be of type string or ",t,!1,void 0,n)}const P5=new RegExp("[~\\*/\\[\\]]");function sy(t,e,n){if(e.search(P5)>=0)throw vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $h(...e.split("."))._internalPath}catch{throw vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vh(t,e,n,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;n&&(f+=" (via `toFirestore()`)"),f+=". ";let d="";return(l||c)&&(d+=" (found",l&&(d+=` in field ${i}`),c&&(d+=` in document ${a}`),d+=")"),new we(ge.INVALID_ARGUMENT,f+t+d)}function ww(t,e){return t.some((n=>n.isEqual(e)))}class Tw{constructor(e,n,i,a,l){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new V5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ay("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class V5 extends Tw{data(){return super.data()}}function ay(t,e){return typeof e=="string"?sy(t,e):e instanceof $h?e._internalPath:e._delegate._internalPath}function L5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new we(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oy{}class U5 extends oy{}function z5(t,e,...n){let i=[];e instanceof oy&&i.push(e),i=i.concat(n),(function(l){const c=l.filter((d=>d instanceof ly)).length,f=l.filter((d=>d instanceof Jh)).length;if(c>1||c>0&&f>0)throw new we(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)t=a._apply(t);return t}class Jh extends U5{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Jh(e,n,i)}_apply(e){const n=this._parse(e);return Aw(e._query,n),new ll(e.firestore,e.converter,Kp(e._query,n))}_parse(e){const n=ny(e.firestore);return(function(l,c,f,d,p,_,b){let E;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new we(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){RE(b,_);const w=[];for(const D of b)w.push(CE(d,l,D));E={arrayValue:{values:w}}}else E=CE(d,l,b)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||RE(b,_),E=N5(f,c,b,_==="in"||_==="not-in");return Yt.create(p,_,E)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function B5(t,e,n){const i=e,a=ay("where",t);return Jh._create(a,i,n)}class ly extends oy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ly(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Rr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,l){let c=a;const f=l.getFlattenedFilters();for(const d of f)Aw(c,d),c=Kp(c,d)})(e._query,n),new ll(e.firestore,e.converter,Kp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function CE(t,e,n){if(typeof(n=on(n))=="string"){if(n==="")throw new we(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sx(e)&&n.indexOf("/")!==-1)throw new we(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(bt.fromString(n));if(!Oe.isDocumentKey(i))throw new we(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Hb(t,new Oe(i))}if(n instanceof Lt)return Hb(t,n._key);throw new we(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nh(n)}.`)}function RE(t,e){if(!Array.isArray(t)||t.length===0)throw new we(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Aw(t,e){const n=(function(a,l){for(const c of a)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new we(ge.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(ge.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class F5{convertValue(e,n="none"){switch(Vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Fs(e,((a,l)=>{i[a]=this.convertValue(l,n)})),i}convertVectorValue(e){const n=e.fields?.[ch].arrayValue?.values?.map((i=>Vt(i.doubleValue)));return new ri(n)}convertGeoPoint(e){return new ni(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Lh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Pu(e));default:return null}}convertTimestamp(e){const n=Ns(e);return new wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=bt.fromString(e);ot(Gx(i),9688,{name:e});const a=new Vu(i.get(1),i.get(3)),l=new Oe(i.popFirst(5));return a.isEqual(n)||Ni(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}function q5(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Tu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wa extends Tw{constructor(e,n,i,a,l,c){super(e,n,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(ay("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ge.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=wa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}wa._jsonSchemaVersion="firestore/documentSnapshot/1.0",wa._jsonSchema={type:Wt("string",wa._jsonSchemaVersion),bundleSource:Wt("string","DocumentSnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class Wd extends wa{data(e={}){return super.data(e)}}class Vo{constructor(e,n,i,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Tu(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Wd(this._firestore,this._userDataWriter,i.key,i,new Tu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new we(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((f=>{const d=new Wd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Tu(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const d=new Wd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Tu(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,_=-1;return f.type!==0&&(p=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),_=c.indexOf(f.doc.key)),{type:H5(f.type),doc:d,oldIndex:p,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ge.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ig.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(n.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function H5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:t})}}function G5(t){t=Pi(t,Lt);const e=Pi(t.firestore,Zu);return S5(ty(e),t._key).then((n=>Y5(e,t,n)))}Vo._jsonSchemaVersion="firestore/querySnapshot/1.0",Vo._jsonSchema={type:Wt("string",Vo._jsonSchemaVersion),bundleSource:Wt("string","QuerySnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class Cw extends F5{constructor(e){super(),this.firestore=e}convertBytes(e){return new cr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,n)}}function Q5(t){t=Pi(t,ll);const e=Pi(t.firestore,Zu),n=ty(e),i=new Cw(e);return L5(t._query),x5(n,t._query).then((a=>new Vo(e,i,t,a)))}function K5(t,e,n){t=Pi(t,Lt);const i=Pi(t.firestore,Zu),a=q5(t.converter,e,n);return Rw(i,[O5(ny(i),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,ei.none())])}function $5(t,e,n,...i){t=Pi(t,Lt);const a=Pi(t.firestore,Zu),l=ny(a);let c;return c=typeof(e=on(e))=="string"||e instanceof $h?k5(l,"updateDoc",t._key,e,n,i):M5(l,"updateDoc",t._key,e),Rw(a,[c.toMutation(t._key,ei.exists(!0))])}function Rw(t,e){return(function(i,a){const l=new Ii;return i.asyncQueue.enqueueAndForget((async()=>c5(await E5(i),a,l))),l.promise})(ty(t),e)}function Y5(t,e,n){const i=n.docs.get(e._key),a=new Cw(t);return new wa(t,a,e._key,i,new Tu(n.hasPendingWrites,n.fromCache),e.converter)}function W5(...t){return new ry("arrayUnion",t)}(function(e,n=!0){(function(a){il=a})(rl),Bo(new Ca("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),f=new Zu(new II(i.getProvider("auth-internal")),new MI(c,i.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new we(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vu(p.options.projectId,_)})(c,a),c);return l={useFetchStreams:n,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Ds(Ob,jb,e),Ds(Ob,jb,"esm2020")})();var X5="firebase",J5="12.7.0";Ds(X5,J5,"app");const Z5={apiKey:"AIzaSyCfvR8bEeW2CXdD31Ec34doRNThnbryXJo",authDomain:"budget-tkl.firebaseapp.com",projectId:"budget-tkl",storageBucket:"budget-tkl.firebasestorage.app",messagingSenderId:"631248313026",appId:"1:631248313026:web:36574d789a42b2d102f95b"},Dw=QS(Z5);function Zh(){return A5(Dw)}function bh(t){const e={};for(const[n,i]of Object.entries(t))i!==void 0&&(i!==null&&typeof i=="object"&&!Array.isArray(i)?e[n]=bh(i):Array.isArray(i)?e[n]=i.map(a=>a!==null&&typeof a=="object"?bh(a):a):e[n]=i);return e}async function Ge(t,e){const n=ey(Zh(),t,e),i=`${t}/${e}`;console.log("[Firebase] READ getDoc:",i);const a=await G5(n);return{exists:a.exists(),data:a.exists()?a.data():null,ref:n}}async function _t(t,e,n,i){const a=ey(Zh(),t,e),l=bh(n),c=`${t}/${e}`;return console.log("[Firebase] WRITE setDoc:",c,l),K5(a,l,i??{})}async function Bd(t,e,n){const i=ey(Zh(),t,e),a=bh(n),l=`${t}/${e}`;return console.log("[Firebase] WRITE updateDoc:",l,a),$5(i,a)}async function Yo(t,e){const n=Zh(),i=T5(n,t);let a=t;if(e&&e.length>0){const f=e.map(d=>`${d.field} ${d.op} ${JSON.stringify(d.value)}`).join(", ");a+=` WHERE ${f}`}console.log("[Firebase] READ getDocs:",a);let l;if(e&&e.length>0){const f=e.map(d=>B5(d.field,d.op,d.value));l=z5(i,...f)}else l=i;return{docs:(await Q5(l)).docs.map(f=>({id:f.id,data:f.data()}))}}function sg(t){const e={};return Object.entries(t).forEach(([n,i])=>{e[n]={nickname:i.nickname,balance:i.balance,account_group_id:i.account_group_id??null,sort_order:i.sort_order},i.is_income_account!==void 0&&(e[n].is_income_account=i.is_income_account),i.is_income_default!==void 0&&(e[n].is_income_default=i.is_income_default),i.is_outgo_account!==void 0&&(e[n].is_outgo_account=i.is_outgo_account),i.is_outgo_default!==void 0&&(e[n].is_outgo_default=i.is_outgo_default),i.on_budget!==void 0&&(e[n].on_budget=i.on_budget),i.is_active!==void 0&&(e[n].is_active=i.is_active)}),e}function ej(t){return t.map(e=>{const n={id:e.id,amount:e.amount,account_id:e.account_id,date:e.date,created_at:e.created_at};return e.payee&&(n.payee=e.payee),e.description&&(n.description=e.description),n})}function tj(t){return t.map(e=>({category_id:e.category_id,amount:e.amount}))}function nj(t){return t.map(e=>{const n={id:e.id,amount:e.amount,category_id:e.category_id,account_id:e.account_id,date:e.date,created_at:e.created_at};return e.payee&&(n.payee=e.payee),e.description&&(n.description=e.description),n})}function rj(t){return t.map(e=>({category_id:e.category_id,start_balance:e.start_balance,allocated:e.allocated,spent:e.spent,end_balance:e.end_balance}))}function Ia(t,e,n){const i=n.toString().padStart(2,"0");return`${t}_${e}_${i}`}function ij(t={}){const e={};return Object.entries(t).forEach(([n,i])=>{e[n]={nickname:i.nickname,balance:i.balance,account_group_id:i.account_group_id??null,sort_order:i.sort_order??0,is_income_account:i.is_income_account,is_income_default:i.is_income_default,is_outgo_account:i.is_outgo_account,is_outgo_default:i.is_outgo_default,on_budget:i.on_budget,is_active:i.is_active}}),e}function sj(t={}){const e={};return Object.entries(t).forEach(([n,i])=>{e[n]={name:i.name,sort_order:i.sort_order??0,expected_balance:i.expected_balance??"positive",on_budget:i.on_budget,is_active:i.is_active}}),e}function aj(t={}){const e={};return Object.entries(t).forEach(([n,i])=>{e[n]={name:i.name,description:i.description,category_group_id:i.category_group_id??null,sort_order:i.sort_order??0,default_monthly_amount:i.default_monthly_amount,default_monthly_type:i.default_monthly_type,balance:i.balance??0}}),e}function oj(t=[]){const e=t.map(n=>({id:n.id,name:n.name,sort_order:n.sort_order??0}));return e.sort((n,i)=>n.sort_order-i.sort_order),e}async function lj(t){const{exists:e,data:n}=await Ge("budgets",t);if(!e||!n)throw new Error(`Budget ${t} not found`);return{budget:{id:t,name:n.name,user_ids:n.user_ids||[],accepted_user_ids:n.accepted_user_ids||[],owner_id:n.owner_id||n.user_ids?.[0]||"",owner_email:n.owner_email||null},accounts:ij(n.accounts),accountGroups:sj(n.account_groups),categories:aj(n.categories),categoryGroups:oj(n.category_groups)}}function uj(t,e){return Ma({queryKey:t?se.budget(t):["budget","none"],queryFn:()=>lj(t),enabled:!!t&&e?.enabled!==!1})}function uy(t,e,n,i){const a=(t.income||[]).map(p=>({id:p.id,amount:p.amount,account_id:p.account_id,date:p.date,payee:p.payee,description:p.description,created_at:p.created_at})),l=(t.expenses||[]).map(p=>({id:p.id,amount:p.amount,category_id:p.category_id,account_id:p.account_id,date:p.date,payee:p.payee,description:p.description,created_at:p.created_at})),c=(t.allocations||[]).map(p=>({category_id:p.category_id,amount:p.amount})),f=(t.category_balances||[]).map(p=>({category_id:p.category_id,start_balance:p.start_balance,allocated:p.allocated,spent:p.spent,end_balance:p.end_balance}));let d;return t.previous_month_snapshot&&(d={total_income:t.previous_month_snapshot.total_income??0,account_balances_end:t.previous_month_snapshot.account_balances_end??{},category_balances_end:t.previous_month_snapshot.category_balances_end??{},snapshot_taken_at:t.previous_month_snapshot.snapshot_taken_at}),{budget_id:e,year:n,month:i,income:a,total_income:t.total_income??a.reduce((p,_)=>p+_.amount,0),expenses:l,total_expenses:t.total_expenses??l.reduce((p,_)=>p+_.amount,0),allocations:c,allocations_finalized:t.allocations_finalized||!1,account_balances_start:t.account_balances_start,account_balances_end:t.account_balances_end,category_balances:f,previous_month_snapshot:d,snapshot_stale:t.snapshot_stale??!1,created_at:t.created_at,updated_at:t.updated_at||t.created_at}}function Iw(t,e){let n=t,i=e-1;return i<1&&(i=12,n-=1),{prevYear:n,prevMonth:i}}function ag(t){const e={};return t.category_balances&&t.category_balances.forEach(n=>{e[n.category_id]=n.end_balance}),{total_income:t.total_income??0,account_balances_end:t.account_balances_end??{},category_balances_end:e,snapshot_taken_at:new Date().toISOString()}}async function cj(t,e,n){const i=Ia(t,e,n),{exists:a,data:l}=await Ge("months",i);if(a&&l){const f=uy(l,t,e,n);return f.snapshot_stale===!0||f.previous_month_snapshot===void 0&&n!==1?await dj(t,e,n,f):f}return await hj(t,e,n)}async function dj(t,e,n,i){const{prevYear:a,prevMonth:l}=Iw(e,n),c=Ia(t,e,n);let f=null;const d=vt.getQueryData(se.month(t,a,l));if(d)f=d.month;else{const E=Ia(t,a,l),{exists:A,data:w}=await Ge("months",E);A&&w&&(f=uy(w,t,a,l),vt.setQueryData(se.month(t,a,l),{month:f}))}const p=f?ag(f):{total_income:0,account_balances_end:{},category_balances_end:{},snapshot_taken_at:new Date().toISOString()},_={...i,previous_month_snapshot:p,snapshot_stale:!1,updated_at:new Date().toISOString()},b={budget_id:_.budget_id,year:_.year,month:_.month,income:_.income??[],total_income:_.total_income??0,expenses:_.expenses??[],total_expenses:_.total_expenses??0,allocations:_.allocations??[],allocations_finalized:_.allocations_finalized??!1,category_balances:_.category_balances??[],previous_month_snapshot:p,snapshot_stale:!1,created_at:_.created_at??new Date().toISOString(),updated_at:_.updated_at};return _.account_balances_start!==void 0&&(b.account_balances_start=_.account_balances_start),_.account_balances_end!==void 0&&(b.account_balances_end=_.account_balances_end),await _t("months",c,b),_}async function hj(t,e,n){const i=new Date().toISOString(),a=Ia(t,e,n);let l;if(n>1||e>new Date().getFullYear()-10){const{prevYear:d,prevMonth:p}=Iw(e,n),_=vt.getQueryData(se.month(t,d,p));if(_)l=ag(_.month);else{const b=Ia(t,d,p),{exists:E,data:A}=await Ge("months",b);if(E&&A){const w=uy(A,t,d,p);l=ag(w),vt.setQueryData(se.month(t,d,p),{month:w})}}}const c={budget_id:t,year:e,month:n,income:[],total_income:0,expenses:[],total_expenses:0,allocations:[],allocations_finalized:!1,category_balances:[],previous_month_snapshot:l,snapshot_stale:!1,created_at:i,updated_at:i},f={budget_id:t,year:e,month:n,income:[],total_income:0,expenses:[],total_expenses:0,allocations:[],allocations_finalized:!1,category_balances:[],snapshot_stale:!1,created_at:i,updated_at:i};return l&&(f.previous_month_snapshot=l),await _t("months",a,f),c}function fj(t,e,n,i){return Ma({queryKey:t?se.month(t,e,n):["month","none"],queryFn:async()=>({month:await cj(t,e,n)}),enabled:!!t&&i?.enabled!==!1})}function Oi(t,e,n){let i=e,a=n+1;a>12&&(a=1,i+=1);const l=se.month(t,i,a),c=vt.getQueryData(l);c&&!c.month.snapshot_stale&&vt.setQueryData(l,{month:{...c.month,snapshot_stale:!0}})}async function mj(t,e,n){let i=e,a=n+1;a>12&&(a=1,i+=1);const l=Ia(t,i,a),{exists:c,data:f}=await Ge("months",l);if(c&&f&&!f.snapshot_stale){await _t("months",l,{...f,snapshot_stale:!0,updated_at:new Date().toISOString()});const d=se.month(t,i,a),p=vt.getQueryData(d);p&&vt.setQueryData(d,{month:{...p.month,snapshot_stale:!0}})}}async function pj(t){const{exists:e,data:n}=await Ge("payees",t);return e&&n?n.payees||[]:[]}function gj(t,e){return Ma({queryKey:t?se.payees(t):["payees","none"],queryFn:()=>pj(t),enabled:!!t&&e?.enabled!==!1})}async function yj(t,e){const{exists:n,data:i}=await Ge("users",t);if(n&&i)return i;const a={uid:t,email:e,budget_ids:[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return await _t("users",t,a),a}function _j(t,e,n){return Ma({queryKey:t?se.user(t):["user","none"],queryFn:()=>yj(t,e),enabled:!!t&&n?.enabled!==!1})}async function vj(t,e){const n=await Yo("budgets",[{field:"user_ids",op:"array-contains",value:t}]),i=[],a=[];for(const l of n.docs){const c=l.data;c.accepted_user_ids?.includes(t)||e?.budget_ids?.includes(l.id)?i.push({id:l.id,name:c.name||"Unnamed Budget",ownerEmail:c.owner_email||null,isOwner:c.owner_id===t,isPending:!1}):a.push({budgetId:l.id,budgetName:c.name||"Unnamed Budget",ownerEmail:c.owner_email||null})}return{budgets:i,pendingInvites:a}}function bj(t,e,n){return Ma({queryKey:t?se.accessibleBudgets(t):["accessibleBudgets","none"],queryFn:async()=>t?vj(t,e):{budgets:[],pendingInvites:[]},enabled:!!t&&n?.enabled!==!1,staleTime:60*1e3})}async function Ej(){const t=await Yo("feedback"),e=[];for(const n of t.docs){const i=n.data.items||[],a=n.data.user_email||n.id;i.forEach(l=>{e.push({...l,doc_id:n.id,user_email:a})})}return{items:e}}function Sj(t){return Ma({queryKey:se.feedback(),queryFn:Ej,enabled:t?.enabled!==!1,staleTime:60*1e3})}async function xj(){const t=await Yo("budgets",[]);let e=0,n=0,i=0;for(const a of t.docs){const l=a.data;if(Array.isArray(l.categories)&&e++,Array.isArray(l.accounts)&&n++,l.categories&&typeof l.categories=="object"&&!Array.isArray(l.categories)){const c=l.categories;Object.values(c).some(d=>d.balance===void 0)&&i++}}return{categoriesArrayMigrationNeeded:e>0,accountsArrayMigrationNeeded:n>0,budgetsToMigrateCategories:e,budgetsToMigrateAccounts:n,budgetsNeedingCategoryBalance:i,totalBudgetsChecked:t.docs.length}}function wj(){return Ma({queryKey:["adminMigration","all"],queryFn:async()=>xj(),enabled:!1,staleTime:300*1e3,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1})}function Tj(t){const e={};return Object.entries(t).forEach(([n,i])=>{e[n]={name:i.name,category_group_id:i.category_group_id??null,sort_order:i.sort_order,balance:i.balance??0},i.description!==void 0&&(e[n].description=i.description),i.default_monthly_amount!==void 0&&(e[n].default_monthly_amount=i.default_monthly_amount),i.default_monthly_type!==void 0&&(e[n].default_monthly_type=i.default_monthly_type)}),e}function Aj(t){const e={};return Object.entries(t).forEach(([n,i])=>{e[n]={name:i.name,sort_order:i.sort_order},i.expected_balance!==void 0&&(e[n].expected_balance=i.expected_balance),i.on_budget!==void 0&&(e[n].on_budget=i.on_budget),i.is_active!==void 0&&(e[n].is_active=i.is_active)}),e}function Cj(){const t=Bs(),e=Ct({mutationFn:async({budgetId:f,accounts:d})=>{const{exists:p,data:_}=await Ge("budgets",f);if(!p||!_)throw new Error("Budget not found");const b=sg(d);return await _t("budgets",f,{..._,accounts:b}),d},onMutate:async({budgetId:f,accounts:d})=>{await t.cancelQueries({queryKey:se.budget(f)});const p=t.getQueryData(se.budget(f));return p&&t.setQueryData(se.budget(f),{...p,accounts:d}),{previousData:p}},onSuccess:(f,{budgetId:d})=>{const p=t.getQueryData(se.budget(d));p&&t.setQueryData(se.budget(d),{...p,accounts:f})},onError:(f,{budgetId:d},p)=>{p?.previousData&&t.setQueryData(se.budget(d),p.previousData)}}),n=Ct({mutationFn:async({budgetId:f,accountGroups:d})=>{const{exists:p,data:_}=await Ge("budgets",f);if(!p||!_)throw new Error("Budget not found");const b=Aj(d);return await _t("budgets",f,{..._,account_groups:b}),d},onMutate:async({budgetId:f,accountGroups:d})=>{await t.cancelQueries({queryKey:se.budget(f)});const p=t.getQueryData(se.budget(f));return p&&t.setQueryData(se.budget(f),{...p,accountGroups:d}),{previousData:p}},onSuccess:(f,{budgetId:d})=>{const p=t.getQueryData(se.budget(d));p&&t.setQueryData(se.budget(d),{...p,accountGroups:f})},onError:(f,{budgetId:d},p)=>{p?.previousData&&t.setQueryData(se.budget(d),p.previousData)}}),i=Ct({mutationFn:async({budgetId:f,categories:d})=>{const{exists:p,data:_}=await Ge("budgets",f);if(!p||!_)throw new Error("Budget not found");const b=Tj(d);return await _t("budgets",f,{..._,categories:b}),d},onMutate:async({budgetId:f,categories:d})=>{await t.cancelQueries({queryKey:se.budget(f)});const p=t.getQueryData(se.budget(f));return p&&t.setQueryData(se.budget(f),{...p,categories:d}),{previousData:p}},onSuccess:(f,{budgetId:d})=>{const p=t.getQueryData(se.budget(d));p&&t.setQueryData(se.budget(d),{...p,categories:f})},onError:(f,{budgetId:d},p)=>{p?.previousData&&t.setQueryData(se.budget(d),p.previousData)}}),a=Ct({mutationFn:async({budgetId:f,categoryGroups:d})=>{const{exists:p,data:_}=await Ge("budgets",f);if(!p||!_)throw new Error("Budget not found");return await _t("budgets",f,{..._,category_groups:d}),d},onMutate:async({budgetId:f,categoryGroups:d})=>{await t.cancelQueries({queryKey:se.budget(f)});const p=t.getQueryData(se.budget(f));return p&&t.setQueryData(se.budget(f),{...p,categoryGroups:d}),{previousData:p}},onSuccess:(f,{budgetId:d})=>{const p=t.getQueryData(se.budget(d));p&&t.setQueryData(se.budget(d),{...p,categoryGroups:f})},onError:(f,{budgetId:d},p)=>{p?.previousData&&t.setQueryData(se.budget(d),p.previousData)}}),l=Ct({mutationFn:async({budgetId:f,accountId:d,delta:p})=>{const{exists:_,data:b}=await Ge("budgets",f);if(!_||!b)throw new Error("Budget not found");const E=b.accounts||{};if(!E[d])throw new Error("Account not found");const A={...E,[d]:{...E[d],balance:E[d].balance+p}};return await _t("budgets",f,{...b,accounts:sg(A)}),A},onMutate:async({budgetId:f,accountId:d,delta:p})=>{await t.cancelQueries({queryKey:se.budget(f)});const _=t.getQueryData(se.budget(f));if(_&&_.accounts[d]){const b={..._.accounts,[d]:{..._.accounts[d],balance:_.accounts[d].balance+p}};t.setQueryData(se.budget(f),{..._,accounts:b})}return{previousData:_}},onSuccess:(f,{budgetId:d})=>{const p=t.getQueryData(se.budget(d));p&&t.setQueryData(se.budget(d),{...p,accounts:f})},onError:(f,{budgetId:d},p)=>{p?.previousData&&t.setQueryData(se.budget(d),p.previousData)}}),c=Ct({mutationFn:async({budgetId:f,newName:d})=>{const{exists:p,data:_}=await Ge("budgets",f);if(!p||!_)throw new Error("Budget not found");return await _t("budgets",f,{..._,name:d.trim()}),d.trim()},onMutate:async({budgetId:f,newName:d})=>{await t.cancelQueries({queryKey:se.budget(f)});const p=t.getQueryData(se.budget(f));return p&&t.setQueryData(se.budget(f),{...p,budget:{...p.budget,name:d.trim()}}),{previousData:p}},onSuccess:(f,{budgetId:d})=>{const p=t.getQueryData(se.budget(d));p&&t.setQueryData(se.budget(d),{...p,budget:{...p.budget,name:f}})},onError:(f,{budgetId:d},p)=>{p?.previousData&&t.setQueryData(se.budget(d),p.previousData)}});return{updateAccounts:e,updateAccountGroups:n,updateCategories:i,updateCategoryGroups:a,updateAccountBalance:l,renameBudget:c}}async function ji(t,e){const n=Ia(t,e.year,e.month),i={budget_id:e.budget_id,year:e.year,month:e.month,income:ej(e.income),total_income:e.total_income,updated_at:new Date().toISOString()};e.created_at&&(i.created_at=e.created_at),e.expenses&&(i.expenses=nj(e.expenses)),e.total_expenses!==void 0&&(i.total_expenses=e.total_expenses),e.allocations&&(i.allocations=tj(e.allocations)),e.allocations_finalized!==void 0&&(i.allocations_finalized=e.allocations_finalized),e.category_balances&&(i.category_balances=rj(e.category_balances)),e.account_balances_start&&(i.account_balances_start=e.account_balances_start),e.account_balances_end&&(i.account_balances_end=e.account_balances_end),e.previous_month_snapshot&&(i.previous_month_snapshot=e.previous_month_snapshot),e.snapshot_stale!==void 0&&(i.snapshot_stale=e.snapshot_stale),await _t("months",n,i),await mj(t,e.year,e.month)}async function Jr(t,e,n){const{exists:i,data:a}=await Ge("budgets",t);if(!i||!a)return null;const l=a.accounts||{};if(!l[e])return null;const c={...l,[e]:{...l[e],balance:l[e].balance+n}};return await _t("budgets",t,{...a,accounts:sg(c)}),c}async function Eh(t,e,n){const i=e.trim();if(!i||n.includes(i))return null;const a=[...n,i].sort((l,c)=>l.toLowerCase().localeCompare(c.toLowerCase()));return await _t("payees",t,{budget_id:t,payees:a,updated_at:new Date().toISOString()}),a}function Rj(){const t=Bs(),e=Ct({mutationFn:async a=>{const{budgetId:l,year:c,month:f,amount:d,accountId:p,date:_,payee:b,description:E}=a,A=se.month(l,c,f),w=t.getQueryData(A);if(!w)throw new Error("Month data not found");const D={id:`income_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,amount:d,account_id:p,date:_,created_at:new Date().toISOString()};b?.trim()&&(D.payee=b.trim()),E&&(D.description=E);const I=[...w.month.income,D],B={...w.month,income:I,total_income:I.reduce((W,oe)=>W+oe.amount,0),updated_at:new Date().toISOString()};await ji(l,B);const q=await Jr(l,p,d),z=t.getQueryData(se.payees(l))||[];let $=null;return b?.trim()&&($=await Eh(l,b,z)),{updatedMonth:B,newIncome:D,updatedAccounts:q,updatedPayees:$}},onMutate:async a=>{const{budgetId:l,year:c,month:f,amount:d,accountId:p,date:_,payee:b,description:E}=a,A=se.month(l,c,f),w=se.budget(l);await t.cancelQueries({queryKey:A}),await t.cancelQueries({queryKey:w});const D=t.getQueryData(A),I=t.getQueryData(w);if(D){const B={id:`income_optimistic_${Date.now()}`,amount:d,account_id:p,date:_,created_at:new Date().toISOString()};b?.trim()&&(B.payee=b.trim()),E&&(B.description=E);const q=[...D.month.income,B];t.setQueryData(A,{...D,month:{...D.month,income:q,total_income:q.reduce((z,$)=>z+$.amount,0)}})}return I&&I.accounts[p]&&t.setQueryData(w,{...I,accounts:{...I.accounts,[p]:{...I.accounts[p],balance:I.accounts[p].balance+d}}}),Oi(l,c,f),{previousMonth:D,previousBudget:I}},onSuccess:(a,l)=>{const{budgetId:c,year:f,month:d}=l,p=se.month(c,f,d),_=se.budget(c),b=se.payees(c);if(t.setQueryData(p,{month:a.updatedMonth}),a.updatedAccounts){const E=t.getQueryData(_);E&&t.setQueryData(_,{...E,accounts:a.updatedAccounts})}a.updatedPayees&&t.setQueryData(b,a.updatedPayees)},onError:(a,l,c)=>{const{budgetId:f,year:d,month:p}=l;c?.previousMonth&&t.setQueryData(se.month(f,d,p),c.previousMonth),c?.previousBudget&&t.setQueryData(se.budget(f),c.previousBudget)}}),n=Ct({mutationFn:async a=>{const{budgetId:l,year:c,month:f,incomeId:d,amount:p,accountId:_,date:b,payee:E,description:A,oldAmount:w,oldAccountId:D}=a,I=se.month(l,c,f),B=t.getQueryData(I);if(!B)throw new Error("Month data not found");const q={id:d,amount:p,account_id:_,date:b,created_at:B.month.income.find(T=>T.id===d)?.created_at||new Date().toISOString()};E?.trim()&&(q.payee=E.trim()),A&&(q.description=A);const z=B.month.income.map(T=>T.id===d?q:T),$={...B.month,income:z,total_income:z.reduce((T,C)=>T+C.amount,0),updated_at:new Date().toISOString()};await ji(l,$);let W=null;_!==D?(await Jr(l,D,-w),W=await Jr(l,_,p)):p!==w&&(W=await Jr(l,_,p-w));const oe=t.getQueryData(se.payees(l))||[];let N=null;return E?.trim()&&(N=await Eh(l,E,oe)),{updatedMonth:$,updatedAccounts:W,updatedPayees:N}},onMutate:async a=>{const{budgetId:l,year:c,month:f,incomeId:d,amount:p,accountId:_,date:b,payee:E,description:A,oldAmount:w,oldAccountId:D}=a,I=se.month(l,c,f),B=se.budget(l);await t.cancelQueries({queryKey:I}),await t.cancelQueries({queryKey:B});const q=t.getQueryData(I),z=t.getQueryData(B);if(q){const $={id:d,amount:p,account_id:_,date:b,created_at:q.month.income.find(oe=>oe.id===d)?.created_at||new Date().toISOString()};E?.trim()&&($.payee=E.trim()),A&&($.description=A);const W=q.month.income.map(oe=>oe.id===d?$:oe);t.setQueryData(I,{...q,month:{...q.month,income:W,total_income:W.reduce((oe,N)=>oe+N.amount,0)}})}if(z){const $={...z.accounts};_!==D?($[D]&&($[D]={...$[D],balance:$[D].balance-w}),$[_]&&($[_]={...$[_],balance:$[_].balance+p})):p!==w&&$[_]&&($[_]={...$[_],balance:$[_].balance+(p-w)}),t.setQueryData(B,{...z,accounts:$})}return Oi(l,c,f),{previousMonth:q,previousBudget:z}},onSuccess:(a,l)=>{const{budgetId:c,year:f,month:d}=l,p=se.month(c,f,d),_=se.budget(c),b=se.payees(c);if(t.setQueryData(p,{month:a.updatedMonth}),a.updatedAccounts){const E=t.getQueryData(_);E&&t.setQueryData(_,{...E,accounts:a.updatedAccounts})}a.updatedPayees&&t.setQueryData(b,a.updatedPayees)},onError:(a,l,c)=>{const{budgetId:f,year:d,month:p}=l;c?.previousMonth&&t.setQueryData(se.month(f,d,p),c.previousMonth),c?.previousBudget&&t.setQueryData(se.budget(f),c.previousBudget)}}),i=Ct({mutationFn:async a=>{const{budgetId:l,year:c,month:f,incomeId:d,amount:p,accountId:_}=a,b=se.month(l,c,f),E=t.getQueryData(b);if(!E)throw new Error("Month data not found");const A=E.month.income.filter(I=>I.id!==d),w={...E.month,income:A,total_income:A.reduce((I,B)=>I+B.amount,0),updated_at:new Date().toISOString()};await ji(l,w);const D=await Jr(l,_,-p);return{updatedMonth:w,updatedAccounts:D}},onMutate:async a=>{const{budgetId:l,year:c,month:f,incomeId:d,amount:p,accountId:_}=a,b=se.month(l,c,f),E=se.budget(l);await t.cancelQueries({queryKey:b}),await t.cancelQueries({queryKey:E});const A=t.getQueryData(b),w=t.getQueryData(E);if(A){const D=A.month.income.filter(I=>I.id!==d);t.setQueryData(b,{...A,month:{...A.month,income:D,total_income:D.reduce((I,B)=>I+B.amount,0)}})}return w&&w.accounts[_]&&t.setQueryData(E,{...w,accounts:{...w.accounts,[_]:{...w.accounts[_],balance:w.accounts[_].balance-p}}}),Oi(l,c,f),{previousMonth:A,previousBudget:w}},onSuccess:(a,l)=>{const{budgetId:c,year:f,month:d}=l,p=se.month(c,f,d),_=se.budget(c);if(t.setQueryData(p,{month:a.updatedMonth}),a.updatedAccounts){const b=t.getQueryData(_);b&&t.setQueryData(_,{...b,accounts:a.updatedAccounts})}},onError:(a,l,c)=>{const{budgetId:f,year:d,month:p}=l;c?.previousMonth&&t.setQueryData(se.month(f,d,p),c.previousMonth),c?.previousBudget&&t.setQueryData(se.budget(f),c.previousBudget)}});return{addIncome:e,updateIncome:n,deleteIncome:i}}function Dj(){const t=Bs(),e=Ct({mutationFn:async a=>{const{budgetId:l,year:c,month:f,amount:d,categoryId:p,accountId:_,date:b,payee:E,description:A}=a,w=se.month(l,c,f),D=t.getQueryData(w);if(!D)throw new Error("Month data not found");const I={id:`expense_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,amount:d,category_id:p,account_id:_,date:b,created_at:new Date().toISOString()};E?.trim()&&(I.payee=E.trim()),A&&(I.description=A);const B=[...D.month.expenses||[],I],q={...D.month,expenses:B,total_expenses:B.reduce((oe,N)=>oe+N.amount,0),updated_at:new Date().toISOString()};await ji(l,q);const z=await Jr(l,_,-d),$=t.getQueryData(se.payees(l))||[];let W=null;return E?.trim()&&(W=await Eh(l,E,$)),{updatedMonth:q,newExpense:I,updatedAccounts:z,updatedPayees:W}},onMutate:async a=>{const{budgetId:l,year:c,month:f,amount:d,categoryId:p,accountId:_,date:b,payee:E,description:A}=a,w=se.month(l,c,f),D=se.budget(l);await t.cancelQueries({queryKey:w}),await t.cancelQueries({queryKey:D});const I=t.getQueryData(w),B=t.getQueryData(D);if(I){const q={id:`expense_optimistic_${Date.now()}`,amount:d,category_id:p,account_id:_,date:b,created_at:new Date().toISOString()};E?.trim()&&(q.payee=E.trim()),A&&(q.description=A);const z=[...I.month.expenses||[],q];t.setQueryData(w,{...I,month:{...I.month,expenses:z,total_expenses:z.reduce(($,W)=>$+W.amount,0)}})}return B&&B.accounts[_]&&t.setQueryData(D,{...B,accounts:{...B.accounts,[_]:{...B.accounts[_],balance:B.accounts[_].balance-d}}}),Oi(l,c,f),{previousMonth:I,previousBudget:B}},onSuccess:(a,l)=>{const{budgetId:c,year:f,month:d}=l,p=se.month(c,f,d),_=se.budget(c),b=se.payees(c);if(t.setQueryData(p,{month:a.updatedMonth}),a.updatedAccounts){const E=t.getQueryData(_);E&&t.setQueryData(_,{...E,accounts:a.updatedAccounts})}a.updatedPayees&&t.setQueryData(b,a.updatedPayees)},onError:(a,l,c)=>{const{budgetId:f,year:d,month:p}=l;c?.previousMonth&&t.setQueryData(se.month(f,d,p),c.previousMonth),c?.previousBudget&&t.setQueryData(se.budget(f),c.previousBudget)}}),n=Ct({mutationFn:async a=>{const{budgetId:l,year:c,month:f,expenseId:d,amount:p,categoryId:_,accountId:b,date:E,payee:A,description:w,oldAmount:D,oldAccountId:I}=a,B=se.month(l,c,f),q=t.getQueryData(B);if(!q)throw new Error("Month data not found");const z={id:d,amount:p,category_id:_,account_id:b,date:E,created_at:q.month.expenses?.find(C=>C.id===d)?.created_at||new Date().toISOString()};A?.trim()&&(z.payee=A.trim()),w&&(z.description=w);const $=(q.month.expenses||[]).map(C=>C.id===d?z:C),W={...q.month,expenses:$,total_expenses:$.reduce((C,j)=>C+j.amount,0),updated_at:new Date().toISOString()};await ji(l,W);let oe=null;b!==I?(await Jr(l,I,D),oe=await Jr(l,b,-p)):p!==D&&(oe=await Jr(l,b,D-p));const N=t.getQueryData(se.payees(l))||[];let T=null;return A?.trim()&&(T=await Eh(l,A,N)),{updatedMonth:W,updatedAccounts:oe,updatedPayees:T}},onMutate:async a=>{const{budgetId:l,year:c,month:f,expenseId:d,amount:p,categoryId:_,accountId:b,date:E,payee:A,description:w,oldAmount:D,oldAccountId:I}=a,B=se.month(l,c,f),q=se.budget(l);await t.cancelQueries({queryKey:B}),await t.cancelQueries({queryKey:q});const z=t.getQueryData(B),$=t.getQueryData(q);if(z){const W={id:d,amount:p,category_id:_,account_id:b,date:E,created_at:z.month.expenses?.find(N=>N.id===d)?.created_at||new Date().toISOString()};A?.trim()&&(W.payee=A.trim()),w&&(W.description=w);const oe=(z.month.expenses||[]).map(N=>N.id===d?W:N);t.setQueryData(B,{...z,month:{...z.month,expenses:oe,total_expenses:oe.reduce((N,T)=>N+T.amount,0)}})}if($){const W={...$.accounts};b!==I?(W[I]&&(W[I]={...W[I],balance:W[I].balance+D}),W[b]&&(W[b]={...W[b],balance:W[b].balance-p})):p!==D&&W[b]&&(W[b]={...W[b],balance:W[b].balance+(D-p)}),t.setQueryData(q,{...$,accounts:W})}return Oi(l,c,f),{previousMonth:z,previousBudget:$}},onSuccess:(a,l)=>{const{budgetId:c,year:f,month:d}=l,p=se.month(c,f,d),_=se.budget(c),b=se.payees(c);if(t.setQueryData(p,{month:a.updatedMonth}),a.updatedAccounts){const E=t.getQueryData(_);E&&t.setQueryData(_,{...E,accounts:a.updatedAccounts})}a.updatedPayees&&t.setQueryData(b,a.updatedPayees)},onError:(a,l,c)=>{const{budgetId:f,year:d,month:p}=l;c?.previousMonth&&t.setQueryData(se.month(f,d,p),c.previousMonth),c?.previousBudget&&t.setQueryData(se.budget(f),c.previousBudget)}}),i=Ct({mutationFn:async a=>{const{budgetId:l,year:c,month:f,expenseId:d,amount:p,accountId:_}=a,b=se.month(l,c,f),E=t.getQueryData(b);if(!E)throw new Error("Month data not found");const A=(E.month.expenses||[]).filter(I=>I.id!==d),w={...E.month,expenses:A,total_expenses:A.reduce((I,B)=>I+B.amount,0),updated_at:new Date().toISOString()};await ji(l,w);const D=await Jr(l,_,p);return{updatedMonth:w,updatedAccounts:D}},onMutate:async a=>{const{budgetId:l,year:c,month:f,expenseId:d,amount:p,accountId:_}=a,b=se.month(l,c,f),E=se.budget(l);await t.cancelQueries({queryKey:b}),await t.cancelQueries({queryKey:E});const A=t.getQueryData(b),w=t.getQueryData(E);if(A){const D=(A.month.expenses||[]).filter(I=>I.id!==d);t.setQueryData(b,{...A,month:{...A.month,expenses:D,total_expenses:D.reduce((I,B)=>I+B.amount,0)}})}return w&&w.accounts[_]&&t.setQueryData(E,{...w,accounts:{...w.accounts,[_]:{...w.accounts[_],balance:w.accounts[_].balance+p}}}),Oi(l,c,f),{previousMonth:A,previousBudget:w}},onSuccess:(a,l)=>{const{budgetId:c,year:f,month:d}=l,p=se.month(c,f,d),_=se.budget(c);if(t.setQueryData(p,{month:a.updatedMonth}),a.updatedAccounts){const b=t.getQueryData(_);b&&t.setQueryData(_,{...b,accounts:a.updatedAccounts})}},onError:(a,l,c)=>{const{budgetId:f,year:d,month:p}=l;c?.previousMonth&&t.setQueryData(se.month(f,d,p),c.previousMonth),c?.previousBudget&&t.setQueryData(se.budget(f),c.previousBudget)}});return{addExpense:e,updateExpense:n,deleteExpense:i}}function Ij(){const t=Bs(),e=Ct({mutationFn:async a=>{const{budgetId:l,year:c,month:f,allocations:d}=a,p=se.month(l,c,f),_=t.getQueryData(p);if(!_)throw new Error("Month data not found");const b={..._.month,allocations:d,updated_at:new Date().toISOString()};return await ji(l,b),{updatedMonth:b}},onMutate:async a=>{const{budgetId:l,year:c,month:f,allocations:d}=a,p=se.month(l,c,f);await t.cancelQueries({queryKey:p});const _=t.getQueryData(p);return _&&t.setQueryData(p,{..._,month:{..._.month,allocations:d}}),Oi(l,c,f),{previousMonth:_}},onSuccess:(a,l)=>{const{budgetId:c,year:f,month:d}=l;t.setQueryData(se.month(c,f,d),{month:a.updatedMonth})},onError:(a,l,c)=>{c?.previousMonth&&t.setQueryData(se.month(l.budgetId,l.year,l.month),c.previousMonth)}}),n=Ct({mutationFn:async a=>{const{budgetId:l,year:c,month:f,allocations:d}=a,p=se.month(l,c,f),_=t.getQueryData(p);if(!_)throw new Error("Month data not found");const b={..._.month,allocations:d,allocations_finalized:!0,updated_at:new Date().toISOString()};await ji(l,b);const E=se.budget(l),A=t.getQueryData(E);let w=null;if(A){const D=await Yo("months",[{field:"budget_id",op:"==",value:l}]),I={};Object.keys(A.categories).forEach(z=>{I[z]=0});for(const z of D.docs){const $=z.data;if($.allocations_finalized&&$.allocations)for(const W of $.allocations)I[W.category_id]=(I[W.category_id]||0)+W.amount}w={...A.categories},Object.entries(w).forEach(([z,$])=>{w[z]={...$,balance:I[z]??0}});const{exists:B,data:q}=await Ge("budgets",l);B&&q&&await _t("budgets",l,{...q,categories:w})}return{updatedMonth:b,updatedCategories:w}},onMutate:async a=>{const{budgetId:l,year:c,month:f,allocations:d}=a,p=se.month(l,c,f);await t.cancelQueries({queryKey:p});const _=t.getQueryData(p);return _&&t.setQueryData(p,{..._,month:{..._.month,allocations:d,allocations_finalized:!0}}),Oi(l,c,f),{previousMonth:_}},onSuccess:(a,l)=>{const{budgetId:c,year:f,month:d}=l,p=se.month(c,f,d),_=se.budget(c);if(t.setQueryData(p,{month:a.updatedMonth}),a.updatedCategories){const b=t.getQueryData(_);b&&t.setQueryData(_,{...b,categories:a.updatedCategories})}},onError:(a,l,c)=>{c?.previousMonth&&t.setQueryData(se.month(l.budgetId,l.year,l.month),c.previousMonth)}}),i=Ct({mutationFn:async a=>{const{budgetId:l,year:c,month:f}=a,d=se.month(l,c,f),p=t.getQueryData(d);if(!p)throw new Error("Month data not found");const _={...p.month,allocations_finalized:!1,updated_at:new Date().toISOString()};return await ji(l,_),{updatedMonth:_}},onMutate:async a=>{const{budgetId:l,year:c,month:f}=a,d=se.month(l,c,f);await t.cancelQueries({queryKey:d});const p=t.getQueryData(d);return p&&t.setQueryData(d,{...p,month:{...p.month,allocations_finalized:!1}}),Oi(l,c,f),{previousMonth:p}},onSuccess:(a,l)=>{const{budgetId:c,year:f,month:d}=l;t.setQueryData(se.month(c,f,d),{month:a.updatedMonth})},onError:(a,l,c)=>{c?.previousMonth&&t.setQueryData(se.month(l.budgetId,l.year,l.month),c.previousMonth)}});return{saveAllocations:e,finalizeAllocations:n,unfinalizeAllocations:i}}function Oj(){const{addIncome:t,updateIncome:e,deleteIncome:n}=Rj(),{addExpense:i,updateExpense:a,deleteExpense:l}=Dj(),{saveAllocations:c,finalizeAllocations:f,unfinalizeAllocations:d}=Ij();return{addIncome:t,updateIncome:e,deleteIncome:n,addExpense:i,updateExpense:a,deleteExpense:l,saveAllocations:c,finalizeAllocations:f,unfinalizeAllocations:d}}function jj(){const t=Bs(),e=Ct({mutationFn:async({name:f,userId:d,userEmail:p})=>{const _=`budget_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,b=new Date().toISOString(),E={name:f.trim()||"My Budget",user_ids:[d],accepted_user_ids:[d],owner_id:d,owner_email:p,accounts:{},account_groups:{},categories:{},category_groups:[],created_at:b,updated_at:b};await _t("budgets",_,E);const{exists:A,data:w}=await Ge("users",d);return A&&w?await _t("users",d,{...w,budget_ids:[_,...w.budget_ids],updated_at:b}):await _t("users",d,{uid:d,email:p,budget_ids:[_],created_at:b,updated_at:b}),{budgetId:_,budget:{id:_,...E}}},onSuccess:(f,{userId:d})=>{t.invalidateQueries({queryKey:se.user(d)}),t.invalidateQueries({queryKey:se.accessibleBudgets(d)})}}),n=Ct({mutationFn:async({budgetId:f,userId:d})=>{const p=new Date().toISOString(),{exists:_,data:b}=await Ge("budgets",f);if(!_||!b)throw new Error("Budget not found");if(!b.user_ids?.includes(d))throw new Error("You have not been invited to this budget");const{data:E}=await Ge("users",d);if(E?.budget_ids?.includes(f))throw new Error("You have already accepted this invite");return await _t("users",d,{...E||{uid:d,email:null},budget_ids:[f,...E?.budget_ids||[]],updated_at:p}),await _t("budgets",f,{...b,accepted_user_ids:[...b.accepted_user_ids||[],d]}),{budgetId:f}},onSuccess:(f,{userId:d})=>{t.invalidateQueries({queryKey:se.user(d)}),t.invalidateQueries({queryKey:se.accessibleBudgets(d)}),t.invalidateQueries({queryKey:se.budget(f.budgetId)})}}),i=Ct({mutationFn:async({budgetId:f,userId:d})=>{const{exists:p,data:_}=await Ge("budgets",f);if(!p||!_)throw new Error("Budget not found");if(_.user_ids?.includes(d))throw new Error("User is already invited");return await _t("budgets",f,{..._,user_ids:[..._.user_ids||[],d]}),{budgetId:f}},onMutate:async({budgetId:f,userId:d})=>{await t.cancelQueries({queryKey:se.budget(f)});const p=t.getQueryData(se.budget(f));return p&&t.setQueryData(se.budget(f),{...p,budget:{...p.budget,user_ids:[...p.budget.user_ids,d]}}),{previousData:p}},onError:(f,{budgetId:d},p)=>{p?.previousData&&t.setQueryData(se.budget(d),p.previousData)},onSettled:(f,d,{budgetId:p})=>{t.invalidateQueries({queryKey:se.budget(p)})}}),a=Ct({mutationFn:async({budgetId:f,userId:d})=>{const{exists:p,data:_}=await Ge("budgets",f);if(!p||!_)throw new Error("Budget not found");return await _t("budgets",f,{..._,user_ids:(_.user_ids||[]).filter(b=>b!==d),accepted_user_ids:(_.accepted_user_ids||[]).filter(b=>b!==d)}),{budgetId:f}},onMutate:async({budgetId:f,userId:d})=>{await t.cancelQueries({queryKey:se.budget(f)});const p=t.getQueryData(se.budget(f));return p&&t.setQueryData(se.budget(f),{...p,budget:{...p.budget,user_ids:p.budget.user_ids.filter(_=>_!==d),accepted_user_ids:p.budget.accepted_user_ids.filter(_=>_!==d)}}),{previousData:p}},onError:(f,{budgetId:d},p)=>{p?.previousData&&t.setQueryData(se.budget(d),p.previousData)},onSettled:(f,d,{budgetId:p})=>{t.invalidateQueries({queryKey:se.budget(p)})}}),l=Ct({mutationFn:async({budgetId:f,userId:d})=>{const{exists:p,data:_}=await Ge("users",d);if(!p||!_)throw new Error("User document not found");const b=[f,..._.budget_ids.filter(E=>E!==f)];return await _t("users",d,{..._,budget_ids:b,updated_at:new Date().toISOString()}),{budgetId:f}},onMutate:async({budgetId:f,userId:d})=>{await t.cancelQueries({queryKey:se.user(d)});const p=t.getQueryData(se.user(d));return p&&t.setQueryData(se.user(d),{...p,budget_ids:[f,...p.budget_ids.filter(_=>_!==f)]}),{previousData:p}},onError:(f,{userId:d},p)=>{p?.previousData&&t.setQueryData(se.user(d),p.previousData)},onSettled:(f,d,{userId:p})=>{t.invalidateQueries({queryKey:se.user(p)})}}),c=Ct({mutationFn:async({budgetId:f,userId:d,userBudgetIds:p})=>{const{exists:_,data:b}=await Ge("budgets",f);return!_||!b||!b.user_ids?.includes(d)||p.includes(f)?null:{budgetId:f,budgetName:b.name,ownerEmail:b.owner_email||null}}});return{createBudget:e,acceptInvite:n,inviteUser:i,revokeUser:a,switchBudget:l,checkInvite:c}}function Ow(){const t=Bs(),e=Ct({mutationFn:async({userId:a,userEmail:l,text:c,feedbackType:f,currentPath:d})=>{const p=l||a,_={id:`feedback_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,text:`[${f.toUpperCase()}] ${c}

(Submitted from: ${d})`,created_at:new Date().toISOString(),is_done:!1,completed_at:null,sort_order:Date.now(),feedback_type:f},{exists:b}=await Ge("feedback",p);return b?await _t("feedback",p,{items:W5(_),user_email:l,updated_at:new Date().toISOString()},{merge:!0}):await _t("feedback",p,{items:[_],user_email:l,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),{feedbackItem:_}},onSuccess:()=>{t.invalidateQueries({queryKey:se.feedback()})}}),n=Ct({mutationFn:async({item:a})=>{const{exists:l,data:c}=await Ge("feedback",a.doc_id);if(!l||!c)throw new Error("Feedback document not found");const d=(c.items||[]).map(p=>p.id===a.id?{...p,is_done:!p.is_done,completed_at:p.is_done?null:new Date().toISOString()}:p);return await _t("feedback",a.doc_id,{...c,items:d,updated_at:new Date().toISOString()}),{itemId:a.id,isDone:!a.is_done}},onSuccess:()=>{t.invalidateQueries({queryKey:se.feedback()})}}),i=Ct({mutationFn:async({docId:a,items:l})=>{const{exists:c,data:f}=await Ge("feedback",a);if(!c||!f)throw new Error("Feedback document not found");return await _t("feedback",a,{...f,items:l,updated_at:new Date().toISOString()}),{docId:a}},onSuccess:()=>{t.invalidateQueries({queryKey:se.feedback()})}});return{submitFeedback:e,toggleFeedback:n,updateSortOrder:i}}function jw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Mj=jw,Mw=new Gu("auth","Firebase",jw());const Sh=new Ag("@firebase/auth");function kj(t,...e){Sh.logLevel<=Xe.WARN&&Sh.warn(`Auth (${rl}): ${t}`,...e)}function Xd(t,...e){Sh.logLevel<=Xe.ERROR&&Sh.error(`Auth (${rl}): ${t}`,...e)}function Dr(t,...e){throw cy(t,...e)}function ii(t,...e){return cy(t,...e)}function kw(t,e,n){const i={...Mj(),[e]:n};return new Gu("auth","Firebase",i).create(e,{appName:t.name})}function js(t){return kw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cy(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Mw.create(t,...e)}function Me(t,e,...n){if(!t)throw cy(e,...n)}function Ci(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xd(e),new Error(e)}function Li(t,e){t||Ci(e)}function og(){return typeof self<"u"&&self.location?.href||""}function Nj(){return DE()==="http:"||DE()==="https:"}function DE(){return typeof self<"u"&&self.location?.protocol||null}function Pj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Nj()||oD()||"connection"in navigator)?navigator.onLine:!0}function Vj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class ec{constructor(e,n){this.shortDelay=e,this.longDelay=n,Li(n>e,"Short delay should be less than long delay!"),this.isMobile=iD()||lD()}get(){return Pj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dy(t,e){Li(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Nw{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Lj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Uj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zj=new ec(3e4,6e4);function Pa(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Hs(t,e,n,i,a={}){return Pw(t,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const f=Qu({key:t.config.apiKey,...c}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:d,...l};return aD()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&nl(t.emulatorConfig.host)&&(p.credentials="include"),Nw.fetch()(await Vw(t,t.config.apiHost,n,f),p)})}async function Pw(t,e,n){t._canInitEmulator=!1;const i={...Lj,...e};try{const a=new Fj(t),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Fd(t,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[d,p]=f.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fd(t,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw Fd(t,"email-already-in-use",c);if(d==="USER_DISABLED")throw Fd(t,"user-disabled",c);const _=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw kw(t,_,p);Dr(t,_)}}catch(a){if(a instanceof zi)throw a;Dr(t,"network-request-failed",{message:String(a)})}}async function ef(t,e,n,i,a={}){const l=await Hs(t,e,n,i,a);return"mfaPendingCredential"in l&&Dr(t,"multi-factor-auth-required",{_serverResponse:l}),l}async function Vw(t,e,n,i){const a=`${e}${n}?${i}`,l=t,c=l.config.emulator?dy(t.config,a):`${t.config.apiScheme}://${a}`;return Uj.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function Bj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Fj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ii(this.auth,"network-request-failed")),zj.get())})}}function Fd(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const a=ii(t,e,i);return a.customData._tokenResponse=n,a}function IE(t){return t!==void 0&&t.enterprise!==void 0}class qj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Bj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Hj(t,e){return Hs(t,"GET","/v2/recaptchaConfig",Pa(t,e))}async function Gj(t,e){return Hs(t,"POST","/v1/accounts:delete",e)}async function xh(t,e){return Hs(t,"POST","/v1/accounts:lookup",e)}function Ou(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Qj(t,e=!1){const n=on(t),i=await n.getIdToken(e),a=hy(i);Me(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:Ou(wp(a.auth_time)),issuedAtTime:Ou(wp(a.iat)),expirationTime:Ou(wp(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function wp(t){return Number(t)*1e3}function hy(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Xd("JWT malformed, contained fewer than 3 sections"),null;try{const a=LS(n);return a?JSON.parse(a):(Xd("Failed to decode base64 JWT payload"),null)}catch(a){return Xd("Caught error parsing JWT payload as JSON",a?.toString()),null}}function OE(t){const e=hy(t);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function zu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof zi&&Kj(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function Kj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class $j{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class lg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ou(this.lastLoginAt),this.creationTime=Ou(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function wh(t){const e=t.auth,n=await t.getIdToken(),i=await zu(t,xh(e,{idToken:n}));Me(i?.users.length,e,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const l=a.providerUserInfo?.length?Lw(a.providerUserInfo):[],c=Wj(t.providerData,l),f=t.isAnonymous,d=!(t.email&&a.passwordHash)&&!c?.length,p=f?d:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new lg(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(t,_)}async function Yj(t){const e=on(t);await wh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Wj(t,e){return[...t.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function Lw(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function Xj(t,e){const n=await Pw(t,{},async()=>{const i=Qu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=t.config,c=await Vw(t,a,"/v1/token",`key=${l}`),f=await t._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:f,body:i};return t.emulatorConfig&&nl(t.emulatorConfig.host)&&(d.credentials="include"),Nw.fetch()(c,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Jj(t,e){return Hs(t,"POST","/v2/accounts:revokeToken",Pa(t,e))}class Lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):OE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const n=OE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:a,expiresIn:l}=await Xj(e,n);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:a,expirationTime:l}=n,c=new Lo;return i&&(Me(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(Me(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Me(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Lo,this.toJSON())}_performRefresh(){return Ci("not implemented")}}function bs(t,e){Me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Cr{constructor({uid:e,auth:n,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new $j(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new lg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await zu(this,this.stsTokenManager.getToken(this.auth,e));return Me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Qj(this,e)}reload(){return Yj(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Cr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await wh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ar(this.auth.app))return Promise.reject(js(this.auth));const e=await this.getIdToken();return await zu(this,Gj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,a=n.email??void 0,l=n.phoneNumber??void 0,c=n.photoURL??void 0,f=n.tenantId??void 0,d=n._redirectEventId??void 0,p=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:b,emailVerified:E,isAnonymous:A,providerData:w,stsTokenManager:D}=n;Me(b&&D,e,"internal-error");const I=Lo.fromJSON(this.name,D);Me(typeof b=="string",e,"internal-error"),bs(i,e.name),bs(a,e.name),Me(typeof E=="boolean",e,"internal-error"),Me(typeof A=="boolean",e,"internal-error"),bs(l,e.name),bs(c,e.name),bs(f,e.name),bs(d,e.name),bs(p,e.name),bs(_,e.name);const B=new Cr({uid:b,auth:e,email:a,emailVerified:E,displayName:i,isAnonymous:A,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:I,createdAt:p,lastLoginAt:_});return w&&Array.isArray(w)&&(B.providerData=w.map(q=>({...q}))),d&&(B._redirectEventId=d),B}static async _fromIdTokenResponse(e,n,i=!1){const a=new Lo;a.updateFromServerResponse(n);const l=new Cr({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await wh(l),l}static async _fromGetAccountInfoResponse(e,n,i){const a=n.users[0];Me(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?Lw(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,f=new Lo;f.updateFromIdToken(i);const d=new Cr({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new lg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(d,p),d}}const jE=new Map;function Ri(t){Li(t instanceof Function,"Expected a class definition");let e=jE.get(t);return e?(Li(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,jE.set(t,e),e)}class Uw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Uw.type="NONE";const ME=Uw;function Jd(t,e,n){return`firebase:${t}:${e}:${n}`}class Uo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=Jd(this.userKey,a.apiKey,l),this.fullPersistenceKey=Jd("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await xh(this.auth,{idToken:e}).catch(()=>{});return n?Cr._fromGetAccountInfoResponse(this.auth,n,e):null}return Cr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Uo(Ri(ME),e,i);const a=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Ri(ME);const c=Jd(i,e.config.apiKey,e.name);let f=null;for(const p of n)try{const _=await p._get(c);if(_){let b;if(typeof _=="string"){const E=await xh(e,{idToken:_}).catch(()=>{});if(!E)break;b=await Cr._fromGetAccountInfoResponse(e,E,_)}else b=Cr._fromJSON(e,_);p!==l&&(f=b),l=p;break}}catch{}const d=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new Uo(l,e,i):(l=d[0],f&&await l._set(c,f.toJSON()),await Promise.all(n.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new Uo(l,e,i))}}function kE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Gw(e))return"Blackberry";if(Qw(e))return"Webos";if(Bw(e))return"Safari";if((e.includes("chrome/")||Fw(e))&&!e.includes("edge/"))return"Chrome";if(Hw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function zw(t=xn()){return/firefox\//i.test(t)}function Bw(t=xn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Fw(t=xn()){return/crios\//i.test(t)}function qw(t=xn()){return/iemobile/i.test(t)}function Hw(t=xn()){return/android/i.test(t)}function Gw(t=xn()){return/blackberry/i.test(t)}function Qw(t=xn()){return/webos/i.test(t)}function fy(t=xn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Zj(t=xn()){return fy(t)&&!!window.navigator?.standalone}function eM(){return uD()&&document.documentMode===10}function Kw(t=xn()){return fy(t)||Hw(t)||Qw(t)||Gw(t)||/windows phone/i.test(t)||qw(t)}function $w(t,e=[]){let n;switch(t){case"Browser":n=kE(xn());break;case"Worker":n=`${kE(xn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${rl}/${i}`}class tM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=l=>new Promise((c,f)=>{try{const d=e(l);c(d)}catch(d){f(d)}});i.onAbort=n,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function nM(t,e={}){return Hs(t,"GET","/v2/passwordPolicy",Pa(t,e))}const rM=6;class iM{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??rM,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class sM{constructor(e,n,i,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new NE(this),this.idTokenSubscription=new NE(this),this.beforeStateQueue=new tM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ri(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Uo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await xh(this,{idToken:e}),i=await Cr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ar(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=i?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===c)&&f?.user&&(i=f.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await wh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Vj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ar(this.app))return Promise.reject(js(this));const n=e?on(e):null;return n&&Me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ar(this.app)?Promise.reject(js(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ar(this.app)?Promise.reject(js(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nM(this),n=new iM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Jj(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ri(e)||this._popupRedirectResolver;Me(n,this,"argument-error"),this.redirectPersistenceManager=await Uo.create(this,[Ri(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,a);return()=>{c=!0,d()}}else{const d=e.addObserver(n);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$w(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Ar(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&kj(`Error while retrieving App Check token: ${e.error}`),e?.token}}function cl(t){return on(t)}class NE{constructor(e){this.auth=e,this.observer=null,this.addObserver=yD(n=>this.observer=n)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let tf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aM(t){tf=t}function Yw(t){return tf.loadJS(t)}function oM(){return tf.recaptchaEnterpriseScript}function lM(){return tf.gapiScript}function uM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class cM{constructor(){this.enterprise=new dM}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class dM{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const hM="recaptcha-enterprise",Ww="NO_RECAPTCHA";class fM{constructor(e){this.type=hM,this.auth=cl(e)}async verify(e="verify",n=!1){async function i(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{Hj(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const p=new qj(d);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,c(p.siteKey)}}).catch(d=>{f(d)})})}function a(l,c,f){const d=window.grecaptcha;IE(d)?d.enterprise.ready(()=>{d.enterprise.execute(l,{action:e}).then(p=>{c(p)}).catch(()=>{c(Ww)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new cM().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(f=>{if(!n&&IE(window.grecaptcha))a(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=oM();d.length!==0&&(d+=f),Yw(d).then(()=>{a(f,l,c)}).catch(p=>{c(p)})}}).catch(f=>{c(f)})})}}async function PE(t,e,n,i=!1,a=!1){const l=new fM(t);let c;if(a)c=Ww;else try{c=await l.verify(n)}catch{c=await l.verify(n,!0)}const f={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const d=f.phoneEnrollmentInfo.phoneNumber,p=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const d=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function VE(t,e,n,i,a){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await PE(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await PE(t,e,n,n==="getOobCode");return i(t,c)}else return Promise.reject(l)})}function mM(t,e){const n=Rg(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(Ms(l,e??{}))return a;Dr(a,"already-initialized")}return n.initialize({options:e})}function pM(t,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Ri);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function gM(t,e,n){const i=cl(t);Me(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=Xw(e),{host:c,port:f}=yM(e),d=f===null?"":`:${f}`,p={url:`${l}//${c}${d}/`},_=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Me(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Me(Ms(p,i.config.emulator)&&Ms(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,nl(c)?(FS(`${l}//${c}${d}`),qS("Auth",!0)):_M()}function Xw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yM(t){const e=Xw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:LE(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:LE(c)}}}function LE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function _M(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class my{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ci("not implemented")}_getIdTokenResponse(e){return Ci("not implemented")}_linkToIdToken(e,n){return Ci("not implemented")}_getReauthenticationResolver(e){return Ci("not implemented")}}async function vM(t,e){return Hs(t,"POST","/v1/accounts:signUp",e)}async function bM(t,e){return ef(t,"POST","/v1/accounts:signInWithPassword",Pa(t,e))}async function EM(t,e){return ef(t,"POST","/v1/accounts:signInWithEmailLink",Pa(t,e))}async function SM(t,e){return ef(t,"POST","/v1/accounts:signInWithEmailLink",Pa(t,e))}class Bu extends my{constructor(e,n,i,a=null){super("password",i),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new Bu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Bu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return VE(e,n,"signInWithPassword",bM);case"emailLink":return EM(e,{email:this._email,oobCode:this._password});default:Dr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return VE(e,i,"signUpPassword",vM);case"emailLink":return SM(e,{idToken:n,email:this._email,oobCode:this._password});default:Dr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function zo(t,e){return ef(t,"POST","/v1/accounts:signInWithIdp",Pa(t,e))}const xM="http://localhost";class Oa extends my{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Oa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=n;if(!i||!a)return null;const c=new Oa(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return zo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,zo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,zo(e,n)}buildRequest(){const e={requestUri:xM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qu(n)}return e}}function wM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TM(t){const e=bu(Eu(t)).link,n=e?bu(Eu(e)).deep_link_id:null,i=bu(Eu(t)).deep_link_id;return(i?bu(Eu(i)).link:null)||i||n||e||t}class py{constructor(e){const n=bu(Eu(e)),i=n.apiKey??null,a=n.oobCode??null,l=wM(n.mode??null);Me(i&&a&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=a,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=TM(e);try{return new py(n)}catch{return null}}}class dl{constructor(){this.providerId=dl.PROVIDER_ID}static credential(e,n){return Bu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=py.parseLink(n);return Me(i,"argument-error"),Bu._fromEmailAndCode(e,i.code,i.tenantId)}}dl.PROVIDER_ID="password";dl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";dl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Jw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class tc extends Jw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Es extends tc{constructor(){super("facebook.com")}static credential(e){return Oa._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.FACEBOOK_SIGN_IN_METHOD="facebook.com";Es.PROVIDER_ID="facebook.com";class Ss extends tc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Oa._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ss.credential(n,i)}catch{return null}}}Ss.GOOGLE_SIGN_IN_METHOD="google.com";Ss.PROVIDER_ID="google.com";class xs extends tc{constructor(){super("github.com")}static credential(e){return Oa._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xs.credential(e.oauthAccessToken)}catch{return null}}}xs.GITHUB_SIGN_IN_METHOD="github.com";xs.PROVIDER_ID="github.com";class ws extends tc{constructor(){super("twitter.com")}static credential(e,n){return Oa._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ws.credential(n,i)}catch{return null}}}ws.TWITTER_SIGN_IN_METHOD="twitter.com";ws.PROVIDER_ID="twitter.com";class Wo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,a=!1){const l=await Cr._fromIdTokenResponse(e,i,a),c=UE(i);return new Wo({user:l,providerId:c,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const a=UE(i);return new Wo({user:e,providerId:a,_tokenResponse:i,operationType:n})}}function UE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Th extends zi{constructor(e,n,i,a){super(n.code,n.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Th.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,a){return new Th(e,n,i,a)}}function Zw(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Th._fromErrorAndOperation(t,l,e,i):l})}async function AM(t,e,n=!1){const i=await zu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Wo._forOperation(t,"link",i)}async function CM(t,e,n=!1){const{auth:i}=t;if(Ar(i.app))return Promise.reject(js(i));const a="reauthenticate";try{const l=await zu(t,Zw(i,a,e,t),n);Me(l.idToken,i,"internal-error");const c=hy(l.idToken);Me(c,i,"internal-error");const{sub:f}=c;return Me(t.uid===f,i,"user-mismatch"),Wo._forOperation(t,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Dr(i,"user-mismatch"),l}}async function eT(t,e,n=!1){if(Ar(t.app))return Promise.reject(js(t));const i="signIn",a=await Zw(t,i,e),l=await Wo._fromIdTokenResponse(t,i,a);return n||await t._updateCurrentUser(l.user),l}async function RM(t,e){return eT(cl(t),e)}async function DM(t){const e=cl(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function IM(t,e,n){return Ar(t.app)?Promise.reject(js(t)):RM(on(t),dl.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&DM(t),i})}function OM(t,e,n,i){return on(t).onIdTokenChanged(e,n,i)}function jM(t,e,n){return on(t).beforeAuthStateChanged(e,n)}function MM(t,e,n,i){return on(t).onAuthStateChanged(e,n,i)}function kM(t){return on(t).signOut()}const Ah="__sak";class tT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ah,"1"),this.storage.removeItem(Ah),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const NM=1e3,PM=10;class nT extends tT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Kw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),a=this.localCache[n];i!==a&&e(n,a,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,f,d)=>{this.notifyListeners(c,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!n&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);eM()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,PM):a()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},NM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nT.type="LOCAL";const VM=nT;class rT extends tT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}rT.type="SESSION";const iT=rT;function LM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class nf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const i=new nf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:a,data:l}=n.data,c=this.handlersMap[a];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const f=Array.from(c).map(async p=>p(n.origin,l)),d=await LM(f);n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nf.receivers=[];function gy(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}class UM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,d)=>{const p=gy("",20);a.port1.start();const _=setTimeout(()=>{d(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(b){const E=b;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(E.data.response);break;default:clearTimeout(_),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function si(){return window}function zM(t){si().location.href=t}function sT(){return typeof si().WorkerGlobalScope<"u"&&typeof si().importScripts=="function"}async function BM(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FM(){return navigator?.serviceWorker?.controller||null}function qM(){return sT()?self:null}const aT="firebaseLocalStorageDb",HM=1,Ch="firebaseLocalStorage",oT="fbase_key";class nc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rf(t,e){return t.transaction([Ch],e?"readwrite":"readonly").objectStore(Ch)}function GM(){const t=indexedDB.deleteDatabase(aT);return new nc(t).toPromise()}function ug(){const t=indexedDB.open(aT,HM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Ch,{keyPath:oT})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Ch)?e(i):(i.close(),await GM(),e(await ug()))})})}async function zE(t,e,n){const i=rf(t,!0).put({[oT]:e,value:n});return new nc(i).toPromise()}async function QM(t,e){const n=rf(t,!1).get(e),i=await new nc(n).toPromise();return i===void 0?null:i.value}function BE(t,e){const n=rf(t,!0).delete(e);return new nc(n).toPromise()}const KM=800,$M=3;class lT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ug(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>$M)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nf._getInstance(qM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await BM(),!this.activeServiceWorker)return;this.sender=new UM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ug();return await zE(e,Ah,"1"),await BE(e,Ah),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>zE(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>QM(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>BE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=rf(a,!1).getAll();return new nc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lT.type="LOCAL";const YM=lT;new ec(3e4,6e4);function WM(t,e){return e?Ri(e):(Me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class yy extends my{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return zo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return zo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function XM(t){return eT(t.auth,new yy(t),t.bypassAuthState)}function JM(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),CM(n,new yy(t),t.bypassAuthState)}async function ZM(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),AM(n,new yy(t),t.bypassAuthState)}class uT{constructor(e,n,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:a,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XM;case"linkViaPopup":case"linkViaRedirect":return ZM;case"reauthViaPopup":case"reauthViaRedirect":return JM;default:Dr(this.auth,"internal-error")}}resolve(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ek=new ec(2e3,1e4);class No extends uT{constructor(e,n,i,a,l){super(e,n,a,l),this.provider=i,this.authWindow=null,this.pollId=null,No.currentPopupAction&&No.currentPopupAction.cancel(),No.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){Li(this.filter.length===1,"Popup operations only handle one event");const e=gy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ii(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,No.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ii(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ek.get())};e()}}No.currentPopupAction=null;const tk="pendingRedirect",Zd=new Map;class nk extends uT{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Zd.get(this.auth._key());if(!e){try{const i=await rk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Zd.set(this.auth._key(),e)}return this.bypassAuthState||Zd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rk(t,e){const n=ak(e),i=sk(t);if(!await i._isAvailable())return!1;const a=await i._get(n)==="true";return await i._remove(n),a}function ik(t,e){Zd.set(t._key(),e)}function sk(t){return Ri(t._redirectPersistence)}function ak(t){return Jd(tk,t.config.apiKey,t.name)}async function ok(t,e,n=!1){if(Ar(t.app))return Promise.reject(js(t));const i=cl(t),a=WM(i,e),c=await new nk(i,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}const lk=600*1e3;class uk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ck(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!cT(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ii(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lk&&this.cachedEventUids.clear(),this.cachedEventUids.has(FE(e))}saveEventToCache(e){this.cachedEventUids.add(FE(e)),this.lastProcessedEventTime=Date.now()}}function FE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function cT({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function ck(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cT(t);default:return!1}}async function dk(t,e={}){return Hs(t,"GET","/v1/projects",e)}const hk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fk=/^https?/;async function mk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await dk(t);for(const n of e)try{if(pk(n))return}catch{}Dr(t,"unauthorized-domain")}function pk(t){const e=og(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===i}if(!fk.test(n))return!1;if(hk.test(t))return i===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}const gk=new ec(3e4,6e4);function qE(){const t=si().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function yk(t){return new Promise((e,n)=>{function i(){qE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qE(),n(ii(t,"network-request-failed"))},timeout:gk.get()})}if(si().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(si().gapi?.load)i();else{const a=uM("iframefcb");return si()[a]=()=>{gapi.load?i():n(ii(t,"network-request-failed"))},Yw(`${lM()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw eh=null,e})}let eh=null;function _k(t){return eh=eh||yk(t),eh}const vk=new ec(5e3,15e3),bk="__/auth/iframe",Ek="emulator/auth/iframe",Sk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wk(t){const e=t.config;Me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?dy(e,Ek):`https://${t.config.authDomain}/${bk}`,i={apiKey:e.apiKey,appName:t.name,v:rl},a=xk.get(t.config.apiHost);a&&(i.eid=a);const l=t._getFrameworks();return l.length&&(i.fw=l.join(",")),`${n}?${Qu(i).slice(1)}`}async function Tk(t){const e=await _k(t),n=si().gapi;return Me(n,t,"internal-error"),e.open({where:document.body,url:wk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sk,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=ii(t,"network-request-failed"),f=si().setTimeout(()=>{l(c)},vk.get());function d(){si().clearTimeout(f),a(i)}i.ping(d).then(d,()=>{l(c)})}))}const Ak={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ck=500,Rk=600,Dk="_blank",Ik="http://localhost";class HE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ok(t,e,n,i=Ck,a=Rk){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const d={...Ak,width:i.toString(),height:a.toString(),top:l,left:c},p=xn().toLowerCase();n&&(f=Fw(p)?Dk:n),zw(p)&&(e=e||Ik,d.scrollbars="yes");const _=Object.entries(d).reduce((E,[A,w])=>`${E}${A}=${w},`,"");if(Zj(p)&&f!=="_self")return jk(e||"",f),new HE(null);const b=window.open(e||"",f,_);Me(b,t,"popup-blocked");try{b.focus()}catch{}return new HE(b)}function jk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const Mk="__/auth/handler",kk="emulator/auth/handler",Nk=encodeURIComponent("fac");async function GE(t,e,n,i,a,l){Me(t.config.authDomain,t,"auth-domain-config-required"),Me(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:rl,eventId:a};if(e instanceof Jw){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",gD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,b]of Object.entries({}))c[_]=b}if(e instanceof tc){const _=e.getScopes().filter(b=>b!=="");_.length>0&&(c.scopes=_.join(","))}t.tenantId&&(c.tid=t.tenantId);const f=c;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const d=await t._getAppCheckToken(),p=d?`#${Nk}=${encodeURIComponent(d)}`:"";return`${Pk(t)}?${Qu(f).slice(1)}${p}`}function Pk({config:t}){return t.emulator?dy(t,kk):`https://${t.authDomain}/${Mk}`}const Tp="webStorageSupport";class Vk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iT,this._completeRedirectFn=ok,this._overrideRedirectResult=ik}async _openPopup(e,n,i,a){Li(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await GE(e,n,i,og(),a);return Ok(e,l,gy())}async _openRedirect(e,n,i,a){await this._originValidation(e);const l=await GE(e,n,i,og(),a);return zM(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(Li(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await Tk(e),i=new uk(e);return n.register("authEvent",a=>(Me(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Tp,{type:Tp},a=>{const l=a?.[0]?.[Tp];l!==void 0&&n(!!l),Dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=mk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Kw()||Bw()||fy()}}const Lk=Vk;var QE="@firebase/auth",KE="1.12.0";class Uk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function zk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Bk(t){Bo(new Ca("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;Me(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:c,authDomain:f,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$w(t)},p=new sM(i,a,l,d);return pM(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Bo(new Ca("auth-internal",e=>{const n=cl(e.getProvider("auth").getImmediate());return(i=>new Uk(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ds(QE,KE,zk(t)),Ds(QE,KE,"esm2020")}const Fk=300,qk=BS("authIdTokenMaxAge")||Fk;let $E=null;const Hk=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>qk)return;const a=n?.token;$E!==a&&($E=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Gk(t=KS()){const e=Rg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=mM(t,{popupRedirectResolver:Lk,persistence:[YM,VM,iT]}),i=BS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=Hk(l.toString());jM(n,c,()=>c(n.currentUser)),OM(n,f=>c(f))}}const a=US("auth");return a&&gM(n,`http://${a}`),n}function Qk(){return document.getElementsByTagName("head")?.[0]??document}aM({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=a=>{const l=ii("internal-error");l.customData=a,n(l)},i.type="text/javascript",i.charset="UTF-8",Qk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Bk("Browser");function Va(){const t=Gk(Dw);async function e(){return!1}async function n(f,d){return IM(t,f,d)}function i(){return kM(t)}function a(f){MM(t,d=>{f(d)})}function l(){return t.currentUser}return{set_user_listener:a,delete_firebase_user:e,login_firebase_user:n,logout_firebase_user:i,get_current_firebase_user:l}}const Kk={currentUserId:null,selectedBudgetId:null,currentYear:new Date().getFullYear(),currentMonthNumber:new Date().getMonth()+1,setSelectedBudgetId:()=>{},setCurrentYear:()=>{},setCurrentMonthNumber:()=>{},isInitialized:!1,needsFirstBudget:!1,goToPreviousMonth:()=>{},goToNextMonth:()=>{},pendingInvites:[],hasPendingInvites:!1,accessibleBudgets:[],isAdmin:!1,isTest:!1,loadAccessibleBudgets:async()=>{},switchToBudget:()=>{},checkBudgetInvite:async()=>null,clearCache:()=>{}},dT=M.createContext(Kk);function $k({children:t}){const n=Va().get_current_firebase_user(),[i,a]=M.useState(null),[l,c]=M.useState(new Date().getFullYear()),[f,d]=M.useState(new Date().getMonth()+1),[p,_]=M.useState(!1),[b,E]=M.useState(!1),A=_j(n?.uid||null,n?.email||null),w=bj(n?.uid||null,A.data||null,{enabled:!!n?.uid&&!!A.data}),D=A.data?.permission_flags?.is_admin===!0,I=A.data?.permission_flags?.is_test===!0,B=w.data?.pendingInvites||[],q=w.data?.budgets||[],z=B.length>0;M.useEffect(()=>{if(!n||p||A.isLoading||w.isLoading)return;const R=A.data,L=w.data;!R&&!A.isError||(R&&R.budget_ids.length>0?(a(R.budget_ids[0]),E(!1)):L?.pendingInvites&&L.pendingInvites.length>0?E(!1):E(!0),_(!0))},[n,p,A.data,A.isLoading,A.isError,w.data,w.isLoading]);const $=M.useCallback(()=>{d(R=>R===1?(c(L=>L-1),12):R-1)},[]),W=M.useCallback(()=>{d(R=>R===12?(c(L=>L+1),1):R+1)},[]),oe=M.useCallback(async()=>{await w.refetch()},[w]),N=M.useCallback(R=>{a(R)},[]),T=M.useCallback(async R=>{if(!n)return null;try{const{exists:L,data:k}=await Ge("budgets",R);if(!L||!k)return null;const X=k.user_ids?.includes(n.uid),F=k.accepted_user_ids?.includes(n.uid);return X&&!F?{budgetId:R,budgetName:k.name||"Unnamed Budget",ownerEmail:k.owner_email||null}:null}catch(L){return console.error("[BudgetContext] Error checking budget invite:",L),null}},[n]),C=M.useCallback(()=>{vt.clear(),localStorage.removeItem("BUDGET_APP_QUERY_CACHE")},[]),j={currentUserId:n?.uid||null,selectedBudgetId:i,currentYear:l,currentMonthNumber:f,setSelectedBudgetId:a,setCurrentYear:c,setCurrentMonthNumber:d,isInitialized:p,needsFirstBudget:b,goToPreviousMonth:$,goToNextMonth:W,pendingInvites:B,hasPendingInvites:z,accessibleBudgets:q,isAdmin:D,isTest:I,loadAccessibleBudgets:oe,switchToBudget:N,checkBudgetInvite:T,clearCache:C};return m.jsx(dT.Provider,{value:j,children:t})}function Cn(){const t=M.useContext(dT);if(!t)throw new Error("useBudget must be used within a BudgetProvider");return t}function Yk(){return m.jsxs("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:[m.jsx("h1",{children:"Welcome"}),m.jsx("nav",{children:m.jsxs("ul",{children:[m.jsx("li",{children:m.jsx(Dt,{to:"/sql-test",children:"SQL Test"})}),m.jsx("li",{children:m.jsx(Dt,{to:"/budget",children:"Budget"})}),m.jsx("li",{children:m.jsx(Dt,{to:"/account",children:"Account"})})]})})]})}function Wk(){return m.jsxs("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:[m.jsx("nav",{children:m.jsx(Dt,{to:"/",children:" Back to Home"})}),m.jsx("h1",{children:"SQL Test"}),m.jsx("h2",{children:"Setup"}),m.jsxs("h3",{children:["1. Open up your preferred web browser to ",m.jsx("a",{href:"https://www.programiz.com/sql/online-compiler/",target:"_blank",rel:"noopener noreferrer",children:"https://www.programiz.com/sql/online-compiler/"})]}),m.jsxs("ul",{children:[m.jsx("li",{children:"This is a basic online sql query editor"}),m.jsxs("li",{children:["It will include three tables: ",m.jsx("b",{children:'"Customer"'}),", ",m.jsx("b",{children:'"Orders"'}),", and ",m.jsx("b",{children:'"Shippings"'})]})]}),m.jsx("h3",{children:"2. Run the below query block inside the online editor to make some updates to the schema."}),m.jsx("pre",{style:{backgroundColor:"#1a1a1a",padding:"1rem",borderRadius:"8px",overflow:"auto"},children:m.jsx("code",{children:`ALTER TABLE shippings
ADD order_id INT;

UPDATE shippings
SET order_id = CASE
  WHEN shipping_id = 1 THEN 5
    WHEN shipping_id = 2 THEN 1
    WHEN shipping_id = 3 THEN 3
    WHEN shipping_id = 4 THEN 6
    WHEN shipping_id = 5 THEN 4
END
WHERE shipping_id IN (1,2,3,4,5);

INSERT INTO shippings (shipping_id, status, customer, order_id)
VALUES (6, "Cancelled", 4, 2);

INSERT INTO orders (order_id, item, amount, customer_id)
VALUES (6, "Monitor", 800, 5);`})}),m.jsx("h2",{children:"SQL Problems"}),m.jsx("p",{children:"Write queries in the online editor to answer these questions."}),m.jsx("h3",{children:"Question #1"}),m.jsx("p",{children:'Calculate the total number of orders, the total $ amount, and the total items "delivered" by Country. Show the following columns: country, order count, total $ amount, and total delivered. Order by total $ amount largest to smallest.'}),m.jsx("h3",{children:"Question #2"}),m.jsx("p",{children:"Find the customers who have placed orders with the HIGHEST total amount for each country. One record per country. Display the customer's first name, last name, country, and the corresponding highest total order amount. Also include the shipping status of the associated order."})]})}function Xk(){const t=M.useContext(Hu),e=Va(),[n,i]=M.useState(!1),a=fr(),l=jh(),c=a.state?.from||"/";M.useEffect(()=>{t.is_logged_in&&c!=="/"&&l(c,{replace:!0})},[t.is_logged_in,c,l]);function f(){i(!0),e.logout_firebase_user().then(function(){i(!1)})}return m.jsxs("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:[m.jsx("h1",{children:"Account"}),t.is_logged_in?n?m.jsx("p",{children:"Logging Out..."}):m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:["You are logged in as ",t.username]}),m.jsx("button",{onClick:f,style:{marginTop:"1rem"},children:"Logout"})]}):m.jsx(Jk,{}),m.jsx("p",{children:m.jsx(Dt,{to:"/",children:"Back to Home"})})]})}function Jk(){const t=Va(),[e,n]=M.useState(""),[i,a]=M.useState(""),[l,c]=M.useState(!1),[f,d]=M.useState("");function p(E){n(E.target.value)}function _(E){a(E.target.value)}function b(E){E.preventDefault(),c(!0),d(""),t.login_firebase_user(e,i).then(function(){}).catch(function(){d("Incorrect login credentials")}).finally(function(){c(!1)})}return m.jsxs("form",{onSubmit:b,children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"username",children:"Email: "}),m.jsx("input",{id:"username",type:"email",value:e,onChange:p})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",children:"Password: "}),m.jsx("input",{id:"password",type:"password",value:i,onChange:_})]}),l?m.jsx("p",{children:"Logging in..."}):m.jsx("button",{children:"Login"}),f&&m.jsx("p",{style:{color:"red"},children:f})]})}const Zk={mobile:640},eN=Zk.mobile,hT=["January","February","March","April","May","June","July","August","September","October","November","December"],YE="admin_active_tab",tN=["my-budgets","accounts","categories","users","migration","feedback","tests"];function Gs(t=eN){const[e,n]=M.useState(()=>typeof window>"u"?!1:window.innerWidth<t);return M.useEffect(()=>{function i(){n(window.innerWidth<t)}return window.addEventListener("resize",i),i(),()=>window.removeEventListener("resize",i)},[t]),e}function Yn(t,e){const n=uj(t),i=Cj(),a=jj(),l=n.data,c=l?.budget||null,f=l?.accounts||{},d=l?.accountGroups||{},p=l?.categories||{},_=l?.categoryGroups||[],b=c?.owner_id===e,E=c?.user_ids||[],A=c?.accepted_user_ids||[],w=M.useCallback(async F=>{if(!t)throw new Error("No budget selected");await i.updateAccounts.mutateAsync({budgetId:t,accounts:F})},[t,i.updateAccounts]),D=M.useCallback(async F=>{if(!t)throw new Error("No budget selected");await i.updateAccountGroups.mutateAsync({budgetId:t,accountGroups:F})},[t,i.updateAccountGroups]),I=M.useCallback(async F=>{if(!t)throw new Error("No budget selected");await i.updateCategories.mutateAsync({budgetId:t,categories:F})},[t,i.updateCategories]),B=M.useCallback(async F=>{if(!t)throw new Error("No budget selected");await i.updateCategoryGroups.mutateAsync({budgetId:t,categoryGroups:F})},[t,i.updateCategoryGroups]),q=M.useCallback(async(F,U)=>{if(!t)throw new Error("No budget selected");await Promise.all([i.updateAccounts.mutateAsync({budgetId:t,accounts:F}),i.updateAccountGroups.mutateAsync({budgetId:t,accountGroups:U})])},[t,i]),z=M.useCallback(async(F,U)=>{if(!t)throw new Error("No budget selected");await Promise.all([i.updateCategories.mutateAsync({budgetId:t,categories:F}),i.updateCategoryGroups.mutateAsync({budgetId:t,categoryGroups:U})])},[t,i]),$=M.useCallback(async F=>{if(!t)throw new Error("No budget selected");await i.renameBudget.mutateAsync({budgetId:t,newName:F})},[t,i.renameBudget]),W=M.useCallback(async F=>{if(!e)throw new Error("Not authenticated");return await a.createBudget.mutateAsync({name:F.trim()||"My Budget",userId:e,userEmail:null})},[e,a.createBudget]),oe=M.useCallback(async F=>{if(!t)throw new Error("No budget selected");await a.inviteUser.mutateAsync({budgetId:t,userId:F})},[t,a.inviteUser]),N=M.useCallback(async F=>{if(!t)throw new Error("No budget selected");await a.revokeUser.mutateAsync({budgetId:t,userId:F})},[t,a.revokeUser]),T=M.useCallback(async F=>{if(!e)throw new Error("Not authenticated");await a.acceptInvite.mutateAsync({budgetId:F,userId:e})},[e,a.acceptInvite]),C=M.useCallback(F=>{if(!t)return;const U=vt.getQueryData(se.budget(t));U&&vt.setQueryData(se.budget(t),{...U,accounts:F})},[t]),j=M.useCallback(F=>{if(!t)return;const U=vt.getQueryData(se.budget(t));U&&vt.setQueryData(se.budget(t),{...U,accountGroups:F})},[t]),R=M.useCallback(F=>{if(!t)return;const U=vt.getQueryData(se.budget(t));U&&vt.setQueryData(se.budget(t),{...U,categories:F})},[t]),L=M.useCallback(F=>{if(!t)return;const U=vt.getQueryData(se.budget(t));U&&vt.setQueryData(se.budget(t),{...U,categoryGroups:F})},[t]),k=M.useCallback(async()=>{t&&await vt.invalidateQueries({queryKey:se.budget(t)})},[t]),X=M.useCallback(()=>Object.entries(f).filter(([,F])=>{const U=F.account_group_id?d[F.account_group_id]:void 0,H=U?.on_budget!==void 0?U.on_budget:F.on_budget!==!1,Q=U?.is_active!==void 0?U.is_active:F.is_active!==!1;return H&&Q}).reduce((F,[,U])=>F+U.balance,0),[f,d]);return{isLoading:n.isLoading,isFetching:n.isFetching,error:n.error,budget:c,accounts:f,accountGroups:d,categories:p,categoryGroups:_,isOwner:b,budgetUserIds:E,acceptedUserIds:A,saveAccounts:w,saveAccountGroups:D,saveCategories:I,saveCategoryGroups:B,saveAccountsAndGroups:q,saveCategoriesAndGroups:z,renameBudget:$,createBudget:W,inviteUser:oe,revokeUser:N,acceptInvite:T,setAccountsOptimistic:C,setAccountGroupsOptimistic:j,setCategoriesOptimistic:R,setCategoryGroupsOptimistic:L,refreshBudget:k,getOnBudgetTotal:X}}function hl(t,e,n){const i=fj(t,e,n,{enabled:!!t}),a=gj(t,{enabled:!!t}),l=Oj(),c=i.data?.month||null,f=c?.income||[],d=c?.expenses||[],p=c?.allocations||[],_=c?.category_balances||[],b=c?.total_income||0,E=c?.total_expenses||0,A=c?.allocations_finalized||!1,w=M.useMemo(()=>{if(c?.previous_month_snapshot?.total_income!==void 0)return c.previous_month_snapshot.total_income;if(!t)return 0;let j=e,R=n-1;return R<1&&(R=12,j-=1),vt.getQueryData(se.month(t,j,R))?.month?.total_income||0},[c,t,e,n]),D=a.data||[],I=M.useCallback(async(j,R,L,k,X)=>{if(!t)throw new Error("No budget selected");const[F,U]=L.split("-").map(Number);await l.addIncome.mutateAsync({budgetId:t,year:F,month:U,amount:j,accountId:R,date:L,payee:k,description:X})},[t,l.addIncome]),B=M.useCallback(async(j,R,L,k,X,F)=>{if(!t||!c)throw new Error("No budget or month loaded");const U=c.income.find(H=>H.id===j);if(!U)throw new Error("Income not found");await l.updateIncome.mutateAsync({budgetId:t,year:e,month:n,incomeId:j,amount:R,accountId:L,date:k,payee:X,description:F,oldAmount:U.amount,oldAccountId:U.account_id})},[t,c,e,n,l.updateIncome]),q=M.useCallback(async j=>{if(!t||!c)throw new Error("No budget or month loaded");const R=c.income.find(L=>L.id===j);if(!R)throw new Error("Income not found");await l.deleteIncome.mutateAsync({budgetId:t,year:e,month:n,incomeId:j,amount:R.amount,accountId:R.account_id})},[t,c,e,n,l.deleteIncome]),z=M.useCallback(async(j,R,L,k,X,F)=>{if(!t)throw new Error("No budget selected");const[U,H]=k.split("-").map(Number);await l.addExpense.mutateAsync({budgetId:t,year:U,month:H,amount:j,categoryId:R,accountId:L,date:k,payee:X,description:F})},[t,l.addExpense]),$=M.useCallback(async(j,R,L,k,X,F,U)=>{if(!t||!c)throw new Error("No budget or month loaded");const H=c.expenses?.find(Q=>Q.id===j);if(!H)throw new Error("Expense not found");await l.updateExpense.mutateAsync({budgetId:t,year:e,month:n,expenseId:j,amount:R,categoryId:L,accountId:k,date:X,payee:F,description:U,oldAmount:H.amount,oldAccountId:H.account_id})},[t,c,e,n,l.updateExpense]),W=M.useCallback(async j=>{if(!t||!c)throw new Error("No budget or month loaded");const R=c.expenses?.find(L=>L.id===j);if(!R)throw new Error("Expense not found");await l.deleteExpense.mutateAsync({budgetId:t,year:e,month:n,expenseId:j,amount:R.amount,accountId:R.account_id})},[t,c,e,n,l.deleteExpense]),oe=M.useCallback(async j=>{if(!t)throw new Error("No budget selected");await l.saveAllocations.mutateAsync({budgetId:t,year:e,month:n,allocations:j})},[t,e,n,l.saveAllocations]),N=M.useCallback(async()=>{if(!t||!c)throw new Error("No budget or month loaded");await l.finalizeAllocations.mutateAsync({budgetId:t,year:e,month:n,allocations:c.allocations||[]})},[t,c,e,n,l.finalizeAllocations]),T=M.useCallback(async()=>{if(!t)throw new Error("No budget selected");await l.unfinalizeAllocations.mutateAsync({budgetId:t,year:e,month:n})},[t,e,n,l.unfinalizeAllocations]),C=M.useCallback(async()=>{t&&await vt.invalidateQueries({queryKey:se.month(t,e,n)})},[t,e,n]);return{isLoading:i.isLoading,isFetching:i.isFetching,error:i.error,month:c,income:f,expenses:d,allocations:p,categoryBalances:_,totalIncome:b,totalExpenses:E,allocationsFinalized:A,previousMonthIncome:w,payees:D,payeesLoading:a.isLoading,addIncome:I,updateIncome:B,deleteIncome:q,addExpense:z,updateExpense:$,deleteExpense:W,saveAllocations:oe,finalizeAllocations:N,unfinalizeAllocations:T,refreshMonth:C}}function nN(){const{selectedBudgetId:t,currentUserId:e}=Cn(),{budget:n,accounts:i,accountGroups:a,saveAccounts:l,saveAccountGroups:c,saveAccountsAndGroups:f,setAccountsOptimistic:d,setAccountGroupsOptimistic:p}=Yn(t,e),[_,b]=M.useState(null),E=M.useMemo(()=>Object.entries(i).reduce((T,[C,j])=>{const R=j.account_group_id||"ungrouped";return T[R]||(T[R]=[]),T[R].push({...j,id:C}),T},{}),[i]),A=M.useMemo(()=>Object.entries(a).sort(([,T],[,C])=>T.sort_order-C.sort_order).map(([T,C])=>({...C,id:T})),[a]),w=M.useCallback((T,C)=>{if(!n)return;const j=Object.values(i).filter(F=>C==="ungrouped"?!F.account_group_id:F.account_group_id===C),R=j.length>0?Math.max(...j.map(F=>F.sort_order)):-1,L=`account_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,k={nickname:T.nickname,balance:0,account_group_id:C==="ungrouped"?null:C,sort_order:R+1,is_income_account:T.is_income_account,is_income_default:T.is_income_default,is_outgo_account:T.is_outgo_account,is_outgo_default:T.is_outgo_default,on_budget:T.on_budget!==!1,is_active:T.is_active!==!1},X={...i};T.is_income_default&&Object.keys(X).forEach(F=>{X[F]={...X[F],is_income_default:!1}}),T.is_outgo_default&&Object.keys(X).forEach(F=>{X[F]={...X[F],is_outgo_default:!1}}),X[L]=k,d(X),l(X).catch(F=>{console.error("[useAccountHandlers] Error creating account:",F),b(F instanceof Error?F.message:"Failed to create account.")})},[n,i,d,l]),D=M.useCallback((T,C)=>{if(!n)return;const j=i[T];if(!j)return;const R=j.account_group_id||"ungrouped",L=C.account_group_id;let k=j.sort_order;if(R!==(L||"ungrouped")){const F=Object.values(i).filter(U=>(U.account_group_id||"ungrouped")===(L||"ungrouped"));k=F.length>0?Math.max(...F.map(U=>U.sort_order))+1:0}const X={};Object.entries(i).forEach(([F,U])=>{F===T?X[F]={...U,nickname:C.nickname,account_group_id:L,sort_order:k,is_income_account:C.is_income_account,is_income_default:C.is_income_default,is_outgo_account:C.is_outgo_account,is_outgo_default:C.is_outgo_default,on_budget:C.on_budget!==!1,is_active:C.is_active!==!1}:(X[F]={...U},C.is_income_default&&!j.is_income_default&&(X[F].is_income_default=!1),C.is_outgo_default&&!j.is_outgo_default&&(X[F].is_outgo_default=!1))}),d(X),l(X).catch(F=>{console.error("[useAccountHandlers] Error saving account:",F),b(F instanceof Error?F.message:"Failed to save account.")})},[n,i,d,l]),I=M.useCallback(T=>{if(!confirm("Are you sure you want to delete this account?")||!n)return;const{[T]:C,...j}=i;d(j),l(j).catch(R=>{console.error("[useAccountHandlers] Error deleting account:",R),b(R instanceof Error?R.message:"Failed to delete account.")})},[n,i,d,l]),B=M.useCallback(async(T,C)=>{const j=i[T];if(!j)return;const R=j.account_group_id||"ungrouped",L=Object.entries(i).filter(([,Q])=>(Q.account_group_id||"ungrouped")===R).sort(([,Q],[,le])=>Q.sort_order-le.sort_order),k=L.findIndex(([Q])=>Q===T),X=C==="up"?k-1:k+1;if(X<0||X>=L.length)return;const[F,U]=L[X],H={};if(Object.entries(i).forEach(([Q,le])=>{Q===T?H[Q]={...le,sort_order:U.sort_order}:Q===F?H[Q]={...le,sort_order:j.sort_order}:H[Q]={...le}}),d(H),!!n)try{await l(H)}catch(Q){d(i),b(Q instanceof Error?Q.message:"Failed to move account")}},[n,i,d,l]),q=M.useCallback(T=>{if(!n)return;const C=Object.values(a).map(X=>X.sort_order),j=C.length>0?Math.max(...C):-1,R=`account_group_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,L={name:T.name,sort_order:j+1,expected_balance:T.expected_balance,on_budget:T.on_budget,is_active:T.is_active},k={...a,[R]:L};p(k),c(k).catch(X=>{console.error("[useAccountHandlers] Error creating group:",X),b(X instanceof Error?X.message:"Failed to create account type.")})},[n,a,p,c]),z=M.useCallback((T,C)=>{if(!n)return;const j={...a,[T]:{...a[T],name:C.name,expected_balance:C.expected_balance,on_budget:C.on_budget,is_active:C.is_active}};p(j),c(j).catch(R=>{console.error("[useAccountHandlers] Error updating group:",R),b(R instanceof Error?R.message:"Failed to update account type.")})},[n,a,p,c]),$=M.useCallback(T=>{if(!confirm("Are you sure you want to delete this account type? Accounts in this type will move to Ungrouped.")||!n)return;const C={};Object.entries(i).forEach(([L,k])=>{C[L]=k.account_group_id===T?{...k,account_group_id:null}:k});const{[T]:j,...R}=a;d(C),p(R),f(C,R).catch(L=>{console.error("[useAccountHandlers] Error deleting group:",L),b(L instanceof Error?L.message:"Failed to delete account type.")})},[n,i,a,d,p,f]),W=M.useCallback(async(T,C)=>{const j=Object.entries(a).sort(([,F],[,U])=>F.sort_order-U.sort_order),R=j.findIndex(([F])=>F===T),L=C==="up"?R-1:R+1;if(L<0||L>=j.length)return;const[k]=j.splice(R,1);j.splice(L,0,k);const X={};if(j.forEach(([F,U],H)=>{X[F]={...U,sort_order:H}}),p(X),!!n)try{await c(X)}catch(F){p(a),b(F instanceof Error?F.message:"Failed to move account type")}},[n,a,p,c]),oe=M.useCallback(async(T,C,j)=>{const R=i[T];if(!R)return;const L=j==="ungrouped"?null:j,k=Object.entries(i).filter(([,U])=>(U.account_group_id||"ungrouped")===j),X={};Object.entries(i).forEach(([U,H])=>{U!==T&&(X[U]={...H})});let F;if(C==="__group_end__"||k.length===0||!k.find(([U])=>U===C))F=(k.length>0?Math.max(...k.filter(([H])=>H!==T).map(([,H])=>H.sort_order)):-1)+1;else{const U=k.find(([H])=>H===C);if(U){const[,H]=U;F=H.sort_order,Object.entries(X).forEach(([Q,le])=>{(le.account_group_id||"ungrouped")===j&&le.sort_order>=F&&(X[Q]={...le,sort_order:le.sort_order+1})})}else F=0}if(X[T]={...R,account_group_id:L,sort_order:F},d(X),!!n)try{await l(X)}catch(U){b(U instanceof Error?U.message:"Failed to save changes")}},[n,i,d,l]),N=M.useCallback(async(T,C)=>{if(T===C)return;const j=Object.entries(a).sort(([,F],[,U])=>F.sort_order-U.sort_order),R=j.findIndex(([F])=>F===T),L=[...j],[k]=L.splice(R,1);if(C==="__end__")L.push(k);else{const F=L.findIndex(([U])=>U===C);L.splice(F,0,k)}const X={};if(L.forEach(([F,U],H)=>{X[F]={...U,sort_order:H}}),p(X),!!n)try{await c(X)}catch(F){b(F instanceof Error?F.message:"Failed to save new order")}},[n,a,p,c]);return{accounts:i,accountGroups:a,accountsByGroup:E,sortedGroups:A,currentBudget:n,error:_,setError:b,handleCreateAccount:w,handleUpdateAccount:D,handleDeleteAccount:I,handleMoveAccount:B,handleCreateGroup:q,handleUpdateGroup:z,handleDeleteGroup:$,handleMoveGroup:W,reorderAccountsInGroup:oe,reorderGroups:N}}function rN(){const{selectedBudgetId:t,currentUserId:e,currentYear:n,currentMonthNumber:i}=Cn(),{categories:a,getOnBudgetTotal:l}=Yn(t,e),{month:c,isLoading:f,previousMonthIncome:d,saveAllocations:p,finalizeAllocations:_}=hl(t,n,i),[b,E]=M.useState({}),[A,w]=M.useState(!1),[D,I]=M.useState(!1),[B,q]=M.useState(!1),[z,$]=M.useState(null),W=M.useMemo(()=>Object.values(a).reduce((H,Q)=>H+Q.balance,0),[a]);M.useEffect(()=>{if(!c)return;const H={};Object.entries(a).forEach(([Q,le])=>{if(le.default_monthly_type==="percentage")return;const de=c.allocations?.find(V=>V.category_id===Q);de?H[Q]=de.amount.toString():le.default_monthly_amount!==void 0&&le.default_monthly_amount>0?H[Q]=le.default_monthly_amount.toString():H[Q]=""}),E(H)},[c?.year,c?.month,a]);const oe=M.useCallback((H,Q)=>{if(Q.default_monthly_type==="percentage"&&Q.default_monthly_amount!==void 0)return Q.default_monthly_amount/100*d;const le=b[H],de=parseFloat(le||"0");return isNaN(de)?0:de},[b,d]),N=M.useMemo(()=>Object.entries(a).reduce((H,[Q,le])=>H+oe(Q,le),0),[a,oe]),T=l(),C=c?.allocations_finalized?(c.allocations||[]).reduce((H,Q)=>H+Q.amount,0):0,j=T-W,R=M.useMemo(()=>j-N+C,[j,N,C]),L=M.useCallback((H,Q)=>{E(le=>({...le,[H]:Q}))},[]),k=M.useCallback(()=>{if(!c)return;const H={};Object.entries(a).forEach(([Q,le])=>{if(le.default_monthly_type==="percentage")return;const de=c.allocations?.find(V=>V.category_id===Q);de?H[Q]=de.amount.toString():le.default_monthly_amount!==void 0&&le.default_monthly_amount>0?H[Q]=le.default_monthly_amount.toString():H[Q]=""}),E(H),q(!1)},[c,a]),X=M.useCallback(()=>{const H=[];return Object.entries(a).forEach(([Q,le])=>{const de=oe(Q,le);de>0&&H.push({category_id:Q,amount:de})}),H},[a,oe]),F=M.useCallback(async()=>{$(null),w(!0);try{await p(X()),q(!1)}catch(H){$(H instanceof Error?H.message:"Failed to save allocations")}finally{w(!1)}},[p,X]),U=M.useCallback(async()=>{$(null),I(!0);try{await p(X()),await _()}catch(H){$(H instanceof Error?H.message:"Failed to finalize allocations")}finally{I(!1)}},[p,_,X]);return{localAllocations:b,isSavingAllocations:A,isFinalizingAllocations:D,isEditingAppliedAllocations:B,error:z,monthLoading:f,onBudgetTotal:T,availableNow:j,currentDraftTotal:N,availableAfterApply:R,previousMonthIncome:d,allocationsFinalized:c?.allocations_finalized??!1,getAllocationAmount:oe,handleAllocationChange:L,resetAllocationsToSaved:k,handleSaveAllocations:F,handleFinalizeAllocations:U,setIsEditingAppliedAllocations:q,setError:$}}function iN(){const{selectedBudgetId:t,currentUserId:e}=Cn(),{budget:n,categories:i,categoryGroups:a,saveCategories:l,saveCategoryGroups:c,saveCategoriesAndGroups:f,setCategoriesOptimistic:d,setCategoryGroupsOptimistic:p,getOnBudgetTotal:_}=Yn(t,e),[b,E]=M.useState(null),[A,w]=M.useState({}),[D]=M.useState(!1),[I,B]=M.useState(null),[q,z]=M.useState(null),[$,W]=M.useState(null),[oe,N]=M.useState(null);M.useEffect(()=>{if(n&&Object.keys(i).length>0){const ve={};Object.entries(i).forEach(([fe,Z])=>{ve[fe]=Z.balance}),w(ve)}},[n?.id,i]);async function T(ve,fe){if(!n)return;const Z=fe==="ungrouped"?null:fe,Ce=Object.values(i).filter(Ue=>fe==="ungrouped"?!Ue.category_group_id:Ue.category_group_id===fe),xe=Ce.length>0?Math.max(...Ce.map(Ue=>Ue.sort_order)):-1,He=`category_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,qe={name:ve.name,description:ve.description,category_group_id:Z,sort_order:xe+1,default_monthly_amount:ve.default_monthly_amount,default_monthly_type:ve.default_monthly_type,balance:0},tt={...i,[He]:qe};d(tt);try{await l(tt)}catch(Ue){d(i),E(Ue instanceof Error?Ue.message:"Failed to create category")}}async function C(ve,fe){if(n)try{const Z=i[ve];if(!Z)return;const Ce=Z.category_group_id||"ungrouped",xe=fe.category_group_id;let He=Z.sort_order;if(Ce!==(xe||"ungrouped")){const tt=Object.values(i).filter(Ue=>(Ue.category_group_id||"ungrouped")===(xe||"ungrouped")).filter((Ue,Et,gt)=>i[ve]!==gt[Et]);He=tt.length>0?Math.max(...tt.map(Ue=>Ue.sort_order))+1:0}const qe={...i,[ve]:{...Z,name:fe.name,description:fe.description,category_group_id:xe,sort_order:He,default_monthly_amount:fe.default_monthly_amount,default_monthly_type:fe.default_monthly_type}};d(qe),await l(qe)}catch(Z){E(Z instanceof Error?Z.message:"Failed to update category")}}async function j(ve){if(confirm("Are you sure you want to delete this category?")&&n)try{const{[ve]:fe,...Z}=i;d(Z),await l(Z)}catch(fe){E(fe instanceof Error?fe.message:"Failed to delete category")}}async function R(ve,fe){const Z=i[ve];if(!Z)return;const Ce=Z.category_group_id||"ungrouped",xe=Object.entries(i).filter(([,gt])=>(gt.category_group_id||"ungrouped")===Ce).sort((gt,dt)=>gt[1].sort_order-dt[1].sort_order),He=xe.findIndex(([gt])=>gt===ve),qe=fe==="up"?He-1:He+1;if(qe<0||qe>=xe.length)return;const[tt,Ue]=xe[qe],Et={};if(Object.entries(i).forEach(([gt,dt])=>{gt===ve?Et[gt]={...dt,sort_order:Ue.sort_order}:gt===tt?Et[gt]={...dt,sort_order:Z.sort_order}:Et[gt]=dt}),d(Et),!!n)try{await l(Et)}catch(gt){d(i),E(gt instanceof Error?gt.message:"Failed to move category")}}async function L(ve){if(n)try{const fe=a.length>0?Math.max(...a.map(xe=>xe.sort_order)):-1,Z={id:`category_group_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:ve.name,sort_order:fe+1},Ce=[...a,Z];p(Ce),await c(Ce)}catch(fe){E(fe instanceof Error?fe.message:"Failed to create group")}}async function k(ve,fe){if(n)try{const Z=a.map(Ce=>Ce.id===ve?{...Ce,name:fe.name}:Ce);p(Z),await c(Z)}catch(Z){E(Z instanceof Error?Z.message:"Failed to update group")}}async function X(ve){if(confirm("Are you sure you want to delete this group? Categories in this group will move to Uncategorized.")&&n)try{const fe={};Object.entries(i).forEach(([Ce,xe])=>{fe[Ce]=xe.category_group_id===ve?{...xe,category_group_id:null}:xe});const Z=a.filter(Ce=>Ce.id!==ve);d(fe),p(Z),await f(fe,Z)}catch(fe){E(fe instanceof Error?fe.message:"Failed to delete group")}}async function F(ve,fe){const Z=[...a].sort((tt,Ue)=>tt.sort_order-Ue.sort_order),Ce=Z.findIndex(tt=>tt.id===ve),xe=fe==="up"?Ce-1:Ce+1;if(xe<0||xe>=Z.length)return;const[He]=Z.splice(Ce,1);Z.splice(xe,0,He);const qe=Z.map((tt,Ue)=>({...tt,sort_order:Ue}));if(p(qe),!!n)try{await c(qe)}catch(tt){p(a),E(tt instanceof Error?tt.message:"Failed to move group")}}function U(ve,fe){B("category"),z(fe),ve.dataTransfer.effectAllowed="move"}function H(ve,fe,Z){ve.preventDefault(),I==="category"&&(fe!==q&&W(fe),N(Z))}function Q(ve,fe){ve.preventDefault(),I==="category"?(N(fe),W(null)):I==="group"&&fe!==q&&W(fe)}function le(){W(null)}function de(){N(null)}function V(){B(null),z(null),W(null),N(null)}async function J(ve,fe,Z){if(ve.preventDefault(),ve.stopPropagation(),!q||I!=="category"){V();return}const Ce=i[q];if(!Ce)return;const xe=Z==="ungrouped"?null:Z,He=Object.entries(i).filter(([,Ue])=>(Ue.category_group_id||"ungrouped")===Z),qe={};Object.entries(i).forEach(([Ue,Et])=>{Ue!==q&&(qe[Ue]=Et)});let tt;if(fe==="__group_end__"||He.length===0||!He.find(([Ue])=>Ue===fe))tt=(He.length>0?Math.max(...He.filter(([Et])=>Et!==q).map(([,Et])=>Et.sort_order)):-1)+1;else{const Ue=He.find(([Et])=>Et===fe);Ue?(tt=Ue[1].sort_order,Object.entries(qe).forEach(([Et,gt])=>{(gt.category_group_id||"ungrouped")===Z&&gt.sort_order>=tt&&(qe[Et]={...gt,sort_order:gt.sort_order+1})})):tt=0}if(qe[q]={...Ce,category_group_id:xe,sort_order:tt},d(qe),V(),!!n)try{await l(qe)}catch(Ue){E(Ue instanceof Error?Ue.message:"Failed to save changes")}}async function ye(ve,fe){ve.preventDefault(),I==="category"?await J(ve,"__group_end__",fe):I==="group"&&await ce(ve,fe)}function ie(ve,fe){ve.stopPropagation(),B("group"),z(fe),ve.dataTransfer.effectAllowed="move"}async function ce(ve,fe){if(ve.preventDefault(),!q||I!=="group"||q===fe){V();return}const Z=a.findIndex(qe=>qe.id===q),Ce=[...a],[xe]=Ce.splice(Z,1);if(fe==="__end__")Ce.push(xe);else{const qe=Ce.findIndex(tt=>tt.id===fe);Ce.splice(qe,0,xe)}const He=Ce.map((qe,tt)=>({...qe,sort_order:tt}));if(p(He),V(),!!n)try{await c(He)}catch(qe){E(qe instanceof Error?qe.message:"Failed to save new order")}}const Ee=Object.entries(i).reduce((ve,[fe,Z])=>{const Ce=Z.category_group_id||"ungrouped";return ve[Ce]||(ve[Ce]=[]),ve[Ce].push([fe,Z]),ve},{}),De=[...a].sort((ve,fe)=>ve.sort_order-fe.sort_order);return{currentBudget:n,categories:i,categoryGroups:a,categoriesByGroup:Ee,sortedGroups:De,categoryBalances:A,loadingBalances:D,error:b,setError:E,getOnBudgetTotal:_,handleCreateCategory:T,handleUpdateCategory:C,handleDeleteCategory:j,handleMoveCategory:R,handleCreateGroup:L,handleUpdateGroup:k,handleDeleteGroup:X,handleMoveGroup:F,dragType:I,draggedId:q,dragOverId:$,dragOverGroupId:oe,setDragOverId:W,setDragOverGroupId:N,handleCategoryDragStart:U,handleCategoryDragOver:H,handleDragOverGroup:Q,handleDragLeave:le,handleDragLeaveGroup:de,handleDragEnd:V,handleCategoryDrop:J,handleDropOnGroup:ye,handleGroupDragStart:ie,handleGroupDrop:ce}}const be={primary:"#646cff",primaryLight:"#a5b4fc",error:"#f87171",errorBg:"rgba(220, 38, 38, 0.1)",errorBorder:"rgba(220, 38, 38, 0.3)",success:"#4ade80",danger:"#f87171",warning:"#facc15"},sN={maxWidth:"60rem",margin:"0 auto",padding:"2rem"},th={marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},rc={background:"color-mix(in srgb, currentColor 8%, transparent)",padding:"1rem 1.25rem",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"},aN={...rc,padding:"0.6rem 0.875rem",gap:"0.5rem"},oN={background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1rem 1.5rem",borderRadius:"8px",marginBottom:"1.5rem"},lN={background:"color-mix(in srgb, currentColor 8%, transparent)",padding:"1.25rem",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"1rem"},uN={display:"flex",flexDirection:"column",gap:"0.5rem"},cN={fontSize:"0.9rem",fontWeight:500},ic={padding:"0.6rem 0.8rem",borderRadius:"6px",border:"1px solid color-mix(in srgb, currentColor 20%, transparent)",background:"color-mix(in srgb, currentColor 5%, transparent)",fontSize:"1rem",color:"inherit"},dN={...ic,cursor:"pointer"},_y={padding:"0.6rem 1.25rem",borderRadius:"6px",cursor:"pointer",fontWeight:500,fontSize:"0.9rem",transition:"opacity 0.15s"},fT={..._y,background:be.primary,color:"white",border:"none"},hN={...fT,padding:"0.75rem 1.5rem",borderRadius:"8px"},fN={..._y,background:"transparent",border:"1px solid color-mix(in srgb, currentColor 30%, transparent)"},mN={..._y,background:"transparent",border:`1px solid ${be.errorBorder}`,color:be.error},pN={background:"transparent",border:"1px solid color-mix(in srgb, currentColor 25%, transparent)",padding:"0.35rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",opacity:.8,transition:"opacity 0.15s"},gN={display:"flex",gap:"0.5rem"},yN={display:"flex",gap:"0.25rem"},mT={background:"transparent",border:"1px solid color-mix(in srgb, currentColor 20%, transparent)",padding:"0.35rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center",minWidth:"2rem",minHeight:"2rem",transition:"opacity 0.15s, border-color 0.15s"},_N={...mT,borderColor:be.errorBorder,color:be.error},Xo={background:"transparent",border:"1px solid color-mix(in srgb, currentColor 15%, transparent)",padding:"0.25rem 0.35rem",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center",opacity:.6,transition:"opacity 0.15s, background 0.15s"},vy={display:"flex",flexDirection:"column",gap:"2px"},vN={display:"flex",gap:"0.75rem",marginTop:"0.5rem"},pT={opacity:.4,cursor:"grab"},gT={position:"absolute",top:"-4px",left:0,right:0,height:"3px",background:be.primary,borderRadius:"2px",transition:"opacity 0.15s"},bN={position:"relative",height:"2rem",marginTop:"-0.25rem"},EN={position:"absolute",top:"50%",left:0,right:0,height:"3px",background:be.primary,borderRadius:"2px",transition:"opacity 0.15s"},SN={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"0.75rem",opacity:.7,background:"var(--background, #1a1a1a)",padding:"0 0.5rem",whiteSpace:"nowrap"},xN={background:be.errorBg,border:`1px solid ${be.errorBorder}`,color:be.error,padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"},wN={background:"transparent",border:"none",color:be.error,cursor:"pointer",fontSize:"1.2rem",padding:"0 0.25rem",lineHeight:1},sf={opacity:.7,marginBottom:"1.5rem"},fl={margin:0,fontSize:"0.85rem",textTransform:"uppercase",letterSpacing:"0.5px",opacity:.6},by={fontWeight:500,fontSize:"1.1rem"},zs={display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"1.5rem"};function nh({children:t}){return m.jsx("div",{style:sN,children:t})}function ml({message:t,children:e,onDismiss:n,style:i}){return m.jsxs("div",{style:{...xN,...i},children:[m.jsx("span",{children:e??t}),n&&m.jsx("button",{onClick:n,style:wN,children:""})]})}const TN={primary:fT,"primary-large":hN,secondary:fN,danger:mN,small:pN};function Ne({variant:t="primary",isLoading:e,loadingText:n="Saving...",children:i,disabled:a,style:l,...c}){const f=TN[t],d=a||e;return m.jsx("button",{disabled:d,style:{...f,cursor:d?"not-allowed":"pointer",opacity:d?.7:1,...l},...c,children:e?n:i})}function La({children:t,onSubmit:e}){return m.jsx("form",{onSubmit:e,style:lN,children:t})}function $t({label:t,htmlFor:e,children:n,hint:i}){return m.jsxs("div",{style:uN,children:[m.jsx("label",{htmlFor:e,style:cN,children:t}),n,i&&m.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.85rem",opacity:.6},children:i})]})}function Ui(t){return m.jsx("input",{style:ic,...t})}function ja({children:t,...e}){return m.jsx("select",{style:dN,...e,children:t})}function Ey({minHeight:t="6rem",style:e,...n}){return m.jsx("textarea",{style:{...ic,width:"100%",minHeight:t,resize:"vertical",fontFamily:"inherit",boxSizing:"border-box",...e},...n})}function Qs({children:t}){return m.jsx("div",{style:vN,children:t})}function Ap(t){const n=t.replace(/[^\d.]/g,"").split("."),i=n[0]||"",a=n[1],l=i.replace(/\B(?=(\d{3})+(?!\d))/g,",");return a!==void 0?`$${l}.${a.slice(0,2)}`:l?`$${l}`:""}function AN(t){return t.replace(/[$,]/g,"")}function Sy({id:t,value:e,onChange:n,placeholder:i="$0.00",required:a,autoFocus:l}){const[c,f]=M.useState(()=>Ap(e)),d=M.useRef(null);M.useEffect(()=>{const _=Ap(e);AN(c)!==e&&f(_)},[e]);function p(_){const b=_.target.value;if(!b||b==="$"){f(""),n("");return}const A=b.replace(/[^\d.]/g,"").split(".");let w=A[0];A.length>1&&(w+="."+A.slice(1).join("").slice(0,2));const D=Ap(w);f(D),n(w)}return m.jsx("input",{ref:d,id:t,type:"text",inputMode:"decimal",value:c,onChange:p,placeholder:i,required:a,autoFocus:l,style:ic})}function CN(t,e){const n=t.toLowerCase(),i=e.toLowerCase();if(i.includes(n)){const f=i.indexOf(n);return{match:!0,score:f===0||/\s/.test(i[f-1])?100:90}}let a=0,l=0,c=0;for(let f=0;f<i.length&&a<n.length;f++)i[f]===n[a]?(a++,c++,l+=c*2):c=0;return a===n.length?{match:!0,score:l}:{match:!1,score:0}}function yT({id:t,value:e,onChange:n,payees:i,placeholder:a="Enter payee name"}){const[l,c]=M.useState(!1),[f,d]=M.useState(-1),p=M.useRef(null),_=M.useRef(null),b=e.trim()?i.map(w=>({payee:w,...CN(e,w)})).filter(w=>w.match).sort((w,D)=>D.score-w.score).slice(0,8).map(w=>w.payee):[];M.useEffect(()=>{function w(D){p.current&&!p.current.contains(D.target)&&c(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);function E(w){!l||b.length===0||(w.key==="ArrowDown"?(w.preventDefault(),d(D=>Math.min(D+1,b.length-1))):w.key==="ArrowUp"?(w.preventDefault(),d(D=>Math.max(D-1,-1))):w.key==="Enter"&&f>=0?(w.preventDefault(),n(b[f]),c(!1),d(-1)):w.key==="Escape"&&(c(!1),d(-1)))}function A(w){n(w),c(!1),d(-1),_.current?.focus()}return m.jsxs("div",{ref:p,style:{position:"relative"},children:[m.jsx("input",{ref:_,id:t,type:"text",value:e,onChange:w=>{n(w.target.value),c(!0),d(-1)},onFocus:()=>c(!0),onKeyDown:E,placeholder:a,autoComplete:"off",style:ic}),l&&b.length>0&&m.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",background:"var(--background, #1a1a1a)",border:"1px solid color-mix(in srgb, currentColor 20%, transparent)",borderRadius:"6px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",zIndex:1e3,maxHeight:"200px",overflowY:"auto"},children:b.map((w,D)=>m.jsx("div",{onClick:()=>A(w),style:{padding:"0.6rem 0.8rem",cursor:"pointer",background:D===f?`color-mix(in srgb, ${be.primary} 20%, transparent)`:"transparent",borderBottom:D<b.length-1?"1px solid color-mix(in srgb, currentColor 10%, transparent)":"none",transition:"background 0.1s"},onMouseEnter:()=>d(D),children:w},w))})]})}function af({children:t,isDragging:e,isDragOver:n,onDragStart:i,onDragOver:a,onDragLeave:l,onDragEnd:c,onDrop:f,onEdit:d,onDelete:p,onMoveUp:_,onMoveDown:b,canMoveUp:E=!0,canMoveDown:A=!0}){const w=Gs(),D=_||b;return m.jsxs("div",{onDragOver:I=>{I.stopPropagation(),a(I)},onDragLeave:I=>{I.stopPropagation(),l()},onDrop:I=>{I.stopPropagation(),f(I)},style:{position:"relative"},children:[m.jsx("div",{style:{...gT,opacity:n?1:0,boxShadow:n?"0 0 8px rgba(100, 108, 255, 0.6)":"none"}}),m.jsxs("div",{style:{...w?aN:rc,opacity:e?.5:1},children:[m.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",gap:w?"0.5rem":"0.75rem",minWidth:0},children:[m.jsx("span",{draggable:!0,onDragStart:i,onDragEnd:c,style:{...pT,fontSize:w?"0.9rem":void 0,cursor:"grab",padding:"0.25rem",margin:"-0.25rem",borderRadius:"4px",userSelect:"none"},title:"Drag to reorder",children:""}),m.jsx("div",{style:{flex:1,minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},children:t})]}),m.jsxs("div",{style:w?yN:gN,children:[w?m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:d,style:mT,title:"Edit","aria-label":"Edit",children:""}),m.jsx("button",{onClick:p,style:_N,title:"Delete","aria-label":"Delete",children:""})]}):m.jsxs(m.Fragment,{children:[m.jsx(Ne,{variant:"secondary",onClick:d,children:"Edit"}),m.jsx(Ne,{variant:"danger",onClick:p,children:"Delete"})]}),D&&m.jsxs("div",{style:vy,children:[m.jsx("button",{onClick:I=>{I.stopPropagation(),_?.()},disabled:!E,style:{...Xo,opacity:E?.6:.2,cursor:E?"pointer":"default"},title:"Move up","aria-label":"Move up",children:""}),m.jsx("button",{onClick:I=>{I.stopPropagation(),b?.()},disabled:!A,style:{...Xo,opacity:A?.6:.2,cursor:A?"pointer":"default"},title:"Move down","aria-label":"Move down",children:""})]})]})]})]})}function xy({isActive:t,onDragOver:e,onDragLeave:n,onDrop:i,label:a="Move to end"}){return m.jsxs("div",{onDragOver:e,onDragLeave:n,onDrop:i,style:bN,children:[m.jsx("div",{style:{...EN,opacity:t?1:.3,boxShadow:t?"0 0 8px rgba(100, 108, 255, 0.6)":"none"}}),t&&m.jsx("span",{style:SN,children:a})]})}function Qn({children:t,style:e}){return m.jsx("div",{style:{...oN,...e},children:t})}function Qe(t){return`$${t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function Sn(t){return t>=0?be.success:be.danger}function Rh({isOpen:t,onClose:e,title:n,children:i,maxWidth:a="28rem"}){return t?m.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1001,padding:"1rem"},onClick:e,children:m.jsxs("div",{style:{background:"#1a1a1a",color:"rgba(255, 255, 255, 0.87)",borderRadius:"12px",padding:"1.5rem",width:"100%",maxWidth:a,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)"},onClick:l=>l.stopPropagation(),children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[m.jsx("h2",{style:{margin:0,fontSize:"1.25rem"},children:n}),m.jsx("button",{onClick:e,style:{background:"transparent",border:"none",color:"inherit",cursor:"pointer",fontSize:"1.5rem",opacity:.6,lineHeight:1},children:""})]}),i]})}):null}const RN={critical_bug:{label:"Critical Bug",color:"#ff4757",bgColor:"rgba(255, 71, 87, 0.15)"},bug:{label:"Bug",color:"#ffa502",bgColor:"rgba(255, 165, 2, 0.15)"},new_feature:{label:"New Feature",color:"#2ed573",bgColor:"rgba(46, 213, 115, 0.15)"},core_feature:{label:"Core Feature",color:"#1e90ff",bgColor:"rgba(30, 144, 255, 0.15)"},qol:{label:"QOL",color:"#a55eea",bgColor:"rgba(165, 94, 234, 0.15)"}};function DN(){const[t,e]=M.useState(!1),[n,i]=M.useState(""),[a,l]=M.useState("bug"),[c,f]=M.useState(!1),[d,p]=M.useState(null),_=M.useContext(Hu),E=Va().get_current_firebase_user(),A=fr(),w=Ow();if(A.pathname.includes("/admin/feedback")||!_.is_logged_in)return null;async function I(B){if(B.preventDefault(),!(!n.trim()||!_.username||!E)){p(null);try{await w.submitFeedback.mutateAsync({userId:E.uid,userEmail:_.username,text:n.trim(),feedbackType:a,currentPath:A.pathname}),i(""),l("bug"),f(!0),setTimeout(()=>{f(!1),e(!1)},1500)}catch(q){p(q instanceof Error?q.message:"Failed to submit feedback")}}}return m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:()=>e(!0),style:{position:"fixed",bottom:"1.5rem",right:"1.5rem",width:"3rem",height:"3rem",borderRadius:"50%",background:be.primary,color:"white",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.25rem",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",transition:"transform 0.15s, box-shadow 0.15s",zIndex:1e3},title:"Send Feedback",onMouseEnter:B=>{B.currentTarget.style.transform="scale(1.1)",B.currentTarget.style.boxShadow="0 6px 16px rgba(0, 0, 0, 0.4)"},onMouseLeave:B=>{B.currentTarget.style.transform="scale(1)",B.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.3)"},children:""}),m.jsx(Rh,{isOpen:t,onClose:()=>{e(!1),l("bug")},title:"Send Feedback",children:c?m.jsxs("div",{style:{textAlign:"center",padding:"2rem 0",color:be.success},children:[m.jsx("span",{style:{fontSize:"2rem",display:"block",marginBottom:"0.5rem"},children:""}),"Feedback submitted!"]}):m.jsxs("form",{onSubmit:I,children:[m.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem",paddingBottom:"1rem",flexWrap:"wrap"},children:["critical_bug","bug","new_feature","core_feature","qol"].map(B=>{const q=RN[B],z=a===B;return m.jsxs("button",{type:"button",onClick:()=>l(B),style:{flex:1,padding:"0.6rem 0.5rem",border:`2px solid ${q.color}`,borderRadius:"0.5rem",background:z?q.bgColor:"transparent",color:z?q.color:"rgba(255,255,255,0.5)",cursor:"pointer",fontWeight:z?600:400,fontSize:"0.8rem",transition:"all 0.15s ease",opacity:z?1:.5,boxShadow:z?`0 0 12px ${q.bgColor}`:"none",position:"relative"},children:[q.label,z&&m.jsx("span",{style:{position:"absolute",bottom:"-14px",left:"10%",right:"10%",height:"3px",background:"white",borderRadius:"2px"}})]},B)})}),m.jsx(Ey,{value:n,onChange:B=>i(B.target.value),placeholder:"Share your feedback, bug reports, or feature requests...",minHeight:"8rem",autoFocus:!0,required:!0}),d&&m.jsx("p",{style:{color:be.error,fontSize:"0.85rem",margin:"0.5rem 0"},children:d}),m.jsxs(Qs,{children:[m.jsx(Ne,{type:"button",variant:"secondary",onClick:()=>{e(!1),l("bug")},children:"Cancel"}),m.jsx(Ne,{type:"submit",isLoading:w.submitFeedback.isPending,disabled:!n.trim(),children:"Submit"})]})]})})]})}function Co({children:t,labelStyle:e,...n}){return m.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",flex:1,cursor:"pointer",...e},children:[m.jsx("input",{type:"checkbox",style:{width:"1.25rem",height:"1.25rem",marginTop:"0.1rem",cursor:"pointer",accentColor:be.primary},...n}),t]})}function IN({title:t,count:e,children:n,defaultExpanded:i=!1}){const[a,l]=M.useState(i);return m.jsxs("div",{style:{marginTop:"2rem"},children:[m.jsxs("button",{onClick:()=>l(!a),style:{background:"transparent",border:"none",color:"inherit",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0",fontSize:"0.9rem",opacity:.7},children:[m.jsx("span",{style:{transition:"transform 0.2s",transform:a?"rotate(90deg)":"rotate(0deg)"},children:""}),t,e!==void 0&&` (${e})`]}),a&&n]})}function _T(t){const{tabs:e,activeTab:n,accentColor:i=be.primary}=t,a=e.filter(d=>!d.hidden),l=d=>({flex:1,padding:"0.75rem 1rem",borderRadius:"8px",border:d?`2px solid ${i}`:"2px solid transparent",background:d?`color-mix(in srgb, ${i} 15%, transparent)`:"color-mix(in srgb, currentColor 8%, transparent)",cursor:"pointer",fontWeight:d?600:400,fontSize:"0.95rem",color:"inherit",transition:"all 0.15s",textDecoration:"none",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.25rem"}),c=d=>d?m.jsx("span",{style:{marginLeft:"0.5rem",fontSize:"0.7rem",background:d.color||be.success,color:"white",padding:"0.15rem 0.4rem",borderRadius:"4px"},children:d.text}):null,f=d=>m.jsxs(m.Fragment,{children:[d.icon&&m.jsx("span",{children:d.icon}),m.jsx("span",{children:d.label}),c(d.badge)]});return m.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:a.map(d=>{const p=n===d.id;return t.mode==="link"?m.jsx(Dt,{to:`${t.linkPrefix}/${d.id}`,style:l(p),children:f(d)},d.id):m.jsx("button",{onClick:()=>t.onTabChange(d.id),style:l(p),children:f(d)},d.id)})})}function cg(t){return new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})}function ON({onCreateNew:t}){const[e,n]=M.useState(""),[i,a]=M.useState(!1),[l,c]=M.useState(null);async function f(d){d.preventDefault(),a(!0),c(null);try{await t(e.trim()||void 0)}catch(p){c(p instanceof Error?p.message:"Failed to create budget"),a(!1)}}return m.jsxs("div",{style:{maxWidth:"500px",margin:"0 auto"},children:[m.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Welcome!"}),m.jsx("p",{style:{opacity:.7,marginBottom:"2rem"},children:"You don't have any budgets yet. Create your first budget to get started."}),l&&m.jsxs("div",{style:{background:"rgba(220, 38, 38, 0.1)",border:"1px solid rgba(220, 38, 38, 0.3)",color:"#f87171",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsx("span",{children:l}),m.jsx("button",{onClick:()=>c(null),style:{background:"transparent",border:"none",color:"#f87171",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.25rem",lineHeight:1},children:""})]}),m.jsxs("div",{style:{background:"color-mix(in srgb, #646cff 8%, transparent)",border:"1px solid color-mix(in srgb, #646cff 25%, transparent)",padding:"2rem",borderRadius:"12px"},children:[m.jsxs("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[m.jsx("span",{children:""})," Create Your Budget"]}),m.jsxs("form",{onSubmit:f,children:[m.jsxs("div",{style:{marginBottom:"1.5rem"},children:[m.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",opacity:.8},children:"Budget Name"}),m.jsx("input",{type:"text",value:e,onChange:d=>n(d.target.value),placeholder:"My Budget",autoFocus:!0,style:{width:"100%",padding:"0.75rem 1rem",borderRadius:"8px",border:"1px solid color-mix(in srgb, currentColor 25%, transparent)",background:"color-mix(in srgb, currentColor 5%, transparent)",fontSize:"1rem",color:"inherit",boxSizing:"border-box"}}),m.jsx("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.8rem",opacity:.5},children:"You can always rename this later"})]}),m.jsx("button",{type:"submit",disabled:i,style:{width:"100%",background:be.primary,color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:i?"not-allowed":"pointer",fontWeight:600,opacity:i?.7:1,fontSize:"1rem"},children:i?"Creating...":"Create Budget"})]})]}),m.jsx("p",{style:{marginTop:"1.5rem",textAlign:"center",fontSize:"0.85rem",opacity:.6},children:"If someone has invited you to their budget, you can accept the invitation from the budget settings page after creating your account."})]})}function jN({invites:t,onAccept:e,onCreateNew:n}){const[i,a]=M.useState(null),[l,c]=M.useState(!1),[f,d]=M.useState(""),[p,_]=M.useState(!1),[b,E]=M.useState(null);async function A(D){a(D),E(null);try{await e(D)}catch(I){E(I instanceof Error?I.message:"Failed to accept invitation"),a(null)}}async function w(D){D.preventDefault(),_(!0),E(null);try{await n(f.trim()||void 0)}catch(I){E(I instanceof Error?I.message:"Failed to create new budget"),_(!1)}}return m.jsxs("div",{children:[m.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Welcome!"}),m.jsxs("p",{style:{opacity:.7,marginBottom:"2rem"},children:["You've been invited to join ",t.length===1?"a budget":"some budgets",". Choose one to get started!"]}),b&&m.jsxs("div",{style:{background:"rgba(220, 38, 38, 0.1)",border:"1px solid rgba(220, 38, 38, 0.3)",color:"#f87171",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsx("span",{children:b}),m.jsx("button",{onClick:()=>E(null),style:{background:"transparent",border:"none",color:"#f87171",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.25rem",lineHeight:1},children:""})]}),m.jsxs("div",{style:{background:"color-mix(in srgb, #f59e0b 8%, transparent)",border:"1px solid color-mix(in srgb, #f59e0b 25%, transparent)",padding:"1.5rem",borderRadius:"12px",marginBottom:"1.5rem"},children:[m.jsxs("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[m.jsx("span",{children:""})," Budget Invitations"]}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.map(D=>m.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 8%, transparent)",padding:"1rem 1.25rem",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[m.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[m.jsx("p",{style:{margin:"0 0 0.25rem 0",fontWeight:600,fontSize:"1.05rem"},children:D.budgetName}),D.ownerEmail&&m.jsxs("p",{style:{margin:0,fontSize:"0.85rem",opacity:.6},children:["From: ",D.ownerEmail]})]}),m.jsx("button",{onClick:()=>A(D.budgetId),disabled:i!==null||p,style:{background:"#22c55e",color:"white",border:"none",padding:"0.6rem 1.5rem",borderRadius:"8px",cursor:i!==null||p?"not-allowed":"pointer",fontWeight:500,opacity:i!==null||p?.7:1,fontSize:"0.9rem"},children:i===D.budgetId?"Joining...":"Accept & Join"})]},D.budgetId))})]}),m.jsx("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",border:"1px dashed color-mix(in srgb, currentColor 20%, transparent)",padding:"1.5rem",borderRadius:"12px"},children:l?m.jsxs("form",{onSubmit:w,children:[m.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem"},children:"Create Your Budget"}),m.jsxs("div",{style:{marginBottom:"1rem"},children:[m.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",opacity:.8},children:"Budget Name"}),m.jsx("input",{type:"text",value:f,onChange:D=>d(D.target.value),placeholder:"My Budget",autoFocus:!0,style:{width:"100%",padding:"0.6rem 0.8rem",borderRadius:"6px",border:"1px solid color-mix(in srgb, currentColor 25%, transparent)",background:"color-mix(in srgb, currentColor 5%, transparent)",fontSize:"0.95rem",color:"inherit",boxSizing:"border-box"}})]}),m.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[m.jsx("button",{type:"submit",disabled:p||i!==null,style:{background:be.primary,color:"white",border:"none",padding:"0.6rem 1.25rem",borderRadius:"6px",cursor:p||i!==null?"not-allowed":"pointer",fontWeight:500,opacity:p||i!==null?.7:1,fontSize:"0.9rem"},children:p?"Creating...":"Create Budget"}),m.jsx("button",{type:"button",onClick:()=>{c(!1),d("")},disabled:p,style:{background:"transparent",color:"inherit",border:"1px solid color-mix(in srgb, currentColor 30%, transparent)",padding:"0.6rem 1.25rem",borderRadius:"6px",cursor:p?"not-allowed":"pointer",fontWeight:500,opacity:p?.7:.8,fontSize:"0.9rem"},children:"Cancel"})]})]}):m.jsxs("div",{style:{textAlign:"center"},children:[m.jsx("p",{style:{margin:"0 0 1rem 0",opacity:.7},children:"Or start fresh with your own budget"}),m.jsx("button",{onClick:()=>c(!0),disabled:i!==null,style:{background:be.primary,color:"white",border:"none",padding:"0.6rem 1.5rem",borderRadius:"8px",cursor:i!==null?"not-allowed":"pointer",fontWeight:500,opacity:i!==null?.7:1,fontSize:"0.9rem"},children:"Create New Budget"})]})})]})}function MN({activeTab:t,setActiveTab:e,allocationsFinalized:n}){const i=M.useMemo(()=>[{id:"income",label:"Income",icon:""},{id:"allocations",label:"Allocations",icon:"",badge:n?{text:"Applied",color:be.success}:void 0},{id:"spend",label:"Spend",icon:""},{id:"balances",label:"Balances",icon:""}],[n]);return m.jsx(_T,{mode:"button",tabs:i,activeTab:t,onTabChange:a=>e(a)})}function kN({isLoading:t,onPreviousMonth:e,onNextMonth:n,onRecalculateAll:i,isRecomputing:a}){const{currentYear:l,currentMonthNumber:c,isAdmin:f,selectedBudgetId:d,currentUserId:p}=Cn(),{budget:_}=Yn(d,p),{month:b}=hl(d,l,c),[E,A]=M.useState(!1),w=M.useRef(null);M.useEffect(()=>{if(!E)return;function I(B){w.current&&!w.current.contains(B.target)&&A(!1)}return document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[E]);function D(){if(!b||!_)return;const I={...b,_meta:{downloaded_at:new Date().toISOString(),budget_id:_.id,budget_name:_.name}},B=new Blob([JSON.stringify(I,null,2)],{type:"application/json"}),q=URL.createObjectURL(B),z=document.createElement("a");z.href=q,z.download=`month_${l}_${String(c).padStart(2,"0")}.json`,document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(q),A(!1)}return m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"1rem",marginBottom:"1.5rem",padding:"1rem",background:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"12px"},children:[m.jsx("button",{onClick:e,disabled:t,style:{background:"color-mix(in srgb, currentColor 10%, transparent)",border:"none",borderRadius:"8px",padding:"0.75rem 1rem",cursor:t?"not-allowed":"pointer",fontSize:"1.25rem",opacity:t?.5:1,transition:"opacity 0.15s, background 0.15s"},title:"Previous month",children:""}),m.jsxs("div",{ref:w,style:{textAlign:"center",minWidth:"180px",position:"relative"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"center",gap:"0.25rem"},children:[m.jsxs("h2",{style:{margin:0,fontSize:"1.5rem"},children:[hT[c-1]," ",l]}),m.jsx("button",{onClick:()=>A(!E),style:{background:"transparent",border:"none",cursor:"pointer",fontSize:"0.5rem",opacity:.4,padding:"0.15rem",borderRadius:"4px",transition:"opacity 0.15s, transform 0.15s",transform:E?"rotate(180deg)":"rotate(0deg)",marginTop:"0.25rem"},title:"Month options",children:""})]}),t&&m.jsxs(m.Fragment,{children:[m.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.4rem",marginTop:"0.35rem"},children:[m.jsx("span",{style:{display:"inline-block",width:"14px",height:"14px",border:"2px solid color-mix(in srgb, currentColor 20%, transparent)",borderTopColor:be.primary,borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),m.jsx("span",{style:{fontSize:"0.8rem",opacity:.6},children:"Loading..."})]})]}),E&&m.jsxs("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:"0.5rem",background:"var(--background, #242424)",border:"1px solid color-mix(in srgb, currentColor 20%, transparent)",borderRadius:"8px",padding:"0.25rem",zIndex:10,minWidth:"160px",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:[m.jsxs("button",{onClick:()=>{i(),A(!1)},disabled:a||t,style:{display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",background:"transparent",border:"none",borderRadius:"6px",padding:"0.5rem 0.75rem",cursor:a||t?"not-allowed":"pointer",fontSize:"0.85rem",color:"inherit",opacity:a||t?.5:1,textAlign:"left",transition:"background 0.15s"},title:"Recalculate all totals and category balances for this month",children:[a?"":""," Recalculate All"]}),f&&b&&m.jsx("button",{onClick:D,style:{display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",background:"transparent",border:"none",borderRadius:"6px",padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.85rem",color:"inherit",textAlign:"left",transition:"background 0.15s"},title:"Download month document as JSON (for debugging)",children:" Download JSON"})]})]}),m.jsx("button",{onClick:n,disabled:t,style:{background:"color-mix(in srgb, currentColor 10%, transparent)",border:"none",borderRadius:"8px",padding:"0.75rem 1rem",cursor:t?"not-allowed":"pointer",fontSize:"1.25rem",opacity:t?.5:1,transition:"opacity 0.15s, background 0.15s"},title:"Next month",children:""})]})}function WE({accounts:t,accountGroups:e,payees:n,initialData:i,defaultAccountId:a,defaultDate:l,onSubmit:c,onCancel:f,onDelete:d,submitLabel:p,isMobile:_}){const b=new Date().toISOString().split("T")[0],[E,A]=M.useState(i?.amount?.toString()||""),[w,D]=M.useState(i?.account_id||a||(t[0]?t[0][0]:"")),[I,B]=M.useState(i?.date||l||b),[q,z]=M.useState(i?.payee||""),[$,W]=M.useState(i?.description||""),oe={},N=[];t.forEach(([j,R])=>{R.account_group_id?(oe[R.account_group_id]||(oe[R.account_group_id]=[]),oe[R.account_group_id].push([j,R])):N.push([j,R])});function T(j){j.preventDefault();const R=parseFloat(E);isNaN(R)||R<=0||w&&I&&c(R,w,I,q.trim()||void 0,$.trim()||void 0)}const C=_?{display:"flex",flexDirection:"column",gap:"1rem"}:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"};return m.jsxs(La,{onSubmit:T,children:[m.jsxs("div",{style:C,children:[m.jsx($t,{label:"Amount",htmlFor:"income-amount",children:m.jsx(Sy,{id:"income-amount",value:E,onChange:A,placeholder:"$0.00",required:!0,autoFocus:!0})}),m.jsx($t,{label:"Date",htmlFor:"income-date",children:m.jsx(Ui,{id:"income-date",type:"date",value:I,onChange:j=>B(j.target.value),required:!0})})]}),m.jsxs("div",{style:C,children:[m.jsx($t,{label:"Deposit To",htmlFor:"income-account",children:m.jsxs(ja,{id:"income-account",value:w,onChange:j=>D(j.target.value),required:!0,children:[Object.entries(e).map(([j,R])=>{const L=oe[j];return!L||L.length===0?null:m.jsx("optgroup",{label:R.name,children:L.map(([k,X])=>m.jsx("option",{value:k,children:X.nickname},k))},j)}),N.length>0&&m.jsx("optgroup",{label:"Other",children:N.map(([j,R])=>m.jsx("option",{value:j,children:R.nickname},j))})]})}),m.jsx($t,{label:"Payee",htmlFor:"income-payee",children:m.jsx(yT,{id:"income-payee",value:q,onChange:z,payees:n,placeholder:"e.g., Employer, Client name"})})]}),m.jsx($t,{label:"Description (optional)",htmlFor:"income-description",children:m.jsx(Ui,{id:"income-description",value:$,onChange:j=>W(j.target.value),placeholder:"e.g., January paycheck, Project bonus"})}),m.jsxs(Qs,{children:[m.jsx(Ne,{type:"submit",children:p}),m.jsx(Ne,{type:"button",variant:"secondary",onClick:f,children:"Cancel"}),d&&m.jsx(Ne,{type:"button",variant:"danger",onClick:d,style:{marginLeft:"auto"},children:" Delete"})]})]})}function NN({income:t,accountName:e,accountGroupName:n,onEdit:i,onDelete:a,isMobile:l}){return m.jsxs("div",{onClick:l?i:void 0,style:{background:"color-mix(in srgb, currentColor 8%, transparent)",padding:l?"0.875rem 1rem":"1rem 1.25rem",borderRadius:"8px",display:"flex",flexDirection:l?"column":"row",justifyContent:"space-between",alignItems:l?"stretch":"center",gap:l?"0.5rem":"1rem",cursor:l?"pointer":"default",transition:l?"background 0.15s":"none"},children:[m.jsxs("div",{style:{flex:1},children:[m.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.75rem",marginBottom:t.payee?"0.25rem":0},children:[t.date&&m.jsx("span",{style:{fontSize:"0.8rem",opacity:.6,fontFamily:"monospace"},children:new Date(t.date+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})}),m.jsxs("span",{style:{fontSize:"1.15rem",fontWeight:600,color:be.success},children:["+",Qe(t.amount)]})]}),t.payee&&m.jsx("div",{style:{fontSize:"0.95rem",fontWeight:500,marginBottom:"0.25rem"},children:t.payee}),m.jsxs("div",{style:{fontSize:"0.85rem",opacity:.7,background:"color-mix(in srgb, currentColor 10%, transparent)",padding:"0.15rem 0.5rem",borderRadius:"4px",display:"inline-block"},children:[" ",e,n?` / ${n}`:""]}),t.description&&m.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.9rem",opacity:.7},children:t.description})]}),!l&&m.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[m.jsx("button",{onClick:i,style:{background:"transparent",border:"none",cursor:"pointer",opacity:.6,fontSize:"0.9rem",padding:"0.25rem"},title:"Edit",children:""}),m.jsx("button",{onClick:a,style:{background:"transparent",border:"none",cursor:"pointer",opacity:.6,fontSize:"0.9rem",padding:"0.25rem"},title:"Delete",children:""})]})]})}function PN(){const{selectedBudgetId:t,currentUserId:e,currentYear:n,currentMonthNumber:i}=Cn(),{accounts:a,accountGroups:l}=Yn(t,e),{month:c,isLoading:f,payees:d,addIncome:p,updateIncome:_,deleteIncome:b}=hl(t,n,i),E=Gs(),[A,w]=M.useState(null),[D,I]=M.useState(!1),[B,q]=M.useState(null);function z(X){const F=X.account_group_id?l[X.account_group_id]:void 0;return F?.is_active!==void 0?F.is_active:X.is_active!==!1}function $(X){const F=X.account_group_id?l[X.account_group_id]:void 0;return F?.on_budget!==void 0?F.on_budget:X.on_budget!==!1}const W=Object.entries(a).filter(([,X])=>z(X)&&$(X)),oe=W.filter(([,X])=>X.is_income_account),N=oe.length>0?oe:W,T=W.find(([,X])=>X.is_income_default),C=T?T[0]:void 0,j=c?.income.reduce((X,F)=>X+F.amount,0)||0;function R(X,F,U,H,Q){w(null),I(!1),p(X,F,U,H,Q).catch(le=>{w(le instanceof Error?le.message:"Failed to add income")})}function L(X,F,U,H,Q,le){w(null),q(null),_(X,F,U,H,Q,le).catch(de=>{w(de instanceof Error?de.message:"Failed to update income")})}function k(X){confirm("Are you sure you want to delete this income entry?")&&(w(null),b(X).catch(F=>{w(F instanceof Error?F.message:"Failed to delete income")}))}return m.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem",opacity:f?.5:1,transition:"opacity 0.15s ease-out",pointerEvents:f?"none":"auto"},children:[A&&m.jsx("div",{style:{background:`color-mix(in srgb, ${be.error} 15%, transparent)`,border:`1px solid ${be.error}`,borderRadius:"8px",padding:"0.75rem",marginBottom:"1rem",color:be.error},children:A}),m.jsxs("div",{style:{display:"flex",flexDirection:E?"column":"row",justifyContent:"space-between",alignItems:E?"stretch":"center",gap:E?"0.75rem":"1rem",marginBottom:"1rem",paddingBottom:"0.75rem",borderBottom:"1px solid color-mix(in srgb, currentColor 15%, transparent)"},children:[m.jsxs("div",{children:[m.jsx("h3",{style:{margin:0,fontSize:"1.1rem"},children:"Total"}),m.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.25rem",fontWeight:600,color:Sn(j)},children:Qe(j)})]}),!D&&m.jsx(Ne,{onClick:()=>I(!0),disabled:N.length===0,children:"+ Add Income"})]}),N.length===0&&m.jsxs("p",{style:{opacity:.6,fontSize:"0.9rem",marginBottom:"1rem"},children:[Object.keys(a).length===0?"You need to create at least one account before adding income.":'No accounts are set up for income deposits. Edit an account and enable "Show in income deposit list".'," ",m.jsx(Dt,{to:"/budget/accounts",style:{color:be.primaryLight},children:"Manage accounts "})]}),D&&m.jsx("div",{style:{marginBottom:"1rem"},children:m.jsx(WE,{accounts:N,accountGroups:l,payees:d,defaultAccountId:C,defaultDate:`${n}-${String(i).padStart(2,"0")}-01`,onSubmit:R,onCancel:()=>I(!1),submitLabel:"Add Income",isMobile:E})}),m.jsxs("div",{style:zs,children:[c?.income.slice().sort((X,F)=>(X.date||"").localeCompare(F.date||"")).map(X=>B===X.id?m.jsx(WE,{accounts:N,accountGroups:l,payees:d,initialData:X,onSubmit:(F,U,H,Q,le)=>L(X.id,F,U,H,Q,le),onCancel:()=>q(null),onDelete:()=>k(X.id),submitLabel:"Save",isMobile:E},X.id):m.jsx(NN,{income:X,accountName:a[X.account_id]?.nickname||"Unknown Account",accountGroupName:a[X.account_id]?.account_group_id?l[a[X.account_id].account_group_id]?.name:void 0,onEdit:()=>q(X.id),onDelete:()=>k(X.id),isMobile:E},X.id)),(!c?.income||c.income.length===0)&&!D&&m.jsx("p",{style:{opacity:.5,fontSize:"0.9rem",textAlign:"center",padding:"1rem"},children:"No income recorded for this month"})]})]})}function XE({accounts:t,accountGroups:e,categories:n,categoryGroups:i,payees:a,initialData:l,defaultAccountId:c,defaultDate:f,onSubmit:d,onCancel:p,onDelete:_,submitLabel:b,isMobile:E}){const A=new Date().toISOString().split("T")[0],[w,D]=M.useState(l?.amount?.toString()||""),[I,B]=M.useState(l?.category_id||""),[q,z]=M.useState(l?.account_id||c||(t[0]?t[0][0]:"")),[$,W]=M.useState(l?.date||f||A),[oe,N]=M.useState(l?.payee||""),[T,C]=M.useState(l?.description||""),j={},R=[];t.forEach(([H,Q])=>{Q.account_group_id?(j[Q.account_group_id]||(j[Q.account_group_id]=[]),j[Q.account_group_id].push([H,Q])):R.push([H,Q])});const L={},k=[];Object.entries(n).forEach(([H,Q])=>{Q.category_group_id?(L[Q.category_group_id]||(L[Q.category_group_id]=[]),L[Q.category_group_id].push([H,Q])):k.push([H,Q])}),Object.values(L).forEach(H=>{H.sort((Q,le)=>Q[1].sort_order-le[1].sort_order)}),k.sort((H,Q)=>H[1].sort_order-Q[1].sort_order);const X=[...i].sort((H,Q)=>H.sort_order-Q.sort_order);function F(H){H.preventDefault();const Q=parseFloat(w);isNaN(Q)||Q<=0||I&&q&&$&&d(Q,I,q,$,oe.trim()||void 0,T.trim()||void 0)}const U=E?{display:"flex",flexDirection:"column",gap:"1rem"}:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"};return m.jsxs(La,{onSubmit:F,children:[m.jsxs("div",{style:U,children:[m.jsx($t,{label:"Amount",htmlFor:"expense-amount",children:m.jsx(Sy,{id:"expense-amount",value:w,onChange:D,placeholder:"$0.00",required:!0,autoFocus:!0})}),m.jsx($t,{label:"Date",htmlFor:"expense-date",children:m.jsx(Ui,{id:"expense-date",type:"date",value:$,onChange:H=>W(H.target.value),required:!0})})]}),m.jsxs("div",{style:U,children:[m.jsx($t,{label:"Category",htmlFor:"expense-category",children:m.jsxs(ja,{id:"expense-category",value:I,onChange:H=>B(H.target.value),required:!0,children:[m.jsx("option",{value:"",children:"Select category..."}),X.map(H=>{const Q=L[H.id];return!Q||Q.length===0?null:m.jsx("optgroup",{label:H.name,children:Q.map(([le,de])=>m.jsx("option",{value:le,children:de.name},le))},H.id)}),k.length>0&&m.jsx("optgroup",{label:"Other",children:k.map(([H,Q])=>m.jsx("option",{value:H,children:Q.name},H))})]})}),m.jsx($t,{label:"Pay From",htmlFor:"expense-account",children:m.jsxs(ja,{id:"expense-account",value:q,onChange:H=>z(H.target.value),required:!0,children:[Object.entries(e).map(([H,Q])=>{const le=j[H];return!le||le.length===0?null:m.jsx("optgroup",{label:Q.name,children:le.map(([de,V])=>m.jsx("option",{value:de,children:V.nickname},de))},H)}),R.length>0&&m.jsx("optgroup",{label:"Other",children:R.map(([H,Q])=>m.jsx("option",{value:H,children:Q.nickname},H))})]})})]}),m.jsx($t,{label:"Payee",htmlFor:"expense-payee",children:m.jsx(yT,{id:"expense-payee",value:oe,onChange:N,payees:a,placeholder:"e.g., Grocery Store, Restaurant"})}),m.jsx($t,{label:"Description (optional)",htmlFor:"expense-description",children:m.jsx(Ui,{id:"expense-description",value:T,onChange:H=>C(H.target.value),placeholder:"e.g., Weekly groceries, Dinner with friends"})}),m.jsxs(Qs,{children:[m.jsx(Ne,{type:"submit",children:b}),m.jsx(Ne,{type:"button",variant:"secondary",onClick:p,children:"Cancel"}),_&&m.jsx(Ne,{type:"button",variant:"danger",onClick:_,style:{marginLeft:"auto"},children:" Delete"})]})]})}function VN({expense:t,categoryName:e,accountName:n,accountGroupName:i,onEdit:a,onDelete:l,isMobile:c}){return m.jsxs("div",{onClick:c?a:void 0,style:{background:"color-mix(in srgb, currentColor 8%, transparent)",padding:c?"0.875rem 1rem":"1rem 1.25rem",borderRadius:"8px",display:"flex",flexDirection:c?"column":"row",justifyContent:"space-between",alignItems:c?"stretch":"center",gap:c?"0.5rem":"1rem",cursor:c?"pointer":"default",transition:c?"background 0.15s":"none"},children:[m.jsxs("div",{style:{flex:1},children:[m.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.75rem",marginBottom:t.payee?"0.25rem":0},children:[t.date&&m.jsx("span",{style:{fontSize:"0.8rem",opacity:.6,fontFamily:"monospace"},children:new Date(t.date+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})}),m.jsxs("span",{style:{fontSize:"1.15rem",fontWeight:600,color:be.error},children:["-",Qe(t.amount)]})]}),t.payee&&m.jsx("div",{style:{fontSize:"0.95rem",fontWeight:500,marginBottom:"0.25rem"},children:t.payee}),m.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",alignItems:"center"},children:[m.jsx("div",{style:{fontSize:"0.85rem",background:`color-mix(in srgb, ${be.primary} 20%, transparent)`,color:be.primaryLight,padding:"0.15rem 0.5rem",borderRadius:"4px",display:"inline-block"},children:e}),m.jsxs("div",{style:{fontSize:"0.85rem",opacity:.7,background:"color-mix(in srgb, currentColor 10%, transparent)",padding:"0.15rem 0.5rem",borderRadius:"4px",display:"inline-block"},children:[" ",n,i?` / ${i}`:""]})]}),t.description&&m.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.9rem",opacity:.7},children:t.description})]}),!c&&m.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[m.jsx("button",{onClick:a,style:{background:"transparent",border:"none",cursor:"pointer",opacity:.6,fontSize:"0.9rem",padding:"0.25rem"},title:"Edit",children:""}),m.jsx("button",{onClick:l,style:{background:"transparent",border:"none",cursor:"pointer",opacity:.6,fontSize:"0.9rem",padding:"0.25rem"},title:"Delete",children:""})]})]})}function LN(){const{selectedBudgetId:t,currentUserId:e,currentYear:n,currentMonthNumber:i}=Cn(),{accounts:a,accountGroups:l,categories:c,categoryGroups:f}=Yn(t,e),{month:d,isLoading:p,payees:_,addExpense:b,updateExpense:E,deleteExpense:A}=hl(t,n,i),w=Gs(),[D,I]=M.useState(null),[B,q]=M.useState(!1),[z,$]=M.useState(null);function W(U){const H=U.account_group_id?l[U.account_group_id]:void 0;return H?.is_active!==void 0?H.is_active:U.is_active!==!1}function oe(U){const H=U.account_group_id?l[U.account_group_id]:void 0;return H?.on_budget!==void 0?H.on_budget:U.on_budget!==!1}const N=Object.entries(a).filter(([,U])=>W(U)&&oe(U)),T=N.filter(([,U])=>U.is_outgo_account),C=T.length>0?T:N,j=N.find(([,U])=>U.is_outgo_default),R=j?j[0]:void 0,L=d?.expenses?.reduce((U,H)=>U+H.amount,0)||0;function k(U,H,Q,le,de,V){I(null),q(!1),b(U,H,Q,le,de,V).catch(J=>{I(J instanceof Error?J.message:"Failed to add expense")})}function X(U,H,Q,le,de,V,J){I(null),$(null),E(U,H,Q,le,de,V,J).catch(ye=>{I(ye instanceof Error?ye.message:"Failed to update expense")})}function F(U){confirm("Are you sure you want to delete this expense?")&&(I(null),A(U).catch(H=>{I(H instanceof Error?H.message:"Failed to delete expense")}))}return m.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem",opacity:p?.5:1,transition:"opacity 0.15s ease-out",pointerEvents:p?"none":"auto"},children:[D&&m.jsx("div",{style:{background:`color-mix(in srgb, ${be.error} 15%, transparent)`,border:`1px solid ${be.error}`,borderRadius:"8px",padding:"0.75rem",marginBottom:"1rem",color:be.error},children:D}),m.jsxs("div",{style:{display:"flex",flexDirection:w?"column":"row",justifyContent:"space-between",alignItems:w?"stretch":"center",gap:w?"0.75rem":"1rem",marginBottom:"1rem",paddingBottom:"0.75rem",borderBottom:"1px solid color-mix(in srgb, currentColor 15%, transparent)"},children:[m.jsxs("div",{children:[m.jsx("h3",{style:{margin:0,fontSize:"1.1rem"},children:"Total Expenses"}),m.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.25rem",fontWeight:600,color:L>0?be.error:"inherit"},children:[L>0?"-":"",Qe(L)]})]}),!B&&m.jsx(Ne,{onClick:()=>q(!0),disabled:C.length===0||Object.keys(c).length===0,children:"+ Add Expense"})]}),C.length===0&&m.jsxs("p",{style:{opacity:.6,fontSize:"0.9rem",marginBottom:"1rem"},children:[Object.keys(a).length===0?"You need to create at least one account before adding expenses.":'No accounts are set up for expenses. Edit an account and enable "Show in expense list".'," ",m.jsx(Dt,{to:"/budget/accounts",style:{color:be.primaryLight},children:"Manage accounts "})]}),Object.keys(c).length===0&&m.jsxs("p",{style:{opacity:.6,fontSize:"0.9rem",marginBottom:"1rem"},children:["You need to create at least one category before adding expenses."," ",m.jsx(Dt,{to:"/budget/admin/categories",style:{color:be.primaryLight},children:"Create categories "})]}),B&&m.jsx("div",{style:{marginBottom:"1rem"},children:m.jsx(XE,{accounts:C,accountGroups:l,categories:c,categoryGroups:f,payees:_,defaultAccountId:R,defaultDate:`${n}-${String(i).padStart(2,"0")}-01`,onSubmit:k,onCancel:()=>q(!1),submitLabel:"Add Expense",isMobile:w})}),m.jsxs("div",{style:zs,children:[d?.expenses?.slice().sort((U,H)=>(U.date||"").localeCompare(H.date||"")).map(U=>z===U.id?m.jsx(XE,{accounts:C,accountGroups:l,categories:c,categoryGroups:f,payees:_,initialData:U,onSubmit:(H,Q,le,de,V,J)=>X(U.id,H,Q,le,de,V,J),onCancel:()=>$(null),onDelete:()=>F(U.id),submitLabel:"Save",isMobile:w},U.id):m.jsx(VN,{expense:U,categoryName:c[U.category_id]?.name||"Unknown Category",accountName:a[U.account_id]?.nickname||"Unknown Account",accountGroupName:a[U.account_id]?.account_group_id?l[a[U.account_id].account_group_id]?.name:void 0,onEdit:()=>$(U.id),onDelete:()=>F(U.id),isMobile:w},U.id)),(!d?.expenses||d.expenses.length===0)&&!B&&m.jsx("p",{style:{opacity:.5,fontSize:"0.9rem",textAlign:"center",padding:"1rem"},children:"No expenses recorded for this month"})]})]})}function UN({category:t,value:e,onChange:n,previousMonthIncome:i,disabled:a}){const l=t.default_monthly_type==="percentage"&&t.default_monthly_amount!==void 0&&t.default_monthly_amount>0,c=l?t.default_monthly_amount/100*i:0,f=l?c.toFixed(2):e;let d=null;return!l&&t.default_monthly_amount!==void 0&&t.default_monthly_amount>0&&(d=Qe(t.default_monthly_amount)),m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem",padding:"0.6rem 0.75rem",background:l?"color-mix(in srgb, currentColor 3%, transparent)":"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"8px",maxWidth:"100%",boxSizing:"border-box",opacity:l?.8:1},children:[m.jsxs("div",{style:{flex:"1 1 auto",minWidth:0,overflow:"hidden"},children:[m.jsx("span",{style:{fontWeight:500,display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.name}),l?m.jsxs("span",{style:{fontSize:"0.7rem",opacity:.6,display:"block",marginTop:"0.15rem",color:be.primary},children:[t.default_monthly_amount,"% of prev month income"]}):d&&m.jsxs("span",{style:{fontSize:"0.7rem",opacity:.5,display:"block",marginTop:"0.15rem"},children:["Suggested: ",d]})]}),m.jsx("div",{style:{flexShrink:0,width:"110px"},children:l?m.jsx("div",{style:{width:"100%",padding:"0.5rem 0.6rem",borderRadius:"6px",border:"1px dashed color-mix(in srgb, currentColor 15%, transparent)",background:"color-mix(in srgb, currentColor 3%, transparent)",fontSize:"0.9rem",color:"inherit",boxSizing:"border-box",textAlign:"right",opacity:.9},title:"Auto-calculated from previous month's income",children:Qe(c)}):m.jsx("input",{type:"text",inputMode:"decimal",value:f?`$${f}`:"",onChange:p=>{const _=p.target.value.replace(/[^\d.]/g,"");n(_)},placeholder:"$0.00",disabled:a,style:{width:"100%",padding:"0.5rem 0.6rem",borderRadius:"6px",border:"1px solid color-mix(in srgb, currentColor 20%, transparent)",background:"color-mix(in srgb, currentColor 5%, transparent)",fontSize:"0.9rem",color:"inherit",boxSizing:"border-box",opacity:a?.6:1,cursor:a?"not-allowed":"text"}})})]})}function zN(){const{selectedBudgetId:t,currentUserId:e}=Cn(),{categories:n,categoryGroups:i}=Yn(t,e),{localAllocations:a,isSavingAllocations:l,isFinalizingAllocations:c,isEditingAppliedAllocations:f,error:d,monthLoading:p,onBudgetTotal:_,availableNow:b,currentDraftTotal:E,availableAfterApply:A,previousMonthIncome:w,allocationsFinalized:D,getAllocationAmount:I,handleAllocationChange:B,resetAllocationsToSaved:q,handleSaveAllocations:z,handleFinalizeAllocations:$,setIsEditingAppliedAllocations:W,setError:oe}=rN(),N=Gs(),T=[...i].sort((R,L)=>R.sort_order-L.sort_order),C=M.useMemo(()=>{const R=Object.entries(n).reduce((L,[k,X])=>{const F=X.category_group_id||"ungrouped";return L[F]||(L[F]=[]),L[F].push([k,X]),L},{});return Object.keys(R).forEach(L=>{R[L].sort((k,X)=>k[1].sort_order-X[1].sort_order)}),R},[n]),j=Object.values(n).some(R=>R.default_monthly_type==="percentage");return m.jsxs("div",{style:{opacity:p?.5:1,transition:"opacity 0.15s ease-out",pointerEvents:p?"none":"auto"},children:[d&&m.jsx(ml,{message:d,onDismiss:()=>oe(null)}),m.jsxs("div",{style:{display:"grid",gridTemplateColumns:N?"1fr 1fr":"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[m.jsxs(Qn,{children:[m.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.7},children:"On-Budget Total"}),m.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.3rem",fontWeight:600,color:Sn(_)},children:Qe(_)})]}),m.jsxs(Qn,{children:[m.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.7},children:"Available Now"}),m.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.3rem",fontWeight:600,color:Sn(b)},children:Qe(b)}),m.jsx("p",{style:{margin:"0.15rem 0 0 0",fontSize:"0.7rem",opacity:.5},children:"(applied allocations only)"})]}),m.jsxs(Qn,{children:[m.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.7},children:"This Month's Draft"}),m.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.3rem",fontWeight:600,color:be.primary},children:Qe(E)})]}),m.jsxs(Qn,{children:[m.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.7},children:"After Apply"}),m.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.3rem",fontWeight:600,color:Sn(A)},children:Qe(A)}),m.jsx("p",{style:{margin:"0.15rem 0 0 0",fontSize:"0.7rem",opacity:.5},children:"(if you apply draft)"})]})]}),j&&m.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"8px",padding:"0.6rem 1rem",marginBottom:"1rem",fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[m.jsx("span",{style:{opacity:.6},children:""}),m.jsxs("span",{style:{opacity:.7},children:["Percentage allocations based on prev month income: ",m.jsx("strong",{style:{color:be.primary},children:Qe(w)})]})]}),m.jsx(BN,{allocationsFinalized:D,isEditingAppliedAllocations:f,isSavingAllocations:l,isFinalizingAllocations:c,monthLoading:p,onCancel:q,onSave:z,onFinalize:$,onStartEdit:()=>W(!0)}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[Object.keys(n).length===0&&m.jsxs("p",{style:{opacity:.6,textAlign:"center",padding:"2rem"},children:["No categories yet."," ",m.jsx(Dt,{to:"/budget/admin/categories",style:{color:be.primaryLight},children:"Create categories "})]}),T.map(R=>{const L=C[R.id]||[];if(L.length===0)return null;const k=L.reduce((X,[F,U])=>X+I(F,U),0);return m.jsx(JE,{name:R.name,categories:L,groupTotal:k,localAllocations:a,previousMonthIncome:w,disabled:D&&!f,onAllocationChange:B},R.id)}),C.ungrouped?.length>0&&m.jsx(JE,{name:"Uncategorized",categories:C.ungrouped,groupTotal:C.ungrouped.reduce((R,[L,k])=>R+I(L,k),0),localAllocations:a,previousMonthIncome:w,disabled:D&&!f,onAllocationChange:B,isUngrouped:!0})]})]})}function BN({allocationsFinalized:t,isEditingAppliedAllocations:e,isSavingAllocations:n,isFinalizingAllocations:i,monthLoading:a,onCancel:l,onSave:c,onFinalize:f,onStartEdit:d}){const p=t?e?be.primary:be.success:be.warning;return m.jsxs("div",{style:{background:`color-mix(in srgb, ${p} 12%, transparent)`,border:`1px solid ${p}`,borderRadius:"8px",padding:"0.75rem 1rem",marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"0.75rem"},children:[m.jsxs("div",{children:[m.jsx("p",{style:{margin:0,fontWeight:600,color:p},children:t?e?" Editing Applied Allocations":" Allocations Applied":" Allocations Not Applied"}),m.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.8rem",opacity:.8},children:t?e?"Make changes and save, or cancel to revert.":"Click Edit to make changes to allocations.":"Save and apply to update category balances."})]}),m.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:t?e?m.jsxs(m.Fragment,{children:[m.jsx(Ne,{onClick:l,disabled:n||a,variant:"secondary",children:"Cancel"}),m.jsx(Ne,{onClick:c,disabled:n||a,children:n?" Saving...":" Save Changes"})]}):m.jsx(Ne,{onClick:d,disabled:a,variant:"secondary",children:" Edit Allocations"}):m.jsxs(m.Fragment,{children:[m.jsx(Ne,{onClick:c,disabled:n||a,variant:"secondary",children:n?" Saving...":" Save Draft"}),m.jsx(Ne,{onClick:f,disabled:i||a,children:i?" Applying...":" Save & Apply"})]})})]})}function JE({name:t,categories:e,groupTotal:n,localAllocations:i,previousMonthIncome:a,disabled:l,onAllocationChange:c,isUngrouped:f}){return m.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"12px",padding:"1rem"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem",paddingBottom:"0.5rem",borderBottom:"1px solid color-mix(in srgb, currentColor 15%, transparent)"},children:[m.jsxs("h3",{style:{...fl,margin:0,opacity:f?.7:1},children:[t,m.jsxs("span",{style:{marginLeft:"0.5rem",opacity:.5,fontWeight:400,fontSize:"0.9rem"},children:["(",e.length,")"]})]}),m.jsx("span",{style:{fontWeight:600,color:be.primary},children:Qe(n)})]}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:e.map(([d,p])=>m.jsx(UN,{category:p,value:i[d]||"",onChange:_=>c(d,_),previousMonthIncome:a,disabled:l},d))})]})}function FN(){const{selectedBudgetId:t,currentUserId:e,currentYear:n,currentMonthNumber:i}=Cn(),{categories:a,categoryGroups:l}=Yn(t,e),{month:c,isLoading:f}=hl(t,n,i),d=Gs(),p=M.useMemo(()=>{if(c?.category_balances&&c.category_balances.length>0)return c.category_balances;const w=c?.previous_month_snapshot?.category_balances_end??{},D=[];return Object.entries(a).forEach(([I])=>{const B=w[I]??0;let q=0;if(c?.allocations_finalized&&c.allocations){const $=c.allocations.find(W=>W.category_id===I);$&&(q=$.amount)}let z=0;c?.expenses&&(z=c.expenses.filter($=>$.category_id===I).reduce(($,W)=>$+W.amount,0)),D.push({category_id:I,start_balance:B,allocated:q,spent:z,end_balance:B+q-z})}),D},[c,a]),_=w=>p.find(D=>D.category_id===w),b=M.useMemo(()=>p.reduce((w,D)=>({start:w.start+D.start_balance,allocated:w.allocated+D.allocated,spent:w.spent+D.spent,end:w.end+D.end_balance}),{start:0,allocated:0,spent:0,end:0}),[p]),E=[...l].sort((w,D)=>w.sort_order-D.sort_order),A=M.useMemo(()=>{const w=Object.entries(a).reduce((D,[I,B])=>{const q=B.category_group_id||"ungrouped";return D[q]||(D[q]=[]),D[q].push([I,B]),D},{});return Object.keys(w).forEach(D=>{w[D].sort((I,B)=>I[1].sort_order-B[1].sort_order)}),w},[a]);return m.jsxs("div",{style:{opacity:f?.5:1,transition:"opacity 0.15s ease-out",pointerEvents:f?"none":"auto"},children:[m.jsxs("div",{style:{display:"grid",gridTemplateColumns:d?"1fr 1fr":"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[m.jsxs(Qn,{children:[m.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.7},children:"Start of Month"}),m.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.3rem",fontWeight:600,color:Sn(b.start)},children:Qe(b.start)})]}),m.jsxs(Qn,{children:[m.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.7},children:"Allocated"}),m.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.3rem",fontWeight:600,color:be.success},children:["+",Qe(b.allocated)]})]}),m.jsxs(Qn,{children:[m.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.7},children:"Spent"}),m.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.3rem",fontWeight:600,color:be.error},children:["-",Qe(b.spent)]})]}),m.jsxs(Qn,{children:[m.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.7},children:"End of Month"}),m.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.3rem",fontWeight:600,color:Sn(b.end)},children:Qe(b.end)})]})]}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[Object.keys(a).length===0&&m.jsxs("p",{style:{opacity:.6,textAlign:"center",padding:"2rem"},children:["No categories yet."," ",m.jsx(Dt,{to:"/budget/admin/categories",style:{color:be.primaryLight},children:"Create categories "})]}),E.map(w=>{const D=A[w.id]||[];if(D.length===0)return null;const I=D.reduce((B,[q])=>{const z=_(q);return z?{start:B.start+z.start_balance,allocated:B.allocated+z.allocated,spent:B.spent+z.spent,end:B.end+z.end_balance}:B},{start:0,allocated:0,spent:0,end:0});return m.jsx(ZE,{name:w.name,categories:D,groupEndBalance:I.end,getCategoryBalance:_,isMobile:d},w.id)}),A.ungrouped?.length>0&&(()=>{const w=A.ungrouped,D=w.reduce((I,[B])=>{const q=_(B);return q?{start:I.start+q.start_balance,allocated:I.allocated+q.allocated,spent:I.spent+q.spent,end:I.end+q.end_balance}:I},{start:0,allocated:0,spent:0,end:0});return m.jsx(ZE,{name:"Uncategorized",categories:w,groupEndBalance:D.end,getCategoryBalance:_,isMobile:d,isUngrouped:!0},"ungrouped")})()]})]})}function ZE({name:t,categories:e,groupEndBalance:n,getCategoryBalance:i,isMobile:a,isUngrouped:l}){return m.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"12px",padding:"1rem"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem",paddingBottom:"0.5rem",borderBottom:"1px solid color-mix(in srgb, currentColor 15%, transparent)"},children:[m.jsxs("h3",{style:{...fl,margin:0,opacity:l?.7:1},children:[t,m.jsxs("span",{style:{marginLeft:"0.5rem",opacity:.5,fontWeight:400,fontSize:"0.9rem"},children:["(",e.length,")"]})]}),m.jsx("span",{style:{fontWeight:600,color:Sn(n)},children:Qe(n)})]}),!a&&m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr",gap:"0.5rem",padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:600,opacity:.6,textTransform:"uppercase",letterSpacing:"0.05em"},children:[m.jsx("span",{children:"Category"}),m.jsx("span",{style:{textAlign:"right"},children:"Start"}),m.jsx("span",{style:{textAlign:"right"},children:"Allocated"}),m.jsx("span",{style:{textAlign:"right"},children:"Spent"}),m.jsx("span",{style:{textAlign:"right"},children:"End"})]}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:e.map(([c,f])=>{const d=i(c);return d?a?m.jsx(qN,{category:f,balance:d},c):m.jsx(HN,{category:f,balance:d},c):null})})]})}function qN({category:t,balance:e}){return m.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"8px",padding:"0.75rem"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[m.jsx("span",{style:{fontWeight:500},children:t.name}),m.jsx("span",{style:{fontWeight:600,color:Sn(e.end_balance)},children:Qe(e.end_balance)})]}),m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"0.5rem",fontSize:"0.8rem"},children:[m.jsxs("div",{children:[m.jsx("span",{style:{opacity:.6,display:"block"},children:"Start"}),m.jsx("span",{children:Qe(e.start_balance)})]}),m.jsxs("div",{children:[m.jsx("span",{style:{opacity:.6,display:"block"},children:"Alloc"}),m.jsxs("span",{style:{color:e.allocated>0?be.success:"inherit"},children:[e.allocated>0?"+":"",Qe(e.allocated)]})]}),m.jsxs("div",{children:[m.jsx("span",{style:{opacity:.6,display:"block"},children:"Spent"}),m.jsxs("span",{style:{color:e.spent>0?be.error:"inherit"},children:[e.spent>0?"-":"",Qe(e.spent)]})]})]})]})}function HN({category:t,balance:e}){return m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr",gap:"0.5rem",padding:"0.6rem 0.75rem",background:"color-mix(in srgb, currentColor 3%, transparent)",borderRadius:"6px",alignItems:"center"},children:[m.jsx("span",{style:{fontWeight:500},children:t.name}),m.jsx("span",{style:{textAlign:"right",fontSize:"0.9rem"},children:Qe(e.start_balance)}),m.jsxs("span",{style:{textAlign:"right",fontSize:"0.9rem",color:e.allocated>0?be.success:"inherit"},children:[e.allocated>0?"+":"",Qe(e.allocated)]}),m.jsxs("span",{style:{textAlign:"right",fontSize:"0.9rem",color:e.spent>0?be.error:"inherit"},children:[e.spent>0?"-":"",Qe(e.spent)]}),m.jsx("span",{style:{textAlign:"right",fontSize:"0.9rem",fontWeight:600,color:Sn(e.end_balance)},children:Qe(e.end_balance)})]})}function GN({isOpen:t,onClose:e,results:n}){const{currentYear:i,currentMonthNumber:a}=Cn(),l=n?.status==="done"||n?.status==="error";function c(){l&&e()}return m.jsx(Rh,{isOpen:t,onClose:c,title:"Recalculate Monthly Data",children:m.jsxs("div",{style:{padding:"0.5rem 0"},children:[m.jsxs("p",{style:{margin:"0 0 1.5rem 0",fontSize:"0.9rem",opacity:.7},children:["Recalculating all totals and balances for ",hT[a-1]," ",i]}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[m.jsx(Ro,{status:n?.status==="pending"?"waiting":"complete",label:"Count income transactions",detail:n&&n.status!=="pending"?`Found ${n.incomeCount} transaction${n.incomeCount!==1?"s":""}`:void 0}),m.jsx(Ro,{status:vu(n?.status,["income_counting"],"income_calculating"),label:"Calculate income total",detail:n?.newIncomeTotal!==void 0?Qe(n.newIncomeTotal):void 0}),m.jsx(Ro,{status:vu(n?.status,["pending","income_counting","income_calculating"],"income_saving"),label:"Save income totals"}),m.jsx(Ro,{status:vu(n?.status,["pending","income_counting","income_calculating","income_saving"],"expenses_counting"),label:"Count expense transactions",detail:n?.expenseCount!==void 0&&!["pending","income_counting","income_calculating","income_saving"].includes(n.status)?`Found ${n.expenseCount} expense${n.expenseCount!==1?"s":""} (${Qe(n.newExpenseTotal||0)})`:void 0}),m.jsx(Ro,{status:vu(n?.status,["pending","income_counting","income_calculating","income_saving","expenses_counting"],"balances_calculating"),label:"Calculate category balances"}),m.jsx(Ro,{status:n?.status==="error"?"error":vu(n?.status,["pending","income_counting","income_calculating","income_saving","expenses_counting","balances_calculating"],"balances_saving"),label:"Save category balances",detail:n?.status==="error"?n.error:void 0,isError:n?.status==="error"})]}),n?.status==="done"&&m.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:`color-mix(in srgb, ${be.success} 10%, transparent)`,border:`1px solid ${be.success}`,borderRadius:"8px"},children:[m.jsx("p",{style:{margin:0,fontWeight:600,color:be.success},children:" Recalculation complete!"}),m.jsxs("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.9rem",opacity:.8},children:["Income: ",Qe(n.newIncomeTotal||0),"  Expenses: ",Qe(n.newExpenseTotal||0),"  Category balances updated"]})]}),l&&m.jsx("div",{style:{marginTop:"1.5rem",display:"flex",justifyContent:"flex-end"},children:m.jsx(Ne,{onClick:e,children:"Done"})})]})})}function vu(t,e,n){return!t||e.includes(t)?t===n?"active":"waiting":t===n?"active":"complete"}function Ro({status:t,label:e,detail:n,isError:i}){const a=t==="waiting"?"":t==="active"?"":t==="error"?"":"";return m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[m.jsx("span",{style:{fontSize:"1.1rem",width:"1.5rem",textAlign:"center"},children:a}),m.jsxs("div",{style:{flex:1},children:[m.jsx("p",{style:{margin:0,fontWeight:500},children:e}),n&&m.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.85rem",opacity:i?1:.6,color:i?be.error:"inherit"},children:n})]})]})}const QN=["income","allocations","spend","balances"];function eS(t){const e=t.year?parseInt(t.year,10):null,n=t.month?parseInt(t.month,10):null,i=t.tab&&QN.includes(t.tab)?t.tab:null;return{year:e&&!isNaN(e)&&e>=2e3&&e<=2100?e:null,month:n&&!isNaN(n)&&n>=1&&n<=12?n:null,tab:i}}function tS(){const t=WA(),e=jh(),{currentUserId:n,selectedBudgetId:i,currentYear:a,currentMonthNumber:l,setCurrentYear:c,setCurrentMonthNumber:f,goToPreviousMonth:d,goToNextMonth:p,hasPendingInvites:_,pendingInvites:b,needsFirstBudget:E}=Cn(),{budget:A,isOwner:w,createBudget:D,acceptInvite:I}=Yn(i,n),{month:B,isLoading:q}=hl(i,a,l),[z,$]=M.useState(null),[W,oe]=M.useState(!1),[N,T]=M.useState(!1),[C,j]=M.useState(null),[R,L]=M.useState(!1),[k,X]=M.useState(()=>{const{tab:de}=eS(t);return de??"balances"});M.useEffect(()=>{if(R)return;const{year:de,month:V}=eS(t);de&&c(de),V&&f(V),L(!0)},[t,c,f,R]),M.useEffect(()=>{if(!R)return;const de=`/budget/${a}/${l}/${k}`,V=`/budget/${t.year}/${t.month}/${t.tab}`;de!==V&&e(de,{replace:!0})},[a,l,k,R,e,t]);async function F(de){try{await I(de)}catch(V){$(V instanceof Error?V.message:"Failed to accept invite")}}async function U(de){try{await D(de||"My Budget")}catch(V){$(V instanceof Error?V.message:"Failed to create budget")}}if(!A&&_)return m.jsxs(nh,{children:[m.jsx("nav",{style:th,children:m.jsx(Dt,{to:"/",children:" Back to Home"})}),m.jsx(jN,{invites:b,onAccept:F,onCreateNew:U})]});if(!A&&E)return m.jsxs(nh,{children:[m.jsx("nav",{style:th,children:m.jsx(Dt,{to:"/",children:" Back to Home"})}),m.jsx(ON,{onCreateNew:U})]});function H(){$(null),d()}function Q(){$(null),p()}async function le(){$(null),oe(!0),T(!0),j({status:"pending"});try{await new Promise(Ee=>setTimeout(Ee,200));const de=B?.income.length||0,V=B?.total_income||0;j({status:"income_counting",incomeCount:de,oldIncomeTotal:V}),await new Promise(Ee=>setTimeout(Ee,200));const J=B?.income.reduce((Ee,De)=>Ee+De.amount,0)||0;j({status:"income_calculating",incomeCount:de,oldIncomeTotal:V,newIncomeTotal:J}),await new Promise(Ee=>setTimeout(Ee,150)),j({status:"income_saving",incomeCount:de,oldIncomeTotal:V,newIncomeTotal:J}),await new Promise(Ee=>setTimeout(Ee,200));const ye=B?.expenses?.length||0,ie=B?.total_expenses||0,ce=B?.expenses?.reduce((Ee,De)=>Ee+De.amount,0)||0;j({status:"expenses_counting",incomeCount:de,oldIncomeTotal:V,newIncomeTotal:J,expenseCount:ye,oldExpenseTotal:ie,newExpenseTotal:ce}),await new Promise(Ee=>setTimeout(Ee,200)),j({status:"balances_calculating",incomeCount:de,oldIncomeTotal:V,newIncomeTotal:J,expenseCount:ye,oldExpenseTotal:ie,newExpenseTotal:ce}),await new Promise(Ee=>setTimeout(Ee,150)),j({status:"balances_saving",incomeCount:de,oldIncomeTotal:V,newIncomeTotal:J,expenseCount:ye,oldExpenseTotal:ie,newExpenseTotal:ce}),j({status:"done",incomeCount:de,oldIncomeTotal:V,newIncomeTotal:J,expenseCount:ye,oldExpenseTotal:ie,newExpenseTotal:ce})}catch(de){j({status:"error",error:de instanceof Error?de.message:"Failed to recalculate"})}finally{oe(!1)}}return m.jsxs(nh,{children:[m.jsxs("nav",{style:th,children:[m.jsx(Dt,{to:"/",children:" Back to Home"}),m.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[m.jsx(Dt,{to:"/budget/analytics",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"2.5rem",height:"2.5rem",borderRadius:"8px",background:"color-mix(in srgb, currentColor 8%, transparent)",textDecoration:"none",fontSize:"1.25rem",transition:"background 0.15s"},title:"Analytics",children:""}),m.jsx(Dt,{to:"/budget/admin",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"2.5rem",height:"2.5rem",borderRadius:"8px",background:"color-mix(in srgb, currentColor 8%, transparent)",textDecoration:"none",fontSize:"1.25rem",transition:"background 0.15s"},title:w?"Admin Settings":"Budget Settings",children:""})]})]}),m.jsx(KN,{budgetName:A?.name,userCount:A?.user_ids.length,isOwner:w}),z&&m.jsx(ml,{message:z,onDismiss:()=>$(null)}),m.jsx(kN,{isLoading:q,onPreviousMonth:H,onNextMonth:Q,onRecalculateAll:le,isRecomputing:W}),m.jsx(MN,{activeTab:k,setActiveTab:X,allocationsFinalized:B?.allocations_finalized}),k==="income"&&m.jsx(PN,{}),k==="allocations"&&m.jsx(zN,{}),k==="spend"&&m.jsx(LN,{}),k==="balances"&&m.jsx(FN,{}),m.jsx(GN,{isOpen:N,onClose:()=>{T(!1),j(null)},results:C})]})}function KN({budgetName:t,userCount:e,isOwner:n}){return m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[m.jsx("h1",{style:{margin:0},children:"Budget"}),t&&m.jsx("span",{style:{background:`color-mix(in srgb, ${be.primary} 15%, transparent)`,color:be.primaryLight,padding:"0.25rem 0.75rem",borderRadius:"6px",fontSize:"0.85rem",fontWeight:500},children:t})]}),e!==void 0&&m.jsxs("p",{style:{opacity:.6,fontSize:"0.85rem",marginBottom:"1.5rem"},children:[e," user",e!==1?"s":""," ",n?" You are the owner":" Shared with you"]})]})}function $N(){return m.jsxs(nh,{children:[m.jsx("nav",{style:th,children:m.jsx(Dt,{to:"/budget",children:" Back to Budget"})}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"50vh",textAlign:"center",gap:"1.5rem"},children:[m.jsx("div",{style:{fontSize:"4rem",opacity:.8},children:""}),m.jsx("h1",{style:{margin:0,fontSize:"2rem",fontWeight:600},children:"Analytics"}),m.jsx("p",{style:{margin:0,fontSize:"1.25rem",opacity:.6,maxWidth:"400px"},children:"Coming Soon"}),m.jsx("p",{style:{margin:0,fontSize:"0.95rem",opacity:.5,maxWidth:"500px",lineHeight:1.6},children:"Track spending trends, category breakdowns, and insights about your budget over time."}),m.jsx(Dt,{to:"/budget",style:{marginTop:"1rem",padding:"0.75rem 1.5rem",background:be.primary,color:"white",borderRadius:"8px",textDecoration:"none",fontWeight:500,transition:"opacity 0.15s"},children:"Back to Budget"})]})]})}function Dh({initialData:t,onSubmit:e,onCancel:n,submitLabel:i,accountGroups:a,showGroupSelector:l=!1,showIncomeSettings:c=!1,hasExistingIncomeDefault:f=!1,hasExistingOutgoDefault:d=!1,currentGroupId:p}){const[_,b]=M.useState(t||{nickname:"",account_group_id:null,is_income_account:!1,is_income_default:!1,is_outgo_account:!1,is_outgo_default:!1,on_budget:!0,is_active:!0}),E=_.account_group_id||p,A=E?a.find(z=>z.id===E):null,w=A?.is_active!==void 0,D=A?.on_budget!==void 0;function I(z){z.preventDefault(),_.nickname.trim()&&e(_)}function B(z){b({..._,is_income_account:z,is_income_default:z?_.is_income_default:!1})}function q(z){b({..._,is_outgo_account:z,is_outgo_default:z?_.is_outgo_default:!1})}return m.jsxs(La,{onSubmit:I,children:[m.jsx($t,{label:"Account Nickname",htmlFor:"account-nickname",children:m.jsx(Ui,{id:"account-nickname",type:"text",value:_.nickname,onChange:z=>b({..._,nickname:z.target.value}),placeholder:"e.g., Main Checking, Savings",required:!0,autoFocus:!0})}),l&&m.jsx($t,{label:"Account Type",htmlFor:"account-group",children:m.jsxs(ja,{id:"account-group",value:_.account_group_id||"ungrouped",onChange:z=>b({..._,account_group_id:z.target.value==="ungrouped"?null:z.target.value}),children:[m.jsx("option",{value:"ungrouped",children:"Ungrouped"}),a.map(z=>m.jsx("option",{value:z.id,children:z.name},z.id))]})}),c&&m.jsxs("div",{style:{padding:"0.75rem",background:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[m.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.7},children:"Account Status"}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[m.jsx(Co,{id:"is-active",checked:w?A.is_active:_.is_active!==!1,onChange:z=>b({..._,is_active:z.target.checked}),disabled:w,children:m.jsx("span",{style:{opacity:w?.5:1},children:"Active account"})}),w&&m.jsxs("p",{style:{margin:0,fontSize:"0.7rem",opacity:.6,marginLeft:"2rem",color:be.warning},children:['Set by account type "',A.name,'"']})]}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[m.jsx(Co,{id:"on-budget",checked:D?A.on_budget:_.on_budget!==!1,onChange:z=>b({..._,on_budget:z.target.checked}),disabled:D,children:m.jsx("span",{style:{opacity:D?.5:1},children:"On budget (affects budget totals)"})}),D&&m.jsxs("p",{style:{margin:0,fontSize:"0.7rem",opacity:.6,marginLeft:"2rem",color:be.warning},children:['Set by account type "',A.name,'"']})]})]}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[m.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.7},children:"Income Settings"}),m.jsx(Co,{id:"is-income-account",checked:_.is_income_account||!1,onChange:z=>B(z.target.checked),children:"Show in income deposit list"}),_.is_income_account&&m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem",marginLeft:"2rem"},children:[m.jsx(Co,{id:"is-income-default",checked:_.is_income_default||!1,onChange:z=>b({..._,is_income_default:z.target.checked}),disabled:f&&!t?.is_income_default,children:"Default account for new income"}),f&&!t?.is_income_default&&m.jsx("p",{style:{margin:0,fontSize:"0.75rem",opacity:.5},children:"Another account is already set as default"})]})]}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[m.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.7},children:"Expense Settings"}),m.jsx(Co,{id:"is-outgo-account",checked:_.is_outgo_account||!1,onChange:z=>q(z.target.checked),children:"Show in expense account list"}),_.is_outgo_account&&m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem",marginLeft:"2rem"},children:[m.jsx(Co,{id:"is-outgo-default",checked:_.is_outgo_default||!1,onChange:z=>b({..._,is_outgo_default:z.target.checked}),disabled:d&&!t?.is_outgo_default,children:"Default account for new expenses"}),d&&!t?.is_outgo_default&&m.jsx("p",{style:{margin:0,fontSize:"0.75rem",opacity:.5},children:"Another account is already set as default"})]})]})]}),m.jsxs(Qs,{children:[m.jsx(Ne,{type:"submit",children:i}),m.jsx(Ne,{type:"button",variant:"secondary",onClick:n,children:"Cancel"})]})]})}function nS({label:t,value:e,onChange:n,trueLabel:i,falseLabel:a,undefinedLabel:l}){function c(){n(e===void 0?!0:e===!0?!1:void 0)}const f=e===!0?i:e===!1?a:l,d=e===!0?be.success:e===!1?be.warning:"inherit",p=e===!0?"":e===!1?"":"";return m.jsxs("button",{type:"button",onClick:c,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",background:e!==void 0?`color-mix(in srgb, ${d} 15%, transparent)`:"color-mix(in srgb, currentColor 8%, transparent)",border:e!==void 0?`1px solid color-mix(in srgb, ${d} 40%, transparent)`:"1px solid color-mix(in srgb, currentColor 20%, transparent)",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem",color:"inherit",textAlign:"left",width:"100%"},children:[m.jsx("span",{style:{width:"1.25rem",height:"1.25rem",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",background:e!==void 0?d:"color-mix(in srgb, currentColor 20%, transparent)",color:e!==void 0?"white":"inherit",fontWeight:600,fontSize:"0.75rem"},children:p}),m.jsxs("span",{style:{flex:1},children:[m.jsxs("span",{style:{opacity:.7},children:[t,":"]})," ",m.jsx("span",{style:{fontWeight:500,color:d},children:f})]}),m.jsx("span",{style:{fontSize:"0.7rem",opacity:.5},children:"click to cycle"})]})}function vT({initialData:t,onSubmit:e,onCancel:n,submitLabel:i}){const[a,l]=M.useState(t||{name:"",expected_balance:"positive"});function c(f){f.preventDefault(),a.name.trim()&&e(a)}return m.jsxs(La,{onSubmit:c,children:[m.jsx($t,{label:"Account Type Name",htmlFor:"group-name",children:m.jsx(Ui,{id:"group-name",type:"text",value:a.name,onChange:f=>l({...a,name:f.target.value}),placeholder:"e.g., Checking, Savings, Credit Cards, Investments",required:!0,autoFocus:!0})}),m.jsx($t,{label:"Expected Balance",htmlFor:"expected-balance",children:m.jsxs(ja,{id:"expected-balance",value:a.expected_balance,onChange:f=>l({...a,expected_balance:f.target.value}),children:[m.jsx("option",{value:"positive",children:"Normally Positive (e.g., Checking, Savings)"}),m.jsx("option",{value:"negative",children:"Normally Negative (e.g., Credit Cards, Loans)"}),m.jsx("option",{value:"any",children:"Either (no warnings)"})]})}),m.jsxs("div",{style:{padding:"0.75rem",background:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[m.jsxs("p",{style:{margin:0,fontSize:"0.85rem",opacity:.7},children:["Group-Level Overrides ",m.jsx("span",{style:{fontSize:"0.75rem",opacity:.6},children:"(applies to all accounts in this type)"})]}),m.jsx(nS,{label:"Active status",value:a.is_active,onChange:f=>l({...a,is_active:f}),trueLabel:"All active",falseLabel:"All inactive",undefinedLabel:"Per account"}),m.jsx(nS,{label:"Budget status",value:a.on_budget,onChange:f=>l({...a,on_budget:f}),trueLabel:"All on budget",falseLabel:"All off budget",undefinedLabel:"Per account"})]}),m.jsxs(Qs,{children:[m.jsx(Ne,{type:"submit",children:i}),m.jsx(Ne,{type:"button",variant:"secondary",onClick:n,children:"Cancel"})]})]})}function Do({icon:t,label:e,variant:n,title:i}){const l={success:{background:`color-mix(in srgb, ${be.success} 20%, transparent)`,border:`1px solid color-mix(in srgb, ${be.success} 40%, transparent)`,color:be.success,opacity:1},warning:{background:`color-mix(in srgb, ${be.warning} 15%, transparent)`,border:`1px solid color-mix(in srgb, ${be.warning} 35%, transparent)`,color:be.warning,opacity:1},muted:{background:"color-mix(in srgb, currentColor 12%, transparent)",border:"1px solid color-mix(in srgb, currentColor 20%, transparent)",color:"inherit",opacity:.7},income:{background:`color-mix(in srgb, ${be.success} 10%, transparent)`,border:`1px solid color-mix(in srgb, ${be.success} 25%, transparent)`,color:be.success,opacity:.7},expense:{background:`color-mix(in srgb, ${be.warning} 10%, transparent)`,border:`1px solid color-mix(in srgb, ${be.warning} 25%, transparent)`,color:be.warning,opacity:.7}}[n];return m.jsxs("span",{title:i||e,style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",background:l.background,border:l.border,padding:"0.15rem 0.4rem",borderRadius:"4px",fontSize:"0.7rem",fontWeight:500,textTransform:"uppercase",letterSpacing:"0.3px",color:l.color,opacity:l.opacity,whiteSpace:"nowrap"},children:[m.jsx("span",{style:{fontSize:"0.75rem"},children:t}),e]})}function bT({account:t,accountGroups:e}){const n=[],i=t.account_group_id?e.find(c=>c.id===t.account_group_id):null,a=i?.is_active!==void 0?i.is_active:t.is_active!==!1,l=i?.on_budget!==void 0?i.on_budget:t.on_budget!==!1;if(!a){const c=i?.is_active!==void 0;n.push(m.jsx(Do,{icon:"",label:c?"Inactive (type)":"Inactive",variant:"warning",title:c?`Set by "${i.name}" account type`:"Account is inactive/archived"},"inactive"))}if(!l){const c=i?.on_budget!==void 0;n.push(m.jsx(Do,{icon:"",label:c?"Off Budget (type)":"Off Budget",variant:"warning",title:c?`Set by "${i.name}" account type`:"Tracking only - not included in budget"},"off-budget"))}return t.is_income_default?n.push(m.jsx(Do,{icon:"",label:"Income Default",variant:"success",title:"Default income deposit account"},"income-default")):t.is_income_account&&n.push(m.jsx(Do,{icon:"",label:"Income",variant:"income",title:"Income deposit account"},"income")),t.is_outgo_default?n.push(m.jsx(Do,{icon:"",label:"Expense Default",variant:"warning",title:"Default expense account"},"outgo-default")):t.is_outgo_account&&n.push(m.jsx(Do,{icon:"",label:"Expense",variant:"expense",title:"Expense account"},"outgo")),n.length===0?null:m.jsx(m.Fragment,{children:n})}function YN({group:t}){const e=[];return t.is_active===!1?e.push(m.jsx("span",{style:{fontSize:"0.65rem",fontWeight:500,padding:"0.15rem 0.35rem",borderRadius:"4px",background:`color-mix(in srgb, ${be.warning} 20%, transparent)`,color:be.warning,whiteSpace:"nowrap"},title:"All accounts in this type are inactive",children:"All Inactive"},"inactive")):t.is_active===!0&&e.push(m.jsx("span",{style:{fontSize:"0.65rem",fontWeight:500,padding:"0.15rem 0.35rem",borderRadius:"4px",background:`color-mix(in srgb, ${be.success} 20%, transparent)`,color:be.success,whiteSpace:"nowrap"},title:"All accounts in this type are active",children:"All Active"},"active")),t.on_budget===!1?e.push(m.jsx("span",{style:{fontSize:"0.65rem",fontWeight:500,padding:"0.15rem 0.35rem",borderRadius:"4px",background:`color-mix(in srgb, ${be.warning} 20%, transparent)`,color:be.warning,whiteSpace:"nowrap"},title:"All accounts in this type are off budget",children:"All Off Budget"},"off-budget")):t.on_budget===!0&&e.push(m.jsx("span",{style:{fontSize:"0.65rem",fontWeight:500,padding:"0.15rem 0.35rem",borderRadius:"4px",background:`color-mix(in srgb, ${be.success} 20%, transparent)`,color:be.success,whiteSpace:"nowrap"},title:"All accounts in this type are on budget",children:"All On Budget"},"on-budget")),e.length===0?null:m.jsx(m.Fragment,{children:e})}function ET({isActive:t,onDragOver:e,onDragLeave:n,onDrop:i}){return m.jsxs("div",{onDragOver:e,onDragLeave:n,onDrop:i,style:{position:"relative",height:"2rem",marginTop:"-0.25rem"},children:[m.jsx("div",{style:{position:"absolute",top:"50%",left:0,right:0,height:"3px",background:be.primary,borderRadius:"2px",opacity:t?1:.3,transition:"opacity 0.15s",boxShadow:t?"0 0 8px rgba(100, 108, 255, 0.6)":"none"}}),t&&m.jsx("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"0.75rem",opacity:.7,background:"var(--background, #1a1a1a)",padding:"0 0.5rem",whiteSpace:"nowrap"},children:"Move to end"})]})}function WN(t,e){return!e||e==="any"||t===0?!1:e==="positive"&&t<0||e==="negative"&&t>0}function XN(t,e){return!e||e==="any"||t===0?null:e==="positive"&&t<0?"Unexpected negative balance":e==="negative"&&t>0?"Unexpected positive balance (credit owed to you?)":null}function JN({group:t,groupIndex:e,totalGroups:n,accounts:i,allGroups:a,allAccounts:l,editingAccountId:c,editingGroupId:f,createForGroupId:d,setEditingAccountId:p,setEditingGroupId:_,setCreateForGroupId:b,dragType:E,draggedId:A,dragOverId:w,dragOverGroupId:D,setDragOverId:I,setDragOverGroupId:B,onAccountDragStart:q,onAccountDragOver:z,onAccountDrop:$,onGroupDragStart:W,onGroupDragOver:oe,onGroupDrop:N,onDragLeave:T,onDragLeaveGroup:C,onDragEnd:j,onDropOnGroup:R,onCreateAccount:L,onUpdateAccount:k,onDeleteAccount:X,onMoveAccount:F,onUpdateGroup:U,onDeleteGroup:H,onMoveGroup:Q}){const le=Gs(),de=[...i].sort((Z,Ce)=>Z.sort_order-Ce.sort_order),V=E==="group"&&A===t.id,J=E==="group"&&w===t.id,ye=E==="account"&&D===t.id,ce=(A&&E==="account"?l[A]:null)&&Object.entries(l).find(([Z])=>Z===A)?.[1]&&Object.entries(l).find(([Z])=>Z===A)?.[1]?.account_group_id!==t.id,Ee=E==="group"&&J&&A!==t.id,De=e>0,ve=e<n-1,fe=de.reduce((Z,Ce)=>Z+Ce.balance,0);return m.jsxs("div",{children:[E==="group"&&!V&&m.jsxs("div",{onDragOver:Z=>{Z.preventDefault(),I(t.id)},onDragLeave:T,onDrop:Z=>N(Z,t.id),style:{position:"relative",height:Ee?"2.5rem":"0.5rem",marginBottom:Ee?"-0.5rem":"-0.25rem",transition:"height 0.15s"},children:[m.jsx("div",{style:{position:"absolute",top:"50%",left:0,right:0,height:"3px",background:be.primary,borderRadius:"2px",opacity:Ee?1:0,transition:"opacity 0.15s",boxShadow:Ee?"0 0 8px rgba(100, 108, 255, 0.6)":"none"}}),Ee&&m.jsx("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"0.75rem",opacity:.7,background:"var(--background, #1a1a1a)",padding:"0 0.5rem",whiteSpace:"nowrap"},children:"Drop here"})]}),m.jsx("div",{draggable:f!==t.id,onDragStart:Z=>W(Z,t.id),onDragOver:Z=>oe(Z,t.id),onDragLeave:C,onDragEnd:j,onDrop:Z=>R(Z,t.id),style:{background:V?"color-mix(in srgb, currentColor 3%, transparent)":ye&&ce?`color-mix(in srgb, ${be.primary} 10%, transparent)`:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"12px",padding:"1rem",opacity:V?.5:1,border:ye&&ce?`2px dashed ${be.primary}`:"2px solid transparent",cursor:f===t.id?"default":"grab",transition:"all 0.15s"},children:f===t.id?m.jsx(vT,{initialData:{name:t.name,expected_balance:t.expected_balance||"positive",on_budget:t.on_budget,is_active:t.is_active},onSubmit:Z=>U(t.id,Z),onCancel:()=>_(null),submitLabel:"Save"}):m.jsxs(m.Fragment,{children:[m.jsx(ZN,{group:t,accountCount:de.length,groupTotal:fe,canMoveUp:De,canMoveDown:ve,isMobile:le,createForGroupId:d,onEdit:()=>_(t.id),onDelete:()=>H(t.id),onMoveUp:()=>Q(t.id,"up"),onMoveDown:()=>Q(t.id,"down"),onAddAccount:()=>b(t.id)}),le&&m.jsx("div",{style:{marginBottom:"0.5rem"},children:m.jsx(Ne,{variant:"small",onClick:()=>b(t.id),disabled:d!==null,children:"+ Account"})}),m.jsxs("div",{style:zs,children:[de.map((Z,Ce)=>c===Z.id?m.jsx(Dh,{initialData:{nickname:Z.nickname,account_group_id:Z.account_group_id,is_income_account:Z.is_income_account,is_income_default:Z.is_income_default,is_outgo_account:Z.is_outgo_account,is_outgo_default:Z.is_outgo_default,on_budget:Z.on_budget,is_active:Z.is_active},onSubmit:xe=>k(Z.id,xe),onCancel:()=>p(null),submitLabel:"Save",accountGroups:a,showGroupSelector:!0,showIncomeSettings:!0,currentGroupId:Z.account_group_id,hasExistingIncomeDefault:Object.entries(l).some(([xe,He])=>He.is_income_default&&xe!==Z.id),hasExistingOutgoDefault:Object.entries(l).some(([xe,He])=>He.is_outgo_default&&xe!==Z.id)},Z.id):m.jsx(af,{isDragging:E==="account"&&A===Z.id,isDragOver:w===Z.id,onDragStart:xe=>{xe.stopPropagation(),q(xe,Z.id)},onDragOver:xe=>z(xe,Z.id,t.id),onDragLeave:T,onDragEnd:j,onDrop:xe=>$(xe,Z.id,t.id),onEdit:()=>p(Z.id),onDelete:()=>X(Z.id),onMoveUp:()=>F(Z.id,"up"),onMoveDown:()=>F(Z.id,"down"),canMoveUp:Ce>0,canMoveDown:Ce<de.length-1,children:m.jsxs("div",{children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[m.jsx("span",{style:by,children:Z.nickname}),m.jsx(bT,{account:Z,accountGroups:a})]}),m.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.1rem",fontWeight:600,color:Sn(Z.balance)},children:[Qe(Z.balance),WN(Z.balance,t.expected_balance)&&m.jsx("span",{title:XN(Z.balance,t.expected_balance)||"",style:{marginLeft:"0.5rem",fontSize:"0.85rem"},children:""})]})]})},Z.id)),de.length===0&&!d&&m.jsx("p",{style:{opacity:.5,fontSize:"0.9rem",margin:"0.5rem 0"},children:"No accounts in this type"}),E==="account"&&de.length>0&&m.jsx(ET,{groupId:t.id,isActive:w===`__end__${t.id}`,onDragOver:Z=>{Z.preventDefault(),Z.stopPropagation(),I(`__end__${t.id}`),B(t.id)},onDragLeave:Z=>{Z.stopPropagation(),I(null)},onDrop:Z=>{Z.stopPropagation(),$(Z,"__group_end__",t.id)}}),d===t.id&&m.jsx(Dh,{initialData:{nickname:"",account_group_id:t.id},onSubmit:Z=>L(Z,t.id),onCancel:()=>b(null),submitLabel:"Create",accountGroups:a,showIncomeSettings:!0,currentGroupId:t.id})]}),d!==t.id&&m.jsx("div",{style:{marginTop:"0.75rem",paddingTop:"0.5rem",borderTop:"1px solid color-mix(in srgb, currentColor 10%, transparent)"},children:m.jsx(Ne,{variant:"small",onClick:()=>b(t.id),disabled:d!==null,children:"+ Add Account"})})]})})]})}function ZN({group:t,accountCount:e,groupTotal:n,canMoveUp:i,canMoveDown:a,isMobile:l,createForGroupId:c,onEdit:f,onDelete:d,onMoveUp:p,onMoveDown:_,onAddAccount:b}){return m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:l?"0.5rem":"0.75rem",paddingBottom:"0.5rem",borderBottom:"1px solid color-mix(in srgb, currentColor 15%, transparent)",gap:"0.5rem",flexWrap:l?"wrap":"nowrap"},children:[m.jsxs("h3",{style:{...fl,margin:0,display:"flex",alignItems:"center",gap:"0.5rem",flex:1,minWidth:0,flexWrap:"wrap"},children:[!l&&m.jsx("span",{style:{cursor:"grab",opacity:.4},children:""}),m.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.name}),m.jsxs("span",{style:{opacity:.5,fontWeight:400,fontSize:"0.9rem",flexShrink:0},children:["(",e,")"]}),m.jsx("span",{style:{marginLeft:"0.5rem",fontWeight:600,fontSize:"0.9rem",color:Sn(n),flexShrink:0},children:Qe(n)}),m.jsx(YN,{group:t})]}),m.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0,alignItems:"center"},children:[!l&&m.jsx(Ne,{variant:"small",onClick:b,disabled:c!==null,children:"+ Account"}),m.jsx("button",{onClick:f,style:{background:"transparent",border:"none",cursor:"pointer",opacity:.6,fontSize:"0.9rem",padding:"0.25rem"},title:"Edit account type",children:""}),m.jsx("button",{onClick:d,style:{background:"transparent",border:"none",cursor:"pointer",opacity:.6,fontSize:"0.9rem",padding:"0.25rem"},title:"Delete account type",children:""}),m.jsxs("div",{style:vy,children:[m.jsx("button",{onClick:p,disabled:!i,style:{...Xo,opacity:i?.6:.2,cursor:i?"pointer":"default"},title:"Move up","aria-label":"Move up",children:""}),m.jsx("button",{onClick:_,disabled:!a,style:{...Xo,opacity:a?.6:.2,cursor:a?"pointer":"default"},title:"Move down","aria-label":"Move down",children:""})]})]})]})}function e4({accounts:t,allGroups:e,allAccounts:n,hasGroups:i,editingAccountId:a,createForGroupId:l,setEditingAccountId:c,setCreateForGroupId:f,dragType:d,draggedId:p,dragOverId:_,dragOverGroupId:b,setDragOverId:E,setDragOverGroupId:A,onAccountDragStart:w,onAccountDragOver:D,onAccountDrop:I,onDragOverGroup:B,onDropOnGroup:q,onDragLeave:z,onDragLeaveGroup:$,onDragEnd:W,onCreateAccount:oe,onUpdateAccount:N,onDeleteAccount:T,onMoveAccount:C}){const j=[...t].sort((F,U)=>F.sort_order-U.sort_order),R=d==="account"&&b==="ungrouped",k=(p&&d==="account"?n[p]:null)&&Object.entries(n).find(([F])=>F===p)?.[1]&&Object.entries(n).find(([F])=>F===p)?.[1]?.account_group_id!==null;if(j.length===0&&!l&&i&&d!=="account")return null;const X=j.reduce((F,U)=>F+U.balance,0);return m.jsxs("div",{onDragOver:F=>B(F,"ungrouped"),onDragLeave:$,onDrop:F=>q(F,"ungrouped"),style:{background:R&&k?`color-mix(in srgb, ${be.primary} 10%, transparent)`:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"12px",padding:"1rem",border:R&&k?`2px dashed ${be.primary}`:"2px solid transparent",transition:"all 0.15s"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem",paddingBottom:"0.5rem",borderBottom:"1px solid color-mix(in srgb, currentColor 15%, transparent)"},children:[m.jsxs("h3",{style:{...fl,margin:0,opacity:.7,display:"flex",alignItems:"center",gap:"0.5rem"},children:["Ungrouped",m.jsxs("span",{style:{marginLeft:"0.5rem",opacity:.5,fontWeight:400,fontSize:"0.9rem"},children:["(",j.length,")"]}),j.length>0&&m.jsx("span",{style:{marginLeft:"0.5rem",fontWeight:600,fontSize:"0.9rem",color:Sn(X)},children:Qe(X)})]}),m.jsx(Ne,{variant:"small",onClick:()=>f("ungrouped"),disabled:l!==null,children:"+ Account"})]}),m.jsxs("div",{style:zs,children:[j.map((F,U)=>a===F.id?m.jsx(Dh,{initialData:{nickname:F.nickname,account_group_id:F.account_group_id,is_income_account:F.is_income_account,is_income_default:F.is_income_default,is_outgo_account:F.is_outgo_account,is_outgo_default:F.is_outgo_default,on_budget:F.on_budget,is_active:F.is_active},onSubmit:H=>N(F.id,H),onCancel:()=>c(null),submitLabel:"Save",accountGroups:e,showGroupSelector:!0,showIncomeSettings:!0,currentGroupId:null,hasExistingIncomeDefault:Object.entries(n).some(([H,Q])=>Q.is_income_default&&H!==F.id),hasExistingOutgoDefault:Object.entries(n).some(([H,Q])=>Q.is_outgo_default&&H!==F.id)},F.id):m.jsx(af,{isDragging:d==="account"&&p===F.id,isDragOver:_===F.id,onDragStart:H=>w(H,F.id),onDragOver:H=>D(H,F.id,"ungrouped"),onDragLeave:z,onDragEnd:W,onDrop:H=>I(H,F.id,"ungrouped"),onEdit:()=>c(F.id),onDelete:()=>T(F.id),onMoveUp:()=>C(F.id,"up"),onMoveDown:()=>C(F.id,"down"),canMoveUp:U>0,canMoveDown:U<j.length-1,children:m.jsxs("div",{children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[m.jsx("span",{style:by,children:F.nickname}),m.jsx(bT,{account:F,accountGroups:e})]}),m.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.1rem",fontWeight:600,color:Sn(F.balance)},children:Qe(F.balance)})]})},F.id)),j.length===0&&d==="account"&&m.jsx("p",{style:{opacity:.5,fontSize:"0.9rem",margin:"0.5rem 0",textAlign:"center"},children:"Drop here to ungroup"}),d==="account"&&j.length>0&&m.jsx(ET,{groupId:"ungrouped",isActive:_==="__end__ungrouped",onDragOver:F=>{F.preventDefault(),F.stopPropagation(),E("__end__ungrouped"),A("ungrouped")},onDragLeave:F=>{F.stopPropagation(),E(null)},onDrop:F=>{F.stopPropagation(),I(F,"__group_end__","ungrouped")}}),l==="ungrouped"&&m.jsx(Dh,{initialData:{nickname:"",account_group_id:null},onSubmit:F=>oe(F,"ungrouped"),onCancel:()=>f(null),submitLabel:"Create",accountGroups:e,showIncomeSettings:!0,currentGroupId:null})]}),l!=="ungrouped"&&m.jsx("div",{style:{marginTop:"0.75rem",paddingTop:"0.5rem",borderTop:"1px solid color-mix(in srgb, currentColor 10%, transparent)"},children:m.jsx(Ne,{variant:"small",onClick:()=>f("ungrouped"),disabled:l!==null,children:"+ Add Account"})})]})}function t4(){const{accounts:t,accountsByGroup:e,sortedGroups:n,currentBudget:i,error:a,setError:l,handleCreateAccount:c,handleUpdateAccount:f,handleDeleteAccount:d,handleMoveAccount:p,handleCreateGroup:_,handleUpdateGroup:b,handleDeleteGroup:E,handleMoveGroup:A,reorderAccountsInGroup:w,reorderGroups:D}=nN(),I=Gs(),[B,q]=M.useState(null),[z,$]=M.useState(null),[W,oe]=M.useState(null),[N,T]=M.useState(!1),[C,j]=M.useState(null),[R,L]=M.useState(null),[k,X]=M.useState(null),[F,U]=M.useState(null);function H(ve,fe){j("account"),L(fe),ve.dataTransfer.effectAllowed="move"}function Q(ve,fe,Z){ve.preventDefault(),C==="account"&&(fe!==R&&X(fe),U(Z))}function le(ve,fe){ve.preventDefault(),C==="account"?(U(fe),X(null)):C==="group"&&fe!==R&&X(fe)}function de(){X(null)}function V(){U(null)}function J(){j(null),L(null),X(null),U(null)}async function ye(ve,fe,Z){if(ve.preventDefault(),ve.stopPropagation(),!R||C!=="account"){J();return}await w(R,fe,Z),J()}async function ie(ve,fe){ve.preventDefault(),C==="account"?await ye(ve,"__group_end__",fe):C==="group"&&await Ee(ve,fe)}function ce(ve,fe){ve.stopPropagation(),j("group"),L(fe),ve.dataTransfer.effectAllowed="move"}async function Ee(ve,fe){if(ve.preventDefault(),!R||C!=="group"||R===fe){J();return}await D(R,fe),J()}if(!i)return m.jsx("p",{children:"No budget found. Please log in."});const De=e.ungrouped||[];return m.jsxs("div",{children:[m.jsx("h2",{style:{marginTop:0},children:"Accounts"}),m.jsxs("p",{style:sf,children:["Organize your financial accounts by type.",m.jsx("br",{}),m.jsx("span",{style:{fontSize:"0.9rem"},children:I?"Use  buttons to reorder items, or drag to move between types.":"Drag accounts between types, or use  buttons to reorder."})]}),a&&m.jsx(ml,{message:a,onDismiss:()=>l(null)}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",marginBottom:"1.5rem"},children:[Object.keys(t).length===0&&n.length===0&&m.jsx("p",{style:{opacity:.7},children:"No accounts yet. Create an account type first, then add accounts!"}),n.map((ve,fe)=>m.jsx(JN,{group:ve,groupIndex:fe,totalGroups:n.length,accounts:e[ve.id]||[],allGroups:n,allAccounts:t,editingAccountId:B,editingGroupId:W,createForGroupId:z,setEditingAccountId:q,setEditingGroupId:oe,setCreateForGroupId:$,dragType:C,draggedId:R,dragOverId:k,dragOverGroupId:F,setDragOverId:X,setDragOverGroupId:U,onAccountDragStart:H,onAccountDragOver:Q,onAccountDrop:ye,onGroupDragStart:ce,onGroupDragOver:le,onGroupDrop:Ee,onDragLeave:de,onDragLeaveGroup:V,onDragEnd:J,onDropOnGroup:ie,onCreateAccount:c,onUpdateAccount:(Z,Ce)=>{f(Z,Ce),q(null)},onDeleteAccount:d,onMoveAccount:p,onUpdateGroup:(Z,Ce)=>{b(Z,Ce),oe(null)},onDeleteGroup:E,onMoveGroup:A},ve.id)),C==="group"&&n.length>0&&m.jsx(xy,{isActive:k==="__end__",onDragOver:ve=>{ve.preventDefault(),X("__end__")},onDragLeave:de,onDrop:ve=>Ee(ve,"__end__"),label:"Move account type to end"}),m.jsx(e4,{accounts:De,allGroups:n,allAccounts:t,hasGroups:n.length>0,editingAccountId:B,createForGroupId:z,setEditingAccountId:q,setCreateForGroupId:$,dragType:C,draggedId:R,dragOverId:k,dragOverGroupId:F,setDragOverId:X,setDragOverGroupId:U,onAccountDragStart:H,onAccountDragOver:Q,onAccountDrop:ye,onDragOverGroup:le,onDropOnGroup:ie,onDragLeave:de,onDragLeaveGroup:V,onDragEnd:J,onCreateAccount:c,onUpdateAccount:(ve,fe)=>{f(ve,fe),q(null)},onDeleteAccount:d,onMoveAccount:p})]}),N?m.jsx(vT,{onSubmit:ve=>{_(ve),T(!1)},onCancel:()=>T(!1),submitLabel:"Create Account Type"}):m.jsx(Ne,{variant:"primary-large",onClick:()=>T(!0),children:"+ Add Account Type"})]})}function Ih({initialData:t,onSubmit:e,onCancel:n,submitLabel:i,categoryGroups:a=[],showGroupSelector:l=!1}){const[c,f]=M.useState(t||{name:"",category_group_id:null}),[d,p]=M.useState(t?.default_monthly_amount?.toString()||""),[_,b]=M.useState(t?.default_monthly_type||"fixed"),[E,A]=M.useState(!1);function w(D){if(D.preventDefault(),!c.name.trim())return;A(!0);const I=parseFloat(d),B=!isNaN(I)&&I>0;e({...c,description:c.description?.trim()||void 0,default_monthly_amount:B?I:void 0,default_monthly_type:B?_:void 0})}return m.jsxs(La,{onSubmit:w,children:[m.jsx($t,{label:"Category Name",htmlFor:"category-name",children:m.jsx(Ui,{id:"category-name",type:"text",value:c.name,onChange:D=>f({...c,name:D.target.value}),placeholder:"e.g., Groceries, Rent, Gas",required:!0,autoFocus:!0})}),m.jsx($t,{label:"Description (optional)",htmlFor:"category-description",children:m.jsx(Ey,{id:"category-description",value:c.description||"",onChange:D=>f({...c,description:D.target.value}),placeholder:"What is this category used for?",minHeight:"3rem"})}),l&&m.jsx($t,{label:"Category Group",htmlFor:"category-group",children:m.jsxs(ja,{id:"category-group",value:c.category_group_id||"ungrouped",onChange:D=>f({...c,category_group_id:D.target.value==="ungrouped"?null:D.target.value}),children:[m.jsx("option",{value:"ungrouped",children:"Uncategorized"}),a.map(D=>m.jsx("option",{value:D.id,children:D.name},D.id))]})}),m.jsxs($t,{label:"Default Monthly Allocation (optional)",htmlFor:"default-amount",children:[m.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[m.jsxs(ja,{id:"default-type",value:_,onChange:D=>b(D.target.value),style:{width:"auto",flex:"0 0 auto"},children:[m.jsx("option",{value:"fixed",children:"Fixed $"}),m.jsx("option",{value:"percentage",children:"% of Prev Income"})]}),_==="fixed"?m.jsx(Sy,{id:"default-amount",value:d,onChange:p,placeholder:"$0.00"}):m.jsx(Ui,{id:"default-amount",type:"number",value:d,onChange:D=>p(D.target.value),placeholder:"0",min:"0",max:"100",step:"0.1",style:{width:"80px"}}),_==="percentage"&&m.jsx("span",{style:{opacity:.6},children:"%"})]}),m.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.75rem",opacity:.6},children:_==="fixed"?"Suggested fixed amount to allocate each month":"Percentage of previous month's total income"})]}),m.jsxs(Qs,{children:[m.jsx(Ne,{type:"submit",isLoading:E,children:i}),m.jsx(Ne,{type:"button",variant:"secondary",onClick:n,children:"Cancel"})]})]})}function ST({initialData:t,onSubmit:e,onCancel:n,submitLabel:i}){const[a,l]=M.useState(t||{name:""}),[c,f]=M.useState(!1);function d(p){p.preventDefault(),a.name.trim()&&(f(!0),e(a))}return m.jsxs(La,{onSubmit:d,children:[m.jsx($t,{label:"Group Name",htmlFor:"group-name",children:m.jsx(Ui,{id:"group-name",type:"text",value:a.name,onChange:p=>l({...a,name:p.target.value}),placeholder:"e.g., Housing, Transportation, Food",required:!0,autoFocus:!0})}),m.jsxs(Qs,{children:[m.jsx(Ne,{type:"submit",isLoading:c,children:i}),m.jsx(Ne,{type:"button",variant:"secondary",onClick:n,children:"Cancel"})]})]})}function xT({isActive:t,onDragOver:e,onDragLeave:n,onDrop:i}){return m.jsxs("div",{onDragOver:e,onDragLeave:n,onDrop:i,style:{position:"relative",height:"2rem",marginTop:"-0.25rem"},children:[m.jsx("div",{style:{position:"absolute",top:"50%",left:0,right:0,height:"3px",background:be.primary,borderRadius:"2px",opacity:t?1:.3,transition:"opacity 0.15s",boxShadow:t?"0 0 8px rgba(100, 108, 255, 0.6)":"none"}}),t&&m.jsx("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"0.75rem",opacity:.7,background:"var(--background, #1a1a1a)",padding:"0 0.5rem",whiteSpace:"nowrap"},children:"Move to end"})]})}function n4({group:t,groupIndex:e,groupCategories:n,sortedGroups:i,categoryGroups:a,categoryBalances:l,loadingBalances:c,dragType:f,draggedId:d,dragOverId:p,dragOverGroupId:_,editingCategoryId:b,setEditingCategoryId:E,createForGroupId:A,setCreateForGroupId:w,editingGroupId:D,setEditingGroupId:I,handleCreateCategory:B,handleUpdateCategory:q,handleDeleteCategory:z,handleMoveCategory:$,handleUpdateGroup:W,handleDeleteGroup:oe,handleMoveGroup:N,handleCategoryDragStart:T,handleCategoryDragOver:C,handleDragOverGroup:j,handleDragLeave:R,handleDragLeaveGroup:L,handleDragEnd:k,handleCategoryDrop:X,handleDropOnGroup:F,handleGroupDragStart:U,handleGroupDrop:H,setDragOverId:Q,setDragOverGroupId:le,isMobile:de,categories:V}){const J=f==="group"&&d===t.id,ye=f==="group"&&p===t.id,ie=f==="category"&&_===t.id,ce=d&&f==="category"?V[d]:null,Ee=ce&&(ce.category_group_id||"ungrouped")!==t.id,De=f==="group"&&ye&&d!==t.id,ve=e>0,fe=e<i.length-1;return m.jsxs("div",{children:[f==="group"&&!J&&m.jsxs("div",{onDragOver:Z=>{Z.preventDefault(),Q(t.id)},onDragLeave:R,onDrop:Z=>H(Z,t.id),style:{position:"relative",height:De?"2.5rem":"0.5rem",marginBottom:De?"-0.5rem":"-0.25rem",transition:"height 0.15s"},children:[m.jsx("div",{style:{position:"absolute",top:"50%",left:0,right:0,height:"3px",background:be.primary,borderRadius:"2px",opacity:De?1:0,transition:"opacity 0.15s",boxShadow:De?"0 0 8px rgba(100, 108, 255, 0.6)":"none"}}),De&&m.jsx("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"0.75rem",opacity:.7,background:"var(--background, #1a1a1a)",padding:"0 0.5rem",whiteSpace:"nowrap"},children:"Drop here"})]}),m.jsx("div",{onDragOver:Z=>j(Z,t.id),onDragLeave:L,onDrop:Z=>F(Z,t.id),style:{background:J?"color-mix(in srgb, currentColor 3%, transparent)":ie&&Ee?`color-mix(in srgb, ${be.primary} 10%, transparent)`:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"12px",padding:"1rem",opacity:J?.5:1,border:ie&&Ee?`2px dashed ${be.primary}`:"2px solid transparent",transition:"all 0.15s"},children:D===t.id?m.jsx(ST,{initialData:{name:t.name},onSubmit:Z=>W(t.id,Z),onCancel:()=>I(null),submitLabel:"Save"}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:de?"0.5rem":"0.75rem",paddingBottom:"0.5rem",borderBottom:"1px solid color-mix(in srgb, currentColor 15%, transparent)",gap:"0.5rem",flexWrap:de?"wrap":"nowrap"},children:[m.jsxs("h3",{style:{...fl,margin:0,display:"flex",alignItems:"center",gap:"0.5rem",flex:1,minWidth:0},children:[!de&&m.jsx("span",{draggable:!0,onDragStart:Z=>U(Z,t.id),onDragEnd:k,style:{cursor:"grab",opacity:.4,padding:"0.25rem",margin:"-0.25rem",borderRadius:"4px",userSelect:"none"},title:"Drag to reorder group",children:""}),m.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.name}),m.jsxs("span",{style:{opacity:.5,fontWeight:400,fontSize:"0.9rem",flexShrink:0},children:["(",n.length,")"]})]}),m.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0,alignItems:"center"},children:[!de&&m.jsx(Ne,{variant:"small",onClick:()=>w(t.id),disabled:A!==null,children:"+ Category"}),m.jsx("button",{onClick:()=>I(t.id),style:{background:"transparent",border:"none",cursor:"pointer",opacity:.6,fontSize:"0.9rem",padding:"0.25rem"},title:"Edit group",children:""}),m.jsx("button",{onClick:()=>oe(t.id),style:{background:"transparent",border:"none",cursor:"pointer",opacity:.6,fontSize:"0.9rem",padding:"0.25rem"},title:"Delete group",children:""}),m.jsxs("div",{style:vy,children:[m.jsx("button",{onClick:()=>N(t.id,"up"),disabled:!ve,style:{...Xo,opacity:ve?.6:.2,cursor:ve?"pointer":"default"},title:"Move group up","aria-label":"Move group up",children:""}),m.jsx("button",{onClick:()=>N(t.id,"down"),disabled:!fe,style:{...Xo,opacity:fe?.6:.2,cursor:fe?"pointer":"default"},title:"Move group down","aria-label":"Move group down",children:""})]})]})]}),de&&m.jsx("div",{style:{marginBottom:"0.5rem"},children:m.jsx(Ne,{variant:"small",onClick:()=>w(t.id),disabled:A!==null,children:"+ Category"})}),m.jsxs("div",{style:zs,children:[n.map(([Z,Ce])=>b===Z?m.jsx(Ih,{initialData:{name:Ce.name,description:Ce.description,category_group_id:Ce.category_group_id,default_monthly_amount:Ce.default_monthly_amount,default_monthly_type:Ce.default_monthly_type},onSubmit:xe=>q(Z,xe),onCancel:()=>E(null),submitLabel:"Save",categoryGroups:a,showGroupSelector:!0},Z):m.jsx(af,{isDragging:f==="category"&&d===Z,isDragOver:p===Z,onDragStart:xe=>{xe.stopPropagation(),T(xe,Z)},onDragOver:xe=>C(xe,Z,t.id),onDragLeave:R,onDragEnd:k,onDrop:xe=>X(xe,Z,t.id),onEdit:()=>E(Z),onDelete:()=>z(Z),onMoveUp:()=>$(Z,"up"),onMoveDown:()=>$(Z,"down"),canMoveUp:n.findIndex(([xe])=>xe===Z)>0,canMoveDown:n.findIndex(([xe])=>xe===Z)<n.length-1,children:m.jsx(wT,{category:Ce,catId:Z,categoryBalances:l,loadingBalances:c})},Z)),n.length===0&&!A&&m.jsx("p",{style:{opacity:.5,fontSize:"0.9rem",margin:"0.5rem 0"},children:"No categories in this group"}),f==="category"&&n.length>0&&m.jsx(xT,{groupId:t.id,isActive:p===`__end__${t.id}`,onDragOver:Z=>{Z.preventDefault(),Z.stopPropagation(),Q(`__end__${t.id}`),le(t.id)},onDragLeave:Z=>{Z.stopPropagation(),Q(null)},onDrop:Z=>{Z.stopPropagation(),X(Z,"__group_end__",t.id)}}),A===t.id&&m.jsx(Ih,{initialData:{name:"",category_group_id:t.id},onSubmit:Z=>B(Z,t.id),onCancel:()=>w(null),submitLabel:"Create",categoryGroups:a})]}),A!==t.id&&m.jsx("div",{style:{marginTop:"0.75rem",paddingTop:"0.5rem",borderTop:"1px solid color-mix(in srgb, currentColor 10%, transparent)"},children:m.jsx(Ne,{variant:"small",onClick:()=>w(t.id),disabled:A!==null,children:"+ Add Category"})})]})})]})}function wT({category:t,catId:e,categoryBalances:n,loadingBalances:i}){return m.jsxs("div",{children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"wrap"},children:[m.jsx("span",{style:by,children:t.name}),t.default_monthly_amount!==void 0&&t.default_monthly_amount>0&&m.jsxs("span",{style:{fontSize:"0.75rem",opacity:.8,background:"color-mix(in srgb, currentColor 10%, transparent)",padding:"0.15rem 0.4rem",borderRadius:"4px"},children:["Default: ",t.default_monthly_type==="percentage"?m.jsxs(m.Fragment,{children:[m.jsxs("span",{style:{color:be.success,fontWeight:500},children:[t.default_monthly_amount,"%"]})," of prev income"]}):m.jsxs(m.Fragment,{children:[m.jsx("span",{style:{color:be.success,fontWeight:500},children:Qe(t.default_monthly_amount)}),"/mo"]})]})]}),t.description&&m.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.8rem",opacity:.6,lineHeight:1.3},children:t.description}),m.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1rem",fontWeight:600,color:Sn(n[e]||0)},children:i?"...":Qe(n[e]||0)})]})}function r4({ungroupedCategories:t,categoryGroups:e,categoryBalances:n,loadingBalances:i,dragType:a,draggedId:l,dragOverId:c,dragOverGroupId:f,editingCategoryId:d,setEditingCategoryId:p,createForGroupId:_,setCreateForGroupId:b,handleCreateCategory:E,handleUpdateCategory:A,handleDeleteCategory:w,handleMoveCategory:D,handleCategoryDragStart:I,handleCategoryDragOver:B,handleDragOverGroup:q,handleDragLeaveGroup:z,handleDragLeave:$,handleDragEnd:W,handleCategoryDrop:oe,handleDropOnGroup:N,setDragOverId:T,setDragOverGroupId:C,categories:j,hasGroups:R}){const L=a==="category"&&f==="ungrouped",k=l&&a==="category"?j[l]:null,X=k&&k.category_group_id!==null;return t.length===0&&!_&&R&&a!=="category"?null:m.jsxs("div",{onDragOver:F=>q(F,"ungrouped"),onDragLeave:z,onDrop:F=>N(F,"ungrouped"),style:{background:L&&X?`color-mix(in srgb, ${be.primary} 10%, transparent)`:"color-mix(in srgb, currentColor 5%, transparent)",borderRadius:"12px",padding:"1rem",border:L&&X?`2px dashed ${be.primary}`:"2px solid transparent",transition:"all 0.15s"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem",paddingBottom:"0.5rem",borderBottom:"1px solid color-mix(in srgb, currentColor 15%, transparent)"},children:[m.jsxs("h3",{style:{...fl,margin:0,opacity:.7},children:["Uncategorized",m.jsxs("span",{style:{marginLeft:"0.5rem",opacity:.5,fontWeight:400,fontSize:"0.9rem"},children:["(",t.length,")"]})]}),m.jsx(Ne,{variant:"small",onClick:()=>b("ungrouped"),disabled:_!==null,children:"+ Category"})]}),m.jsxs("div",{style:zs,children:[t.map(([F,U])=>d===F?m.jsx(Ih,{initialData:{name:U.name,description:U.description,category_group_id:U.category_group_id,default_monthly_amount:U.default_monthly_amount,default_monthly_type:U.default_monthly_type},onSubmit:H=>A(F,H),onCancel:()=>p(null),submitLabel:"Save",categoryGroups:e,showGroupSelector:!0},F):m.jsx(af,{isDragging:a==="category"&&l===F,isDragOver:c===F,onDragStart:H=>I(H,F),onDragOver:H=>B(H,F,"ungrouped"),onDragLeave:$,onDragEnd:W,onDrop:H=>oe(H,F,"ungrouped"),onEdit:()=>p(F),onDelete:()=>w(F),onMoveUp:()=>D(F,"up"),onMoveDown:()=>D(F,"down"),canMoveUp:t.findIndex(([H])=>H===F)>0,canMoveDown:t.findIndex(([H])=>H===F)<t.length-1,children:m.jsx(wT,{category:U,catId:F,categoryBalances:n,loadingBalances:i})},F)),t.length===0&&a==="category"&&m.jsx("p",{style:{opacity:.5,fontSize:"0.9rem",margin:"0.5rem 0",textAlign:"center"},children:"Drop here to uncategorize"}),a==="category"&&t.length>0&&m.jsx(xT,{groupId:"ungrouped",isActive:c==="__end__ungrouped",onDragOver:F=>{F.preventDefault(),F.stopPropagation(),T("__end__ungrouped"),C("ungrouped")},onDragLeave:F=>{F.stopPropagation(),T(null)},onDrop:F=>{F.stopPropagation(),oe(F,"__group_end__","ungrouped")}}),_==="ungrouped"&&m.jsx(Ih,{initialData:{name:"",category_group_id:null},onSubmit:F=>E(F,"ungrouped"),onCancel:()=>b(null),submitLabel:"Create",categoryGroups:e})]}),_!=="ungrouped"&&m.jsx("div",{style:{marginTop:"0.75rem",paddingTop:"0.5rem",borderTop:"1px solid color-mix(in srgb, currentColor 10%, transparent)"},children:m.jsx(Ne,{variant:"small",onClick:()=>b("ungrouped"),disabled:_!==null,children:"+ Add Category"})})]})}function i4(){const{currentBudget:t,categories:e,categoryGroups:n,categoriesByGroup:i,sortedGroups:a,categoryBalances:l,loadingBalances:c,error:f,setError:d,getOnBudgetTotal:p,handleCreateCategory:_,handleUpdateCategory:b,handleDeleteCategory:E,handleMoveCategory:A,handleCreateGroup:w,handleUpdateGroup:D,handleDeleteGroup:I,handleMoveGroup:B,dragType:q,draggedId:z,dragOverId:$,dragOverGroupId:W,setDragOverId:oe,setDragOverGroupId:N,handleCategoryDragStart:T,handleCategoryDragOver:C,handleDragOverGroup:j,handleDragLeave:R,handleDragLeaveGroup:L,handleDragEnd:k,handleCategoryDrop:X,handleDropOnGroup:F,handleGroupDragStart:U,handleGroupDrop:H}=iN(),Q=Gs(),[le,de]=M.useState(null),[V,J]=M.useState(null),[ye,ie]=M.useState(null),[ce,Ee]=M.useState(!1),[De,ve]=M.useState(!1),[fe,Z]=M.useState(!1),Ce=null;return t?m.jsxs("div",{children:[m.jsx("h2",{style:{marginTop:0},children:"Categories & Groups"}),m.jsxs("p",{style:sf,children:["Organize your spending categories into groups.",m.jsx("br",{}),m.jsx("span",{style:{fontSize:"0.9rem"},children:Q?"Use  buttons to reorder items, or drag to move between groups.":"Drag categories between groups, or use  buttons to reorder."})]}),f&&m.jsx(ml,{message:f,onDismiss:()=>d(null)}),Ce,m.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"1rem",gap:"0.5rem"},children:[m.jsx("button",{onClick:async()=>{ve(!0);try{console.warn("[Categories] checkCategoryBalanceMismatch not yet implemented")}finally{ve(!1)}},disabled:De,style:{background:"color-mix(in srgb, currentColor 10%, transparent)",border:"none",borderRadius:"6px",padding:"0.5rem 0.75rem",fontSize:"0.85rem",cursor:De?"not-allowed":"pointer",opacity:De?.6:1},title:"Check if category balances match allocation/expense history",children:De?" Checking...":" Check Balances"}),m.jsx("button",{onClick:async()=>{Z(!0);try{console.warn("[Categories] recalculateAndSaveCategoryBalances not yet implemented")}catch(xe){d(xe instanceof Error?xe.message:"Failed to reconcile")}finally{Z(!1)}},disabled:fe,style:{background:"color-mix(in srgb, currentColor 10%, transparent)",border:"none",borderRadius:"6px",padding:"0.5rem 0.75rem",fontSize:"0.85rem",cursor:fe?"not-allowed":"pointer",opacity:fe?.6:1},title:"Recalculate all category balances from allocation/expense history",children:fe?" Reconciling...":" Reconcile All"})]}),m.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem",flexWrap:"wrap"},children:[m.jsxs(Qn,{style:{flex:1,minWidth:"120px"},children:[m.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.7},children:"Categories"}),m.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.4rem",fontWeight:600},children:Object.keys(e).length})]}),m.jsxs(Qn,{style:{flex:1,minWidth:"120px"},children:[m.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.7},children:"Groups"}),m.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.4rem",fontWeight:600},children:n.length})]}),m.jsxs(Qn,{style:{flex:1,minWidth:"120px"},children:[m.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.7},children:"On-Budget"}),m.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.4rem",fontWeight:600,color:Sn(p())},children:Qe(p())})]}),m.jsxs(Qn,{style:{flex:1,minWidth:"120px"},children:[m.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.7},children:"Allocated"}),m.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.4rem",fontWeight:600,color:be.primary},children:c?"...":Qe(Object.values(l).reduce((xe,He)=>xe+He,0))})]}),m.jsxs(Qn,{style:{flex:1,minWidth:"120px"},children:[m.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.7},children:"Available"}),m.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"1.4rem",fontWeight:600,color:Sn(p()-Object.values(l).reduce((xe,He)=>xe+He,0))},children:c?"...":Qe(p()-Object.values(l).reduce((xe,He)=>xe+He,0))})]})]}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",marginBottom:"1.5rem"},children:[Object.keys(e).length===0&&n.length===0&&m.jsx("p",{style:{opacity:.7},children:"No categories yet. Create a group first, then add categories!"}),a.map((xe,He)=>{const qe=(i[xe.id]||[]).sort((tt,Ue)=>tt[1].sort_order-Ue[1].sort_order);return m.jsx(n4,{group:xe,groupIndex:He,groupCategories:qe,sortedGroups:a,categoryGroups:n,categoryBalances:l,loadingBalances:c,dragType:q,draggedId:z,dragOverId:$,dragOverGroupId:W,editingCategoryId:le,setEditingCategoryId:de,createForGroupId:V,setCreateForGroupId:J,editingGroupId:ye,setEditingGroupId:ie,handleCreateCategory:_,handleUpdateCategory:b,handleDeleteCategory:E,handleMoveCategory:A,handleUpdateGroup:D,handleDeleteGroup:I,handleMoveGroup:B,handleCategoryDragStart:T,handleCategoryDragOver:C,handleDragOverGroup:j,handleDragLeave:R,handleDragLeaveGroup:L,handleDragEnd:k,handleCategoryDrop:X,handleDropOnGroup:F,handleGroupDragStart:U,handleGroupDrop:H,setDragOverId:oe,setDragOverGroupId:N,isMobile:Q,categories:e},xe.id)}),q==="group"&&a.length>0&&m.jsx(xy,{isActive:$==="__end__",onDragOver:xe=>{xe.preventDefault(),oe("__end__")},onDragLeave:R,onDrop:xe=>H(xe,"__end__"),label:"Move group to end"}),m.jsx(r4,{ungroupedCategories:(i.ungrouped||[]).sort((xe,He)=>xe[1].sort_order-He[1].sort_order),categoryGroups:n,categoryBalances:l,loadingBalances:c,dragType:q,draggedId:z,dragOverId:$,dragOverGroupId:W,editingCategoryId:le,setEditingCategoryId:de,createForGroupId:V,setCreateForGroupId:J,handleCreateCategory:_,handleUpdateCategory:b,handleDeleteCategory:E,handleMoveCategory:A,handleCategoryDragStart:T,handleCategoryDragOver:C,handleDragOverGroup:j,handleDragLeaveGroup:L,handleDragLeave:R,handleDragEnd:k,handleCategoryDrop:X,handleDropOnGroup:F,setDragOverId:oe,setDragOverGroupId:N,categories:e,hasGroups:n.length>0})]}),ce?m.jsx(ST,{onSubmit:xe=>{w(xe),Ee(!1)},onCancel:()=>Ee(!1),submitLabel:"Create Group"}):m.jsx(Ne,{variant:"primary-large",onClick:()=>Ee(!0),children:"+ Add Category Group"})]}):m.jsx("p",{children:"No budget found. Please log in."})}function s4(){const{selectedBudgetId:t,currentUserId:e,isAdmin:n,isTest:i}=Cn(),{budget:a,accounts:l,accountGroups:c,categories:f,categoryGroups:d,isOwner:p,isLoading:_}=Yn(t,e),b=fr(),E=b.pathname==="/budget/admin",A=M.useMemo(()=>{const N=b.pathname;return N.includes("/admin/accounts")?"accounts":N.includes("/admin/categories")?"categories":N.includes("/admin/users")?"users":N.includes("/admin/migration")?"migration":N.includes("/admin/feedback")?"feedback":N.includes("/admin/tests")?"tests":(N.includes("/admin/my-budgets"),"my-budgets")},[b.pathname]),w=A==="users",D=A==="migration",I=A==="feedback",B=A==="tests";M.useEffect(()=>{E||localStorage.setItem(YE,A)},[A,E]);function q(){const N=localStorage.getItem(YE);return!(N&&tN.includes(N))||N==="users"&&!p||(N==="migration"||N==="feedback")&&!n||N==="tests"&&!i?"my-budgets":N}const z=M.useMemo(()=>[{id:"my-budgets",label:"My Budgets",icon:""},{id:"accounts",label:"Accounts",icon:""},{id:"categories",label:"Categories",icon:""},{id:"users",label:"Users",icon:"",hidden:!p},{id:"migration",label:"Migration",icon:"",hidden:!n},{id:"feedback",label:"Feedback",icon:"",hidden:!n},{id:"tests",label:"Tests",icon:"",hidden:!i}],[p,n,i]);if(_)return m.jsx("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:m.jsx("p",{children:"Loading..."})});const $=w,W=D||I,oe=B;return!p&&$||!n&&W||!i&&oe?m.jsxs("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:[m.jsx("nav",{style:{marginBottom:"1.5rem"},children:m.jsx(Dt,{to:"/budget",children:" Back to Budget"})}),m.jsx("h1",{children:"Access Denied"}),m.jsx("p",{style:{opacity:.7},children:oe?"Only test users can access this section.":W?"Only administrators can access this section.":"Only the budget owner can access this section."}),m.jsx("p",{style:{marginTop:"1rem"},children:m.jsx(Dt,{to:"/budget/admin/my-budgets",style:{color:"#646cff"},children:"Go to My Budgets "})})]}):m.jsxs("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:[m.jsx("nav",{style:{marginBottom:"1.5rem"},children:m.jsx(Dt,{to:"/budget",children:" Back to Budget"})}),m.jsx("h1",{children:p?"Admin Settings":"Budget Settings"}),m.jsx("p",{style:{opacity:.7,marginBottom:"0.5rem"},children:p?"Manage your budget settings, users, and data migration.":"Manage your budgets, accounts, and categories."}),a&&m.jsxs("div",{style:{opacity:.6,marginBottom:"1.5rem",fontSize:"0.9rem",display:"flex",flexDirection:"column",gap:"0.25rem"},children:[m.jsxs("p",{style:{margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[m.jsx("span",{children:""}),m.jsxs("span",{children:["Budget Name: ",m.jsx("strong",{style:{opacity:1},children:a.name})]})]}),m.jsxs("p",{style:{margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[m.jsx("span",{children:""}),m.jsxs("span",{children:["Budget ID: ",m.jsx("code",{style:{opacity:1,background:"color-mix(in srgb, currentColor 10%, transparent)",padding:"0.1rem 0.4rem",borderRadius:"4px",fontSize:"0.85rem"},children:a.id})]})]}),m.jsxs("p",{style:{margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[m.jsx("span",{children:""}),m.jsxs("span",{children:["Budget Owner: ",m.jsx("strong",{style:{opacity:1},children:a.owner_email||a.owner_id})]})]}),n&&m.jsx("button",{onClick:()=>{const N={...a,accounts:l,account_groups:c,categories:f,category_groups:d,_meta:{downloaded_at:new Date().toISOString()}},T=new Blob([JSON.stringify(N,null,2)],{type:"application/json"}),C=URL.createObjectURL(T),j=document.createElement("a");j.href=C,j.download=`budget_${a.id}.json`,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(C)},style:{marginTop:"0.5rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"color-mix(in srgb, currentColor 10%, transparent)",border:"1px solid color-mix(in srgb, currentColor 20%, transparent)",borderRadius:"6px",padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.85rem",color:"inherit",opacity:1,transition:"background 0.15s",alignSelf:"flex-start"},title:"Download budget document as JSON (for debugging)",children:" Download Budget JSON"})]}),m.jsx("div",{style:{borderBottom:"1px solid color-mix(in srgb, currentColor 15%, transparent)",paddingBottom:"0.5rem",marginBottom:"0.5rem"},children:m.jsx(_T,{mode:"link",linkPrefix:"/budget/admin",tabs:z,activeTab:A})}),E?m.jsx(vS,{to:`/budget/admin/${q()}`,replace:!0}):m.jsx(vg,{})]})}function a4(){const{selectedBudgetId:t,currentUserId:e}=Cn(),{budget:n,budgetUserIds:i,acceptedUserIds:a,inviteUser:l,revokeUser:c}=Yn(t,e),[f,d]=M.useState(""),[p,_]=M.useState(!1),[b,E]=M.useState(null),[A,w]=M.useState(null);if(!n)return m.jsx("p",{children:"No budget found."});async function D(z){if(z.preventDefault(),!(!f.trim()||!n)){_(!0),E(null),w(null);try{await l(f.trim()),d(""),w("Invite sent! The user can now accept the invitation from their account.")}catch($){E($ instanceof Error?$.message:"Failed to invite user")}finally{_(!1)}}}async function I(z){if(!n)return;if(z===n.owner_id){E("Cannot revoke the budget owner");return}if(z===e){E("Cannot revoke yourself from the budget");return}const $=a.includes(z);if(confirm($?"Are you sure you want to revoke this user's access? They will lose access to this budget.":"Are you sure you want to cancel this invitation?")){E(null),w(null);try{await c(z),w($?"User access revoked.":"Invitation cancelled.")}catch(oe){E(oe instanceof Error?oe.message:"Failed to revoke user")}}}const B=i.filter(z=>a.includes(z)),q=i.filter(z=>!a.includes(z));return m.jsxs("div",{children:[m.jsx("h2",{style:{marginTop:0},children:"Budget Users"}),m.jsx("p",{style:{opacity:.7,marginBottom:"1.5rem"},children:"Invite users to access this budget. They must accept the invitation before they can access it."}),b&&m.jsxs("div",{style:{background:"rgba(220, 38, 38, 0.1)",border:"1px solid rgba(220, 38, 38, 0.3)",color:"#f87171",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsx("span",{children:b}),m.jsx("button",{onClick:()=>E(null),style:{background:"transparent",border:"none",color:"#f87171",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.25rem",lineHeight:1},children:""})]}),A&&m.jsxs("div",{style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#4ade80",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsx("span",{children:A}),m.jsx("button",{onClick:()=>w(null),style:{background:"transparent",border:"none",color:"#4ade80",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.25rem",lineHeight:1},children:""})]}),m.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.25rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[m.jsxs("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem"},children:["Active Users (",B.length,")"]}),B.length===0?m.jsx("p",{style:{opacity:.6,margin:0},children:"No users have accepted invitations yet."}):m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:B.map(z=>{const $=z===n.owner_id,W=z===e;return m.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 8%, transparent)",padding:"0.75rem 1rem",borderRadius:"6px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"},children:[m.jsx("div",{style:{flex:1,minWidth:0},children:m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[m.jsx("code",{style:{fontSize:"0.85rem",background:"color-mix(in srgb, currentColor 10%, transparent)",padding:"0.2rem 0.5rem",borderRadius:"4px",wordBreak:"break-all"},children:z}),$&&m.jsx("span",{style:{background:"color-mix(in srgb, #646cff 20%, transparent)",color:"#a5b4fc",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600},children:"Owner"}),W&&m.jsx("span",{style:{background:"color-mix(in srgb, #22c55e 20%, transparent)",color:"#4ade80",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600},children:"You"})]})}),!$&&!W&&m.jsx("button",{onClick:()=>I(z),style:{background:"transparent",border:"1px solid rgba(220, 38, 38, 0.4)",color:"#f87171",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",whiteSpace:"nowrap"},children:"Revoke Access"})]},z)})})]}),q.length>0&&m.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.25rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[m.jsxs("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem"},children:["Pending Invitations (",q.length,")"]}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:q.map(z=>m.jsxs("div",{style:{background:"color-mix(in srgb, #f59e0b 10%, transparent)",border:"1px solid color-mix(in srgb, #f59e0b 30%, transparent)",padding:"0.75rem 1rem",borderRadius:"6px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"},children:[m.jsx("div",{style:{flex:1,minWidth:0},children:m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[m.jsx("code",{style:{fontSize:"0.85rem",background:"color-mix(in srgb, currentColor 10%, transparent)",padding:"0.2rem 0.5rem",borderRadius:"4px",wordBreak:"break-all"},children:z}),m.jsx("span",{style:{background:"color-mix(in srgb, #f59e0b 20%, transparent)",color:"#fbbf24",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600},children:"Pending"})]})}),m.jsx("button",{onClick:()=>I(z),style:{background:"transparent",border:"1px solid color-mix(in srgb, currentColor 30%, transparent)",color:"inherit",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",whiteSpace:"nowrap",opacity:.8},children:"Cancel Invite"})]},z))})]}),m.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.25rem",borderRadius:"8px"},children:[m.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem"},children:"Invite User"}),m.jsxs("form",{onSubmit:D,style:{display:"flex",gap:"0.75rem"},children:[m.jsx("input",{type:"text",value:f,onChange:z=>d(z.target.value),placeholder:"Enter Firebase User ID",style:{flex:1,padding:"0.6rem 0.8rem",borderRadius:"6px",border:"1px solid color-mix(in srgb, currentColor 20%, transparent)",background:"color-mix(in srgb, currentColor 5%, transparent)",fontSize:"0.95rem",color:"inherit"}}),m.jsx("button",{type:"submit",disabled:p||!f.trim(),style:{background:"#646cff",color:"white",border:"none",padding:"0.6rem 1.25rem",borderRadius:"6px",cursor:p||!f.trim()?"not-allowed":"pointer",fontWeight:500,opacity:p||!f.trim()?.7:1,whiteSpace:"nowrap"},children:p?"Inviting...":"Send Invite"})]}),m.jsx("p",{style:{margin:"1rem 0 0 0",fontSize:"0.85rem",opacity:.6},children:" The invited user will need to accept the invitation from their Account page using this budget's ID:"}),m.jsx("code",{style:{display:"block",marginTop:"0.5rem",padding:"0.5rem 0.75rem",background:"color-mix(in srgb, currentColor 10%, transparent)",borderRadius:"6px",fontSize:"0.85rem",wordBreak:"break-all"},children:n.id})]})]})}function rS({budget:t,isCurrent:e,isAccepting:n,isSwitching:i,isEditing:a,editName:l,isRenaming:c,onAccept:f,onSwitch:d,onStartEdit:p,onCancelEdit:_,onEditNameChange:b,onSaveEdit:E}){const A=e&&t.isOwner;return m.jsx("div",{style:{background:e?"color-mix(in srgb, #646cff 15%, transparent)":"color-mix(in srgb, currentColor 8%, transparent)",border:e?"2px solid color-mix(in srgb, #646cff 50%, transparent)":"1px solid transparent",padding:"1rem",borderRadius:"8px"},children:a?m.jsxs("form",{onSubmit:E,children:[m.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:m.jsx("input",{type:"text",value:l,onChange:w=>b(w.target.value),placeholder:"Budget name",autoFocus:!0,style:{flex:1,padding:"0.5rem 0.75rem",borderRadius:"6px",border:"1px solid color-mix(in srgb, currentColor 30%, transparent)",background:"color-mix(in srgb, currentColor 5%, transparent)",fontSize:"1rem",fontWeight:600,color:"inherit"}})}),m.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[m.jsx("button",{type:"submit",disabled:c||!l.trim(),style:{background:"#22c55e",color:"white",border:"none",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:c||!l.trim()?"not-allowed":"pointer",fontWeight:500,opacity:c||!l.trim()?.7:1,fontSize:"0.8rem"},children:c?"Saving...":"Save"}),m.jsx("button",{type:"button",onClick:_,disabled:c,style:{background:"transparent",color:"inherit",border:"1px solid color-mix(in srgb, currentColor 30%, transparent)",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:c?"not-allowed":"pointer",fontWeight:500,opacity:c?.7:.8,fontSize:"0.8rem"},children:"Cancel"})]})]}):m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[m.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap",marginBottom:"0.25rem"},children:[m.jsx("span",{style:{fontWeight:600},children:t.name}),t.isOwner&&m.jsx("span",{style:{background:"color-mix(in srgb, #646cff 20%, transparent)",color:"#a5b4fc",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.65rem",textTransform:"uppercase",fontWeight:600},children:"Owner"}),e&&m.jsx("span",{style:{background:"color-mix(in srgb, #22c55e 20%, transparent)",color:"#4ade80",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.65rem",textTransform:"uppercase",fontWeight:600},children:"Active"}),t.isPending&&m.jsx("span",{style:{background:"color-mix(in srgb, #f59e0b 20%, transparent)",color:"#fbbf24",padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.65rem",textTransform:"uppercase",fontWeight:600},children:"Pending"}),A&&m.jsx("button",{onClick:p,style:{background:"transparent",border:"none",padding:"0.15rem",cursor:"pointer",opacity:.5,fontSize:"0.8rem",lineHeight:1},title:"Rename budget",children:""})]}),m.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.6},children:t.ownerEmail?`Owner: ${t.ownerEmail}`:`ID: ${t.id}`})]}),m.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:t.isPending?m.jsx("button",{onClick:f,disabled:n,style:{background:"#22c55e",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"6px",cursor:n?"not-allowed":"pointer",fontWeight:500,opacity:n?.7:1,fontSize:"0.85rem"},children:n?"Accepting...":"Accept"}):e?null:m.jsx("button",{onClick:d,disabled:i,style:{background:"#646cff",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"6px",cursor:i?"not-allowed":"pointer",fontWeight:500,opacity:i?.7:1,fontSize:"0.85rem"},children:i?"Switching...":"Switch"})})]})})}const dg={critical_bug:{label:"Critical Bug",color:"#ff4757",bgColor:"rgba(255, 71, 87, 0.15)"},bug:{label:"Bug",color:"#ffa502",bgColor:"rgba(255, 165, 2, 0.15)"},new_feature:{label:"New Feature",color:"#2ed573",bgColor:"rgba(46, 213, 115, 0.15)"},core_feature:{label:"Core Feature",color:"#1e90ff",bgColor:"rgba(30, 144, 255, 0.15)"},qol:{label:"QOL",color:"#a55eea",bgColor:"rgba(165, 94, 234, 0.15)"}};function TT({type:t,onClick:e}){const n=t==="feature"?"new_feature":t,i=n&&n in dg?n:"bug",a=dg[i];return m.jsx("button",{type:"button",onClick:e,style:{padding:"0.25rem 0.5rem",borderRadius:"0.25rem",background:a.bgColor,color:a.color,fontSize:"0.7rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.025em",flexShrink:0,border:"none",cursor:"pointer",transition:"opacity 0.15s, transform 0.15s"},onMouseEnter:l=>{l.currentTarget.style.opacity="0.8",l.currentTarget.style.transform="scale(1.05)"},onMouseLeave:l=>{l.currentTarget.style.opacity="1",l.currentTarget.style.transform="scale(1)"},title:"Click to change type",children:a.label})}function o4({item:t,isDragging:e,isDragOver:n,onDragStart:i,onDragOver:a,onDragLeave:l,onDragEnd:c,onDrop:f,onToggleDone:d,onTypeClick:p}){return m.jsxs("div",{onDragOver:_=>{_.stopPropagation(),a(_)},onDragLeave:_=>{_.stopPropagation(),l()},onDrop:_=>{_.stopPropagation(),f(_)},style:{position:"relative"},children:[m.jsx("div",{style:{...gT,opacity:n?1:0,boxShadow:n?"0 0 8px rgba(100, 108, 255, 0.6)":"none"}}),m.jsxs("div",{draggable:!0,onDragStart:i,onDragEnd:c,style:{...rc,cursor:"grab",opacity:e?.5:1,flexDirection:"column",alignItems:"stretch",gap:"0.5rem"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[m.jsx("span",{style:{...pT},children:""}),m.jsx("input",{type:"checkbox",checked:t.is_done,onChange:d,style:{width:"1.25rem",height:"1.25rem",cursor:"pointer",accentColor:be.primary,flexShrink:0}}),m.jsx(TT,{type:t.feedback_type,onClick:p})]}),m.jsxs("div",{style:{marginLeft:"3.25rem"},children:[m.jsx("p",{style:{margin:0,lineHeight:1.5},children:t.text}),m.jsxs("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.8rem",opacity:.6},children:[t.user_email,"  ",cg(t.created_at)]})]})]})]})}function l4({item:t,onToggleDone:e,onTypeClick:n}){return m.jsxs("div",{style:{...rc,opacity:.6,flexDirection:"column",alignItems:"stretch",gap:"0.5rem"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[m.jsx("input",{type:"checkbox",checked:t.is_done,onChange:e,style:{width:"1.25rem",height:"1.25rem",cursor:"pointer",accentColor:be.primary,flexShrink:0}}),m.jsx(TT,{type:t.feedback_type,onClick:n})]}),m.jsxs("div",{style:{marginLeft:"2rem"},children:[m.jsx("p",{style:{margin:0,lineHeight:1.5,textDecoration:"line-through"},children:t.text}),m.jsxs("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.8rem",opacity:.8},children:[t.user_email,"  Created: ",cg(t.created_at)]}),t.completed_at&&m.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.8rem",color:be.success},children:[" Completed: ",cg(t.completed_at)]})]})]})}function hg({noMargin:t}={}){return m.jsx("span",{style:{display:"inline-block",width:"14px",height:"14px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTopColor:"white",borderRadius:"50%",animation:"spin 0.8s linear infinite",marginRight:t?0:"0.5rem",verticalAlign:"middle"}})}function u4({title:t,description:e,isComplete:n,isMigrating:i,needsMigration:a,totalBudgetsToMigrate:l,budgetsToMigrateCategories:c,budgetsToMigrateAccounts:f,onRunMigration:d,onRefresh:p,isRefreshing:_,disabled:b,isUnknown:E,children:A}){const w=()=>E?{background:"rgba(100, 100, 100, 0.2)",color:"#9ca3af"}:n?{background:"rgba(34, 197, 94, 0.2)",color:"#4ade80"}:{background:"rgba(100, 108, 255, 0.2)",color:"#a5b4fc"},D=()=>E?"Unknown":n?"Complete":"Required",I=w();return m.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.5rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[m.jsxs("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[m.jsx("span",{style:{background:I.background,color:I.color,padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600},children:D()}),t]}),p&&m.jsxs("button",{onClick:p,disabled:_||i,title:"Refresh status",style:{background:"transparent",border:"1px solid color-mix(in srgb, currentColor 30%, transparent)",color:"inherit",padding:"0.35rem 0.6rem",borderRadius:"6px",cursor:_||i?"not-allowed":"pointer",opacity:_||i?.5:.7,fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"0.3rem",minWidth:"85px",minHeight:"28px"},children:[m.jsx("span",{style:{width:"16px",height:"16px",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0},children:_?m.jsx(hg,{noMargin:!0}):""}),"Refresh"]})]}),m.jsx("p",{style:{opacity:.7,marginBottom:"1rem"},children:e}),i?m.jsxs("div",{style:{background:"rgba(100, 108, 255, 0.1)",border:"1px solid rgba(100, 108, 255, 0.3)",color:"#a5b4fc",padding:"0.75rem 1rem",borderRadius:"8px",display:"flex",alignItems:"center"},children:[m.jsx(hg,{})," Running migration across all budgets..."]}):E?m.jsx("div",{style:{background:"rgba(100, 100, 100, 0.1)",border:"1px solid rgba(100, 100, 100, 0.3)",color:"#9ca3af",padding:"0.75rem 1rem",borderRadius:"8px"},children:" Status unknown  click Refresh to check migration status"}):n?m.jsx("div",{style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#4ade80",padding:"0.75rem 1rem",borderRadius:"8px"},children:" All budgets are using the new map structure"}):a?m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",color:"#fbbf24",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1rem"},children:[m.jsxs("div",{style:{marginBottom:"0.5rem"},children:[" Found ",l," budget(s) needing migration:"]}),m.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.9rem"},children:[c>0&&m.jsxs("li",{children:[c," with categories to migrate"]}),f>0&&m.jsxs("li",{children:[f," with accounts to migrate"]})]})]}),m.jsx("button",{onClick:d,disabled:b,style:{background:"#646cff",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:b?"not-allowed":"pointer",fontWeight:500,opacity:b?.7:1},children:"Migrate All Budgets"})]}):null,A]})}function c4({results:t}){return m.jsxs("div",{style:{marginTop:"1rem"},children:[m.jsx("h4",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem"},children:"Migration Results:"}),m.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",background:"color-mix(in srgb, currentColor 3%, transparent)",borderRadius:"8px",padding:"0.75rem"},children:t.map((e,n)=>m.jsx(d4,{result:e,isLast:n===t.length-1},n))})]})}function d4({result:t,isLast:e}){const n=t.error&&t.error!=="Already migrated",i=t.error==="Already migrated";return m.jsxs("div",{style:{padding:"0.5rem",marginBottom:e?0:"0.5rem",borderRadius:"4px",background:n?"rgba(220, 38, 38, 0.1)":i?"rgba(100, 100, 100, 0.1)":"rgba(34, 197, 94, 0.1)",border:n?"1px solid rgba(220, 38, 38, 0.3)":i?"1px solid rgba(100, 100, 100, 0.3)":"1px solid rgba(34, 197, 94, 0.3)"},children:[m.jsxs("div",{style:{fontWeight:500},children:[n?"":i?"":""," ",t.budgetName]}),n?m.jsxs("div",{style:{fontSize:"0.85rem",opacity:.8,color:"#f87171"},children:["Error: ",t.error]}):i?m.jsx("div",{style:{fontSize:"0.85rem",opacity:.6},children:"Already using map structure"}):m.jsxs("div",{style:{fontSize:"0.85rem",opacity:.7},children:[t.categoriesMigrated>0&&`Migrated ${t.categoriesMigrated} categories`,t.categoriesMigrated>0&&(t.accountsMigrated>0||t.accountGroupsMigrated>0)&&", ",t.accountsMigrated>0&&`${t.accountsMigrated} accounts`,t.accountsMigrated>0&&t.accountGroupsMigrated>0&&", ",t.accountGroupsMigrated>0&&`${t.accountGroupsMigrated} account groups`,t.balancesCalculated&&" with calculated balances"]})]})}function h4(){const e=Va().get_current_firebase_user(),n=wj(),[i,a]=M.useState(!1),[l,c]=M.useState(null),f=n.data!==void 0,d=n.isStale,p=n.data??{categoriesArrayMigrationNeeded:!1,accountsArrayMigrationNeeded:!1,budgetsToMigrateCategories:0,budgetsToMigrateAccounts:0,totalBudgetsChecked:0},_=n.isLoading,b=n.isFetching&&!n.isLoading,E=n.dataUpdatedAt?new Date(n.dataUpdatedAt).toLocaleString():null;async function A(z,$){const W={};$.forEach(oe=>{W[oe]=0});try{const oe=await Yo("months",[{field:"budget_id",op:"==",value:z}]);for(const N of oe.docs){const T=N.data;if(T.allocations_finalized&&T.allocations)for(const C of T.allocations)W[C.category_id]=(W[C.category_id]||0)+C.amount}}catch(oe){console.error("Error calculating balances for budget:",z,oe)}return W}async function w(){if(!e)return;a(!0),c(null);const z=[];try{const $=await Yo("budgets",[]);if($.docs.length===0){c([{budgetId:"",budgetName:"No budgets found",categoriesMigrated:0,accountsMigrated:0,accountGroupsMigrated:0,balancesCalculated:!1,error:"No budgets in system"}]),a(!1);return}for(const W of $.docs){const oe=await D(W.id);z.push(oe)}c(z),vt.invalidateQueries({queryKey:["budget"]}),vt.invalidateQueries({queryKey:["month"]}),vt.invalidateQueries({queryKey:["adminMigration"]}),n.refetch()}catch($){c([{budgetId:"",budgetName:"Migration Error",categoriesMigrated:0,accountsMigrated:0,accountGroupsMigrated:0,balancesCalculated:!1,error:$ instanceof Error?$.message:"Migration failed"}])}finally{a(!1)}}async function D(z){try{const{exists:$,data:W}=await Ge("budgets",z);if(!$||!W)return{budgetId:z,budgetName:"Unknown",categoriesMigrated:0,accountsMigrated:0,accountGroupsMigrated:0,balancesCalculated:!1,error:"Budget not found"};const oe=W.name||"Unnamed Budget",N=Array.isArray(W.categories),T=Array.isArray(W.accounts),C=Array.isArray(W.account_groups);if(!N&&!T&&!C)return{budgetId:z,budgetName:oe,categoriesMigrated:0,accountsMigrated:0,accountGroupsMigrated:0,balancesCalculated:!1,error:"Already migrated"};let j=W.categories,R=W.accounts,L=W.account_groups,k=0,X=0,F=0,U=!1;if(N){const le=W.categories,de={},V=[];for(const ie of le){const ce=ie.id||`category_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;V.push(ce),de[ce]={name:ie.name,description:ie.description,category_group_id:ie.category_group_id??null,sort_order:ie.sort_order??0,default_monthly_amount:ie.default_monthly_amount,default_monthly_type:ie.default_monthly_type,balance:0}}const J=await A(z,V);for(const ie of V)de[ie]&&(de[ie].balance=J[ie]||0);const ye={};Object.entries(de).forEach(([ie,ce])=>{ye[ie]={name:ce.name,category_group_id:ce.category_group_id??null,sort_order:ce.sort_order,balance:ce.balance},ce.description&&(ye[ie].description=ce.description),ce.default_monthly_amount!==void 0&&(ye[ie].default_monthly_amount=ce.default_monthly_amount),ce.default_monthly_type!==void 0&&(ye[ie].default_monthly_type=ce.default_monthly_type)}),j=ye,k=le.length,U=!0}if(T){const le=W.accounts,de={};for(const V of le){const J=V.id||`account_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;de[J]={nickname:V.nickname,balance:V.balance??0,account_group_id:V.account_group_id??null,sort_order:V.sort_order??0},V.is_income_account!==void 0&&(de[J].is_income_account=V.is_income_account),V.is_income_default!==void 0&&(de[J].is_income_default=V.is_income_default),V.is_outgo_account!==void 0&&(de[J].is_outgo_account=V.is_outgo_account),V.is_outgo_default!==void 0&&(de[J].is_outgo_default=V.is_outgo_default),V.on_budget!==void 0&&(de[J].on_budget=V.on_budget),V.is_active!==void 0&&(de[J].is_active=V.is_active)}R=de,X=le.length}if(C){const le=W.account_groups,de={};for(const V of le){const J=V.id||`group_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;de[J]={name:V.name,sort_order:V.sort_order??0},V.expected_balance!==void 0&&(de[J].expected_balance=V.expected_balance),V.on_budget!==void 0&&(de[J].on_budget=V.on_budget),V.is_active!==void 0&&(de[J].is_active=V.is_active)}if(T&&R){const V=R,J=W.account_groups,ye={};J.forEach((ie,ce)=>{const Ee=ie.id||String(ce),De=Object.keys(de)[ce];De&&(ye[Ee]=De)}),Object.entries(V).forEach(([ie,ce])=>{ce.account_group_id&&ye[ce.account_group_id]&&(V[ie].account_group_id=ye[ce.account_group_id])})}L=de,F=le.length}const{category_balances:H,...Q}=W;return await _t("budgets",z,{...Q,categories:j,accounts:R,account_groups:L}),{budgetId:z,budgetName:oe,categoriesMigrated:k,accountsMigrated:X,accountGroupsMigrated:F,balancesCalculated:U}}catch($){return{budgetId:z,budgetName:"Error",categoriesMigrated:0,accountsMigrated:0,accountGroupsMigrated:0,balancesCalculated:!1,error:$ instanceof Error?$.message:"Migration failed"}}}const I=p.categoriesArrayMigrationNeeded||p.accountsArrayMigrationNeeded,B=Math.max(p.budgetsToMigrateCategories,p.budgetsToMigrateAccounts),q=()=>{vt.invalidateQueries({queryKey:["adminMigration"]}),n.refetch()};return _?m.jsxs("div",{children:[m.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),m.jsx("h2",{style:{marginTop:0},children:"Data Migrations"}),m.jsx("p",{style:{opacity:.7},children:"Checking migration status..."})]}):m.jsxs("div",{children:[m.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[m.jsx("h2",{style:{margin:0},children:"Data Migrations"}),m.jsxs("button",{onClick:q,disabled:b||i,style:{background:"#646cff",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"6px",cursor:b||i?"not-allowed":"pointer",fontWeight:500,opacity:b||i?.7:1,display:"flex",alignItems:"center",gap:"0.4rem",minWidth:"130px",minHeight:"36px"},children:[m.jsx("span",{style:{width:"18px",height:"18px",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0},children:b?m.jsx(hg,{noMargin:!0}):""}),"Refresh All"]})]}),m.jsxs("p",{style:{opacity:.7,marginBottom:"1.5rem"},children:["Run migrations to update your budget data structure. Status is cached and won't auto-refresh.",m.jsx("span",{style:{display:"block",fontSize:"0.85rem",marginTop:"0.25rem"},children:f?d?m.jsxs("span",{style:{color:"#fbbf24"},children:[" Status may be stale  Last checked: ",E]}):m.jsxs("span",{children:["Last checked: ",E]}):m.jsx("span",{style:{color:"#a5b4fc"},children:"Status: Unknown (click Refresh to check)"})})]}),m.jsx(u4,{title:"Migrate Data to Map Structure",description:"Converts categories, accounts, and account groups from array format to map structure. This improves performance and enables direct lookup by ID.",isComplete:f?!I:!1,isMigrating:i,needsMigration:f?I:!1,totalBudgetsToMigrate:B,budgetsToMigrateCategories:p.budgetsToMigrateCategories,budgetsToMigrateAccounts:p.budgetsToMigrateAccounts,onRunMigration:w,onRefresh:q,isRefreshing:b,disabled:!e,isUnknown:!f,children:l&&m.jsx(c4,{results:l})}),m.jsx("div",{style:{background:"color-mix(in srgb, currentColor 3%, transparent)",padding:"1rem",borderRadius:"8px",fontSize:"0.85rem"},children:m.jsxs("p",{style:{margin:0,opacity:.7},children:[m.jsx("strong",{children:"Note:"})," This migration will process ",m.jsxs("strong",{children:["all ",f?p.totalBudgetsChecked:"?"," budgets"]})," in the system, not just the ones you own or are invited to."]})})]})}function f4(){const[t,e]=M.useState(null),[n,i]=M.useState(null),[a,l]=M.useState(null),[c,f]=M.useState(!1),[d,p]=M.useState(""),[_,b]=M.useState("bug"),[E,A]=M.useState(null),[w,D]=M.useState(null),I=M.useContext(Hu),q=Va().get_current_firebase_user(),z=Sj(),$=Ow(),W=z.data?.items||[];async function oe(Q){if(Q.preventDefault(),!(!d.trim()||!I.username||!q)){e(null);try{await $.submitFeedback.mutateAsync({userId:q.uid,userEmail:I.username,text:d.trim(),feedbackType:_,currentPath:"/admin/feedback"}),p(""),b("bug"),f(!1)}catch(le){e(le instanceof Error?le.message:"Failed to add feedback")}}}function N(Q){Q.is_done?T(Q):A(Q)}async function T(Q){try{await $.toggleFeedback.mutateAsync({item:Q})}catch(le){e(le instanceof Error?le.message:"Failed to update feedback")}}function C(){E&&(T(E),A(null))}async function j(Q){if(w){try{const de=W.filter(V=>V.doc_id===w.doc_id).map(V=>V.id===w.id?{id:V.id,text:V.text,created_at:V.created_at,is_done:V.is_done,completed_at:V.completed_at,sort_order:V.sort_order,feedback_type:Q}:{id:V.id,text:V.text,created_at:V.created_at,is_done:V.is_done,completed_at:V.completed_at,sort_order:V.sort_order,feedback_type:V.feedback_type});await $.updateSortOrder.mutateAsync({docId:w.doc_id,items:de})}catch(le){e(le instanceof Error?le.message:"Failed to update feedback type")}D(null)}}const R=W.filter(Q=>!Q.is_done).sort((Q,le)=>Q.sort_order-le.sort_order),L=W.filter(Q=>Q.is_done).sort((Q,le)=>{const de=Q.completed_at?new Date(Q.completed_at).getTime():0;return(le.completed_at?new Date(le.completed_at).getTime():0)-de});function k(Q,le){i(le),Q.dataTransfer.effectAllowed="move"}function X(Q,le){Q.preventDefault(),le!==n&&l(le)}function F(){l(null)}function U(){i(null),l(null)}async function H(Q,le){if(Q.preventDefault(),!n||n===le){U();return}const de=R.findIndex(ce=>ce.id===n),V=[...R],[J]=V.splice(de,1);if(le==="__end__")V.push(J);else{const ce=V.findIndex(Ee=>Ee.id===le);V.splice(ce,0,J)}const ye=V.map((ce,Ee)=>({...ce,sort_order:Ee}));U();const ie=new Map;for(const ce of ye)ie.has(ce.doc_id)||ie.set(ce.doc_id,[]),ie.get(ce.doc_id).push({id:ce.id,text:ce.text,created_at:ce.created_at,is_done:ce.is_done,completed_at:ce.completed_at,sort_order:ce.sort_order,feedback_type:ce.feedback_type});for(const ce of L)ie.has(ce.doc_id)||ie.set(ce.doc_id,[]),ie.get(ce.doc_id).push({id:ce.id,text:ce.text,created_at:ce.created_at,is_done:ce.is_done,completed_at:ce.completed_at,sort_order:ce.sort_order,feedback_type:ce.feedback_type});try{for(const[ce,Ee]of ie)await $.updateSortOrder.mutateAsync({docId:ce,items:Ee})}catch(ce){e(ce instanceof Error?ce.message:"Failed to save order")}}return z.isLoading?m.jsx("p",{children:"Loading feedback..."}):m.jsxs("div",{children:[m.jsx("h2",{style:{marginTop:0},children:"Feedback"}),m.jsx("p",{style:{...sf,fontSize:"0.9rem"},children:"View and manage user feedback. Drag to reorder pending items."}),t&&m.jsx(ml,{message:t,onDismiss:()=>e(null)}),m.jsxs("div",{style:zs,children:[R.length===0&&!c&&m.jsx("p",{style:{opacity:.7},children:"No pending feedback."}),R.map(Q=>m.jsx(o4,{item:Q,isDragging:n===Q.id,isDragOver:a===Q.id,onDragStart:le=>k(le,Q.id),onDragOver:le=>X(le,Q.id),onDragLeave:F,onDragEnd:U,onDrop:le=>H(le,Q.id),onToggleDone:()=>N(Q),onTypeClick:()=>D(Q)},Q.id)),n&&R.length>0&&m.jsx(xy,{isActive:a==="__end__",onDragOver:Q=>X(Q,"__end__"),onDragLeave:F,onDrop:Q=>H(Q,"__end__")})]}),c?m.jsxs(La,{onSubmit:oe,children:[m.jsx(iS,{selectedType:_,onSelect:b}),m.jsx(Ey,{value:d,onChange:Q=>p(Q.target.value),placeholder:"Enter your feedback, bug report, or feature request...",autoFocus:!0,required:!0}),m.jsxs(Qs,{children:[m.jsx(Ne,{type:"submit",isLoading:$.submitFeedback.isPending,disabled:!d.trim(),children:"Add Feedback"}),m.jsx(Ne,{type:"button",variant:"secondary",onClick:()=>{f(!1),p(""),b("bug")},children:"Cancel"})]})]}):m.jsx(Ne,{variant:"primary-large",onClick:()=>f(!0),children:"+ Add Feedback"}),L.length>0&&m.jsx(IN,{title:"Completed",count:L.length,children:m.jsx("div",{style:{...zs,marginTop:"0.5rem"},children:L.map(Q=>m.jsx(l4,{item:Q,onToggleDone:()=>N(Q),onTypeClick:()=>D(Q)},Q.id))})}),m.jsxs(Rh,{isOpen:E!==null,onClose:()=>A(null),title:"Mark as Complete",children:[m.jsx("p",{style:{margin:"0 0 1.5rem 0"},children:"Are you sure you want to mark this feedback item as complete?"}),E&&m.jsxs("p",{style:{margin:"0 0 1.5rem 0",padding:"0.75rem",background:"rgba(255,255,255,0.05)",borderRadius:"0.5rem",fontSize:"0.9rem"},children:['"',E.text,'"']}),m.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[m.jsx(Ne,{variant:"secondary",onClick:()=>A(null),children:"Cancel"}),m.jsx(Ne,{variant:"primary",onClick:C,children:"Mark Complete"})]})]}),m.jsxs(Rh,{isOpen:w!==null,onClose:()=>D(null),title:"Change Feedback Type",children:[m.jsx("p",{style:{margin:"0 0 1rem 0",fontSize:"0.9rem",opacity:.8},children:"Select a new type for this feedback:"}),m.jsx(iS,{selectedType:w?.feedback_type||"bug",onSelect:j}),m.jsx(Ne,{variant:"secondary",onClick:()=>D(null),style:{width:"100%"},children:"Cancel"})]})]})}function iS({selectedType:t,onSelect:e}){return m.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem",paddingBottom:"1rem",flexWrap:"wrap"},children:["critical_bug","bug","new_feature","core_feature","qol"].map(n=>{const i=dg[n],a=t==="feature"?"new_feature":t,l=a===n||!a&&n==="bug";return m.jsxs("button",{type:"button",onClick:()=>e(n),style:{flex:1,padding:"0.6rem 0.75rem",border:`2px solid ${i.color}`,borderRadius:"0.5rem",background:l?i.bgColor:"transparent",color:l?i.color:"rgba(255,255,255,0.5)",cursor:"pointer",fontWeight:l?600:400,fontSize:"0.85rem",transition:"all 0.15s ease",opacity:l?1:.5,boxShadow:l?`0 0 12px ${i.bgColor}`:"none",position:"relative"},children:[i.label,l&&m.jsx("span",{style:{position:"absolute",bottom:"-14px",left:"10%",right:"10%",height:"3px",background:"white",borderRadius:"2px"}})]},n)})})}function m4(){const{currentUserId:t}=Cn(),[e,n]=M.useState([]),[i,a]=M.useState(!1);function l(E,A){n(w=>w.map(D=>D.name===E?{...D,...A}:D))}async function c(){a(!0),n([]),n([{name:"Read unauthorized budget",status:"pending",message:"",expectedToFail:!0},{name:"Read another user's document",status:"pending",message:"",expectedToFail:!0},{name:"Read unauthorized budget month",status:"pending",message:"",expectedToFail:!0},{name:"Toggle is_admin in own permission_flags",status:"pending",message:"",expectedToFail:!0},{name:"Toggle is_test in own permission_flags",status:"pending",message:"",expectedToFail:!0},{name:"Read own user document",status:"pending",message:"",expectedToFail:!1}]),await f("Read unauthorized budget",async()=>(await Ge("budgets","unauthorized_budget_test_12345"),"Was able to read budget (unexpected)"),!0),await f("Read another user's document",async()=>(await Ge("users","another_user_test_12345"),"Was able to read user document (unexpected)"),!0),await f("Read unauthorized budget month",async()=>(await Ge("months","unauthorized_budget_test_12345_2024_01"),"Was able to read month document for unauthorized budget (unexpected)"),!0),await f("Toggle is_admin in own permission_flags",async()=>{if(!t)throw new Error("Not authenticated");const{data:A}=await Ge("users",t),w=A?.permission_flags?.is_admin??!1;return await Bd("users",t,{"permission_flags.is_admin":!w}),`Was able to change is_admin from ${w} to ${!w} (SECURITY ISSUE!)`},!0),await f("Toggle is_test in own permission_flags",async()=>{if(!t)throw new Error("Not authenticated");const{data:A}=await Ge("users",t),w=A?.permission_flags?.is_test??!1;return await Bd("users",t,{"permission_flags.is_test":!w}),`Was able to change is_test from ${w} to ${!w} (SECURITY ISSUE!)`},!0),await f("Read own user document",async()=>{if(!t)throw new Error("Not authenticated");const{exists:A}=await Ge("users",t);if(A)return"Successfully read own document";throw new Error("Document does not exist")},!1),a(!1)}async function f(E,A,w){l(E,{status:"running",message:"Running..."});try{const D=await A();w?l(E,{status:"failed",message:` ${D}`}):l(E,{status:"passed",message:` ${D}`})}catch(D){const I=D instanceof Error?D.message:"Unknown error";w?l(E,{status:"passed",message:` Blocked as expected: ${I}`}):l(E,{status:"failed",message:` ${I}`})}}async function d(E){switch(e.find(w=>w.name===E)||n(w=>[...w,{name:E,status:"pending",message:"",expectedToFail:!0}]),a(!0),E){case"Read unauthorized budget":await f(E,async()=>(await Ge("budgets","unauthorized_budget_test_12345"),"Was able to read budget (unexpected)"),!0);break;case"Read another user's document":await f(E,async()=>(await Ge("users","another_user_test_12345"),"Was able to read user document (unexpected)"),!0);break;case"Read unauthorized budget month":await f(E,async()=>(await Ge("months","unauthorized_budget_test_12345_2024_01"),"Was able to read month document for unauthorized budget (unexpected)"),!0);break;case"Toggle is_admin in own permission_flags":await f(E,async()=>{if(!t)throw new Error("Not authenticated");const{data:w}=await Ge("users",t),D=w?.permission_flags?.is_admin??!1;return await Bd("users",t,{"permission_flags.is_admin":!D}),`Was able to change is_admin from ${D} to ${!D} (SECURITY ISSUE!)`},!0);break;case"Toggle is_test in own permission_flags":await f(E,async()=>{if(!t)throw new Error("Not authenticated");const{data:w}=await Ge("users",t),D=w?.permission_flags?.is_test??!1;return await Bd("users",t,{"permission_flags.is_test":!D}),`Was able to change is_test from ${D} to ${!D} (SECURITY ISSUE!)`},!0);break;case"Read own user document":await f(E,async()=>{if(!t)throw new Error("Not authenticated");const{exists:w}=await Ge("users",t);if(w)return"Successfully read own document";throw new Error("Document does not exist")},!1);break}a(!1)}const p=e.filter(E=>E.status==="passed").length,_=e.filter(E=>E.status==="failed").length,b=e.length;return m.jsxs("div",{children:[m.jsx("p",{style:sf,children:'Run security tests to verify Firestore rules are working correctly. Tests that are expected to fail (blocked by security rules) should show as "passed".'}),m.jsx("div",{style:{marginBottom:"1.5rem"},children:m.jsx(Ne,{onClick:c,disabled:i,variant:"primary",children:i?"Running Tests...":"Run All Tests"})}),e.length>0&&m.jsx("div",{style:{marginBottom:"1.5rem"},children:m.jsxs("div",{style:{display:"flex",gap:"1rem",padding:"0.75rem 1rem",borderRadius:"8px",background:"color-mix(in srgb, currentColor 5%, transparent)",marginBottom:"1rem"},children:[m.jsxs("span",{children:["Total: ",m.jsx("strong",{children:b})]}),m.jsxs("span",{style:{color:be.success},children:["Passed: ",m.jsx("strong",{children:p})]}),m.jsxs("span",{style:{color:be.danger},children:["Failed: ",m.jsx("strong",{children:_})]})]})}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[m.jsx("h3",{style:{margin:"0.5rem 0"},children:"Individual Tests"}),m.jsx(Io,{name:"Read unauthorized budget",description:"Try to read a budget the user doesn't have access to",expectedBehavior:"Should be blocked by Firestore rules",result:e.find(E=>E.name==="Read unauthorized budget"),onRun:()=>d("Read unauthorized budget"),disabled:i}),m.jsx(Io,{name:"Read another user's document",description:"Try to read another user's profile document",expectedBehavior:"Should be blocked by Firestore rules",result:e.find(E=>E.name==="Read another user's document"),onRun:()=>d("Read another user's document"),disabled:i}),m.jsx(Io,{name:"Read unauthorized budget month",description:"Try to read a month document for a budget you don't have access to",expectedBehavior:"Should be blocked - months inherit budget access",result:e.find(E=>E.name==="Read unauthorized budget month"),onRun:()=>d("Read unauthorized budget month"),disabled:i}),m.jsx(Io,{name:"Toggle is_admin in own permission_flags",description:"Try to change your admin privileges (toggles current value)",expectedBehavior:"Should be blocked - permission_flags is protected",result:e.find(E=>E.name==="Toggle is_admin in own permission_flags"),onRun:()=>d("Toggle is_admin in own permission_flags"),disabled:i}),m.jsx(Io,{name:"Toggle is_test in own permission_flags",description:"Try to change your test privileges (toggles current value)",expectedBehavior:"Should be blocked - permission_flags is protected",result:e.find(E=>E.name==="Toggle is_test in own permission_flags"),onRun:()=>d("Toggle is_test in own permission_flags"),disabled:i}),m.jsx(Io,{name:"Read own user document",description:"Read your own user profile document",expectedBehavior:"Should succeed - users can read their own data",result:e.find(E=>E.name==="Read own user document"),onRun:()=>d("Read own user document"),disabled:i,expectedToSucceed:!0})]}),_>0&&m.jsxs(ml,{style:{marginTop:"1.5rem"},children:[" ",_," test(s) failed! This may indicate a security vulnerability in your Firestore rules."]})]})}function Io({name:t,description:e,expectedBehavior:n,result:i,onRun:a,disabled:l,expectedToSucceed:c}){const f=i?.status==="passed"?be.success:i?.status==="failed"?be.danger:i?.status==="running"?be.warning:"inherit";return m.jsxs("div",{style:{...rc,display:"flex",flexDirection:"column",gap:"0.5rem"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem"},children:[m.jsxs("div",{style:{flex:1},children:[m.jsx("h4",{style:{margin:0,fontSize:"0.95rem"},children:t}),m.jsx("p",{style:{margin:"0.25rem 0 0",opacity:.7,fontSize:"0.85rem"},children:e}),m.jsxs("p",{style:{margin:"0.25rem 0 0",fontSize:"0.8rem",color:c?be.success:be.warning},children:["Expected: ",n]})]}),m.jsx(Ne,{onClick:a,disabled:l,variant:"secondary",style:{flexShrink:0},children:i?.status==="running"?"":"Run"})]}),i&&i.status!=="pending"&&m.jsx("div",{style:{padding:"0.5rem 0.75rem",borderRadius:"6px",background:`color-mix(in srgb, ${f} 15%, transparent)`,border:`1px solid color-mix(in srgb, ${f} 30%, transparent)`,fontSize:"0.85rem",color:f},children:i.message})]})}function p4(){const{selectedBudgetId:t,currentUserId:e,accessibleBudgets:n,loadAccessibleBudgets:i,switchToBudget:a,checkBudgetInvite:l,isInitialized:c}=Cn(),{budget:f,renameBudget:d,acceptInvite:p,isLoading:_}=Yn(t,e),[b,E]=M.useState(null),[A,w]=M.useState(null),[D,I]=M.useState(null),[B,q]=M.useState(null),[z,$]=M.useState(null),[W,oe]=M.useState(""),[N,T]=M.useState(!1),[C,j]=M.useState(""),[R,L]=M.useState(!1),[k,X]=M.useState(null);async function F(ie){if(ie!==f?.id){E(ie),I(null),q(null);try{await a(ie),q("Switched to budget successfully!"),await i()}catch(ce){I(ce instanceof Error?ce.message:"Failed to switch budget")}finally{E(null)}}}async function U(ie){w(ie),I(null),q(null);try{await p(ie),q("Invitation accepted! You now have access to this budget."),await i()}catch(ce){I(ce instanceof Error?ce.message:"Failed to accept invitation")}finally{w(null)}}async function H(ie){if(ie.preventDefault(),!!C.trim()){L(!0),I(null),X(null);try{const ce=await l(C.trim());ce?X(ce):I("No pending invitation found for this budget ID. Make sure you've been invited by the budget owner.")}catch(ce){I(ce instanceof Error?ce.message:"Failed to check invitation")}finally{L(!1)}}}async function Q(){if(k){w(k.budgetId),I(null);try{await p(k.budgetId),q(`Successfully joined "${k.budgetName}"!`),X(null),j(""),await i()}catch(ie){I(ie instanceof Error?ie.message:"Failed to accept invitation")}finally{w(null)}}}function le(ie,ce){oe(ce),$(ie)}function de(){$(null),oe("")}async function V(ie){if(ie.preventDefault(),!(!W.trim()||!z)){T(!0),I(null),q(null);try{await d(W.trim()),q("Budget renamed successfully!"),$(null),await i()}catch(ce){I(ce instanceof Error?ce.message:"Failed to rename budget")}finally{T(!1)}}}const J=n.filter(ie=>!ie.isPending),ye=n.filter(ie=>ie.isPending);return _||!c?m.jsx("p",{children:"Loading your budgets..."}):m.jsxs("div",{children:[m.jsx("h2",{style:{marginTop:0},children:"My Budgets"}),m.jsx("p",{style:{opacity:.7,marginBottom:"1.5rem"},children:"Manage your budgets, switch between them, and accept new invitations."}),D&&m.jsxs("div",{style:{background:"rgba(220, 38, 38, 0.1)",border:"1px solid rgba(220, 38, 38, 0.3)",color:"#f87171",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsx("span",{children:D}),m.jsx("button",{onClick:()=>I(null),style:{background:"transparent",border:"none",color:"#f87171",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.25rem",lineHeight:1},children:""})]}),B&&m.jsxs("div",{style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#4ade80",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsx("span",{children:B}),m.jsx("button",{onClick:()=>q(null),style:{background:"transparent",border:"none",color:"#4ade80",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.25rem",lineHeight:1},children:""})]}),ye.length>0&&m.jsxs("div",{style:{background:"color-mix(in srgb, #f59e0b 10%, transparent)",border:"1px solid color-mix(in srgb, #f59e0b 30%, transparent)",padding:"1.25rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[m.jsxs("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[m.jsx("span",{children:""})," Pending Invitations (",ye.length,")"]}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:ye.map(ie=>m.jsx(rS,{budget:ie,isCurrent:!1,isAccepting:A===ie.id,isSwitching:!1,isEditing:!1,editName:"",isRenaming:!1,onAccept:()=>U(ie.id),onSwitch:()=>{},onStartEdit:()=>{},onCancelEdit:()=>{},onEditNameChange:()=>{},onSaveEdit:()=>{}},ie.id))})]}),m.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.25rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[m.jsxs("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[m.jsx("span",{children:""})," Your Budgets (",J.length,")"]}),J.length===0?m.jsx("p",{style:{opacity:.6,margin:0},children:"You don't have access to any budgets yet."}):m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:J.map(ie=>{const ce=ie.id===f?.id,Ee=z===ie.id;return m.jsx(rS,{budget:ie,isCurrent:ce,isAccepting:!1,isSwitching:b===ie.id,isEditing:Ee,editName:Ee?W:"",isRenaming:N,onAccept:()=>{},onSwitch:()=>F(ie.id),onStartEdit:()=>le(ie.id,ie.name),onCancelEdit:de,onEditNameChange:oe,onSaveEdit:V},ie.id)})})]}),m.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 5%, transparent)",padding:"1.25rem",borderRadius:"8px"},children:[m.jsxs("h3",{style:{margin:"0 0 0.75rem 0",fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[m.jsx("span",{children:""})," Join Budget by ID"]}),m.jsx("p",{style:{margin:"0 0 1rem 0",fontSize:"0.9rem",opacity:.7},children:"If someone shared a budget ID with you, enter it below to accept the invitation:"}),k?m.jsxs("div",{style:{background:"color-mix(in srgb, #22c55e 10%, transparent)",border:"1px solid color-mix(in srgb, #22c55e 30%, transparent)",padding:"1rem",borderRadius:"8px"},children:[m.jsx("p",{style:{margin:"0 0 0.75rem 0",fontWeight:500},children:" You've been invited to join:"}),m.jsxs("div",{style:{background:"color-mix(in srgb, currentColor 8%, transparent)",padding:"0.75rem 1rem",borderRadius:"6px",marginBottom:"1rem"},children:[m.jsx("p",{style:{margin:"0 0 0.25rem 0",fontWeight:600,fontSize:"1.1rem"},children:k.budgetName}),k.ownerEmail&&m.jsxs("p",{style:{margin:0,fontSize:"0.9rem",opacity:.7},children:["Owner: ",k.ownerEmail]})]}),m.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[m.jsx("button",{onClick:Q,disabled:A===k.budgetId,style:{background:"#22c55e",color:"white",border:"none",padding:"0.6rem 1.25rem",borderRadius:"6px",cursor:A===k.budgetId?"not-allowed":"pointer",fontWeight:500,opacity:A===k.budgetId?.7:1},children:A===k.budgetId?"Accepting...":"Accept Invitation"}),m.jsx("button",{onClick:()=>{X(null),j("")},disabled:A===k.budgetId,style:{background:"transparent",color:"inherit",border:"1px solid color-mix(in srgb, currentColor 30%, transparent)",padding:"0.6rem 1.25rem",borderRadius:"6px",cursor:A===k.budgetId?"not-allowed":"pointer",fontWeight:500,opacity:A===k.budgetId?.7:.8},children:"Cancel"})]})]}):m.jsxs("form",{onSubmit:H,style:{display:"flex",gap:"0.75rem"},children:[m.jsx("input",{type:"text",value:C,onChange:ie=>j(ie.target.value),placeholder:"Enter Budget ID",style:{flex:1,padding:"0.6rem 0.8rem",borderRadius:"6px",border:"1px solid color-mix(in srgb, currentColor 20%, transparent)",background:"color-mix(in srgb, currentColor 5%, transparent)",fontSize:"0.95rem",color:"inherit"}}),m.jsx("button",{type:"submit",disabled:R||!C.trim(),style:{background:"#646cff",color:"white",border:"none",padding:"0.6rem 1.25rem",borderRadius:"6px",cursor:R||!C.trim()?"not-allowed":"pointer",fontWeight:500,opacity:R||!C.trim()?.7:1,whiteSpace:"nowrap"},children:R?"Checking...":"Check Invite"})]})]}),e&&m.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"color-mix(in srgb, currentColor 3%, transparent)",borderRadius:"6px",fontSize:"0.85rem",opacity:.7},children:[m.jsx("p",{style:{margin:"0 0 0.5rem 0"},children:" Share your User ID with budget owners so they can invite you:"}),m.jsx("code",{style:{display:"block",padding:"0.5rem 0.75rem",background:"color-mix(in srgb, currentColor 8%, transparent)",borderRadius:"4px",fontSize:"0.8rem",wordBreak:"break-all"},children:e})]})]})}function g4({children:t}){const e=M.useContext(Hu),n=fr();return e.is_auth_checked?e.is_logged_in?t?m.jsx(m.Fragment,{children:t}):m.jsx(vg,{}):m.jsx(vS,{to:"/account",state:{from:n.pathname},replace:!0}):m.jsx("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:m.jsx("p",{children:"Loading..."})})}function y4(){const{selectedBudgetId:t,currentUserId:e,isInitialized:n}=Cn(),{isLoading:i,error:a}=Yn(t,e);return n?a?(console.error("[BudgetLayout] Error:",a),m.jsx("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:m.jsxs("p",{style:{color:"#ef4444"},children:["Error: ",a.message]})})):m.jsx("div",{style:{paddingBottom:"5rem"},children:m.jsx(vg,{})}):m.jsxs("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:[m.jsx("p",{children:"Loading budget..."}),i&&m.jsx("p",{style:{opacity:.6},children:"Fetching data from server..."})]})}const _4={is_logged_in:!1,is_auth_checked:!1,username:"",set_user_context:()=>{}};function v4(){const[t,e]=M.useState(_4),n=Va();return M.useEffect(function(){n.set_user_listener(i=>{e({is_logged_in:i!=null,is_auth_checked:!0,username:i?.email??"",set_user_context:e})})},[]),t.is_auth_checked?m.jsx(Hu.Provider,{value:t,children:m.jsx(HR,{children:m.jsx($k,{children:m.jsxs(NC,{children:[m.jsxs(dC,{children:[m.jsx(mn,{path:"/",element:m.jsx(Yk,{})}),m.jsx(mn,{path:"/account",element:m.jsx(Xk,{})}),m.jsx(mn,{path:"/sql-test",element:m.jsx(Wk,{})}),m.jsx(mn,{path:"/budget",element:m.jsx(g4,{}),children:m.jsxs(mn,{element:m.jsx(y4,{}),children:[m.jsx(mn,{index:!0,element:m.jsx(tS,{})}),m.jsx(mn,{path:":year/:month/:tab",element:m.jsx(tS,{})}),m.jsx(mn,{path:"analytics",element:m.jsx($N,{})}),m.jsxs(mn,{path:"admin",element:m.jsx(s4,{}),children:[m.jsx(mn,{path:"my-budgets",element:m.jsx(p4,{})}),m.jsx(mn,{path:"accounts",element:m.jsx(t4,{})}),m.jsx(mn,{path:"categories",element:m.jsx(i4,{})}),m.jsx(mn,{path:"users",element:m.jsx(a4,{})}),m.jsx(mn,{path:"migration",element:m.jsx(h4,{})}),m.jsx(mn,{path:"feedback",element:m.jsx(f4,{})}),m.jsx(mn,{path:"tests",element:m.jsx(m4,{})})]})]})})]}),m.jsx(DN,{})]})})})}):m.jsx("div",{style:{maxWidth:"60rem",margin:"0 auto",padding:"2rem"},children:m.jsx("p",{children:"Loading..."})})}dA.createRoot(document.getElementById("root")).render(m.jsx(M.StrictMode,{children:m.jsx(v4,{})}));
